function FastClick(n){"use strict";var i,t=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.layer=n,!n||!n.nodeType)throw new TypeError("Layer must be a document node");(this.onClick=function(){return FastClick.prototype.onClick.apply(t,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(t,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(t,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(t,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(t,arguments)},FastClick.notNeeded(n))||(this.deviceIsAndroid&&(n.addEventListener("mouseover",this.onMouse,!0),n.addEventListener("mousedown",this.onMouse,!0),n.addEventListener("mouseup",this.onMouse,!0)),n.addEventListener("click",this.onClick,!0),n.addEventListener("touchstart",this.onTouchStart,!1),n.addEventListener("touchend",this.onTouchEnd,!1),n.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(n.removeEventListener=function(t,i,r){var u=Node.prototype.removeEventListener;t==="click"?u.call(n,t,i.hijacked||i,r):u.call(n,t,i,r)},n.addEventListener=function(t,i,r){var u=Node.prototype.addEventListener;t==="click"?u.call(n,t,i.hijacked||(i.hijacked=function(n){n.propagationStopped||i(n)}),r):u.call(n,t,i,r)}),typeof n.onclick=="function"&&(i=n.onclick,n.addEventListener("click",function(n){i(n)},!1),n.onclick=null))}(function(n,t){function kt(n){var t=n.length,r=i.type(n);return i.isWindow(n)?!1:n.nodeType===1&&t?!0:r==="array"||r!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in n)}function ku(n){var t=dt[n]={};return i.each(n.match(h)||[],function(n,i){t[i]=!0}),t}function c(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=i.expando+Math.random()}function pi(n,i,r){var u;if(r===t&&n.nodeType===1)if(u="data-"+i.replace(yi,"-$1").toLowerCase(),r=n.getAttribute(u),typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:vi.test(r)?JSON.parse(r):r}catch(e){}f.set(n,i,r)}else r=t;return r}function ht(){return!0}function p(){return!1}function di(){try{return u.activeElement}catch(n){}}function nr(n,t){while((n=n[t])&&n.nodeType!==1);return n}function ni(n,t,r){if(i.isFunction(t))return i.grep(n,function(n,i){return!!t.call(n,i,n)!==r});if(t.nodeType)return i.grep(n,function(n){return n===t!==r});if(typeof t=="string"){if(uf.test(t))return i.filter(t,n,r);t=i.filter(t,n)}return i.grep(n,function(n){return et.call(t,n)>=0!==r})}function fr(n,t){return i.nodeName(n,"table")&&i.nodeName(t.nodeType===1?t:t.firstChild,"tr")?n.getElementsByTagName("tbody")[0]||n.appendChild(n.ownerDocument.createElement("tbody")):n}function af(n){return n.type=(n.getAttribute("type")!==null)+"/"+n.type,n}function vf(n){var t=cf.exec(n.type);return t?n.type=t[1]:n.removeAttribute("type"),n}function ti(n,t){for(var u=n.length,i=0;i<u;i++)r.set(n[i],"globalEval",!t||r.get(t[i],"globalEval"))}function er(n,t){var e,c,o,s,h,l,a,u;if(t.nodeType===1){if(r.hasData(n)&&(s=r.access(n),h=r.set(t,s),u=s.events,u)){delete h.handle,h.events={};for(o in u)for(e=0,c=u[o].length;e<c;e++)i.event.add(t,o,u[o][e])}f.hasData(n)&&(l=f.access(n),a=i.extend({},l),f.set(t,a))}}function o(n,r){var u=n.getElementsByTagName?n.getElementsByTagName(r||"*"):n.querySelectorAll?n.querySelectorAll(r||"*"):[];return r===t||r&&i.nodeName(n,r)?i.merge([n],u):u}function yf(n,t){var i=t.nodeName.toLowerCase();i==="input"&&rr.test(n.type)?t.checked=n.checked:(i==="input"||i==="textarea")&&(t.defaultValue=n.defaultValue)}function lr(n,t){if(t in n)return t;for(var r=t.charAt(0).toUpperCase()+t.slice(1),u=t,i=cr.length;i--;)if(t=cr[i]+r,t in n)return t;return u}function d(n,t){return n=t||n,i.css(n,"display")==="none"||!i.contains(n.ownerDocument,n)}function ct(t){return n.getComputedStyle(t,null)}function ar(n,t){for(var e,u,s,o=[],f=0,h=n.length;f<h;f++)(u=n[f],u.style)&&(o[f]=r.get(u,"olddisplay"),e=u.style.display,t?(o[f]||e!=="none"||(u.style.display=""),u.style.display===""&&d(u)&&(o[f]=r.access(u,"olddisplay",df(u.nodeName)))):o[f]||(s=d(u),(e&&e!=="none"||!s)&&r.set(u,"olddisplay",s?e:i.css(u,"display"))));for(f=0;f<h;f++)(u=n[f],u.style)&&(t&&u.style.display!=="none"&&u.style.display!==""||(u.style.display=t?o[f]||"":"none"));return n}function vr(n,t,i){var r=wf.exec(t);return r?Math.max(0,r[1]-(i||0))+(r[2]||"px"):t}function yr(n,t,r,u,f){for(var e=r===(u?"border":"content")?4:t==="width"?1:0,o=0;e<4;e+=2)r==="margin"&&(o+=i.css(n,r+v[e],!0,f)),u?(r==="content"&&(o-=i.css(n,"padding"+v[e],!0,f)),r!=="margin"&&(o-=i.css(n,"border"+v[e]+"Width",!0,f))):(o+=i.css(n,"padding"+v[e],!0,f),r!=="padding"&&(o+=i.css(n,"border"+v[e]+"Width",!0,f)));return o}function pr(n,t,r){var e=!0,u=t==="width"?n.offsetWidth:n.offsetHeight,f=ct(n),o=i.support.boxSizing&&i.css(n,"boxSizing",!1,f)==="border-box";if(u<=0||u==null){if(u=w(n,t,f),(u<0||u==null)&&(u=n.style[t]),ii.test(u))return u;e=o&&(i.support.boxSizingReliable||u===n.style[t]),u=parseFloat(u)||0}return u+yr(n,t,r||(o?"border":"content"),e,f)+"px"}function df(n){var r=u,t=sr[n];return t||(t=wr(n,r),t!=="none"&&t||(k=(k||i("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(r.documentElement),r=(k[0].contentWindow||k[0].contentDocument).document,r.write("<!doctype html><html><body>"),r.close(),t=wr(n,r),k.detach()),sr[n]=t),t}function wr(n,t){var r=i(t.createElement(n)).appendTo(t.body),u=i.css(r[0],"display");return r.remove(),u}function ri(n,t,r,u){var f;if(i.isArray(t))i.each(t,function(t,i){r||ne.test(n)?u(n,i):ri(n+"["+(typeof i=="object"?t:"")+"]",i,r,u)});else if(r||i.type(t)!=="object")u(n,t);else for(f in t)ri(n+"["+f+"]",t[f],r,u)}function iu(n){return function(t,r){typeof t!="string"&&(r=t,t="*");var u,f=0,e=t.toLowerCase().match(h)||[];if(i.isFunction(r))while(u=e[f++])u[0]==="+"?(u=u.slice(1)||"*",(n[u]=n[u]||[]).unshift(r)):(n[u]=n[u]||[]).push(r)}}function ru(n,t,r,u){function e(s){var h;return f[s]=!0,i.each(n[s]||[],function(n,i){var s=i(t,r,u);if(typeof s!="string"||o||f[s]){if(o)return!(h=s)}else return t.dataTypes.unshift(s),e(s),!1}),h}var f={},o=n===ei;return e(t.dataTypes[0])||!f["*"]&&e("*")}function oi(n,r){var u,f,e=i.ajaxSettings.flatOptions||{};for(u in r)r[u]!==t&&((e[u]?n:f||(f={}))[u]=r[u]);return f&&i.extend(!0,n,f),n}function oe(n,i,r){for(var o,f,e,s,h=n.contents,u=n.dataTypes;u[0]==="*";)u.shift(),o===t&&(o=n.mimeType||i.getResponseHeader("Content-Type"));if(o)for(f in h)if(h[f]&&h[f].test(o)){u.unshift(f);break}if(u[0]in r)e=u[0];else{for(f in r){if(!u[0]||n.converters[f+" "+u[0]]){e=f;break}s||(s=f)}e=e||s}if(e)return e!==u[0]&&u.unshift(e),r[e]}function se(n,t,i,r){var h,u,f,s,e,o={},c=n.dataTypes.slice();if(c[1])for(f in n.converters)o[f.toLowerCase()]=n.converters[f];for(u=c.shift();u;)if(n.responseFields[u]&&(i[n.responseFields[u]]=t),!e&&r&&n.dataFilter&&(t=n.dataFilter(t,n.dataType)),e=u,u=c.shift(),u)if(u==="*")u=e;else if(e!=="*"&&e!==u){if(f=o[e+" "+u]||o["* "+u],!f)for(h in o)if(s=h.split(" "),s[1]===u&&(f=o[e+" "+s[0]]||o["* "+s[0]],f)){f===!0?f=o[h]:o[h]!==!0&&(u=s[0],c.unshift(s[1]));break}if(f!==!0)if(f&&n.throws)t=f(t);else try{t=f(t)}catch(l){return{state:"parsererror",error:f?l:"No conversion from "+e+" to "+u}}}return{state:"success",data:t}}function fu(){return setTimeout(function(){b=t}),b=i.now()}function eu(n,t,i){for(var u,f=(tt[t]||[]).concat(tt["*"]),r=0,e=f.length;r<e;r++)if(u=f[r].call(i,t,n))return u}function ou(n,t,r){var e,o,s=0,l=vt.length,f=i.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var s=b||fu(),t=Math.max(0,u.startTime+u.duration-s),h=t/u.duration||0,i=1-h,r=0,e=u.tweens.length;r<e;r++)u.tweens[r].run(i);return f.notifyWith(n,[u,i,t]),i<1&&e?t:(f.resolveWith(n,[u]),!1)},u=f.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:b||fu(),duration:r.duration,tweens:[],createTween:function(t,r){var f=i.Tween(n,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(f),f},stop:function(t){var i=0,r=t?u.tweens.length:0;if(o)return this;for(o=!0;i<r;i++)u.tweens[i].run(1);return t?f.resolveWith(n,[u,t]):f.rejectWith(n,[u,t]),this}}),h=u.props;for(ve(h,u.opts.specialEasing);s<l;s++)if(e=vt[s].call(u,n,h,u.opts),e)return e;return i.map(h,eu,u),i.isFunction(u.opts.start)&&u.opts.start.call(n,u),i.fx.timer(i.extend(c,{elem:n,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function ve(n,t){var r,f,e,u,o;for(r in n)if(f=i.camelCase(r),e=t[f],u=n[r],i.isArray(u)&&(e=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),o=i.cssHooks[f],o&&"expand"in o){u=o.expand(u),delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=e)}else t[f]=e}function ye(n,u,f){var e,a,p,v,s,w,l=this,y={},h=n.style,c=n.nodeType&&d(n),o=r.get(n,"fxshow");f.queue||(s=i._queueHooks(n,"fx"),s.unqueued==null&&(s.unqueued=0,w=s.empty.fire,s.empty.fire=function(){s.unqueued||w()}),s.unqueued++,l.always(function(){l.always(function(){s.unqueued--,i.queue(n,"fx").length||s.empty.fire()})})),n.nodeType===1&&("height"in u||"width"in u)&&(f.overflow=[h.overflow,h.overflowX,h.overflowY],i.css(n,"display")==="inline"&&i.css(n,"float")==="none"&&(h.display="inline-block")),f.overflow&&(h.overflow="hidden",l.always(function(){h.overflow=f.overflow[0],h.overflowX=f.overflow[1],h.overflowY=f.overflow[2]}));for(e in u)if(a=u[e],le.exec(a)){if(delete u[e],p=p||a==="toggle",a===(c?"hide":"show"))if(a==="show"&&o&&o[e]!==t)c=!0;else continue;y[e]=o&&o[e]||i.style(n,e)}if(!i.isEmptyObject(y)){o?"hidden"in o&&(c=o.hidden):o=r.access(n,"fxshow",{}),p&&(o.hidden=!c),c?i(n).show():l.done(function(){i(n).hide()}),l.done(function(){var t;r.remove(n,"fxshow");for(t in y)i.style(n,t,y[t])});for(e in y)v=eu(c?o[e]:0,e,l),e in o||(o[e]=v.start,c&&(v.end=v.start,v.start=e==="width"||e==="height"?1:0))}}function e(n,t,i,r,u){return new e.prototype.init(n,t,i,r,u)}function yt(n,t){var r,i={height:n},u=0;for(t=t?1:0;u<4;u+=2-t)r=v[u],i["margin"+r]=i["padding"+r]=n;return t&&(i.opacity=i.width=n),i}function su(n){return i.isWindow(n)?n:n.nodeType===9&&n.defaultView}var hi,it,rt=typeof t,hu=n.location,u=n.document,ci=u.documentElement,cu=n.jQuery,lu=n.$,ut={},ft=[],pt="2.0.2",li=ft.concat,wt=ft.push,a=ft.slice,et=ft.indexOf,au=ut.toString,bt=ut.hasOwnProperty,vu=pt.trim,i=function(n,t){return new i.fn.init(n,t,hi)},ot=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,h=/\S+/g,yu=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ai=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pu=/^-ms-/,wu=/-([\da-z])/gi,bu=function(n,t){return t.toUpperCase()},st=function(){u.removeEventListener("DOMContentLoaded",st,!1),n.removeEventListener("load",st,!1),i.ready()},dt,f,r,vi,yi,si,lt;i.fn=i.prototype={jquery:pt,constructor:i,init:function(n,r,f){var e,o;if(!n)return this;if(typeof n=="string"){if(e=n.charAt(0)==="<"&&n.charAt(n.length-1)===">"&&n.length>=3?[null,n,null]:yu.exec(n),e&&(e[1]||!r)){if(e[1]){if(r=r instanceof i?r[0]:r,i.merge(this,i.parseHTML(e[1],r&&r.nodeType?r.ownerDocument||r:u,!0)),ai.test(e[1])&&i.isPlainObject(r))for(e in r)i.isFunction(this[e])?this[e](r[e]):this.attr(e,r[e]);return this}return o=u.getElementById(e[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=u,this.selector=n,this}return!r||r.jquery?(r||f).find(n):this.constructor(r).find(n)}return n.nodeType?(this.context=this[0]=n,this.length=1,this):i.isFunction(n)?f.ready(n):(n.selector!==t&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))},selector:"",length:0,toArray:function(){return a.call(this)},get:function(n){return n==null?this.toArray():n<0?this[this.length+n]:this[n]},pushStack:function(n){var t=i.merge(this.constructor(),n);return t.prevObject=this,t.context=this.context,t},each:function(n,t){return i.each(this,n,t)},ready:function(n){return i.ready.promise().done(n),this},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var i=this.length,t=+n+(n<0?i:0);return this.pushStack(t>=0&&t<i?[this[t]]:[])},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:wt,sort:[].sort,splice:[].splice},i.fn.init.prototype=i.fn,i.extend=i.fn.extend=function(){var o,e,u,r,s,h,n=arguments[0]||{},f=1,l=arguments.length,c=!1;for(typeof n=="boolean"&&(c=n,n=arguments[1]||{},f=2),typeof n=="object"||i.isFunction(n)||(n={}),l===f&&(n=this,--f);f<l;f++)if((o=arguments[f])!=null)for(e in o)(u=n[e],r=o[e],n!==r)&&(c&&r&&(i.isPlainObject(r)||(s=i.isArray(r)))?(s?(s=!1,h=u&&i.isArray(u)?u:[]):h=u&&i.isPlainObject(u)?u:{},n[e]=i.extend(c,h,r)):r!==t&&(n[e]=r));return n},i.extend({expando:"jQuery"+(pt+Math.random()).replace(/\D/g,""),noConflict:function(t){return n.$===i&&(n.$=lu),t&&n.jQuery===i&&(n.jQuery=cu),i},isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){(n===!0?--i.readyWait:i.isReady)||(i.isReady=!0,n!==!0&&--i.readyWait>0)||(it.resolveWith(u,[i]),i.fn.trigger&&i(u).trigger("ready").off("ready"))},isFunction:function(n){return i.type(n)==="function"},isArray:Array.isArray,isWindow:function(n){return n!=null&&n===n.window},isNumeric:function(n){return!isNaN(parseFloat(n))&&isFinite(n)},type:function(n){return n==null?String(n):typeof n=="object"||typeof n=="function"?ut[au.call(n)]||"object":typeof n},isPlainObject:function(n){if(i.type(n)!=="object"||n.nodeType||i.isWindow(n))return!1;try{if(n.constructor&&!bt.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(n){var t;for(t in n)return!1;return!0},error:function(n){throw new Error(n);},parseHTML:function(n,t,r){if(!n||typeof n!="string")return null;typeof t=="boolean"&&(r=t,t=!1),t=t||u;var f=ai.exec(n),e=!r&&[];return f?[t.createElement(f[1])]:(f=i.buildFragment([n],t,e),e&&i(e).remove(),i.merge([],f.childNodes))},parseJSON:JSON.parse,parseXML:function(n){var r,u;if(!n||typeof n!="string")return null;try{u=new DOMParser,r=u.parseFromString(n,"text/xml")}catch(f){r=t}return(!r||r.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(n){var t,r=eval;n=i.trim(n),n&&(n.indexOf("use strict")===1?(t=u.createElement("script"),t.text=n,u.head.appendChild(t).parentNode.removeChild(t)):r(n))},camelCase:function(n){return n.replace(pu,"ms-").replace(wu,bu)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},each:function(n,t,i){var u,r=0,f=n.length,e=kt(n);if(i){if(e){for(;r<f;r++)if(u=t.apply(n[r],i),u===!1)break}else for(r in n)if(u=t.apply(n[r],i),u===!1)break}else if(e){for(;r<f;r++)if(u=t.call(n[r],r,n[r]),u===!1)break}else for(r in n)if(u=t.call(n[r],r,n[r]),u===!1)break;return n},trim:function(n){return n==null?"":vu.call(n)},makeArray:function(n,t){var r=t||[];return n!=null&&(kt(Object(n))?i.merge(r,typeof n=="string"?[n]:n):wt.call(r,n)),r},inArray:function(n,t,i){return t==null?-1:et.call(t,n,i)},merge:function(n,i){var f=i.length,u=n.length,r=0;if(typeof f=="number")for(;r<f;r++)n[u++]=i[r];else while(i[r]!==t)n[u++]=i[r++];return n.length=u,n},grep:function(n,t,i){var u,f=[],r=0,e=n.length;for(i=!!i;r<e;r++)u=!!t(n[r],r),i!==u&&f.push(n[r]);return f},map:function(n,t,i){var u,r=0,e=n.length,o=kt(n),f=[];if(o)for(;r<e;r++)u=t(n[r],r,i),u!=null&&(f[f.length]=u);else for(r in n)u=t(n[r],r,i),u!=null&&(f[f.length]=u);return li.apply([],f)},guid:1,proxy:function(n,r){var f,e,u;return(typeof r=="string"&&(f=n[r],r=n,n=f),!i.isFunction(n))?t:(e=a.call(arguments,2),u=function(){return n.apply(r||this,e.concat(a.call(arguments)))},u.guid=n.guid=n.guid||i.guid++,u)},access:function(n,r,u,f,e,o,s){var h=0,l=n.length,c=u==null;if(i.type(u)==="object"){e=!0;for(h in u)i.access(n,r,h,u[h],!0,o,s)}else if(f!==t&&(e=!0,i.isFunction(f)||(s=!0),c&&(s?(r.call(n,f),r=null):(c=r,r=function(n,t,r){return c.call(i(n),r)})),r))for(;h<l;h++)r(n[h],u,s?f:f.call(n[h],h,r(n[h],u)));return e?n:c?r.call(n):l?r(n[0],u):o},now:Date.now,swap:function(n,t,i,r){var f,u,e={};for(u in t)e[u]=n.style[u],n.style[u]=t[u];f=i.apply(n,r||[]);for(u in t)n.style[u]=e[u];return f}}),i.ready.promise=function(t){return it||(it=i.Deferred(),u.readyState==="complete"?setTimeout(i.ready):(u.addEventListener("DOMContentLoaded",st,!1),n.addEventListener("load",st,!1))),it.promise(t)},i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(n,t){ut["[object "+t+"]"]=t.toLowerCase()}),hi=i(u),function(n,t){function u(n,t,i,r){var p,u,f,l,w,y,k,c,g,d;if((t?t.ownerDocument||t:v)!==s&&nt(t),t=t||s,i=i||[],!n||typeof n!="string")return i;if((l=t.nodeType)!==1&&l!==9)return[];if(a&&!r){if(p=sr.exec(n))if(f=p[1]){if(l===9)if(u=t.getElementById(f),u&&u.parentNode){if(u.id===f)return i.push(u),i}else return i;else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&et(t,u)&&u.id===f)return i.push(u),i}else{if(p[2])return b.apply(i,t.getElementsByTagName(n)),i;if((f=p[3])&&e.getElementsByClassName&&t.getElementsByClassName)return b.apply(i,t.getElementsByClassName(f)),i}if(e.qsa&&(!h||!h.test(n))){if(c=k=o,g=t,d=l===9&&n,l===1&&t.nodeName.toLowerCase()!=="object"){for(y=wt(n),(k=t.getAttribute("id"))?c=k.replace(lr,"\\$&"):t.setAttribute("id",c),c="[id='"+c+"'] ",w=y.length;w--;)y[w]=c+bt(y[w]);g=ti.test(n)&&t.parentNode||t,d=y.join(",")}if(d)try{return b.apply(i,g.querySelectorAll(d)),i}catch(tt){}finally{k||t.removeAttribute("id")}}}return dr(n.replace(yt,"$1"),t,i,r)}function ii(n){return or.test(n+"")}function ri(){function n(i,u){return t.push(i+=" ")>r.cacheLength&&delete n[t.shift()],n[i]=u}var t=[];return n}function c(n){return n[o]=!0,n}function p(n){var t=s.createElement("div");try{return!!n(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ui(n,t,i){n=n.split("|");for(var f,u=n.length,e=i?null:t;u--;)(f=r.attrHandle[n[u]])&&f!==t||(r.attrHandle[n[u]]=e)}function ar(n,t){var i=n.getAttributeNode(t);return i&&i.specified?i.value:n[t]===!0?t.toLowerCase():null}function vr(n,t){return n.getAttribute(t,t.toLowerCase()==="type"?1:2)}function yr(n){if(n.nodeName.toLowerCase()==="input")return n.defaultValue}function bi(n,t){var i=t&&n,r=i&&n.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||vi)-(~n.sourceIndex||vi);if(r)return r;if(i)while(i=i.nextSibling)if(i===t)return-1;return n?1:-1}function pr(n){return function(t){var i=t.nodeName.toLowerCase();return i==="input"&&t.type===n}}function wr(n){return function(t){var i=t.nodeName.toLowerCase();return(i==="input"||i==="button")&&t.type===n}}function rt(n){return c(function(t){return t=+t,c(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function wt(n,t){var e,f,s,o,i,h,c,l=li[n+" "];if(l)return t?0:l.slice(0);for(i=n,h=[],c=r.preFilter;i;){(!e||(f=ir.exec(i)))&&(f&&(i=i.slice(f[0].length)||i),h.push(s=[])),e=!1,(f=rr.exec(i))&&(e=f.shift(),s.push({value:e,type:f[0].replace(yt," ")}),i=i.slice(e.length));for(o in r.filter)(f=pt[o].exec(i))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),i=i.slice(e.length));if(!e)break}return t?i.length:i?u.error(n):li(n,h).slice(0)}function bt(n){for(var t=0,r=n.length,i="";t<r;t++)i+=n[t].value;return i}function fi(n,t,i){var r=t.dir,u=i&&r==="parentNode",f=di++;return t.first?function(t,i,f){while(t=t[r])if(t.nodeType===1||u)return n(t,i,f)}:function(t,i,e){var h,s,c,l=y+" "+f;if(e){while(t=t[r])if((t.nodeType===1||u)&&n(t,i,e))return!0}else while(t=t[r])if(t.nodeType===1||u)if(c=t[o]||(t[o]={}),(s=c[r])&&s[0]===l){if((h=s[1])===!0||h===ht)return h===!0}else if(s=c[r]=[l],s[1]=n(t,i,e)||ht,s[1]===!0)return!0}}function ei(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function kt(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=t!=null;f<s;f++)(e=n[f])&&(!i||i(e,r,u))&&(o.push(e),h&&t.push(f));return o}function oi(n,t,i,r,u,f){return r&&!r[o]&&(r=oi(r)),u&&!u[o]&&(u=oi(u,f)),c(function(f,e,o,s){var l,c,a,p=[],y=[],w=e.length,k=f||kr(t||"*",o.nodeType?[o]:o,[]),v=n&&(f||!t)?kt(k,p,n,o,s):k,h=i?u||(f?n:w||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=kt(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?it.call(f,a):p[c])>-1&&(f[l]=!(e[l]=a))}}else h=kt(h===e?h.splice(w,h.length):h),u?u(null,e,h,s):b.apply(e,h)})}function si(n){for(var s,u,i,e=n.length,h=r.relative[n[0].type],c=h||r.relative[" "],t=h?1:0,l=fi(function(n){return n===s},c,!0),a=fi(function(n){return it.call(s,n)>-1},c,!0),f=[function(n,t,i){return!h&&(i||t!==lt)||((s=t).nodeType?l(n,t,i):a(n,t,i))}];t<e;t++)if(u=r.relative[n[t].type])f=[fi(ei(f),u)];else{if(u=r.filter[n[t].type].apply(null,n[t].matches),u[o]){for(i=++t;i<e;i++)if(r.relative[n[i].type])break;return oi(t>1&&ei(f),t>1&&bt(n.slice(0,t-1).concat({value:n[t-2].type===" "?"*":""})).replace(yt,"$1"),u,t<i&&si(n.slice(t,i)),i<e&&si(n=n.slice(i)),i<e&&bt(n))}f.push(u)}return ei(f)}function br(n,t){var f=0,i=t.length>0,e=n.length>0,o=function(o,h,c,l,a){var p,g,k,w=[],d=0,v="0",nt=o&&[],tt=a!=null,it=lt,ut=o||e&&r.find.TAG("*",a&&h.parentNode||h),rt=y+=it==null?1:Math.random()||.1;for(tt&&(lt=h!==s&&h,ht=f);(p=ut[v])!=null;v++){if(e&&p){for(g=0;k=n[g++];)if(k(p,h,c)){l.push(p);break}tt&&(y=rt,ht=++f)}i&&((p=!k&&p)&&d--,o&&nt.push(p))}if(d+=v,i&&v!==d){for(g=0;k=t[g++];)k(nt,w,h,c);if(o){if(d>0)while(v--)nt[v]||w[v]||(w[v]=nr.call(l));w=kt(w)}b.apply(l,w),tt&&!o&&w.length>0&&d+t.length>1&&u.uniqueSort(l)}return tt&&(y=rt,lt=it),nt};return i?c(o):o}function kr(n,t,i){for(var r=0,f=t.length;r<f;r++)u(n,t[r],i);return i}function dr(n,t,i,u){var s,f,o,c,l,h=wt(n);if(!u&&h.length===1){if(f=h[0]=h[0].slice(0),f.length>2&&(o=f[0]).type==="ID"&&e.getById&&t.nodeType===9&&a&&r.relative[f[1].type]){if(t=(r.find.ID(o.matches[0].replace(k,d),t)||[])[0],!t)return i;n=n.slice(f.shift().value.length)}for(s=pt.needsContext.test(n)?0:f.length;s--;){if(o=f[s],r.relative[c=o.type])break;if((l=r.find[c])&&(u=l(o.matches[0].replace(k,d),ti.test(f[0].type)&&t.parentNode||t))){if(f.splice(s,1),n=u.length&&bt(f),!n)return b.apply(i,u),i;break}}}return dt(n,h)(u,t,!a,i,ti.test(n)),i}function ki(){}var ut,e,ht,r,ct,hi,dt,lt,g,nt,s,l,a,h,tt,at,et,o="sizzle"+-new Date,v=n.document,y=0,di=0,ci=ri(),li=ri(),ai=ri(),ot=!1,vt=function(){return 0},st=typeof t,vi=-2147483648,gi={}.hasOwnProperty,w=[],nr=w.pop,tr=w.push,b=w.push,yi=w.slice,it=w.indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(this[t]===n)return t;return-1},gt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",f="[\\x20\\t\\r\\n\\f]",ft="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",pi=ft.replace("w","w#"),wi="\\["+f+"*("+ft+")"+f+"*(?:([*^$|!~]?=)"+f+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+pi+")|)|)"+f+"*\\]",ni=":("+ft+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+wi.replace(3,8)+")*)|.*)\\)|)",yt=new RegExp("^"+f+"+|((?:^|[^\\\\])(?:\\\\.)*)"+f+"+$","g"),ir=new RegExp("^"+f+"*,"+f+"*"),rr=new RegExp("^"+f+"*([>+~]|"+f+")"+f+"*"),ti=new RegExp(f+"*[+~]"),ur=new RegExp("="+f+"*([^\\]'\"]*)"+f+"*\\]","g"),fr=new RegExp(ni),er=new RegExp("^"+pi+"$"),pt={ID:new RegExp("^#("+ft+")"),CLASS:new RegExp("^\\.("+ft+")"),TAG:new RegExp("^("+ft.replace("w","w*")+")"),ATTR:new RegExp("^"+wi),PSEUDO:new RegExp("^"+ni),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+f+"*(even|odd|(([+-]|)(\\d*)n|)"+f+"*(?:([+-]|)"+f+"*(\\d+)|))"+f+"*\\)|)","i"),bool:new RegExp("^(?:"+gt+")$","i"),needsContext:new RegExp("^"+f+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+f+"*((?:-\\d)?\\d*)"+f+"*\\)|)(?=[^-]|$)","i")},or=/^[^{]+\{\s*\[native \w/,sr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,hr=/^(?:input|select|textarea|button)$/i,cr=/^h\d$/i,lr=/'|\\/g,k=new RegExp("\\\\([\\da-f]{1,6}"+f+"?|("+f+")|.)","ig"),d=function(n,t,i){var r="0x"+t-65536;return r!==r||i?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{b.apply(w=yi.call(v.childNodes),v.childNodes),w[v.childNodes.length].nodeType}catch(gr){b={apply:w.length?function(n,t){tr.apply(n,yi.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}hi=u.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?t.nodeName!=="HTML":!1},e=u.support={},nt=u.setDocument=function(n){var t=n?n.ownerDocument||n:v,i=t.parentWindow;return t===s||t.nodeType!==9||!t.documentElement?s:(s=t,l=t.documentElement,a=!hi(t),i&&i.frameElement&&i.attachEvent("onbeforeunload",function(){nt()}),e.attributes=p(function(n){return n.innerHTML="<a href='#'><\/a>",ui("type|href|height|width",vr,n.firstChild.getAttribute("href")==="#"),ui(gt,ar,n.getAttribute("disabled")==null),n.className="i",!n.getAttribute("className")}),e.input=p(function(n){return n.innerHTML="<input>",n.firstChild.setAttribute("value",""),n.firstChild.getAttribute("value")===""}),ui("value",yr,e.attributes&&e.input),e.getElementsByTagName=p(function(n){return n.appendChild(t.createComment("")),!n.getElementsByTagName("*").length}),e.getElementsByClassName=p(function(n){return n.innerHTML="<div class='a'><\/div><div class='a i'><\/div>",n.firstChild.className="i",n.getElementsByClassName("i").length===2}),e.getById=p(function(n){return l.appendChild(n).id=o,!t.getElementsByName||!t.getElementsByName(o).length}),e.getById?(r.find.ID=function(n,t){if(typeof t.getElementById!==st&&a){var i=t.getElementById(n);return i&&i.parentNode?[i]:[]}},r.filter.ID=function(n){var t=n.replace(k,d);return function(n){return n.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(n){var t=n.replace(k,d);return function(n){var i=typeof n.getAttributeNode!==st&&n.getAttributeNode("id");return i&&i.value===t}}),r.find.TAG=e.getElementsByTagName?function(n,t){if(typeof t.getElementsByTagName!==st)return t.getElementsByTagName(n)}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if(n==="*"){while(i=u[f++])i.nodeType===1&&r.push(i);return r}return u},r.find.CLASS=e.getElementsByClassName&&function(n,t){if(typeof t.getElementsByClassName!==st&&a)return t.getElementsByClassName(n)},tt=[],h=[],(e.qsa=ii(t.querySelectorAll))&&(p(function(n){n.innerHTML="<select><option selected=''><\/option><\/select>",n.querySelectorAll("[selected]").length||h.push("\\["+f+"*(?:value|"+gt+")"),n.querySelectorAll(":checked").length||h.push(":checked")}),p(function(n){var i=t.createElement("input");i.setAttribute("type","hidden"),n.appendChild(i).setAttribute("t",""),n.querySelectorAll("[t^='']").length&&h.push("[*^$]="+f+"*(?:''|\"\")"),n.querySelectorAll(":enabled").length||h.push(":enabled",":disabled"),n.querySelectorAll("*,:x"),h.push(",.*:")})),(e.matchesSelector=ii(at=l.webkitMatchesSelector||l.mozMatchesSelector||l.oMatchesSelector||l.msMatchesSelector))&&p(function(n){e.disconnectedMatch=at.call(n,"div"),at.call(n,"[s!='']:x"),tt.push("!=",ni)}),h=h.length&&new RegExp(h.join("|")),tt=tt.length&&new RegExp(tt.join("|")),et=ii(l.contains)||l.compareDocumentPosition?function(n,t){var r=n.nodeType===9?n.documentElement:n,i=t&&t.parentNode;return n===i||!!(i&&i.nodeType===1&&(r.contains?r.contains(i):n.compareDocumentPosition&&n.compareDocumentPosition(i)&16))}:function(n,t){if(t)while(t=t.parentNode)if(t===n)return!0;return!1},e.sortDetached=p(function(n){return n.compareDocumentPosition(t.createElement("div"))&1}),vt=l.compareDocumentPosition?function(n,i){if(n===i)return ot=!0,0;var r=i.compareDocumentPosition&&n.compareDocumentPosition&&n.compareDocumentPosition(i);return r?r&1||!e.sortDetached&&i.compareDocumentPosition(n)===r?n===t||et(v,n)?-1:i===t||et(v,i)?1:g?it.call(g,n)-it.call(g,i):0:r&4?-1:1:n.compareDocumentPosition?-1:1}:function(n,i){var r,u=0,o=n.parentNode,s=i.parentNode,f=[n],e=[i];if(n===i)return ot=!0,0;if(o&&s){if(o===s)return bi(n,i)}else return n===t?-1:i===t?1:o?-1:s?1:g?it.call(g,n)-it.call(g,i):0;for(r=n;r=r.parentNode;)f.unshift(r);for(r=i;r=r.parentNode;)e.unshift(r);while(f[u]===e[u])u++;return u?bi(f[u],e[u]):f[u]===v?-1:e[u]===v?1:0},t)},u.matches=function(n,t){return u(n,null,null,t)},u.matchesSelector=function(n,t){if((n.ownerDocument||n)!==s&&nt(n),t=t.replace(ur,"='$1']"),e.matchesSelector&&a&&(!tt||!tt.test(t))&&(!h||!h.test(t)))try{var i=at.call(n,t);if(i||e.disconnectedMatch||n.document&&n.document.nodeType!==11)return i}catch(r){}return u(t,s,null,[n]).length>0},u.contains=function(n,t){return(n.ownerDocument||n)!==s&&nt(n),et(n,t)},u.attr=function(n,i){(n.ownerDocument||n)!==s&&nt(n);var f=r.attrHandle[i.toLowerCase()],u=f&&gi.call(r.attrHandle,i.toLowerCase())?f(n,i,!a):t;return u===t?e.attributes||!a?n.getAttribute(i):(u=n.getAttributeNode(i))&&u.specified?u.value:null:u},u.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);},u.uniqueSort=function(n){var r,u=[],t=0,i=0;if(ot=!e.detectDuplicates,g=!e.sortStable&&n.slice(0),n.sort(vt),ot){while(r=n[i++])r===n[i]&&(t=u.push(i));while(t--)n.splice(u[t],1)}return n},ct=u.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(t===1||t===9||t===11){if(typeof n.textContent=="string")return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=ct(n)}else if(t===3||t===4)return n.nodeValue}else for(;r=n[u];u++)i+=ct(r);return i},r=u.selectors={cacheLength:50,createPseudo:c,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(k,d),n[3]=(n[4]||n[5]||"").replace(k,d),n[2]==="~="&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),n[1].slice(0,3)==="nth"?(n[3]||u.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*(n[3]==="even"||n[3]==="odd")),n[5]=+(n[7]+n[8]||n[3]==="odd")):n[3]&&u.error(n[0]),n},PSEUDO:function(n){var r,i=!n[5]&&n[2];return pt.CHILD.test(n[0])?null:(n[3]&&n[4]!==t?n[2]=n[4]:i&&fr.test(i)&&(r=wt(i,!0))&&(r=i.indexOf(")",i.length-r)-i.length)&&(n[0]=n[0].slice(0,r),n[2]=i.slice(0,r)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(k,d).toLowerCase();return n==="*"?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=ci[n+" "];return t||(t=new RegExp("(^|"+f+")"+n+"("+f+"|$)"))&&ci(n,function(n){return t.test(typeof n.className=="string"&&n.className||typeof n.getAttribute!==st&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(r){var f=u.attr(r,n);return f==null?t==="!=":t?(f+="",t==="="?f===i:t==="!="?f!==i:t==="^="?i&&f.indexOf(i)===0:t==="*="?i&&f.indexOf(i)>-1:t==="$="?i&&f.slice(-i.length)===i:t==="~="?(" "+f+" ").indexOf(i)>-1:t==="|="?f===i||f.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r,u){var s=n.slice(0,3)!=="nth",e=n.slice(-4)!=="last",f=t==="of-type";return r===1&&u===0?function(n){return!!n.parentNode}:function(t,i,h){var a,k,c,l,v,w,b=s!==e?"nextSibling":"previousSibling",p=t.parentNode,g=f&&t.nodeName.toLowerCase(),d=!h&&!f;if(p){if(s){while(b){for(c=t;c=c[b];)if(f?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;w=b=n==="only"&&!w&&"nextSibling"}return!0}if(w=[e?p.firstChild:p.lastChild],e&&d){for(k=p[o]||(p[o]={}),a=k[n]||[],v=a[0]===y&&a[1],l=a[0]===y&&a[2],c=v&&p.childNodes[v];c=++v&&c&&c[b]||(l=v=0)||w.pop();)if(c.nodeType===1&&++l&&c===t){k[n]=[y,v,l];break}}else if(d&&(a=(t[o]||(t[o]={}))[n])&&a[0]===y)l=a[1];else while(c=++v&&c&&c[b]||(l=v=0)||w.pop())if((f?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++l&&(d&&((c[o]||(c[o]={}))[n]=[y,l]),c===t))break;return l-=u,l===r||l%r==0&&l/r>=0}}},PSEUDO:function(n,t){var f,i=r.pseudos[n]||r.setFilters[n.toLowerCase()]||u.error("unsupported pseudo: "+n);return i[o]?i(t):i.length>1?(f=[n,n,"",t],r.setFilters.hasOwnProperty(n.toLowerCase())?c(function(n,r){for(var u,f=i(n,t),e=f.length;e--;)u=it.call(n,f[e]),n[u]=!(r[u]=f[e])}):function(n){return i(n,0,f)}):i}},pseudos:{not:c(function(n){var i=[],r=[],t=dt(n.replace(yt,"$1"));return t[o]?c(function(n,i,r,u){for(var e,o=t(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(i[f]=e))}):function(n,u,f){return i[0]=n,t(i,null,f,r),!r.pop()}}),has:c(function(n){return function(t){return u(n,t).length>0}}),contains:c(function(n){return function(t){return(t.textContent||t.innerText||ct(t)).indexOf(n)>-1}}),lang:c(function(n){return er.test(n||"")||u.error("unsupported lang: "+n),n=n.replace(k,d).toLowerCase(),function(t){var i;do if(i=a?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===n||i.indexOf(n+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var i=n.location&&n.location.hash;return i&&i.slice(1)===t.id},root:function(n){return n===l},focus:function(n){return n===s.activeElement&&(!s.hasFocus||s.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&!!n.checked||t==="option"&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeName>"@"||n.nodeType===3||n.nodeType===4)return!1;return!0},parent:function(n){return!r.pseudos.empty(n)},header:function(n){return cr.test(n.nodeName)},input:function(n){return hr.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&n.type==="button"||t==="button"},text:function(n){var t;return n.nodeName.toLowerCase()==="input"&&n.type==="text"&&((t=n.getAttribute("type"))==null||t.toLowerCase()===n.type)},first:rt(function(){return[0]}),last:rt(function(n,t){return[t-1]}),eq:rt(function(n,t,i){return[i<0?i+t:i]}),even:rt(function(n,t){for(var i=0;i<t;i+=2)n.push(i);return n}),odd:rt(function(n,t){for(var i=1;i<t;i+=2)n.push(i);return n}),lt:rt(function(n,t,i){for(var r=i<0?i+t:i;--r>=0;)n.push(r);return n}),gt:rt(function(n,t,i){for(var r=i<0?i+t:i;++r<t;)n.push(r);return n})}};for(ut in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[ut]=pr(ut);for(ut in{submit:!0,reset:!0})r.pseudos[ut]=wr(ut);dt=u.compile=function(n,t){var r,u=[],f=[],i=ai[n+" "];if(!i){for(t||(t=wt(n)),r=t.length;r--;)i=si(t[r]),i[o]?u.push(i):f.push(i);i=ai(n,br(f,u))}return i},r.pseudos.nth=r.pseudos.eq,ki.prototype=r.filters=r.pseudos,r.setFilters=new ki,e.sortStable=o.split("").sort(vt).join("")===o,nt(),[0,0].sort(vt),e.detectDuplicates=ot,i.find=u,i.expr=u.selectors,i.expr[":"]=i.expr.pseudos,i.unique=u.uniqueSort,i.text=u.getText,i.isXMLDoc=u.isXML,i.contains=u.contains}(n),dt={},i.Callbacks=function(n){n=typeof n=="string"?dt[n]||ku(n):i.extend({},n);var f,c,s,l,e,o,r=[],u=!n.once&&[],a=function(t){for(f=n.memory&&t,c=!0,o=l||0,l=0,e=r.length,s=!0;r&&o<e;o++)if(r[o].apply(t[0],t[1])===!1&&n.stopOnFalse){f=!1;break}s=!1,r&&(u?u.length&&a(u.shift()):f?r=[]:h.disable())},h={add:function(){if(r){var t=r.length;(function u(t){i.each(t,function(t,f){var e=i.type(f);e==="function"?n.unique&&h.has(f)||r.push(f):f&&f.length&&e!=="string"&&u(f)})})(arguments),s?e=r.length:f&&(l=t,a(f))}return this},remove:function(){return r&&i.each(arguments,function(n,t){for(var u;(u=i.inArray(t,r,u))>-1;)r.splice(u,1),s&&(u<=e&&e--,u<=o&&o--)}),this},has:function(n){return n?i.inArray(n,r)>-1:!!(r&&r.length)},empty:function(){return r=[],e=0,this},disable:function(){return r=u=f=t,this},disabled:function(){return!r},lock:function(){return u=t,f||h.disable(),this},locked:function(){return!u},fireWith:function(n,t){return t=t||[],t=[n,t.slice?t.slice():t],r&&(!c||u)&&(s?u.push(t):a(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!c}};return h},i.extend({Deferred:function(n){var u=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],f="pending",r={state:function(){return f},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var n=arguments;return i.Deferred(function(f){i.each(u,function(u,e){var s=e[0],o=i.isFunction(n[u])&&n[u];t[e[1]](function(){var n=o&&o.apply(this,arguments);n&&i.isFunction(n.promise)?n.promise().done(f.resolve).fail(f.reject).progress(f.notify):f[s+"With"](this===r?f.promise():this,o?[n]:arguments)})}),n=null}).promise()},promise:function(n){return n!=null?i.extend(n,r):r}},t={};return r.pipe=r.then,i.each(u,function(n,i){var e=i[2],o=i[3];r[i[1]]=e.add,o&&e.add(function(){f=o},u[n^1][2].disable,u[2][2].lock),t[i[0]]=function(){return t[i[0]+"With"](this===t?r:this,arguments),this},t[i[0]+"With"]=e.fireWith}),r.promise(t),n&&n.call(t,t),t},when:function(n){var t=0,u=a.call(arguments),r=u.length,e=r!==1||n&&i.isFunction(n.promise)?r:0,f=e===1?n:i.Deferred(),h=function(n,t,i){return function(r){t[n]=this,i[n]=arguments.length>1?a.call(arguments):r,i===o?f.notifyWith(t,i):--e||f.resolveWith(t,i)}},o,c,s;if(r>1)for(o=new Array(r),c=new Array(r),s=new Array(r);t<r;t++)u[t]&&i.isFunction(u[t].promise)?u[t].promise().done(h(t,s,u)).fail(f.reject).progress(h(t,c,o)):--e;return e||f.resolveWith(s,u),f.promise()}}),i.support=function(t){var r=u.createElement("input"),e=u.createDocumentFragment(),f=u.createElement("div"),o=u.createElement("select"),s=o.appendChild(u.createElement("option"));return r.type?(r.type="checkbox",t.checkOn=r.value!=="",t.optSelected=s.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,r.checked=!0,t.noCloneChecked=r.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!s.disabled,r=u.createElement("input"),r.value="t",r.type="radio",t.radioValue=r.value==="t",r.setAttribute("checked","t"),r.setAttribute("name","t"),e.appendChild(r),t.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in n,f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=f.style.backgroundClip==="content-box",i(function(){var o,r,e=u.getElementsByTagName("body")[0];e&&(o=u.createElement("div"),o.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",e.appendChild(o).appendChild(f),f.innerHTML="",f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",i.swap(e,e.style.zoom!=null?{zoom:1}:{},function(){t.boxSizing=f.offsetWidth===4}),n.getComputedStyle&&(t.pixelPosition=(n.getComputedStyle(f,null)||{}).top!=="1%",t.boxSizingReliable=(n.getComputedStyle(f,null)||{width:"4px"}).width==="4px",r=f.appendChild(u.createElement("div")),r.style.cssText=f.style.cssText="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",r.style.marginRight=r.style.width="0",f.style.width="1px",t.reliableMarginRight=!parseFloat((n.getComputedStyle(r,null)||{}).marginRight)),e.removeChild(o))}),t):t}({}),vi=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,yi=/([A-Z])/g,c.uid=1,c.accepts=function(n){return n.nodeType?n.nodeType===1||n.nodeType===9:!0},c.prototype={key:function(n){if(!c.accepts(n))return 0;var r={},t=n[this.expando];if(!t){t=c.uid++;try{r[this.expando]={value:t},Object.defineProperties(n,r)}catch(u){r[this.expando]=t,i.extend(n,r)}}return this.cache[t]||(this.cache[t]={}),t},set:function(n,t,r){var f,e=this.key(n),u=this.cache[e];if(typeof t=="string")u[t]=r;else if(i.isEmptyObject(u))i.extend(this.cache[e],t);else for(f in t)u[f]=t[f];return u},get:function(n,i){var r=this.cache[this.key(n)];return i===t?r:r[i]},access:function(n,i,r){return i===t||i&&typeof i=="string"&&r===t?this.get(n,i):(this.set(n,i,r),r!==t?r:i)},remove:function(n,r){var f,u,e,s=this.key(n),o=this.cache[s];if(r===t)this.cache[s]={};else for(i.isArray(r)?u=r.concat(r.map(i.camelCase)):(e=i.camelCase(r),r in o?u=[r,e]:(u=e,u=u in o?[u]:u.match(h)||[])),f=u.length;f--;)delete o[u[f]]},hasData:function(n){return!i.isEmptyObject(this.cache[n[this.expando]]||{})},discard:function(n){n[this.expando]&&delete this.cache[n[this.expando]]}},f=new c,r=new c,i.extend({acceptData:c.accepts,hasData:function(n){return f.hasData(n)||r.hasData(n)},data:function(n,t,i){return f.access(n,t,i)},removeData:function(n,t){f.remove(n,t)},_data:function(n,t,i){return r.access(n,t,i)},_removeData:function(n,t){r.remove(n,t)}}),i.fn.extend({data:function(n,u){var s,o,e=this[0],h=0,c=null;if(n===t){if(this.length&&(c=f.get(e),e.nodeType===1&&!r.get(e,"hasDataAttrs"))){for(s=e.attributes;h<s.length;h++)o=s[h].name,o.indexOf("data-")===0&&(o=i.camelCase(o.slice(5)),pi(e,o,c[o]));r.set(e,"hasDataAttrs",!0)}return c}return typeof n=="object"?this.each(function(){f.set(this,n)}):i.access(this,function(r){var u,o=i.camelCase(n);if(e&&r===t)return(u=f.get(e,n),u!==t)?u:(u=f.get(e,o),u!==t)?u:(u=pi(e,o,t),u!==t)?u:void 0;this.each(function(){var i=f.get(this,o);f.set(this,o,r),n.indexOf("-")!==-1&&i!==t&&f.set(this,n,r)})},null,u,arguments.length>1,null,!0)},removeData:function(n){return this.each(function(){f.remove(this,n)})}}),i.extend({queue:function(n,t,u){var f;if(n)return t=(t||"fx")+"queue",f=r.get(n,t),u&&(!f||i.isArray(u)?f=r.access(n,t,i.makeArray(u)):f.push(u)),f||[]},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),e=r.length,u=r.shift(),f=i._queueHooks(n,t),o=function(){i.dequeue(n,t)};u==="inprogress"&&(u=r.shift(),e--),u&&(t==="fx"&&r.unshift("inprogress"),delete f.stop,u.call(n,o,f)),!e&&f&&f.empty.fire()},_queueHooks:function(n,t){var u=t+"queueHooks";return r.get(n,u)||r.access(n,u,{empty:i.Callbacks("once memory").add(function(){r.remove(n,[t+"queue",u])})})}}),i.fn.extend({queue:function(n,r){var u=2;return(typeof n!="string"&&(r=n,n="fx",u--),arguments.length<u)?i.queue(this[0],n):r===t?this:this.each(function(){var t=i.queue(this,n,r);i._queueHooks(this,n),n==="fx"&&t[0]!=="inprogress"&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},delay:function(n,t){return n=i.fx?i.fx.speeds[n]||n:n,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,n);i.stop=function(){clearTimeout(r)}})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,u){var f,o=1,s=i.Deferred(),e=this,h=this.length,c=function(){--o||s.resolveWith(e,[e])};for(typeof n!="string"&&(u=n,n=t),n=n||"fx";h--;)f=r.get(e[h],n+"queueHooks"),f&&f.empty&&(o++,f.empty.add(c));return c(),s.promise(u)}});var du,wi,gt=/[\t\r\n\f]/g,gu=/\r/g,nf=/^(?:input|select|textarea|button)$/i;i.fn.extend({attr:function(n,t){return i.access(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})},prop:function(n,t){return i.access(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return this.each(function(){delete this[i.propFix[n]||n]})},addClass:function(n){var e,t,r,u,o,f=0,s=this.length,c=typeof n=="string"&&n;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,this.className))});if(c)for(e=(n||"").match(h)||[];f<s;f++)if(t=this[f],r=t.nodeType===1&&(t.className?(" "+t.className+" ").replace(gt," "):" "),r){for(o=0;u=e[o++];)r.indexOf(" "+u+" ")<0&&(r+=u+" ");t.className=i.trim(r)}return this},removeClass:function(n){var e,r,t,u,o,f=0,s=this.length,c=arguments.length===0||typeof n=="string"&&n;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,this.className))});if(c)for(e=(n||"").match(h)||[];f<s;f++)if(r=this[f],t=r.nodeType===1&&(r.className?(" "+r.className+" ").replace(gt," "):""),t){for(o=0;u=e[o++];)while(t.indexOf(" "+u+" ")>=0)t=t.replace(" "+u+" "," ");r.className=n?i.trim(t):""}return this},toggleClass:function(n,t){var u=typeof n,f=typeof t=="boolean";return i.isFunction(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,this.className,t),t)}):this.each(function(){if(u==="string")for(var e,c=0,s=i(this),o=t,l=n.match(h)||[];e=l[c++];)o=f?o:!s.hasClass(e),s[o?"addClass":"removeClass"](e);else(u===rt||u==="boolean")&&(this.className&&r.set(this,"__className__",this.className),this.className=this.className||n===!1?"":r.get(this,"__className__")||"")})},hasClass:function(n){for(var i=" "+n+" ",t=0,r=this.length;t<r;t++)if(this[t].nodeType===1&&(" "+this[t].className+" ").replace(gt," ").indexOf(i)>=0)return!0;return!1},val:function(n){var r,u,e,f=this[0];return arguments.length?(e=i.isFunction(n),this.each(function(u){var f;this.nodeType===1&&(f=e?n.call(this,u,i(this).val()):n,f==null?f="":typeof f=="number"?f+="":i.isArray(f)&&(f=i.map(f,function(n){return n==null?"":n+""})),r=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,f,"value")!==t||(this.value=f))})):f?(r=i.valHooks[f.type]||i.valHooks[f.nodeName.toLowerCase()],r&&"get"in r&&(u=r.get(f,"value"))!==t)?u:(u=f.value,typeof u=="string"?u.replace(gu,""):u==null?"":u):void 0}}),i.extend({valHooks:{option:{get:function(n){var t=n.attributes.value;return!t||t.specified?n.value:n.text}},select:{get:function(n){for(var e,t,o=n.options,r=n.selectedIndex,u=n.type==="select-one"||r<0,s=u?null:[],h=u?r+1:o.length,f=r<0?h:u?r:0;f<h;f++)if(t=o[f],(t.selected||f===r)&&(i.support.optDisabled?!t.disabled:t.getAttribute("disabled")===null)&&(!t.parentNode.disabled||!i.nodeName(t.parentNode,"optgroup"))){if(e=i(t).val(),u)return e;s.push(e)}return s},set:function(n,t){for(var u,r,f=n.options,e=i.makeArray(t),o=f.length;o--;)r=f[o],(r.selected=i.inArray(i(r).val(),e)>=0)&&(u=!0);return u||(n.selectedIndex=-1),e}}},attr:function(n,r,u){var f,e,o=n.nodeType;if(n&&o!==3&&o!==8&&o!==2){if(typeof n.getAttribute===rt)return i.prop(n,r,u);if(o===1&&i.isXMLDoc(n)||(r=r.toLowerCase(),f=i.attrHooks[r]||(i.expr.match.bool.test(r)?wi:du)),u!==t)if(u===null)i.removeAttr(n,r);else return f&&"set"in f&&(e=f.set(n,u,r))!==t?e:(n.setAttribute(r,u+""),u);else return f&&"get"in f&&(e=f.get(n,r))!==null?e:(e=i.find.attr(n,r),e==null?t:e)}},removeAttr:function(n,t){var r,u,e=0,f=t&&t.match(h);if(f&&n.nodeType===1)while(r=f[e++])u=i.propFix[r]||r,i.expr.match.bool.test(r)&&(n[u]=!1),n.removeAttribute(r)},attrHooks:{type:{set:function(n,t){if(!i.support.radioValue&&t==="radio"&&i.nodeName(n,"input")){var r=n.value;return n.setAttribute("type",t),r&&(n.value=r),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(n,r,u){var e,f,s,o=n.nodeType;if(n&&o!==3&&o!==8&&o!==2)return s=o!==1||!i.isXMLDoc(n),s&&(r=i.propFix[r]||r,f=i.propHooks[r]),u!==t?f&&"set"in f&&(e=f.set(n,u,r))!==t?e:n[r]=u:f&&"get"in f&&(e=f.get(n,r))!==null?e:n[r]},propHooks:{tabIndex:{get:function(n){return n.hasAttribute("tabindex")||nf.test(n.nodeName)||n.href?n.tabIndex:-1}}}}),wi={set:function(n,t,r){return t===!1?i.removeAttr(n,r):n.setAttribute(r,r),r}},i.each(i.expr.match.bool.source.match(/\w+/g),function(n,r){var u=i.expr.attrHandle[r]||i.find.attr;i.expr.attrHandle[r]=function(n,r,f){var e=i.expr.attrHandle[r],o=f?t:(i.expr.attrHandle[r]=t)!=u(n,r,f)?r.toLowerCase():null;return i.expr.attrHandle[r]=e,o}}),i.support.optSelected||(i.propHooks.selected={get:function(n){var t=n.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),i.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){i.propFix[this.toLowerCase()]=this}),i.each(["radio","checkbox"],function(){i.valHooks[this]={set:function(n,t){if(i.isArray(t))return n.checked=i.inArray(i(n).val(),t)>=0}},i.support.checkOn||(i.valHooks[this].get=function(n){return n.getAttribute("value")===null?"on":n.value})});var tf=/^key/,rf=/^(?:mouse|contextmenu)|click/,bi=/^(?:focusinfocus|focusoutblur)$/,ki=/^([^.]*)(?:\.(.+)|)$/;i.event={global:{},add:function(n,u,f,e,o){var p,l,b,w,k,a,c,v,s,d,g,y=r.get(n);if(y){for(f.handler&&(p=f,f=p.handler,o=p.selector),f.guid||(f.guid=i.guid++),(w=y.events)||(w=y.events={}),(l=y.handle)||(l=y.handle=function(n){return typeof i!==rt&&(!n||i.event.triggered!==n.type)?i.event.dispatch.apply(l.elem,arguments):t},l.elem=n),u=(u||"").match(h)||[""],k=u.length;k--;)(b=ki.exec(u[k])||[],s=g=b[1],d=(b[2]||"").split(".").sort(),s)&&(c=i.event.special[s]||{},s=(o?c.delegateType:c.bindType)||s,c=i.event.special[s]||{},a=i.extend({type:s,origType:g,data:e,handler:f,guid:f.guid,selector:o,needsContext:o&&i.expr.match.needsContext.test(o),namespace:d.join(".")},p),(v=w[s])||(v=w[s]=[],v.delegateCount=0,c.setup&&c.setup.call(n,e,d,l)!==!1||n.addEventListener&&n.addEventListener(s,l,!1)),c.add&&(c.add.call(n,a),a.handler.guid||(a.handler.guid=f.guid)),o?v.splice(v.delegateCount++,0,a):v.push(a),i.event.global[s]=!0);n=null}},remove:function(n,t,u,f,e){var p,k,c,v,w,s,l,a,o,b,d,y=r.hasData(n)&&r.get(n);if(y&&(v=y.events)){for(t=(t||"").match(h)||[""],w=t.length;w--;){if(c=ki.exec(t[w])||[],o=d=c[1],b=(c[2]||"").split(".").sort(),!o){for(o in v)i.event.remove(n,o+t[w],u,f,!0);continue}for(l=i.event.special[o]||{},o=(f?l.delegateType:l.bindType)||o,a=v[o]||[],c=c[2]&&new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"),k=p=a.length;p--;)s=a[p],(e||d===s.origType)&&(!u||u.guid===s.guid)&&(!c||c.test(s.namespace))&&(!f||f===s.selector||f==="**"&&s.selector)&&(a.splice(p,1),s.selector&&a.delegateCount--,l.remove&&l.remove.call(n,s));k&&!a.length&&(l.teardown&&l.teardown.call(n,b,y.handle)!==!1||i.removeEvent(n,o,y.handle),delete v[o])}i.isEmptyObject(v)&&(delete y.handle,r.remove(n,"events"))}},trigger:function(f,e,o,s){var b,h,l,k,v,y,a,w=[o||u],c=bt.call(f,"type")?f.type:f,p=bt.call(f,"namespace")?f.namespace.split("."):[];if((h=l=o=o||u,o.nodeType!==3&&o.nodeType!==8)&&!bi.test(c+i.event.triggered)&&(c.indexOf(".")>=0&&(p=c.split("."),c=p.shift(),p.sort()),v=c.indexOf(":")<0&&"on"+c,f=f[i.expando]?f:new i.Event(c,typeof f=="object"&&f),f.isTrigger=s?2:3,f.namespace=p.join("."),f.namespace_re=f.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,f.result=t,f.target||(f.target=o),e=e==null?[f]:i.makeArray(e,[f]),a=i.event.special[c]||{},s||!a.trigger||a.trigger.apply(o,e)!==!1)){if(!s&&!a.noBubble&&!i.isWindow(o)){for(k=a.delegateType||c,bi.test(k+c)||(h=h.parentNode);h;h=h.parentNode)w.push(h),l=h;l===(o.ownerDocument||u)&&w.push(l.defaultView||l.parentWindow||n)}for(b=0;(h=w[b++])&&!f.isPropagationStopped();)f.type=b>1?k:a.bindType||c,y=(r.get(h,"events")||{})[f.type]&&r.get(h,"handle"),y&&y.apply(h,e),y=v&&h[v],y&&i.acceptData(h)&&y.apply&&y.apply(h,e)===!1&&f.preventDefault();return f.type=c,s||f.isDefaultPrevented()||(!a._default||a._default.apply(w.pop(),e)===!1)&&i.acceptData(o)&&v&&i.isFunction(o[c])&&!i.isWindow(o)&&(l=o[v],l&&(o[v]=null),i.event.triggered=c,o[c](),i.event.triggered=t,l&&(o[v]=l)),f.result}},dispatch:function(n){n=i.event.fix(n);var s,h,o,f,u,c=[],l=a.call(arguments),v=(r.get(this,"events")||{})[n.type]||[],e=i.event.special[n.type]||{};if(l[0]=n,n.delegateTarget=this,!e.preDispatch||e.preDispatch.call(this,n)!==!1){for(c=i.event.handlers.call(this,n,v),s=0;(f=c[s++])&&!n.isPropagationStopped();)for(n.currentTarget=f.elem,h=0;(u=f.handlers[h++])&&!n.isImmediatePropagationStopped();)(!n.namespace_re||n.namespace_re.test(u.namespace))&&(n.handleObj=u,n.data=u.data,o=((i.event.special[u.origType]||{}).handle||u.handler).apply(f.elem,l),o!==t&&(n.result=o)===!1&&(n.preventDefault(),n.stopPropagation()));return e.postDispatch&&e.postDispatch.call(this,n),n.result}},handlers:function(n,r){var o,f,e,s,c=[],h=r.delegateCount,u=n.target;if(h&&u.nodeType&&(!n.button||n.type!=="click"))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||n.type!=="click"){for(f=[],o=0;o<h;o++)s=r[o],e=s.selector+" ",f[e]===t&&(f[e]=s.needsContext?i(e,this).index(u)>=0:i.find(e,this,null,[u]).length),f[e]&&f.push(s);f.length&&c.push({elem:u,handlers:f})}return h<r.length&&c.push({elem:this,handlers:r.slice(h)}),c},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return n.which==null&&(n.which=t.charCode!=null?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,i){var o,r,f,e=i.button;return n.pageX==null&&i.clientX!=null&&(o=n.target.ownerDocument||u,r=o.documentElement,f=o.body,n.pageX=i.clientX+(r&&r.scrollLeft||f&&f.scrollLeft||0)-(r&&r.clientLeft||f&&f.clientLeft||0),n.pageY=i.clientY+(r&&r.scrollTop||f&&f.scrollTop||0)-(r&&r.clientTop||f&&f.clientTop||0)),n.which||e===t||(n.which=e&1?1:e&2?3:e&4?2:0),n}},fix:function(n){if(n[i.expando])return n;var f,e,o,r=n.type,s=n,t=this.fixHooks[r];for(t||(this.fixHooks[r]=t=rf.test(r)?this.mouseHooks:tf.test(r)?this.keyHooks:{}),o=t.props?this.props.concat(t.props):this.props,n=new i.Event(s),f=o.length;f--;)e=o[f],n[e]=s[e];return n.target||(n.target=u),n.target.nodeType===3&&(n.target=n.target.parentNode),t.filter?t.filter(n,s):n},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==di()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===di()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&i.nodeName(this,"input"))return this.click(),!1},_default:function(n){return i.nodeName(n.target,"a")}},beforeunload:{postDispatch:function(n){n.result!==t&&(n.originalEvent.returnValue=n.result)}}},simulate:function(n,t,r,u){var f=i.extend(new i.Event,r,{type:n,isSimulated:!0,originalEvent:{}});u?i.event.trigger(f,null,t):i.event.dispatch.call(t,f),f.isDefaultPrevented()&&r.preventDefault()}},i.removeEvent=function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i,!1)},i.Event=function(n,t){if(!(this instanceof i.Event))return new i.Event(n,t);n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.getPreventDefault&&n.getPreventDefault()?ht:p):this.type=n,t&&i.extend(this,t),this.timeStamp=n&&n.timeStamp||i.now(),this[i.expando]=!0},i.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=ht,n&&n.preventDefault&&n.preventDefault()},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=ht,n&&n.stopPropagation&&n.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ht,this.stopPropagation()}},i.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var u,f=this,r=n.relatedTarget,e=n.handleObj;return r&&(r===f||i.contains(f,r))||(n.type=e.origType,u=e.handler.apply(this,arguments),n.type=t),u}}}),i.support.focusinBubbles||i.each({focus:"focusin",blur:"focusout"},function(n,t){var r=0,f=function(n){i.event.simulate(t,n.target,i.event.fix(n),!0)};i.event.special[t]={setup:function(){r++==0&&u.addEventListener(n,f,!0)},teardown:function(){--r==0&&u.removeEventListener(n,f,!0)}}}),i.fn.extend({on:function(n,r,u,f,e){var o,s;if(typeof n=="object"){typeof r!="string"&&(u=u||r,r=t);for(s in n)this.on(s,r,u,n[s],e);return this}if(u==null&&f==null?(f=r,u=r=t):f==null&&(typeof r=="string"?(f=u,u=t):(f=u,u=r,r=t)),f===!1)f=p;else if(!f)return this;return e===1&&(o=f,f=function(n){return i().off(n),o.apply(this,arguments)},f.guid=o.guid||(o.guid=i.guid++)),this.each(function(){i.event.add(this,n,f,u,r)})},one:function(n,t,i,r){return this.on(n,t,i,r,1)},off:function(n,r,u){var f,e;if(n&&n.preventDefault&&n.handleObj)return f=n.handleObj,i(n.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if(typeof n=="object"){for(e in n)this.off(e,r,n[e]);return this}return(r===!1||typeof r=="function")&&(u=r,r=t),u===!1&&(u=p),this.each(function(){i.event.remove(this,n,u,r)})},trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){var r=this[0];if(r)return i.event.trigger(n,t,r,!0)}});var uf=/^.[^:#\[\.,]*$/,ff=/^(?:parents|prev(?:Until|All))/,gi=i.expr.match.needsContext,ef={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({find:function(n){var t,r=[],u=this,f=u.length;if(typeof n!="string")return this.pushStack(i(n).filter(function(){for(t=0;t<f;t++)if(i.contains(u[t],this))return!0}));for(t=0;t<f;t++)i.find(n,u[t],r);return r=this.pushStack(f>1?i.unique(r):r),r.selector=this.selector?this.selector+" "+n:n,r},has:function(n){var t=i(n,this),r=t.length;return this.filter(function(){for(var n=0;n<r;n++)if(i.contains(this,t[n]))return!0})},not:function(n){return this.pushStack(ni(this,n||[],!0))},filter:function(n){return this.pushStack(ni(this,n||[],!1))},is:function(n){return!!ni(this,typeof n=="string"&&gi.test(n)?i(n):n||[],!1).length},closest:function(n,t){for(var r,f=0,o=this.length,u=[],e=gi.test(n)||typeof n!="string"?i(n,t||this.context):0;f<o;f++)for(r=this[f];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(e?e.index(r)>-1:r.nodeType===1&&i.find.matchesSelector(r,n))){r=u.push(r);break}return this.pushStack(u.length>1?i.unique(u):u)},index:function(n){return n?typeof n=="string"?et.call(i(n),this[0]):et.call(this,n.jquery?n[0]:n):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){var r=typeof n=="string"?i(n,t):i.makeArray(n&&n.nodeType?[n]:n),u=i.merge(this.get(),r);return this.pushStack(i.unique(u))},addBack:function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))}}),i.each({parent:function(n){var t=n.parentNode;return t&&t.nodeType!==11?t:null},parents:function(n){return i.dir(n,"parentNode")},parentsUntil:function(n,t,r){return i.dir(n,"parentNode",r)},next:function(n){return nr(n,"nextSibling")},prev:function(n){return nr(n,"previousSibling")},nextAll:function(n){return i.dir(n,"nextSibling")},prevAll:function(n){return i.dir(n,"previousSibling")},nextUntil:function(n,t,r){return i.dir(n,"nextSibling",r)},prevUntil:function(n,t,r){return i.dir(n,"previousSibling",r)},siblings:function(n){return i.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return i.sibling(n.firstChild)},contents:function(n){return n.contentDocument||i.merge([],n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return n.slice(-5)!=="Until"&&(u=r),u&&typeof u=="string"&&(f=i.filter(u,f)),this.length>1&&(ef[n]||i.unique(f),ff.test(n)&&f.reverse()),this.pushStack(f)}}),i.extend({filter:function(n,t,r){var u=t[0];return r&&(n=":not("+n+")"),t.length===1&&u.nodeType===1?i.find.matchesSelector(u,n)?[u]:[]:i.find.matches(n,i.grep(t,function(n){return n.nodeType===1}))},dir:function(n,r,u){for(var f=[],e=u!==t;(n=n[r])&&n.nodeType!==9;)if(n.nodeType===1){if(e&&i(n).is(u))break;f.push(n)}return f},sibling:function(n,t){for(var i=[];n;n=n.nextSibling)n.nodeType===1&&n!==t&&i.push(n);return i}});var tr=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ir=/<([\w:]+)/,of=/<|&#?\w+;/,sf=/<(?:script|style|link)/i,rr=/^(?:checkbox|radio)$/i,hf=/checked\s*(?:[^=]|=\s*.checked.)/i,ur=/^$|\/(?:java|ecma)script/i,cf=/^true\/(.*)/,lf=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,s={option:[1,"<select multiple='multiple'>","<\/select>"],thead:[1,"<table>","<\/table>"],col:[2,"<table><colgroup>","<\/colgroup><\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:[0,"",""]};s.optgroup=s.option,s.tbody=s.tfoot=s.colgroup=s.caption=s.thead,s.th=s.td,i.fn.extend({text:function(n){return i.access(this,function(n){return n===t?i.text(this):this.empty().append((this[0]&&this[0].ownerDocument||u).createTextNode(n))},null,n,arguments.length)},append:function(){return this.domManip(arguments,function(n){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=fr(this,n);t.appendChild(n)}})},prepend:function(){return this.domManip(arguments,function(n){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=fr(this,n);t.insertBefore(n,t.firstChild)}})},before:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},remove:function(n,t){for(var r,f=n?i.filter(n,this):this,u=0;(r=f[u])!=null;u++)t||r.nodeType!==1||i.cleanData(o(r)),r.parentNode&&(t&&i.contains(r.ownerDocument,r)&&ti(o(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var n,t=0;(n=this[t])!=null;t++)n.nodeType===1&&(i.cleanData(o(n,!1)),n.textContent="");return this},clone:function(n,t){return n=n==null?!1:n,t=t==null?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return i.access(this,function(n){var r=this[0]||{},u=0,f=this.length;if(n===t&&r.nodeType===1)return r.innerHTML;if(typeof n=="string"&&!sf.test(n)&&!s[(ir.exec(n)||["",""])[1].toLowerCase()]){n=n.replace(tr,"<$1><\/$2>");try{for(;u<f;u++)r=this[u]||{},r.nodeType===1&&(i.cleanData(o(r,!1)),r.innerHTML=n);r=0}catch(e){}}r&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(){var t=i.map(this,function(n){return[n.nextSibling,n.parentNode]}),n=0;return this.domManip(arguments,function(r){var u=t[n++],f=t[n++];f&&(u&&u.parentNode!==f&&(u=this.nextSibling),i(this).remove(),f.insertBefore(r,u))},!0),n?this:this.remove()},detach:function(n){return this.remove(n,!0)},domManip:function(n,t,u){n=li.apply([],n);var h,v,s,c,f,y,e=0,l=this.length,w=this,b=l-1,a=n[0],p=i.isFunction(a);if(p||!(l<=1||typeof a!="string"||i.support.checkClone||!hf.test(a)))return this.each(function(i){var r=w.eq(i);p&&(n[0]=a.call(this,i,r.html())),r.domManip(n,t,u)});if(l&&(h=i.buildFragment(n,this[0].ownerDocument,!1,!u&&this),v=h.firstChild,h.childNodes.length===1&&(h=v),v)){for(s=i.map(o(h,"script"),af),c=s.length;e<l;e++)f=h,e!==b&&(f=i.clone(f,!0,!0),c&&i.merge(s,o(f,"script"))),t.call(this[e],f,e);if(c)for(y=s[s.length-1].ownerDocument,i.map(s,vf),e=0;e<c;e++)f=s[e],ur.test(f.type||"")&&!r.access(f,"globalEval")&&i.contains(y,f)&&(f.src?i._evalUrl(f.src):i.globalEval(f.textContent.replace(lf,"")))}return this}}),i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(n){for(var u,f=[],e=i(n),o=e.length-1,r=0;r<=o;r++)u=r===o?this:this.clone(!0),i(e[r])[t](u),wt.apply(f,u.get());return this.pushStack(f)}}),i.extend({clone:function(n,t,r){var u,h,e,f,s=n.cloneNode(!0),c=i.contains(n.ownerDocument,n);if(!i.support.noCloneChecked&&(n.nodeType===1||n.nodeType===11)&&!i.isXMLDoc(n))for(f=o(s),e=o(n),u=0,h=e.length;u<h;u++)yf(e[u],f[u]);if(t)if(r)for(e=e||o(n),f=f||o(s),u=0,h=e.length;u<h;u++)er(e[u],f[u]);else er(n,s);return f=o(s,"script"),f.length>0&&ti(f,!c&&o(n,"script")),s},buildFragment:function(n,t,r,u){for(var f,e,y,l,p,a,h=0,w=n.length,c=t.createDocumentFragment(),v=[];h<w;h++)if(f=n[h],f||f===0)if(i.type(f)==="object")i.merge(v,f.nodeType?[f]:f);else if(of.test(f)){for(e=e||c.appendChild(t.createElement("div")),y=(ir.exec(f)||["",""])[1].toLowerCase(),l=s[y]||s._default,e.innerHTML=l[1]+f.replace(tr,"<$1><\/$2>")+l[2],a=l[0];a--;)e=e.firstChild;i.merge(v,e.childNodes),e=c.firstChild,e.textContent=""}else v.push(t.createTextNode(f));for(c.textContent="",h=0;f=v[h++];)if((!u||i.inArray(f,u)===-1)&&(p=i.contains(f.ownerDocument,f),e=o(c.appendChild(f),"script"),p&&ti(e),r))for(a=0;f=e[a++];)ur.test(f.type||"")&&r.push(f);return c},cleanData:function(n){for(var s,u,h,o,e,l,v=i.event.special,a=0;(u=n[a])!==t;a++){if(c.accepts(u)&&(e=u[r.expando],e&&(s=r.cache[e]))){if(h=Object.keys(s.events||{}),h.length)for(l=0;(o=h[l])!==t;l++)v[o]?i.event.remove(u,o):i.removeEvent(u,o,s.handle);r.cache[e]&&delete r.cache[e]}delete f.cache[u[f.expando]]}},_evalUrl:function(n){return i.ajax({url:n,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}}),i.fn.extend({wrapAll:function(n){var t;return i.isFunction(n)?this.each(function(t){i(this).wrapAll(n.call(this,t))}):(this[0]&&(t=i(n,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var n=this;n.firstElementChild;)n=n.firstElementChild;return n}).append(this)),this)},wrapInner:function(n){return i.isFunction(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=i.isFunction(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()}});var w,k,pf=/^(none|table(?!-c[ea]).+)/,or=/^margin/,wf=new RegExp("^("+ot+")(.*)$","i"),ii=new RegExp("^("+ot+")(?!px)[a-z%]+$","i"),bf=new RegExp("^([+-])=("+ot+")","i"),sr={BODY:"block"},kf={position:"absolute",visibility:"hidden",display:"block"},hr={letterSpacing:0,fontWeight:400},v=["Top","Right","Bottom","Left"],cr=["Webkit","O","Moz","ms"];i.fn.extend({css:function(n,r){return i.access(this,function(n,r,u){var e,o,s={},f=0;if(i.isArray(r)){for(e=ct(n),o=r.length;f<o;f++)s[r[f]]=i.css(n,r[f],!1,e);return s}return u!==t?i.style(n,r,u):i.css(n,r)},n,r,arguments.length>1)},show:function(){return ar(this,!0)},hide:function(){return ar(this)},toggle:function(n){var t=typeof n=="boolean";return this.each(function(){(t?n:d(this))?i(this).show():i(this).hide()})}}),i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=w(n,"opacity");return i===""?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(n,r,u,f){if(n&&n.nodeType!==3&&n.nodeType!==8&&n.style){var o,s,e,h=i.camelCase(r),c=n.style;if(r=i.cssProps[h]||(i.cssProps[h]=lr(c,h)),e=i.cssHooks[r]||i.cssHooks[h],u!==t){if(s=typeof u,s==="string"&&(o=bf.exec(u))&&(u=(o[1]+1)*o[2]+parseFloat(i.css(n,r)),s="number"),u==null||s==="number"&&isNaN(u))return;s!=="number"||i.cssNumber[h]||(u+="px"),i.support.clearCloneStyle||u!==""||r.indexOf("background")!==0||(c[r]="inherit"),e&&"set"in e&&(u=e.set(n,u,f))===t||(c[r]=u)}else return e&&"get"in e&&(o=e.get(n,!1,f))!==t?o:c[r]}},css:function(n,r,u,f){var e,h,o,s=i.camelCase(r);return(r=i.cssProps[s]||(i.cssProps[s]=lr(n.style,s)),o=i.cssHooks[r]||i.cssHooks[s],o&&"get"in o&&(e=o.get(n,!0,u)),e===t&&(e=w(n,r,f)),e==="normal"&&r in hr&&(e=hr[r]),u===""||u)?(h=parseFloat(e),u===!0||i.isNumeric(h)?h||0:e):e}}),w=function(n,r,u){var s,h,c,o=u||ct(n),e=o?o.getPropertyValue(r)||o[r]:t,f=n.style;return o&&(e!==""||i.contains(n.ownerDocument,n)||(e=i.style(n,r)),ii.test(e)&&or.test(r)&&(s=f.width,h=f.minWidth,c=f.maxWidth,f.minWidth=f.maxWidth=f.width=e,e=o.width,f.width=s,f.minWidth=h,f.maxWidth=c)),e},i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,u){if(r)return n.offsetWidth===0&&pf.test(i.css(n,"display"))?i.swap(n,kf,function(){return pr(n,t,u)}):pr(n,t,u)},set:function(n,r,u){var f=u&&ct(n);return vr(n,r,u?yr(n,t,u,i.support.boxSizing&&i.css(n,"boxSizing",!1,f)==="border-box",f):0)}}}),i(function(){i.support.reliableMarginRight||(i.cssHooks.marginRight={get:function(n,t){if(t)return i.swap(n,{display:"inline-block"},w,[n,"marginRight"])}}),!i.support.pixelPosition&&i.fn.position&&i.each(["top","left"],function(n,t){i.cssHooks[t]={get:function(n,r){if(r)return r=w(n,t),ii.test(r)?i(n).position()[t]+"px":r}}})}),i.expr&&i.expr.filters&&(i.expr.filters.hidden=function(n){return n.offsetWidth<=0&&n.offsetHeight<=0},i.expr.filters.visible=function(n){return!i.expr.filters.hidden(n)}),i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var r=0,f={},u=typeof i=="string"?i.split(" "):[i];r<4;r++)f[n+v[r]+t]=u[r]||u[r-2]||u[0];return f}},or.test(n)||(i.cssHooks[n+t].set=vr)});var gf=/%20/g,ne=/\[\]$/,br=/\r?\n/g,te=/^(?:submit|button|image|reset|file)$/i,ie=/^(?:input|select|textarea|keygen)/i;i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=i.prop(this,"elements");return n?i.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!i(this).is(":disabled")&&ie.test(this.nodeName)&&!te.test(n)&&(this.checked||!rr.test(n))}).map(function(n,t){var r=i(this).val();return r==null?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(br,"\r\n")}}):{name:t.name,value:r.replace(br,"\r\n")}}).get()}}),i.param=function(n,r){var u,f=[],e=function(n,t){t=i.isFunction(t)?t():t==null?"":t,f[f.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(r===t&&(r=i.ajaxSettings&&i.ajaxSettings.traditional),i.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){e(this.name,this.value)});else for(u in n)ri(u,n[u],r,e);return f.join("&").replace(gf,"+")},i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return arguments.length>0?this.on(t,null,n,i):this.trigger(t)}}),i.fn.extend({hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)},bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return arguments.length===1?this.off(n,"**"):this.off(t,n||"**",i)}});var y,l,ui=i.now(),fi=/\?/,re=/#.*$/,kr=/([?&])_=[^&]*/,ue=/^(.*?):[ \t]*([^\r\n]*)$/mg,fe=/^(?:GET|HEAD)$/,ee=/^\/\//,dr=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,gr=i.fn.load,nu={},ei={},tu="*/".concat("*");try{l=hu.href}catch(pe){l=u.createElement("a"),l.href="",l=l.href}y=dr.exec(l.toLowerCase())||[],i.fn.load=function(n,r,u){if(typeof n!="string"&&gr)return gr.apply(this,arguments);var f,s,h,e=this,o=n.indexOf(" ");return o>=0&&(f=n.slice(o),n=n.slice(0,o)),i.isFunction(r)?(u=r,r=t):r&&typeof r=="object"&&(s="POST"),e.length>0&&i.ajax({url:n,type:s,dataType:"html",data:r}).done(function(n){h=arguments,e.html(f?i("<div>").append(i.parseHTML(n)).find(f):n)}).complete(u&&function(n,t){e.each(u,h||[n.responseText,t,n])}),this},i.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){i.fn[t]=function(n){return this.on(t,n)}}),i.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:l,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(y[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":tu,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,t){return t?oi(oi(n,i.ajaxSettings),t):oi(i.ajaxSettings,n)},ajaxPrefilter:iu(nu),ajaxTransport:iu(ei),ajax:function(n,r){function k(n,r,h,l){var v,rt,k,y,w,a=r;o!==2&&(o=2,g&&clearTimeout(g),c=t,d=l||"",f.readyState=n>0?4:0,v=n>=200&&n<300||n===304,h&&(y=oe(u,f,h)),y=se(u,y,f,v),v?(u.ifModified&&(w=f.getResponseHeader("Last-Modified"),w&&(i.lastModified[e]=w),w=f.getResponseHeader("etag"),w&&(i.etag[e]=w)),n===204||u.type==="HEAD"?a="nocontent":n===304?a="notmodified":(a=y.state,rt=y.data,k=y.error,v=!k)):(k=a,(n||!a)&&(a="error",n<0&&(n=0))),f.status=n,f.statusText=(r||a)+"",v?tt.resolveWith(s,[rt,a,f]):tt.rejectWith(s,[f,a,k]),f.statusCode(b),b=t,p&&nt.trigger(v?"ajaxSuccess":"ajaxError",[f,u,v?rt:k]),it.fireWith(s,[f,a]),p&&(nt.trigger("ajaxComplete",[f,u]),--i.active||i.event.trigger("ajaxStop")))}typeof n=="object"&&(r=n,n=t),r=r||{};var c,e,d,w,g,a,p,v,u=i.ajaxSetup({},r),s=u.context||u,nt=u.context&&(s.nodeType||s.jquery)?i(s):i.event,tt=i.Deferred(),it=i.Callbacks("once memory"),b=u.statusCode||{},rt={},ut={},o=0,ft="canceled",f={readyState:0,getResponseHeader:function(n){var t;if(o===2){if(!w)for(w={};t=ue.exec(d);)w[t[1].toLowerCase()]=t[2];t=w[n.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return o===2?d:null},setRequestHeader:function(n,t){var i=n.toLowerCase();return o||(n=ut[i]=ut[i]||n,rt[n]=t),this},overrideMimeType:function(n){return o||(u.mimeType=n),this},statusCode:function(n){var t;if(n)if(o<2)for(t in n)b[t]=[b[t],n[t]];else f.always(n[f.status]);return this},abort:function(n){var t=n||ft;return c&&c.abort(t),k(0,t),this}};if(tt.promise(f).complete=it.add,f.success=f.done,f.error=f.fail,u.url=((n||u.url||l)+"").replace(re,"").replace(ee,y[1]+"//"),u.type=r.method||r.type||u.method||u.type,u.dataTypes=i.trim(u.dataType||"*").toLowerCase().match(h)||[""],u.crossDomain==null&&(a=dr.exec(u.url.toLowerCase()),u.crossDomain=!!(a&&(a[1]!==y[1]||a[2]!==y[2]||(a[3]||(a[1]==="http:"?"80":"443"))!==(y[3]||(y[1]==="http:"?"80":"443"))))),u.data&&u.processData&&typeof u.data!="string"&&(u.data=i.param(u.data,u.traditional)),ru(nu,u,r,f),o===2)return f;p=u.global,p&&i.active++==0&&i.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!fe.test(u.type),e=u.url,u.hasContent||(u.data&&(e=u.url+=(fi.test(e)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=kr.test(e)?e.replace(kr,"$1_="+ui++):e+(fi.test(e)?"&":"?")+"_="+ui++)),u.ifModified&&(i.lastModified[e]&&f.setRequestHeader("If-Modified-Since",i.lastModified[e]),i.etag[e]&&f.setRequestHeader("If-None-Match",i.etag[e])),(u.data&&u.hasContent&&u.contentType!==!1||r.contentType)&&f.setRequestHeader("Content-Type",u.contentType),f.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+(u.dataTypes[0]!=="*"?", "+tu+"; q=0.01":""):u.accepts["*"]);for(v in u.headers)f.setRequestHeader(v,u.headers[v]);if(u.beforeSend&&(u.beforeSend.call(s,f,u)===!1||o===2))return f.abort();ft="abort";for(v in{success:1,error:1,complete:1})f[v](u[v]);if(c=ru(ei,u,r,f),c){f.readyState=1,p&&nt.trigger("ajaxSend",[f,u]),u.async&&u.timeout>0&&(g=setTimeout(function(){f.abort("timeout")},u.timeout));try{o=1,c.send(rt,k)}catch(et){if(o<2)k(-1,et);else throw et;}}else k(-1,"No Transport");return f},getJSON:function(n,t,r){return i.get(n,t,r,"json")},getScript:function(n,r){return i.get(n,t,r,"script")}}),i.each(["get","post"],function(n,r){i[r]=function(n,u,f,e){return i.isFunction(u)&&(e=e||f,f=u,u=t),i.ajax({url:n,type:r,dataType:e,data:u,success:f})}}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(n){return i.globalEval(n),n}}}),i.ajaxPrefilter("script",function(n){n.cache===t&&(n.cache=!1),n.crossDomain&&(n.type="GET")}),i.ajaxTransport("script",function(n){if(n.crossDomain){var r,t;return{send:function(f,e){r=i("<script>").prop({async:!0,charset:n.scriptCharset,src:n.url}).on("load error",t=function(n){r.remove(),t=null,n&&e(n.type==="error"?404:200,n.type)}),u.head.appendChild(r[0])},abort:function(){t&&t()}}}}),si=[],lt=/(=)\?(?=&|$)|\?\?/,i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=si.pop()||i.expando+"_"+ui++;return this[n]=!0,n}}),i.ajaxPrefilter("json jsonp",function(r,u,f){var e,s,o,h=r.jsonp!==!1&&(lt.test(r.url)?"url":typeof r.data=="string"&&!(r.contentType||"").indexOf("application/x-www-form-urlencoded")&&lt.test(r.data)&&"data");if(h||r.dataTypes[0]==="jsonp")return e=r.jsonpCallback=i.isFunction(r.jsonpCallback)?r.jsonpCallback():r.jsonpCallback,h?r[h]=r[h].replace(lt,"$1"+e):r.jsonp!==!1&&(r.url+=(fi.test(r.url)?"&":"?")+r.jsonp+"="+e),r.converters["script json"]=function(){return o||i.error(e+" was not called"),o[0]},r.dataTypes[0]="json",s=n[e],n[e]=function(){o=arguments},f.always(function(){n[e]=s,r[e]&&(r.jsonpCallback=u.jsonpCallback,si.push(e)),o&&i.isFunction(s)&&s(o[0]),o=s=t}),"script"}),i.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(n){}};var g=i.ajaxSettings.xhr(),he={0:200,1223:204},ce=0,nt={};if(n.ActiveXObject)i(n).on("unload",function(){for(var n in nt)nt[n]();nt=t});i.support.cors=!!g&&"withCredentials"in g,i.support.ajax=g=!!g,i.ajaxTransport(function(n){var r;if(i.support.cors||g&&!n.crossDomain)return{send:function(i,u){var e,o,f=n.xhr();if(f.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(e in n.xhrFields)f[e]=n.xhrFields[e];n.mimeType&&f.overrideMimeType&&f.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(e in i)f.setRequestHeader(e,i[e]);r=function(n){return function(){r&&(delete nt[o],r=f.onload=f.onerror=null,n==="abort"?f.abort():n==="error"?u(f.status||404,f.statusText):u(he[f.status]||f.status,f.statusText,typeof f.responseText=="string"?{text:f.responseText}:t,f.getAllResponseHeaders()))}},f.onload=r(),f.onerror=r("error"),r=nt[o=ce++]=r("abort"),f.send(n.hasContent&&n.data||null)},abort:function(){r&&r()}}});var b,at,le=/^(?:toggle|show|hide)$/,uu=new RegExp("^(?:([+-])=|)("+ot+")([a-z%]*)$","i"),ae=/queueHooks$/,vt=[ye],tt={"*":[function(n,t){var f=this.createTween(n,t),s=f.cur(),u=uu.exec(t),e=u&&u[3]||(i.cssNumber[n]?"":"px"),r=(i.cssNumber[n]||e!=="px"&&+s)&&uu.exec(i.css(f.elem,n)),o=1,h=20;if(r&&r[3]!==e){e=e||r[3],u=u||[],r=+s||1;do o=o||".5",r=r/o,i.style(f.elem,n,r+e);while(o!==(o=f.cur()/s)&&o!==1&&--h)}return u&&(r=f.start=+r||+s||0,f.unit=e,f.end=u[1]?r+(u[1]+1)*u[2]:+u[2]),f}]};i.Animation=i.extend(ou,{tweener:function(n,t){i.isFunction(n)?(t=n,n=["*"]):n=n.split(" ");for(var r,u=0,f=n.length;u<f;u++)r=n[u],tt[r]=tt[r]||[],tt[r].unshift(t)},prefilter:function(n,t){t?vt.unshift(n):vt.push(n)}}),i.Tween=e,e.prototype={constructor:e,init:function(n,t,r,u,f,e){this.elem=n,this.prop=r,this.easing=f||"swing",this.options=t,this.start=this.now=this.cur(),this.end=u,this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=e.propHooks[this.prop];return n&&n.get?n.get(this):e.propHooks._default.get(this)},run:function(n){var t,r=e.propHooks[this.prop];return this.pos=this.options.duration?t=i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):t=n,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):e.propHooks._default.set(this),this}},e.prototype.init.prototype=e.prototype,e.propHooks={_default:{get:function(n){var t;return n.elem[n.prop]!=null&&(!n.elem.style||n.elem.style[n.prop]==null)?n.elem[n.prop]:(t=i.css(n.elem,n.prop,""),!t||t==="auto"?0:t)},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):n.elem.style&&(n.elem.style[i.cssProps[n.prop]]!=null||i.cssHooks[n.prop])?i.style(n.elem,n.prop,n.now+n.unit):n.elem[n.prop]=n.now}}},e.propHooks.scrollTop=e.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}},i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(n,i,u){return n==null||typeof n=="boolean"?r.apply(this,arguments):this.animate(yt(t,!0),n,i,u)}}),i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(d).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,u,f){var s=i.isEmptyObject(n),o=i.speed(t,u,f),e=function(){var t=ou(this,i.extend({},n),o);(s||r.get(this,"finish"))&&t.stop(!0)};return e.finish=e,s||o.queue===!1?this.each(e):this.queue(o.queue,e)},stop:function(n,u,f){var e=function(n){var t=n.stop;delete n.stop,t(f)};return typeof n!="string"&&(f=u,u=n,n=t),u&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var s=!0,t=n!=null&&n+"queueHooks",o=i.timers,u=r.get(this);if(t)u[t]&&u[t].stop&&e(u[t]);else for(t in u)u[t]&&u[t].stop&&ae.test(t)&&e(u[t]);for(t=o.length;t--;)o[t].elem===this&&(n==null||o[t].queue===n)&&(o[t].anim.stop(f),s=!1,o.splice(t,1));(s||!f)&&i.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var t,e=r.get(this),u=e[n+"queue"],o=e[n+"queueHooks"],f=i.timers,s=u?u.length:0;for(e.finish=!0,i.queue(this,n,[]),o&&o.stop&&o.stop.call(this,!0),t=f.length;t--;)f[t].elem===this&&f[t].queue===n&&(f[t].anim.stop(!0),f.splice(t,1));for(t=0;t<s;t++)u[t]&&u[t].finish&&u[t].finish.call(this);delete e.finish})}}),i.each({slideDown:yt("show"),slideUp:yt("hide"),slideToggle:yt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}}),i.speed=function(n,t,r){var u=n&&typeof n=="object"?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:typeof u.duration=="number"?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,(u.queue==null||u.queue===!0)&&(u.queue="fx"),u.old=u.complete,u.complete=function(){i.isFunction(u.old)&&u.old.call(this),u.queue&&i.dequeue(this,u.queue)},u},i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2}},i.timers=[],i.fx=e.prototype.init,i.fx.tick=function(){var u,n=i.timers,r=0;for(b=i.now();r<n.length;r++)u=n[r],u()||n[r]!==u||n.splice(r--,1);n.length||i.fx.stop(),b=t},i.fx.timer=function(n){n()&&i.timers.push(n)&&i.fx.start()},i.fx.interval=13,i.fx.start=function(){at||(at=setInterval(i.fx.tick,i.fx.interval))},i.fx.stop=function(){clearInterval(at),at=null},i.fx.speeds={slow:600,fast:200,_default:400},i.fx.step={},i.expr&&i.expr.filters&&(i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length}),i.fn.offset=function(n){if(arguments.length)return n===t?this:this.each(function(t){i.offset.setOffset(this,n,t)});var u,e,r=this[0],f={top:0,left:0},o=r&&r.ownerDocument;if(o)return(u=o.documentElement,!i.contains(u,r))?f:(typeof r.getBoundingClientRect!==rt&&(f=r.getBoundingClientRect()),e=su(o),{top:f.top+e.pageYOffset-u.clientTop,left:f.left+e.pageXOffset-u.clientLeft})},i.offset={setOffset:function(n,t,r){var e,o,s,h,u,c,v,l=i.css(n,"position"),a=i(n),f={};l==="static"&&(n.style.position="relative"),u=a.offset(),s=i.css(n,"top"),c=i.css(n,"left"),v=(l==="absolute"||l==="fixed")&&(s+c).indexOf("auto")>-1,v?(e=a.position(),h=e.top,o=e.left):(h=parseFloat(s)||0,o=parseFloat(c)||0),i.isFunction(t)&&(t=t.call(n,r,u)),t.top!=null&&(f.top=t.top-u.top+h),t.left!=null&&(f.left=t.left-u.left+o),"using"in t?t.using.call(n,f):a.css(f)}},i.fn.extend({position:function(){if(this[0]){var n,r,u=this[0],t={top:0,left:0};return i.css(u,"position")==="fixed"?r=u.getBoundingClientRect():(n=this.offsetParent(),r=this.offset(),i.nodeName(n[0],"html")||(t=n.offset()),t.top+=i.css(n[0],"borderTopWidth",!0),t.left+=i.css(n[0],"borderLeftWidth",!0)),{top:r.top-t.top-i.css(u,"marginTop",!0),left:r.left-t.left-i.css(u,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent||ci;n&&!i.nodeName(n,"html")&&i.css(n,"position")==="static";)n=n.offsetParent;return n||ci})}}),i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(r,u){var f="pageYOffset"===u;i.fn[r]=function(e){return i.access(this,function(i,r,e){var o=su(i);if(e===t)return o?o[u]:i[r];o?o.scrollTo(f?n.pageXOffset:e,f?e:n.pageYOffset):i[r]=e},r,e,arguments.length,null)}}),i.each({Height:"height",Width:"width"},function(n,r){i.each({padding:"inner"+n,content:r,"":"outer"+n},function(u,f){i.fn[f]=function(f,e){var o=arguments.length&&(u||typeof f!="boolean"),s=u||(f===!0||e===!0?"margin":"border");return i.access(this,function(r,u,f){var e;return i.isWindow(r)?r.document.documentElement["client"+n]:r.nodeType===9?(e=r.documentElement,Math.max(r.body["scroll"+n],e["scroll"+n],r.body["offset"+n],e["offset"+n],e["client"+n])):f===t?i.css(r,u,s):i.style(r,u,f,s)},r,o?f:t,o,null)}})}),i.fn.size=function(){return this.length},i.fn.andSelf=i.fn.addBack,typeof module=="object"&&module&&typeof module.exports=="object"?module.exports=i:typeof define=="function"&&define.amd&&define("jquery",[],function(){return i}),typeof n=="object"&&typeof n.document=="object"&&(n.jQuery=n.$=i)})(window),function(n,t,i,r){"use strict";var h=i(n),e=i(t),u=i.fancybox=function(){u.open.apply(this,arguments)},y=navigator.userAgent.match(/msie/),v=null,o=t.createTouch!==r,a=function(n){return n&&n.hasOwnProperty&&n instanceof i},c=function(n){return n&&i.type(n)==="string"},l=function(n){return c(n)&&n.indexOf("%")>0},p=function(n){return n&&!(n.style.overflow&&n.style.overflow==="hidden")&&(n.clientWidth&&n.scrollWidth>n.clientWidth||n.clientHeight&&n.scrollHeight>n.clientHeight)},f=function(n,t){var i=parseInt(n,10)||0;return t&&l(n)&&(i=u.getViewport()[t]/100*i),Math.ceil(i)},s=function(n,t){return f(n,t)+"px"};i.extend(u,{version:"2.1.4",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!o,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(y?' allowtransparency="true"':"")+"><\/iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.<\/p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"><\/a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span><\/span><\/a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span><\/span><\/a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(n,t){if(n)return(i.isPlainObject(t)||(t={}),!1===u.close(!0))?void 0:(i.isArray(n)||(n=a(n)?i(n).get():[n]),i.each(n,function(f,e){var h={},s,p,l,o,v,y,w;i.type(e)==="object"&&(e.nodeType&&(e=i(e)),a(e)?(h={href:e.data("fancybox-href")||e.attr("href"),title:e.data("fancybox-title")||e.attr("title"),isDom:!0,element:e},i.metadata&&i.extend(!0,h,e.metadata())):h=e),s=t.href||h.href||(c(e)?e:null),p=t.title!==r?t.title:h.title||"",l=t.content||h.content,o=l?"html":t.type||h.type,!o&&h.isDom&&(o=e.data("fancybox-type"),o||(v=e.prop("class").match(/fancybox\.(\w+)/),o=v?v[1]:null)),c(s)&&(o||(u.isImage(s)?o="image":u.isSWF(s)?o="swf":s.charAt(0)==="#"?o="inline":c(e)&&(o="html",l=e)),o==="ajax"&&(y=s.split(/\s+/,2),s=y.shift(),w=y.shift())),l||(o==="inline"?s?l=i(c(s)?s.replace(/.*(?=#[^\s]+$)/,""):s):h.isDom&&(l=e):o==="html"?l=s:o||s||!h.isDom||(o="inline",l=e)),i.extend(h,{href:s,type:o,content:l,title:p,selector:w}),n[f]=h}),u.opts=i.extend(!0,{},u.defaults,t),t.keys!==r&&(u.opts.keys=t.keys?i.extend({},u.defaults.keys,t.keys):!1),u.group=n,u._start(u.opts.index))},cancel:function(){var n=u.coming;n&&!1!==u.trigger("onCancel")&&(u.hideLoading(),u.ajaxLoad&&u.ajaxLoad.abort(),u.ajaxLoad=null,u.imgPreload&&(u.imgPreload.onload=u.imgPreload.onerror=null),n.wrap&&n.wrap.stop(!0,!0).trigger("onReset").remove(),u.coming=null,u.current||u._afterZoomOut(n))},close:function(n){(u.cancel(),!1!==u.trigger("beforeClose"))&&(u.unbindEvents(),u.isActive)&&(u.isOpen&&n!==!0?(u.isOpen=u.isOpened=!1,u.isClosing=!0,i(".fancybox-item, .fancybox-nav").remove(),u.wrap.stop(!0,!0).removeClass("fancybox-opened"),u.transitions[u.current.closeMethod]()):(i(".fancybox-wrap").stop(!0).trigger("onReset").remove(),u._afterZoomOut()))},play:function(n){var t=function(){clearTimeout(u.player.timer)},r=function(){t(),u.current&&u.player.isActive&&(u.player.timer=setTimeout(u.next,u.current.playSpeed))},f=function(){t(),i("body").unbind(".player"),u.player.isActive=!1,u.trigger("onPlayEnd")},e=function(){u.current&&(u.current.loop||u.current.index<u.group.length-1)&&(u.player.isActive=!0,i("body").bind({"afterShow.player onUpdate.player":r,"onCancel.player beforeClose.player":f,"beforeLoad.player":t}),r(),u.trigger("onPlayStart"))};n!==!0&&(u.player.isActive||n===!1)?f():e()},next:function(n){var t=u.current;t&&(c(n)||(n=t.direction.next),u.jumpto(t.index+1,n,"next"))},prev:function(n){var t=u.current;t&&(c(n)||(n=t.direction.prev),u.jumpto(t.index-1,n,"prev"))},jumpto:function(n,t,i){var e=u.current;e&&(n=f(n),u.direction=t||e.direction[n>=e.index?"next":"prev"],u.router=i||"jumpto",e.loop&&(n<0&&(n=e.group.length+n%e.group.length),n=n%e.group.length),e.group[n]!==r&&(u.cancel(),u._start(n)))},reposition:function(n,t){var f=u.current,e=f?f.wrap:null,r;e&&(r=u._getPosition(t),n&&n.type==="scroll"?(delete r.position,e.stop(!0,!0).animate(r,200)):(e.css(r),f.pos=i.extend({},f.dim,r)))},update:function(n){var t=n&&n.type,i=!t||t==="orientationchange";(i&&(clearTimeout(v),v=null),u.isOpen&&!v)&&(v=setTimeout(function(){var r=u.current;r&&!u.isClosing&&(u.wrap.removeClass("fancybox-tmp"),(i||t==="load"||t==="resize"&&r.autoResize)&&u._setDimension(),t==="scroll"&&r.canShrink||u.reposition(n),u.trigger("onUpdate"),v=null)},i&&!o?0:300))},toggle:function(n){u.isOpen&&(u.current.fitToView=i.type(n)==="boolean"?n:!u.current.fitToView,o&&(u.wrap.removeAttr("style").addClass("fancybox-tmp"),u.trigger("onUpdate")),u.update())},hideLoading:function(){e.unbind(".loading"),i("#fancybox-loading").remove()},showLoading:function(){var t,n;u.hideLoading(),t=i('<div id="fancybox-loading"><div><\/div><\/div>').click(u.cancel).appendTo("body"),e.bind("keydown.loading",function(n){(n.which||n.keyCode)===27&&(n.preventDefault(),u.cancel())}),u.defaults.fixed||(n=u.getViewport(),t.css({position:"absolute",top:n.h*.5+n.y,left:n.w*.5+n.x}))},getViewport:function(){var i=u.current&&u.current.locked||!1,t={x:h.scrollLeft(),y:h.scrollTop()};return i?(t.w=i[0].clientWidth,t.h=i[0].clientHeight):(t.w=o&&n.innerWidth?n.innerWidth:h.width(),t.h=o&&n.innerHeight?n.innerHeight:h.height()),t},unbindEvents:function(){u.wrap&&a(u.wrap)&&u.wrap.unbind(".fb"),e.unbind(".fb"),h.unbind(".fb")},bindEvents:function(){var n=u.current,t;n&&(h.bind("orientationchange.fb"+(o?"":" resize.fb")+(n.autoCenter&&!n.locked?" scroll.fb":""),u.update),t=n.keys,t&&e.bind("keydown.fb",function(f){var e=f.which||f.keyCode,o=f.target||f.srcElement;if(e===27&&u.coming)return!1;f.ctrlKey||f.altKey||f.shiftKey||f.metaKey||o&&(o.type||i(o).is("[contenteditable]"))||i.each(t,function(t,o){return n.group.length>1&&o[e]!==r?(u[t](o[e]),f.preventDefault(),!1):i.inArray(e,o)>-1?(u[t](),f.preventDefault(),!1):void 0})}),i.fn.mousewheel&&n.mouseWheel&&u.wrap.bind("mousewheel.fb",function(t,r,f,e){for(var h=t.target||null,o=i(h),s=!1;o.length;){if(s||o.is(".fancybox-skin")||o.is(".fancybox-wrap"))break;s=p(o[0]),o=i(o).parent()}r===0||s||u.group.length>1&&!n.canShrink&&(e>0||f>0?u.prev(e>0?"down":"left"):(e<0||f<0)&&u.next(e<0?"up":"right"),t.preventDefault())}))},trigger:function(n,t){var f,r=t||u.coming||u.current;if(r){if(i.isFunction(r[n])&&(f=r[n].apply(r,Array.prototype.slice.call(arguments,1))),f===!1)return!1;r.helpers&&i.each(r.helpers,function(t,f){f&&u.helpers[t]&&i.isFunction(u.helpers[t][n])&&(f=i.extend(!0,{},u.helpers[t].defaults,f),u.helpers[t][n](f,r))}),i.event.trigger(n+".fb")}},isImage:function(n){return c(n)&&n.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i)},isSWF:function(n){return c(n)&&n.match(/\.(swf)((\?|#).*)?$/i)},_start:function(n){var t={},c,l,r,e,h;if(n=f(n),c=u.group[n]||null,!c)return!1;if(t=i.extend(!0,{},u.opts,c),e=t.margin,h=t.padding,i.type(e)==="number"&&(t.margin=[e,e,e,e]),i.type(h)==="number"&&(t.padding=[h,h,h,h]),t.modal&&i.extend(!0,t,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),t.autoSize&&(t.autoWidth=t.autoHeight=!0),t.width==="auto"&&(t.autoWidth=!0),t.height==="auto"&&(t.autoHeight=!0),t.group=u.group,t.index=n,u.coming=t,!1===u.trigger("beforeLoad")){u.coming=null;return}if(r=t.type,l=t.href,!r)return(u.coming=null,u.current&&u.router&&u.router!=="jumpto")?(u.current.index=n,u[u.router](u.direction)):!1;if(u.isActive=!0,(r==="image"||r==="swf")&&(t.autoHeight=t.autoWidth=!1,t.scrolling="visible"),r==="image"&&(t.aspectRatio=!0),r==="iframe"&&o&&(t.scrolling="scroll"),t.wrap=i(t.tpl.wrap).addClass("fancybox-"+(o?"mobile":"desktop")+" fancybox-type-"+r+" fancybox-tmp "+t.wrapCSS).appendTo(t.parent||"body"),i.extend(t,{skin:i(".fancybox-skin",t.wrap),outer:i(".fancybox-outer",t.wrap),inner:i(".fancybox-inner",t.wrap)}),i.each(["Top","Right","Bottom","Left"],function(n,i){t.skin.css("padding"+i,s(t.padding[n]))}),u.trigger("onReady"),r==="inline"||r==="html"){if(!t.content||!t.content.length)return u._error("content")}else if(!l)return u._error("href");r==="image"?u._loadImage():r==="ajax"?u._loadAjax():r==="iframe"?u._loadIframe():u._afterLoad()},_error:function(n){i.extend(u.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:n,content:u.coming.tpl.error}),u._afterLoad()},_loadImage:function(){var n=u.imgPreload=new Image;n.onload=function(){this.onload=this.onerror=null,u.coming.width=this.width,u.coming.height=this.height,u._afterLoad()},n.onerror=function(){this.onload=this.onerror=null,u._error("image")},n.src=u.coming.href,n.complete!==!0&&u.showLoading()},_loadAjax:function(){var n=u.coming;u.showLoading(),u.ajaxLoad=i.ajax(i.extend({},n.ajax,{url:n.href,error:function(n,t){u.coming&&t!=="abort"?u._error("ajax",n):u.hideLoading()},success:function(t,i){i==="success"&&(n.content=t,u._afterLoad())}}))},_loadIframe:function(){var n=u.coming,t=i(n.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",o?"auto":n.iframe.scrolling).attr("src",n.href);if(i(n.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(n){}}),n.iframe.preload){u.showLoading();t.one("load",function(){i(this).data("ready",1),o||i(this).bind("load.fb",u.update),i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),u._afterLoad()})}n.content=t.appendTo(n.inner),n.iframe.preload||u._afterLoad()},_preloadImages:function(){for(var r=u.group,i=u.current,f=r.length,e=i.preload?Math.min(i.preload,f-1):0,n,t=1;t<=e;t+=1)n=r[(i.index+t)%f],n.type==="image"&&n.href&&((new Image).src=n.href)},_afterLoad:function(){var r=u.coming,f=u.current,e="fancybox-placeholder",t,n,c,o,s,h;if(u.hideLoading(),r&&u.isActive!==!1){if(!1===u.trigger("afterLoad",r,f)){r.wrap.stop(!0).trigger("onReset").remove(),u.coming=null;return}f&&(u.trigger("beforeChange",f),f.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),u.unbindEvents(),t=r,n=r.content,c=r.type,o=r.scrolling,i.extend(u,{wrap:t.wrap,skin:t.skin,outer:t.outer,inner:t.inner,current:t,previous:f}),s=t.href;switch(c){case"inline":case"ajax":case"html":t.selector?n=i("<div>").html(n).find(t.selector):a(n)&&(n.data(e)||n.data(e,i('<div class="'+e+'"><\/div>').insertAfter(n).hide()),n=n.show().detach(),t.wrap.bind("onReset",function(){i(this).find(n).length&&n.hide().replaceAll(n.data(e)).data(e,!1)}));break;case"image":n=t.tpl.image.replace("{href}",s);break;case"swf":n='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+s+'"><\/param>',h="",i.each(t.swf,function(t,i){n+='<param name="'+t+'" value="'+i+'"><\/param>',h+=" "+t+'="'+i+'"'}),n+='<embed src="'+s+'" type="application/x-shockwave-flash" width="100%" height="100%"'+h+"><\/embed><\/object>"}a(n)&&n.parent().is(t.inner)||t.inner.append(n),u.trigger("beforeShow"),t.inner.css("overflow",o==="yes"?"scroll":o==="no"?"hidden":o),u._setDimension(),u.reposition(),u.isOpen=!1,u.coming=null,u.bindEvents(),u.isOpened?f.prevMethod&&u.transitions[f.prevMethod]():i(".fancybox-wrap").not(t.wrap).stop(!0).trigger("onReset").remove(),u.transitions[u.isOpened?t.nextMethod:t.openMethod](),u._preloadImages()}},_setDimension:function(){var nt=u.getViewport(),wt=0,vt=!1,st=!1,v=u.wrap,k=u.skin,e=u.inner,r=u.current,n=r.width,t=r.height,o=r.minWidth,h=r.minHeight,c=r.maxWidth,a=r.maxHeight,bt=r.scrolling,ft=r.scrollOutside?r.scrollbarWidth:0,et=r.margin,yt=f(et[1]+et[3]),pt=f(et[0]+et[2]),d,ht,tt,it,p,y,ct,lt,w,g,b,rt,ot,ut,at;if(v.add(k).add(e).width("auto").height("auto").removeClass("fancybox-tmp"),d=f(k.outerWidth(!0)-k.width()),ht=f(k.outerHeight(!0)-k.height()),tt=yt+d,it=pt+ht,p=l(n)?(nt.w-tt)*f(n)/100:n,y=l(t)?(nt.h-it)*f(t)/100:t,r.type==="iframe"){if(ut=r.content,r.autoHeight&&ut.data("ready")===1)try{ut[0].contentWindow.document.location&&(e.width(p).height(9999),at=ut.contents().find("body"),ft&&at.css("overflow-x","hidden"),y=at.height())}catch(kt){}}else(r.autoWidth||r.autoHeight)&&(e.addClass("fancybox-tmp"),r.autoWidth||e.width(p),r.autoHeight||e.height(y),r.autoWidth&&(p=e.width()),r.autoHeight&&(y=e.height()),e.removeClass("fancybox-tmp"));if(n=f(p),t=f(y),w=p/y,o=f(l(o)?f(o,"w")-tt:o),c=f(l(c)?f(c,"w")-tt:c),h=f(l(h)?f(h,"h")-it:h),a=f(l(a)?f(a,"h")-it:a),ct=c,lt=a,r.fitToView&&(c=Math.min(nt.w-tt,c),a=Math.min(nt.h-it,a)),rt=nt.w-yt,ot=nt.h-pt,r.aspectRatio?(n>c&&(n=c,t=f(n/w)),t>a&&(t=a,n=f(t*w)),n<o&&(n=o,t=f(n/w)),t<h&&(t=h,n=f(t*w))):(n=Math.max(o,Math.min(n,c)),r.autoHeight&&r.type!=="iframe"&&(e.width(n),t=e.height()),t=Math.max(h,Math.min(t,a))),r.fitToView)if(e.width(n).height(t),v.width(n+d),g=v.width(),b=v.height(),r.aspectRatio)while((g>rt||b>ot)&&n>o&&t>h){if(wt++>19)break;t=Math.max(h,Math.min(a,t-10)),n=f(t*w),n<o&&(n=o,t=f(n/w)),n>c&&(n=c,t=f(n/w)),e.width(n).height(t),v.width(n+d),g=v.width(),b=v.height()}else n=Math.max(o,Math.min(n,n-(g-rt))),t=Math.max(h,Math.min(t,t-(b-ot)));ft&&bt==="auto"&&t<y&&n+d+ft<rt&&(n+=ft),e.width(n).height(t),v.width(n+d),g=v.width(),b=v.height(),vt=(g>rt||b>ot)&&n>o&&t>h,st=r.aspectRatio?n<ct&&t<lt&&n<p&&t<y:(n<ct||t<lt)&&(n<p||t<y),i.extend(r,{dim:{width:s(g),height:s(b)},origWidth:p,origHeight:y,canShrink:vt,canExpand:st,wPadding:d,hPadding:ht,wrapSpace:b-k.outerHeight(!0),skinSpace:k.height()-t}),!ut&&r.autoHeight&&t>h&&t<a&&!st&&e.height("auto")},_getPosition:function(n){var i=u.current,r=u.getViewport(),f=i.margin,e=u.wrap.width()+f[1]+f[3],o=u.wrap.height()+f[0]+f[2],t={position:"absolute",top:f[0],left:f[3]};return i.autoCenter&&i.fixed&&!n&&o<=r.h&&e<=r.w?t.position="fixed":i.locked||(t.top+=r.y,t.left+=r.x),t.top=s(Math.max(t.top,t.top+(r.h-o)*i.topRatio)),t.left=s(Math.max(t.left,t.left+(r.w-e)*i.leftRatio)),t},_afterZoomIn:function(){var n=u.current;n&&(u.isOpen=u.isOpened=!0,u.wrap.css("overflow","visible").addClass("fancybox-opened"),u.update(),(n.closeClick||n.nextClick&&u.group.length>1)&&u.inner.css("cursor","pointer").bind("click.fb",function(t){i(t.target).is("a")||i(t.target).parent().is("a")||(t.preventDefault(),u[n.closeClick?"close":"next"]())}),n.closeBtn&&i(n.tpl.closeBtn).appendTo(u.skin).bind("click.fb",function(n){n.preventDefault(),u.close()}),n.arrows&&u.group.length>1&&((n.loop||n.index>0)&&i(n.tpl.prev).appendTo(u.outer).bind("click.fb",u.prev),(n.loop||n.index<u.group.length-1)&&i(n.tpl.next).appendTo(u.outer).bind("click.fb",u.next)),u.trigger("afterShow"),n.loop||n.index!==n.group.length-1?u.opts.autoPlay&&!u.player.isActive&&(u.opts.autoPlay=!1,u.play()):u.play(!1))},_afterZoomOut:function(n){n=n||u.current,i(".fancybox-wrap").trigger("onReset").remove(),i.extend(u,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),u.trigger("afterClose",n)}}),u.transitions={getOrigPosition:function(){var n=u.current,f=n.element,t=n.orig,i={},e=50,o=50,h=n.hPadding,c=n.wPadding,r=u.getViewport();return!t&&n.isDom&&f.is(":visible")&&(t=f.find("img:first"),t.length||(t=f)),a(t)?(i=t.offset(),t.is("img")&&(e=t.outerWidth(),o=t.outerHeight())):(i.top=r.y+(r.h-o)*n.topRatio,i.left=r.x+(r.w-e)*n.leftRatio),(u.wrap.css("position")==="fixed"||n.locked)&&(i.top-=r.y,i.left-=r.x),{top:s(i.top-h*n.topRatio),left:s(i.left-c*n.leftRatio),width:s(e+c),height:s(o+h)}},step:function(n,t){var r,s,e,i=t.prop,o=u.current,h=o.wrapSpace,c=o.skinSpace;(i==="width"||i==="height")&&(r=t.end===t.start?1:(n-t.start)/(t.end-t.start),u.isClosing&&(r=1-r),s=i==="width"?o.wPadding:o.hPadding,e=n-s,u.skin[i](f(i==="width"?e:e-h*r)),u.inner[i](f(i==="width"?e:e-h*r-c*r)))},zoomIn:function(){var n=u.current,t=n.pos,r=n.openEffect,f=r==="elastic",e=i.extend({opacity:1},t);delete e.position,f?(t=this.getOrigPosition(),n.openOpacity&&(t.opacity=.1)):r==="fade"&&(t.opacity=.1),u.wrap.css(t).animate(e,{duration:r==="none"?0:n.openSpeed,easing:n.openEasing,step:f?this.step:null,complete:u._afterZoomIn})},zoomOut:function(){var n=u.current,i=n.closeEffect,r=i==="elastic",t={opacity:.1};r&&(t=this.getOrigPosition(),n.closeOpacity&&(t.opacity=.1)),u.wrap.animate(t,{duration:i==="none"?0:n.closeSpeed,easing:n.closeEasing,step:r?this.step:null,complete:u._afterZoomOut})},changeIn:function(){var i=u.current,h=i.nextEffect,t=i.pos,o={opacity:1},r=u.direction,e=200,n;t.opacity=.1,h==="elastic"&&(n=r==="down"||r==="up"?"top":"left",r==="down"||r==="right"?(t[n]=s(f(t[n])-e),o[n]="+="+e+"px"):(t[n]=s(f(t[n])+e),o[n]="-="+e+"px")),h==="none"?u._afterZoomIn():u.wrap.css(t).animate(o,{duration:i.nextSpeed,easing:i.nextEasing,complete:u._afterZoomIn})},changeOut:function(){var n=u.previous,r=n.prevEffect,f={opacity:.1},t=u.direction;r==="elastic"&&(f[t==="down"||t==="up"?"top":"left"]=(t==="up"||t==="left"?"-":"+")+"=200px"),n.wrap.animate(f,{duration:r==="none"?0:n.prevSpeed,easing:n.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}},u.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!o,fixed:!0},overlay:null,fixed:!1,create:function(n){n=i.extend({},this.defaults,n),this.overlay&&this.close(),this.overlay=i('<div class="fancybox-overlay"><\/div>').appendTo("body"),this.fixed=!1,n.fixed&&u.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(n){var t=this;n=i.extend({},this.defaults,n),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(n),this.fixed||(h.bind("resize.overlay",i.proxy(this.update,this)),this.update()),n.closeClick&&this.overlay.bind("click.overlay",function(n){i(n.target).hasClass("fancybox-overlay")&&(u.isActive?u.close():t.close())}),this.overlay.css(n.css).show()},close:function(){i(".fancybox-overlay").remove(),h.unbind("resize.overlay"),this.overlay=null,this.margin!==!1&&(i("body").css("margin-right",this.margin),this.margin=!1),this.el&&this.el.removeClass("fancybox-lock")},update:function(){var n="100%",i;this.overlay.width(n).height("100%"),y?(i=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),e.width()>i&&(n=e.width())):e.width()>h.width()&&(n=e.width()),this.overlay.width(n).height(e.height())},onReady:function(n,r){i(".fancybox-overlay").stop(!0,!0),this.overlay||(this.margin=e.height()>h.height()||i("body").css("overflow-y")==="scroll"?i("body").css("margin-right"):!1,this.el=t.all&&!t.querySelector?i("html"):i("body"),this.create(n)),n.locked&&this.fixed&&(r.locked=this.overlay.append(r.wrap),r.fixed=!1),n.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(n,t){t.locked&&(this.el.addClass("fancybox-lock"),this.margin!==!1&&i("body").css("margin-right",f(this.margin)+t.scrollbarWidth)),this.open(n)},onUpdate:function(){this.fixed||this.update()},afterClose:function(n){this.overlay&&!u.isActive&&this.overlay.fadeOut(n.speedOut,i.proxy(this.close,this))}},u.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(n){var o=u.current,r=o.title,s=n.type,t,e;if(i.isFunction(r)&&(r=r.call(o.element,o)),c(r)&&i.trim(r)!==""){t=i('<div class="fancybox-title fancybox-title-'+s+'-wrap">'+r+"<\/div>");switch(s){case"inside":e=u.skin;break;case"outside":e=u.wrap;break;case"over":e=u.inner;break;default:e=u.skin,t.appendTo("body"),y&&t.width(t.width()),t.wrapInner('<span class="child"><\/span>'),u.current.margin[2]+=Math.abs(f(t.css("margin-bottom")))}t[n.position==="top"?"prependTo":"appendTo"](e)}}},i.fn.fancybox=function(n){var r,f=i(this),t=this.selector||"",o=function(e){var o=i(this).blur(),c=r,h,s;e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||o.is(".fancybox-wrap")||(h=n.groupAttr||"data-fancybox-group",s=o.attr(h),s||(h="rel",s=o.get(0)[h]),s&&s!==""&&s!=="nofollow"&&(o=t.length?i(t):f,o=o.filter("["+h+'="'+s+'"]'),c=o.index(this)),n.index=c,u.open(o,n)!==!1&&e.preventDefault())};return n=n||{},r=n.index||0,t&&n.live!==!1?e.undelegate(t,"click.fb-start").delegate(t+":not('.fancybox-item, .fancybox-nav')","click.fb-start",o):f.unbind("click.fb-start").bind("click.fb-start",o),this.filter("[data-fancybox-start=1]").trigger("click"),this},e.ready(function(){i.scrollbarWidth===r&&(i.scrollbarWidth=function(){var n=i('<div style="width:50px;height:50px;overflow:auto"><div/><\/div>').appendTo("body"),t=n.children(),r=t.innerWidth()-t.height(99).innerWidth();return n.remove(),r}),i.support.fixedPosition===r&&(i.support.fixedPosition=function(){var n=i('<div style="position:fixed;top:20px;"><\/div>').appendTo("body"),t=n[0].offsetTop===20||n[0].offsetTop===15;return n.remove(),t}()),i.extend(u.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")})})}(window,document,jQuery),function(n,t){function i(t,i){var u,f,e,o=t.nodeName.toLowerCase();return"area"===o?(u=t.parentNode,f=u.name,t.href&&f&&"map"===u.nodeName.toLowerCase()?(e=n("img[usemap=#"+f+"]")[0],!!e&&r(e)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&r(t)}function r(t){return n.expr.filters.visible(t)&&!n(t).parents().addBack().filter(function(){return"hidden"===n.css(this,"visibility")}).length}var u=0,f=/^ui-id-\d+$/;n.ui=n.ui||{},n.extend(n.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),n.fn.extend({focus:function(t){return function(i,r){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){n(t).focus(),r&&r.call(t)},i)}):t.apply(this,arguments)}}(n.fn.focus),scrollParent:function(){var t;return t=n.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(n.css(this,"position"))&&/(auto|scroll)/.test(n.css(this,"overflow")+n.css(this,"overflow-y")+n.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(n.css(this,"overflow")+n.css(this,"overflow-y")+n.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?n(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var u,f,r=n(this[0]);r.length&&r[0]!==document;){if(u=r.css("position"),("absolute"===u||"relative"===u||"fixed"===u)&&(f=parseInt(r.css("zIndex"),10),!isNaN(f)&&0!==f))return f;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++u)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&n(this).removeAttr("id")})}}),n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(i){return!!n.data(i,t)}}):function(t,i,r){return!!n.data(t,r[3])},focusable:function(t){return i(t,!isNaN(n.attr(t,"tabindex")))},tabbable:function(t){var r=n.attr(t,"tabindex"),u=isNaN(r);return(u||r>=0)&&i(t,!u)}}),n("<a>").outerWidth(1).jquery||n.each(["Width","Height"],function(i,r){function u(t,i,r,u){return n.each(o,function(){i-=parseFloat(n.css(t,"padding"+this))||0,r&&(i-=parseFloat(n.css(t,"border"+this+"Width"))||0),u&&(i-=parseFloat(n.css(t,"margin"+this))||0)}),i}var o="Width"===r?["Left","Right"]:["Top","Bottom"],f=r.toLowerCase(),e={innerWidth:n.fn.innerWidth,innerHeight:n.fn.innerHeight,outerWidth:n.fn.outerWidth,outerHeight:n.fn.outerHeight};n.fn["inner"+r]=function(i){return i===t?e["inner"+r].call(this):this.each(function(){n(this).css(f,u(this,i)+"px")})},n.fn["outer"+r]=function(t,i){return"number"!=typeof t?e["outer"+r].call(this,t):this.each(function(){n(this).css(f,u(this,t,!0,i)+"px")})}}),n.fn.addBack||(n.fn.addBack=function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}),n("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(n.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,n.camelCase(i)):t.call(this)}}(n.fn.removeData)),n.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),n.support.selectstart="onselectstart"in document.createElement("div"),n.fn.extend({disableSelection:function(){return this.bind((n.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(n){n.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),n.extend(n.ui,{plugin:{add:function(t,i,r){var u,f=n.ui[t].prototype;for(u in r)f.plugins[u]=f.plugins[u]||[],f.plugins[u].push([i,r[u]])},call:function(n,t,i){var r,u=n.plugins[t];if(u&&n.element[0].parentNode&&11!==n.element[0].parentNode.nodeType)for(r=0;u.length>r;r++)n.options[u[r][0]]&&u[r][1].apply(n.element,i)}},hasScroll:function(t,i){if("hidden"===n(t).css("overflow"))return!1;var r=i&&"left"===i?"scrollLeft":"scrollTop",u=!1;return t[r]>0?!0:(t[r]=1,u=t[r]>0,t[r]=0,u)}})}(jQuery),function(n,t){var r=0,i=Array.prototype.slice,u=n.cleanData;n.cleanData=function(t){for(var i,r=0;null!=(i=t[r]);r++)try{n(i).triggerHandler("remove")}catch(f){}u(t)},n.widget=function(i,r,u){var h,e,f,s,c={},o=i.split(".")[0];i=i.split(".")[1],h=o+"-"+i,u||(u=r,r=n.Widget),n.expr[":"][h.toLowerCase()]=function(t){return!!n.data(t,h)},n[o]=n[o]||{},e=n[o][i],f=n[o][i]=function(n,i){return this._createWidget?(arguments.length&&this._createWidget(n,i),t):new f(n,i)},n.extend(f,e,{version:u.version,_proto:n.extend({},u),_childConstructors:[]}),s=new r,s.options=n.widget.extend({},s.options),n.each(u,function(i,u){return n.isFunction(u)?(c[i]=function(){var n=function(){return r.prototype[i].apply(this,arguments)},t=function(n){return r.prototype[i].apply(this,n)};return function(){var i,r=this._super,f=this._superApply;return this._super=n,this._superApply=t,i=u.apply(this,arguments),this._super=r,this._superApply=f,i}}(),t):(c[i]=u,t)}),f.prototype=n.widget.extend(s,{widgetEventPrefix:e?s.widgetEventPrefix:i},c,{constructor:f,namespace:o,widgetName:i,widgetFullName:h}),e?(n.each(e._childConstructors,function(t,i){var r=i.prototype;n.widget(r.namespace+"."+r.widgetName,f,i._proto)}),delete e._childConstructors):r._childConstructors.push(f),n.widget.bridge(i,f)},n.widget.extend=function(r){for(var u,f,o=i.call(arguments,1),e=0,s=o.length;s>e;e++)for(u in o[e])f=o[e][u],o[e].hasOwnProperty(u)&&f!==t&&(r[u]=n.isPlainObject(f)?n.isPlainObject(r[u])?n.widget.extend({},r[u],f):n.widget.extend({},f):f);return r},n.widget.bridge=function(r,u){var f=u.prototype.widgetFullName||r;n.fn[r]=function(e){var h="string"==typeof e,o=i.call(arguments,1),s=this;return e=!h&&o.length?n.widget.extend.apply(null,[e].concat(o)):e,h?this.each(function(){var i,u=n.data(this,f);return u?n.isFunction(u[e])&&"_"!==e.charAt(0)?(i=u[e].apply(u,o),i!==u&&i!==t?(s=i&&i.jquery?s.pushStack(i.get()):i,!1):t):n.error("no such method '"+e+"' for "+r+" widget instance"):n.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+e+"'")}):this.each(function(){var t=n.data(this,f);t?t.option(e||{})._init():n.data(this,f,new u(e,this))}),s}},n.Widget=function(){},n.Widget._childConstructors=[],n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=n(i||this.defaultElement||this)[0],this.element=n(i),this.uuid=r++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=n.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=n(),this.hoverable=n(),this.focusable=n(),i!==this&&(n.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(n){n.target===i&&this.destroy()}}),this.document=n(i.style?i.ownerDocument:i.document||i),this.window=n(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:n.noop,_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(n.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:n.noop,widget:function(){return this.element},option:function(i,r){var u,f,e,o=i;if(0===arguments.length)return n.widget.extend({},this.options);if("string"==typeof i)if(o={},u=i.split("."),i=u.shift(),u.length){for(f=o[i]=n.widget.extend({},this.options[i]),e=0;u.length-1>e;e++)f[u[e]]=f[u[e]]||{},f=f[u[e]];if(i=u.pop(),r===t)return f[i]===t?null:f[i];f[i]=r}else{if(r===t)return this.options[i]===t?null:this.options[i];o[i]=r}return this._setOptions(o),this},_setOptions:function(n){var t;for(t in n)this._setOption(t,n[t]);return this},_setOption:function(n,t){return this.options[n]=t,"disabled"===n&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,r,u){var e,f=this;"boolean"!=typeof i&&(u=r,r=i,i=!1),u?(r=e=n(r),this.bindings=this.bindings.add(r)):(u=r,r=this.element,e=this.widget()),n.each(u,function(u,o){function s(){return i||f.options.disabled!==!0&&!n(this).hasClass("ui-state-disabled")?("string"==typeof o?f[o]:o).apply(f,arguments):t}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||n.guid++);var h=u.match(/^(\w+)\s*(.*)$/),c=h[1]+f.eventNamespace,l=h[2];l?e.delegate(l,c,s):r.bind(c,s)})},_off:function(n,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,n.unbind(t).undelegate(t)},_delay:function(n,t){function r(){return("string"==typeof n?i[n]:n).apply(i,arguments)}var i=this;return setTimeout(r,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){n(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){n(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){n(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){n(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,r){var u,f,e=this.options[t];if(r=r||{},i=n.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],f=i.originalEvent)for(u in f)u in i||(i[u]=f[u]);return this.element.trigger(i,r),!(n.isFunction(e)&&e.apply(this.element[0],[i].concat(r))===!1||i.isDefaultPrevented())}},n.each({show:"fadeIn",hide:"fadeOut"},function(t,i){n.Widget.prototype["_"+t]=function(r,u,f){"string"==typeof u&&(u={effect:u});var o,e=u?u===!0||"number"==typeof u?i:u.effect||i:t;u=u||{},"number"==typeof u&&(u={duration:u}),o=!n.isEmptyObject(u),u.complete=f,u.delay&&r.delay(u.delay),o&&n.effects&&n.effects.effect[e]?r[t](u):e!==t&&r[e]?r[e](u.duration,u.easing,f):r.queue(function(i){n(this)[t](),f&&f.call(r[0]),i()})}})}(jQuery),function(n){var t=!1;n(document).mouseup(function(){t=!1}),n.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(n){return t._mouseDown(n)}).bind("click."+this.widgetName,function(i){return!0===n.data(i.target,t.widgetName+".preventClickEvent")?(n.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&n(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var r=this,u=1===i.which,f="string"==typeof this.options.cancel&&i.target.nodeName?n(i.target).closest(this.options.cancel).length:!1;return u&&!f&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===n.data(i.target,this.widgetName+".preventClickEvent")&&n.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(n){return r._mouseMove(n)},this._mouseUpDelegate=function(n){return r._mouseUp(n)},n(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return n.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return n(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&n.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(n){return Math.max(Math.abs(this._mouseDownEvent.pageX-n.pageX),Math.abs(this._mouseDownEvent.pageY-n.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(n){n.widget("ui.draggable",n.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||n(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(n(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){n("<div class='ui-draggable-iframeFix' style='background: #fff;'><\/div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(n(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),n.ui.ddmanager&&(n.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),n.ui.ddmanager&&n.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var r=this,i=!1;return n.ui.ddmanager&&!this.options.dropBehaviour&&(i=n.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"original"!==this.options.helper||n.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||n.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?n(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return n("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),n.ui.ddmanager&&n.ui.ddmanager.dragStop(this,t),n.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!n(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var r=this.options,i=n.isFunction(r.helper)?n(r.helper.apply(this.element[0],[t])):"clone"===r.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===r.appendTo?this.element[0].parentNode:r.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),n.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&n.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var n=this.element.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var u,t,i,r=this.options;return r.containment?"window"===r.containment?(this.containment=[n(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,n(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,n(window).scrollLeft()+n(window).width()-this.helperProportions.width-this.margins.left,n(window).scrollTop()+(n(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===r.containment?(this.containment=[0,0,n(document).width()-this.helperProportions.width-this.margins.left,(n(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):r.containment.constructor===Array?(this.containment=r.containment,undefined):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),t=n(r.containment),i=t[0],i&&(u="hidden"!==t.css("overflow"),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(u?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(u?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=t),undefined):(this.containment=null,undefined)},_convertPositionTo:function(t,i){i||(i=this.position);var r="absolute"===t?1:-1,u="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:u.scrollTop(),left:u.scrollLeft()}),{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*r,left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*r}},_generatePosition:function(t){var i,e,u,f,r=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=t.pageX,s=t.pageY;return this.offset.scroll||(this.offset.scroll={top:h.scrollTop(),left:h.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(e=this.relative_container.offset(),i=[this.containment[0]+e.left,this.containment[1]+e.top,this.containment[2]+e.left,this.containment[3]+e.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(o=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(s=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(o=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(s=i[3]+this.offset.click.top)),r.grid&&(u=r.grid[1]?this.originalPageY+Math.round((s-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,s=i?u-this.offset.click.top>=i[1]||u-this.offset.click.top>i[3]?u:u-this.offset.click.top>=i[1]?u-r.grid[1]:u+r.grid[1]:u,f=r.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,o=i?f-this.offset.click.left>=i[0]||f-this.offset.click.left>i[2]?f:f-this.offset.click.left>=i[0]?f-r.grid[0]:f+r.grid[0]:f)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,r){return r=r||this._uiHash(),n.ui.plugin.call(this,t,[i,r]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),n.Widget.prototype._trigger.call(this,t,i,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),n.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var r=n(this).data("ui-draggable"),u=r.options,f=n.extend({},i,{item:r.element});r.sortables=[],n(u.connectToSortable).each(function(){var i=n.data(this,"ui-sortable");i&&!i.options.disabled&&(r.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,f))})},stop:function(t,i){var r=n(this).data("ui-draggable"),u=n.extend({},i,{item:r.element});n.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===r.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,u))})},drag:function(t,i){var r=n(this).data("ui-draggable"),u=this;n.each(r.sortables,function(){var f=!1,e=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,n.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==e&&this.instance._intersectsWith(this.instance.containerCache)&&n.contains(e.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=n(u).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),n.ui.plugin.add("draggable","cursor",{start:function(){var t=n("body"),i=n(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=n(this).data("ui-draggable").options;t._cursor&&n("body").css("cursor",t._cursor)}}),n.ui.plugin.add("draggable","opacity",{start:function(t,i){var r=n(i.helper),u=n(this).data("ui-draggable").options;r.css("opacity")&&(u._opacity=r.css("opacity")),r.css("opacity",u.opacity)},stop:function(t,i){var r=n(this).data("ui-draggable").options;r._opacity&&n(i.helper).css("opacity",r._opacity)}}),n.ui.plugin.add("draggable","scroll",{start:function(){var t=n(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var r=n(this).data("ui-draggable"),i=r.options,u=!1;r.scrollParent[0]!==document&&"HTML"!==r.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=u=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=u=r.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=u=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=u=r.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-n(document).scrollTop()<i.scrollSensitivity?u=n(document).scrollTop(n(document).scrollTop()-i.scrollSpeed):n(window).height()-(t.pageY-n(document).scrollTop())<i.scrollSensitivity&&(u=n(document).scrollTop(n(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-n(document).scrollLeft()<i.scrollSensitivity?u=n(document).scrollLeft(n(document).scrollLeft()-i.scrollSpeed):n(window).width()-(t.pageX-n(document).scrollLeft())<i.scrollSensitivity&&(u=n(document).scrollLeft(n(document).scrollLeft()+i.scrollSpeed)))),u!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(r,t)}}),n.ui.plugin.add("draggable","snap",{start:function(){var t=n(this).data("ui-draggable"),i=t.options;t.snapElements=[],n(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=n(this),r=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:r.top,left:r.left})})},drag:function(t,i){for(var e,o,s,h,c,a,l,v,w,r=n(this).data("ui-draggable"),b=r.options,f=b.snapTolerance,y=i.offset.left,k=y+r.helperProportions.width,p=i.offset.top,d=p+r.helperProportions.height,u=r.snapElements.length-1;u>=0;u--)c=r.snapElements[u].left,a=c+r.snapElements[u].width,l=r.snapElements[u].top,v=l+r.snapElements[u].height,c-f>k||y>a+f||l-f>d||p>v+f||!n.contains(r.snapElements[u].item.ownerDocument,r.snapElements[u].item)?(r.snapElements[u].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item})),r.snapElements[u].snapping=!1):("inner"!==b.snapMode&&(e=f>=Math.abs(l-d),o=f>=Math.abs(v-p),s=f>=Math.abs(c-k),h=f>=Math.abs(a-y),e&&(i.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top-r.margins.top),o&&(i.position.top=r._convertPositionTo("relative",{top:v,left:0}).top-r.margins.top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:a}).left-r.margins.left)),w=e||o||s||h,"outer"!==b.snapMode&&(e=f>=Math.abs(l-p),o=f>=Math.abs(v-d),s=f>=Math.abs(c-y),h=f>=Math.abs(a-k),e&&(i.position.top=r._convertPositionTo("relative",{top:l,left:0}).top-r.margins.top),o&&(i.position.top=r._convertPositionTo("relative",{top:v-r.helperProportions.height,left:0}).top-r.margins.top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:a-r.helperProportions.width}).left-r.margins.left)),!r.snapElements[u].snapping&&(e||o||s||h||w)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item})),r.snapElements[u].snapping=e||o||s||h||w)}}),n.ui.plugin.add("draggable","stack",{start:function(){var i,r=this.data("ui-draggable").options,t=n.makeArray(n(r.stack)).sort(function(t,i){return(parseInt(n(t).css("zIndex"),10)||0)-(parseInt(n(i).css("zIndex"),10)||0)});t.length&&(i=parseInt(n(t[0]).css("zIndex"),10)||0,n(t).each(function(t){n(this).css("zIndex",i+t)}),this.css("zIndex",i+t.length))}}),n.ui.plugin.add("draggable","zIndex",{start:function(t,i){var r=n(i.helper),u=n(this).data("ui-draggable").options;r.css("zIndex")&&(u._zIndex=r.css("zIndex")),r.css("zIndex",u.zIndex)},stop:function(t,i){var r=n(this).data("ui-draggable").options;r._zIndex&&n(i.helper).css("zIndex",r._zIndex)}})}(jQuery),function(n){function t(n,t,i){return n>t&&t+i>n}n.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=n.isFunction(i)?i:function(n){return n.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},n.ui.ddmanager.droppables[t.scope]=n.ui.ddmanager.droppables[t.scope]||[],n.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=n.ui.ddmanager.droppables[this.options.scope];i.length>t;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=n.isFunction(i)?i:function(n){return n.is(i)}),n.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=n.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=n.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var r=i||n.ui.ddmanager.current,u=!1;return r&&(r.currentItem||r.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=n.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&n.ui.intersect(r,n.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(u=!0,!1):undefined}),u?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1):!1},ui:function(n){return{draggable:n.currentItem||n.element,helper:n.helper,position:n.position,offset:n.positionAbs}}}),n.ui.intersect=function(n,i,r){if(!i.offset)return!1;var a,v,e=(n.positionAbs||n.position.absolute).left,s=e+n.helperProportions.width,o=(n.positionAbs||n.position.absolute).top,h=o+n.helperProportions.height,u=i.offset.left,c=u+i.proportions.width,f=i.offset.top,l=f+i.proportions.height;switch(r){case"fit":return e>=u&&c>=s&&o>=f&&l>=h;case"intersect":return e+n.helperProportions.width/2>u&&c>s-n.helperProportions.width/2&&o+n.helperProportions.height/2>f&&l>h-n.helperProportions.height/2;case"pointer":return a=(n.positionAbs||n.position.absolute).left+(n.clickOffset||n.offset.click).left,v=(n.positionAbs||n.position.absolute).top+(n.clickOffset||n.offset.click).top,t(v,f,i.proportions.height)&&t(a,u,i.proportions.width);case"touch":return(o>=f&&l>=o||h>=f&&l>=h||f>o&&h>l)&&(e>=u&&c>=e||s>=u&&c>=s||u>e&&s>c);default:return!1}},n.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var r,f,u=n.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,e=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();n:for(r=0;u.length>r;r++)if(!(u[r].options.disabled||t&&!u[r].accept.call(u[r].element[0],t.currentItem||t.element))){for(f=0;e.length>f;f++)if(e[f]===u[r].element[0]){u[r].proportions.height=0;continue n}u[r].visible="none"!==u[r].element.css("display"),u[r].visible&&("mousedown"===o&&u[r]._activate.call(u[r],i),u[r].offset=u[r].element.offset(),u[r].proportions={width:u[r].element[0].offsetWidth,height:u[r].element[0].offsetHeight})}},drop:function(t,i){var r=!1;return n.each((n.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&n.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,i)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),r},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&n.ui.ddmanager.prepareOffsets(t,i),n.each(n.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,e,f,o=n.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;u&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return n.data(this,"ui-droppable").options.scope===e}),f.length&&(r=n.data(f[0],"ui-droppable"),r.greedyChild="isover"===u)),r&&"isover"===u&&(r.isover=!1,r.isout=!0,r._out.call(r,i)),this[u]=!0,this["isout"===u?"isover":"isout"]=!1,this["isover"===u?"_over":"_out"].call(this,i),r&&"isout"===u&&(r.isout=!1,r.isover=!0,r._over.call(r,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(n){function i(n){return parseInt(n,10)||0}function t(n){return!isNaN(parseInt(n,10))}n.widget("ui.resizable",n.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,f,r,i,o,u=this,t=this.options;if(this.element.addClass("ui-resizable"),n.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(n("<div class='ui-wrapper' style='overflow: hidden;'><\/div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=t.handles||(n(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},f=0;e.length>f;f++)r=n.trim(e[f]),o="ui-resizable-"+r,i=n("<div class='ui-resizable-handle "+o+"'><\/div>"),i.css({zIndex:t.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i);this._renderAxis=function(t){var i,r,u,f;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=n(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=n(this.handles[i],this.element),f=/sw|ne|nw|se|n|s/.test(i)?r.outerHeight():r.outerWidth(),u=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(u,f),this._proportionallyResize()),n(this.handles[i]).length},this._renderAxis(this.element),this._handles=n(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){u.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),u.axis=i&&i[1]?i[1]:"se")}),t.autoHide&&(this._handles.hide(),n(this.element).addClass("ui-resizable-autohide").mouseenter(function(){t.disabled||(n(this).removeClass("ui-resizable-autohide"),u._handles.show())}).mouseleave(function(){t.disabled||u.resizing||(n(this).addClass("ui-resizable-autohide"),u._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){n(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var r,i,u=!1;for(r in this.handles)i=n(this.handles[r])[0],(i===t.target||n.contains(i,t.target))&&(u=!0);return!this.options.disabled&&u},_mouseStart:function(t){var f,e,o,u=this.options,s=this.element.position(),r=this.element;return this.resizing=!0,/absolute/.test(r.css("position"))?r.css({position:"absolute",top:r.css("top"),left:r.css("left")}):r.is(".ui-draggable")&&r.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy(),f=i(this.helper.css("left")),e=i(this.helper.css("top")),u.containment&&(f+=n(u.containment).scrollLeft()||0,e+=n(u.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:f,top:e},this.size=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalPosition={left:f,top:e},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof u.aspectRatio?u.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=n(".ui-resizable-"+this.axis).css("cursor"),n("body").css("cursor","auto"===o?this.axis+"-resize":o),r.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,e=this.helper,r={},u=this.originalMousePosition,o=this.axis,s=this.position.top,h=this.position.left,c=this.size.width,l=this.size.height,a=t.pageX-u.left||0,v=t.pageY-u.top||0,f=this._change[o];return f?(i=f.apply(this,[t,a,v]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==s&&(r.top=this.position.top+"px"),this.position.left!==h&&(r.left=this.position.left+"px"),this.size.width!==c&&(r.width=this.size.width+"px"),this.size.height!==l&&(r.height=this.size.height+"px"),e.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),n.isEmptyObject(r)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var r,u,f,e,o,s,h,c=this.options,i=this;return this._helper&&(r=this._proportionallyResizeElements,u=r.length&&/textarea/i.test(r[0].nodeName),f=u&&n.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,e=u?0:i.sizeDiff.width,o={width:i.helper.width()-e,height:i.helper.height()-f},s=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,h=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null,c.animate||this.element.css(n.extend(o,{top:h,left:s})),i.helper.height(i.size.height),i.helper.width(i.size.width),this._helper&&!c.animate&&this._proportionallyResize()),n("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(n){var u,f,e,o,i,r=this.options;i={minWidth:t(r.minWidth)?r.minWidth:0,maxWidth:t(r.maxWidth)?r.maxWidth:1/0,minHeight:t(r.minHeight)?r.minHeight:0,maxHeight:t(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||n)&&(u=i.minHeight*this.aspectRatio,e=i.minWidth/this.aspectRatio,f=i.maxHeight*this.aspectRatio,o=i.maxWidth/this.aspectRatio,u>i.minWidth&&(i.minWidth=u),e>i.minHeight&&(i.minHeight=e),i.maxWidth>f&&(i.maxWidth=f),i.maxHeight>o&&(i.maxHeight=o)),this._vBoundaries=i},_updateCache:function(n){this.offset=this.helper.offset(),t(n.left)&&(this.position.left=n.left),t(n.top)&&(this.position.top=n.top),t(n.height)&&(this.size.height=n.height),t(n.width)&&(this.size.width=n.width)},_updateRatio:function(n){var i=this.position,r=this.size,u=this.axis;return t(n.height)?n.width=n.height*this.aspectRatio:t(n.width)&&(n.height=n.width/this.aspectRatio),"sw"===u&&(n.left=i.left+(r.width-n.width),n.top=null),"nw"===u&&(n.top=i.top+(r.height-n.height),n.left=i.left+(r.width-n.width)),n},_respectSize:function(n){var i=this._vBoundaries,r=this.axis,u=t(n.width)&&i.maxWidth&&i.maxWidth<n.width,f=t(n.height)&&i.maxHeight&&i.maxHeight<n.height,e=t(n.width)&&i.minWidth&&i.minWidth>n.width,o=t(n.height)&&i.minHeight&&i.minHeight>n.height,s=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,c=/sw|nw|w/.test(r),l=/nw|ne|n/.test(r);return e&&(n.width=i.minWidth),o&&(n.height=i.minHeight),u&&(n.width=i.maxWidth),f&&(n.height=i.maxHeight),e&&c&&(n.left=s-i.minWidth),u&&c&&(n.left=s-i.maxWidth),o&&l&&(n.top=h-i.minHeight),f&&l&&(n.top=h-i.maxHeight),n.width||n.height||n.left||!n.top?n.width||n.height||n.top||!n.left||(n.left=null):n.top=null,n},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,r,u,n,f=this.helper||this.element,i=0;this._proportionallyResizeElements.length>i;i++){if(n=this._proportionallyResizeElements[i],!this.borderDif)for(this.borderDif=[],r=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],u=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],t=0;r.length>t;t++)this.borderDif[t]=(parseInt(r[t],10)||0)+(parseInt(u[t],10)||0);n.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||n("<div style='overflow:hidden;'><\/div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(n,t){return{width:this.originalSize.width+t}},w:function(n,t){var i=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:i.width-t}},n:function(n,t,i){var r=this.originalSize,u=this.originalPosition;return{top:u.top+i,height:r.height-i}},s:function(n,t,i){return{height:this.originalSize.height+i}},se:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},sw:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,r]))},ne:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},nw:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,r]))}},_propagate:function(t,i){n.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),n.ui.plugin.add("resizable","animate",{stop:function(t){var i=n(this).data("ui-resizable"),u=i.options,r=i._proportionallyResizeElements,f=r.length&&/textarea/i.test(r[0].nodeName),s=f&&n.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,h=f?0:i.sizeDiff.width,c={width:i.size.width-h,height:i.size.height-s},e=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,o=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(n.extend(c,o&&e?{top:o,left:e}:{}),{duration:u.animateDuration,easing:u.animateEasing,step:function(){var u={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&n(r[0]).css({width:u.width,height:u.height}),i._updateCache(u),i._propagate("resize",t)}})}}),n.ui.plugin.add("resizable","containment",{start:function(){var u,e,o,s,h,c,l,t=n(this).data("ui-resizable"),a=t.options,v=t.element,f=a.containment,r=f instanceof n?f.get(0):/parent/.test(f)?v.parent().get(0):f;r&&(t.containerElement=n(r),/document/.test(f)||f===document?(t.containerOffset={left:0,top:0},t.containerPosition={left:0,top:0},t.parentData={element:n(document),left:0,top:0,width:n(document).width(),height:n(document).height()||document.body.parentNode.scrollHeight}):(u=n(r),e=[],n(["Top","Right","Left","Bottom"]).each(function(n,t){e[n]=i(u.css("padding"+t))}),t.containerOffset=u.offset(),t.containerPosition=u.position(),t.containerSize={height:u.innerHeight()-e[3],width:u.innerWidth()-e[1]},o=t.containerOffset,s=t.containerSize.height,h=t.containerSize.width,c=n.ui.hasScroll(r,"left")?r.scrollWidth:h,l=n.ui.hasScroll(r)?r.scrollHeight:s,t.parentData={element:r,left:o.left,top:o.top,width:c,height:l}))},resize:function(t){var f,o,s,h,i=n(this).data("ui-resizable"),a=i.options,r=i.containerOffset,c=i.position,e=i._aspectRatio||t.shiftKey,u={top:0,left:0},l=i.containerElement;l[0]!==document&&/static/.test(l.css("position"))&&(u=r),c.left<(i._helper?r.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-r.left:i.position.left-u.left),e&&(i.size.height=i.size.width/i.aspectRatio),i.position.left=a.helper?r.left:0),c.top<(i._helper?r.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-r.top:i.position.top),e&&(i.size.width=i.size.height*i.aspectRatio),i.position.top=i._helper?r.top:0),i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top,f=Math.abs((i._helper?i.offset.left-u.left:i.offset.left-u.left)+i.sizeDiff.width),o=Math.abs((i._helper?i.offset.top-u.top:i.offset.top-r.top)+i.sizeDiff.height),s=i.containerElement.get(0)===i.element.parent().get(0),h=/relative|absolute/.test(i.containerElement.css("position")),s&&h&&(f-=i.parentData.left),f+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-f,e&&(i.size.height=i.size.width/i.aspectRatio)),o+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-o,e&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var t=n(this).data("ui-resizable"),r=t.options,u=t.containerOffset,f=t.containerPosition,e=t.containerElement,i=n(t.helper),o=i.offset(),s=i.outerWidth()-t.sizeDiff.width,h=i.outerHeight()-t.sizeDiff.height;t._helper&&!r.animate&&/relative/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h}),t._helper&&!r.animate&&/static/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h})}}),n.ui.plugin.add("resizable","alsoResize",{start:function(){var r=n(this).data("ui-resizable"),t=r.options,i=function(t){n(t).each(function(){var t=n(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof t.alsoResize||t.alsoResize.parentNode?i(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],i(t.alsoResize)):n.each(t.alsoResize,function(n){i(n)})},resize:function(t,i){var r=n(this).data("ui-resizable"),u=r.options,f=r.originalSize,e=r.originalPosition,s={height:r.size.height-f.height||0,width:r.size.width-f.width||0,top:r.position.top-e.top||0,left:r.position.left-e.left||0},o=function(t,r){n(t).each(function(){var t=n(this),f=n(this).data("ui-resizable-alsoresize"),u={},e=r&&r.length?r:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];n.each(e,function(n,t){var i=(f[t]||0)+(s[t]||0);i&&i>=0&&(u[t]=i||null)}),t.css(u)})};"object"!=typeof u.alsoResize||u.alsoResize.nodeType?o(u.alsoResize):n.each(u.alsoResize,function(n,t){o(n,t)})},stop:function(){n(this).removeData("resizable-alsoresize")}}),n.ui.plugin.add("resizable","ghost",{start:function(){var t=n(this).data("ui-resizable"),i=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=n(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=n(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),n.ui.plugin.add("resizable","grid",{resize:function(){var t=n(this).data("ui-resizable"),i=t.options,v=t.size,f=t.originalSize,e=t.originalPosition,h=t.axis,c="number"==typeof i.grid?[i.grid,i.grid]:i.grid,o=c[0]||1,s=c[1]||1,l=Math.round((v.width-f.width)/o)*o,a=Math.round((v.height-f.height)/s)*s,r=f.width+l,u=f.height+a,y=i.maxWidth&&r>i.maxWidth,p=i.maxHeight&&u>i.maxHeight,w=i.minWidth&&i.minWidth>r,b=i.minHeight&&i.minHeight>u;i.grid=c,w&&(r+=o),b&&(u+=s),y&&(r-=o),p&&(u-=s),/^(se|s|e)$/.test(h)?(t.size.width=r,t.size.height=u):/^(ne)$/.test(h)?(t.size.width=r,t.size.height=u,t.position.top=e.top-a):/^(sw)$/.test(h)?(t.size.width=r,t.size.height=u,t.position.left=e.left-l):(t.size.width=r,t.size.height=u,t.position.top=e.top-a,t.position.left=e.left-l)}})}(jQuery),function(n){n.widget("ui.selectable",n.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=n(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=n(this),i=t.offset();n.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=n("<div class='ui-selectable-helper'><\/div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,r=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=n(r.filter,this.element[0]),this._trigger("start",t),n(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=n.data(this,"selectable-item");r.startselected=!0,t.metaKey||t.ctrlKey||(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,i._trigger("unselecting",t,{unselecting:r.element}))}),n(t.target).parents().addBack().each(function(){var u,r=n.data(this,"selectable-item");return r?(u=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected"),r.$element.removeClass(u?"ui-unselecting":"ui-selected").addClass(u?"ui-selecting":"ui-unselecting"),r.unselecting=!u,r.selecting=u,r.selected=u,u?i._trigger("selecting",t,{selecting:r.element}):i._trigger("unselecting",t,{unselecting:r.element}),!1):undefined}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var e,o=this,s=this.options,i=this.opos[0],r=this.opos[1],u=t.pageX,f=t.pageY;return i>u&&(e=u,u=i,i=e),r>f&&(e=f,f=r,r=e),this.helper.css({left:i,top:r,width:u-i,height:f-r}),this.selectees.each(function(){var e=n.data(this,"selectable-item"),h=!1;e&&e.element!==o.element[0]&&("touch"===s.tolerance?h=!(e.left>u||i>e.right||e.top>f||r>e.bottom):"fit"===s.tolerance&&(h=e.left>i&&u>e.right&&e.top>r&&f>e.bottom),h?(e.selected&&(e.$element.removeClass("ui-selected"),e.selected=!1),e.unselecting&&(e.$element.removeClass("ui-unselecting"),e.unselecting=!1),e.selecting||(e.$element.addClass("ui-selecting"),e.selecting=!0,o._trigger("selecting",t,{selecting:e.element}))):(e.selecting&&((t.metaKey||t.ctrlKey)&&e.startselected?(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.$element.addClass("ui-selected"),e.selected=!0):(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.startselected&&(e.$element.addClass("ui-unselecting"),e.unselecting=!0),o._trigger("unselecting",t,{unselecting:e.element}))),e.selected&&(t.metaKey||t.ctrlKey||e.startselected||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,o._trigger("unselecting",t,{unselecting:e.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,n(".ui-unselecting",this.element[0]).each(function(){var r=n.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,i._trigger("unselected",t,{unselected:r.element})}),n(".ui-selecting",this.element[0]).each(function(){var r=n.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,i._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(n){function t(n,t,i){return n>t&&t+i>n}function i(n){return/left|right/.test(n.css("float"))||/inline|table-cell/.test(n.css("display"))}n.widget("ui.sortable",n.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var n=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===n.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var n=this.items.length-1;n>=0;n--)this.items[n].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):n.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var r=null,f=!1,u=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),n(t.target).parents().each(function(){return n.data(this,u.widgetName+"-item")===u?(r=n(this),!1):undefined}),n.data(t.target,u.widgetName+"-item")===u&&(r=n(t.target)),r?!this.options.handle||i||(n(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(f=!0)}),f)?(this.currentItem=r,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,r){var f,e,u=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,u.cursorAt&&this._adjustOffsetFromHelper(u.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),u.containment&&this._setContainment(),u.cursor&&"auto"!==u.cursor&&(e=this.document.find("body"),this.storedCursor=e.css("cursor"),e.css("cursor",u.cursor),this.storedStylesheet=n("<style>*{ cursor: "+u.cursor+" !important; }<\/style>").appendTo(e)),u.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",u.opacity)),u.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",u.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(f=this.containers.length-1;f>=0;f--)this.containers[f]._trigger("activate",t,this._uiHash(this));return n.ui.ddmanager&&(n.ui.ddmanager.current=this),n.ui.ddmanager&&!u.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,u,f,o,i=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-n(document).scrollTop()<i.scrollSensitivity?r=n(document).scrollTop(n(document).scrollTop()-i.scrollSpeed):n(window).height()-(t.pageY-n(document).scrollTop())<i.scrollSensitivity&&(r=n(document).scrollTop(n(document).scrollTop()+i.scrollSpeed)),t.pageX-n(document).scrollLeft()<i.scrollSensitivity?r=n(document).scrollLeft(n(document).scrollLeft()-i.scrollSpeed):n(window).width()-(t.pageX-n(document).scrollLeft())<i.scrollSensitivity&&(r=n(document).scrollLeft(n(document).scrollLeft()+i.scrollSpeed))),r!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;e>=0;e--)if(u=this.items[e],f=u.item[0],o=this._intersectsWithPointer(u),o&&u.instance===this.currentContainer&&f!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==f&&!n.contains(this.placeholder[0],f)&&("semi-dynamic"===this.options.type?!n.contains(this.element[0],f):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(u))break;this._rearrange(t,u),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(n.ui.ddmanager&&!this.options.dropBehaviour&&n.ui.ddmanager.drop(this,t),this.options.revert){var e=this,f=this.placeholder.offset(),r=this.options.axis,u={};r&&"x"!==r||(u.left=f.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(u.top=f.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,n(this.helper).animate(u,parseInt(this.options.revert,10)||500,function(){e._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),n.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?n(this.domPosition.prev).after(this.currentItem):n(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n(r).each(function(){var r=(n(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);r&&i.push((t.key||r[1]+"[]")+"="+(t.key&&t.expression?r[1]:r[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},r.each(function(){i.push(n(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(n){var t=this.positionAbs.left,h=t+this.helperProportions.width,i=this.positionAbs.top,c=i+this.helperProportions.height,r=n.left,f=r+n.width,u=n.top,e=u+n.height,o=this.offset.click.top,s=this.offset.click.left,l="x"===this.options.axis||i+o>u&&e>i+o,a="y"===this.options.axis||t+s>r&&f>t+s,v=l&&a;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>n[this.floating?"width":"height"]?v:t+this.helperProportions.width/2>r&&f>h-this.helperProportions.width/2&&i+this.helperProportions.height/2>u&&e>c-this.helperProportions.height/2},_intersectsWithPointer:function(n){var u="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,n.top,n.height),f="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,n.left,n.width),e=u&&f,i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return e?this.floating?r&&"right"===r||"down"===i?2:1:i&&("down"===i?2:1):!1},_intersectsWithSides:function(n){var u=t(this.positionAbs.top+this.offset.click.top,n.top+n.height/2,n.height),f=t(this.positionAbs.left+this.offset.click.left,n.left+n.width/2,n.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&f||"left"===r&&!f:i&&("down"===i&&u||"up"===i&&!u)},_getDragVerticalDirection:function(){var n=this.positionAbs.top-this.lastPositionAbs.top;return 0!==n&&(n>0?"down":"up")},_getDragHorizontalDirection:function(){var n=this.positionAbs.left-this.lastPositionAbs.left;return 0!==n&&(n>0?"right":"left")},refresh:function(n){return this._refreshItems(n),this.refreshPositions(),this},_connectWith:function(){var n=this.options;return n.connectWith.constructor===String?[n.connectWith]:n.connectWith},_getItemsAsjQuery:function(t){var r,u,e,i,s=[],f=[],o=this._connectWith();if(o&&t)for(r=o.length-1;r>=0;r--)for(e=n(o[r]),u=e.length-1;u>=0;u--)i=n.data(e[u],this.widgetFullName),i&&i!==this&&!i.options.disabled&&f.push([n.isFunction(i.options.items)?i.options.items.call(i.element):n(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i]);for(f.push([n.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):n(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=f.length-1;r>=0;r--)f[r][0].each(function(){s.push(this)});return n(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=n.grep(this.items,function(n){for(var i=0;t.length>i;i++)if(t[i]===n.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var r,u,e,i,o,s,h,l,a=this.items,f=[[n.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):n(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(r=c.length-1;r>=0;r--)for(e=n(c[r]),u=e.length-1;u>=0;u--)i=n.data(e[u],this.widgetFullName),i&&i!==this&&!i.options.disabled&&(f.push([n.isFunction(i.options.items)?i.options.items.call(i.element[0],t,{item:this.currentItem}):n(i.options.items,i.element),i]),this.containers.push(i));for(r=f.length-1;r>=0;r--)for(o=f[r][1],s=f[r][0],u=0,l=s.length;l>u;u++)h=n(s[u]),h.data(this.widgetName+"-item",o),a.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var r,f,u,i=this.items.length-1;i>=0;i--)r=this.items[i],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(f=this.options.toleranceElement?n(this.options.toleranceElement,r.item):r.item,t||(r.width=f.outerWidth(),r.height=f.outerHeight()),u=f.offset(),r.left=u.left,r.top=u.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)u=this.containers[i].element.offset(),this.containers[i].containerCache.left=u.left,this.containers[i].containerCache.top=u.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var r,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(r=i.placeholder,i.placeholder={element:function(){var u=t.currentItem[0].nodeName.toLowerCase(),i=n("<"+u+">",t.document[0]).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===u?t.currentItem.children().each(function(){n("<td>&#160;<\/td>",t.document[0]).attr("colspan",n(this).attr("colspan")||1).appendTo(i)}):"img"===u&&i.attr("src",t.currentItem.attr("src")),r||i.css("visibility","hidden"),i},update:function(n,u){(!r||i.forcePlaceholderSize)&&(u.height()||u.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),u.width()||u.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=n(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(r){for(var f,v,s,l,y,h,o,p,a,c=null,e=null,u=this.containers.length-1;u>=0;u--)if(!n.contains(this.currentItem[0],this.containers[u].element[0]))if(this._intersectsWith(this.containers[u].containerCache)){if(c&&n.contains(this.containers[u].element[0],c.element[0]))continue;c=this.containers[u],e=u}else this.containers[u].containerCache.over&&(this.containers[u]._trigger("out",r,this._uiHash(this)),this.containers[u].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[e].containerCache.over||(this.containers[e]._trigger("over",r,this._uiHash(this)),this.containers[e].containerCache.over=1);else{for(v=1e4,s=null,a=c.floating||i(this.currentItem),l=a?"left":"top",y=a?"width":"height",h=this.positionAbs[l]+this.offset.click[l],f=this.items.length-1;f>=0;f--)n.contains(this.containers[e].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(!a||t(this.positionAbs.top+this.offset.click.top,this.items[f].top,this.items[f].height))&&(o=this.items[f].item.offset()[l],p=!1,Math.abs(o-h)>Math.abs(o+this.items[f][y]-h)&&(p=!0,o+=this.items[f][y]),v>Math.abs(o-h)&&(v=Math.abs(o-h),s=this.items[f],this.direction=p?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[e])return;s?this._rearrange(r,s,null,!0):this._rearrange(r,null,this.containers[e].element,!0),this._trigger("change",r,this._uiHash()),this.containers[e]._trigger("change",r,this._uiHash(this)),this.currentContainer=this.containers[e],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[e]._trigger("over",r,this._uiHash(this)),this.containers[e].containerCache.over=1}},_createHelper:function(t){var r=this.options,i=n.isFunction(r.helper)?n(r.helper.apply(this.element[0],[t,this.currentItem])):"clone"===r.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||n("parent"!==r.appendTo?r.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||r.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||r.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),n.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&n.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var n=this.currentItem.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,r,u,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,n("document"===i.containment?document:window).width()-this.helperProportions.width-this.margins.left,(n("document"===i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=n(i.containment)[0],r=n(i.containment).offset(),u="hidden"!==n(t).css("overflow"),this.containment=[r.left+(parseInt(n(t).css("borderLeftWidth"),10)||0)+(parseInt(n(t).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(n(t).css("borderTopWidth"),10)||0)+(parseInt(n(t).css("paddingTop"),10)||0)-this.margins.top,r.left+(u?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(n(t).css("borderLeftWidth"),10)||0)-(parseInt(n(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(u?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(n(t).css("borderTopWidth"),10)||0)-(parseInt(n(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var r="absolute"===t?1:-1,u="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(u[0].tagName);return{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:u.scrollTop())*r,left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:u.scrollLeft())*r}},_generatePosition:function(t){var r,u,i=this.options,f=t.pageX,e=t.pageY,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(o[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(e=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(e=this.containment[3]+this.offset.click.top)),i.grid&&(r=this.originalPageY+Math.round((e-this.originalPageY)/i.grid[1])*i.grid[1],e=this.containment?r-this.offset.click.top>=this.containment[1]&&r-this.offset.click.top<=this.containment[3]?r:r-this.offset.click.top>=this.containment[1]?r-i.grid[1]:r+i.grid[1]:r,u=this.originalPageX+Math.round((f-this.originalPageX)/i.grid[0])*i.grid[0],f=this.containment?u-this.offset.click.left>=this.containment[0]&&u-this.offset.click.left<=this.containment[2]?u:u-this.offset.click.left>=this.containment[0]?u-i.grid[0]:u+i.grid[0]:u)),{top:e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:o.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())}},_rearrange:function(n,t,i,r){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var u=this.counter;this._delay(function(){u===this.counter&&this.refreshPositions(!r)})},_clear:function(n,t){this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(n){this._trigger("receive",n,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(n){this._trigger("update",n,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(n){this._trigger("remove",n,this._uiHash())}),r.push(function(n){return function(t){n._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(n){return function(t){n._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||r.push(function(n){return function(t){n._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(function(n){return function(t){n._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",n,this._uiHash()),i=0;r.length>i;i++)r[i].call(this,n);this._trigger("stop",n,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",n,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;r.length>i;i++)r[i].call(this,n);this._trigger("stop",n,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){n.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||n([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(n,t){var i="ui-effects-";n.effects={effect:{}},function(n,t){function f(n,t,i){var r=h[t.type]||{};return null==n?i||!t.def?null:t.def:(n=r.floor?~~n:parseFloat(n),isNaN(n)?t.def:r.mod?(n+r.mod)%r.mod:0>n?0:n>r.max?r.max:n)}function s(f){var o=i(),s=o._rgba=[];return f=f.toLowerCase(),r(v,function(n,i){var r,h=i.re.exec(f),c=h&&i.parse(h),e=i.space||"rgba";return c?(r=o[e](c),o[u[e].cache]=r[u[e].cache],s=o._rgba=r._rgba,!1):t}),s.length?("0,0,0,0"===s.join()&&n.extend(s,e.transparent),o):e[f]}function o(n,t,i){return i=(i+1)%1,1>6*i?n+6*(t-n)*i:1>2*i?t:2>3*i?n+6*(t-n)*(2/3-i):n}var e,a=/^([\-+])=\s*(\d+\.?\d*)/,v=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1],n[2],n[3],n[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[2.55*n[1],2.55*n[2],2.55*n[3],n[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(n){return[n[1],n[2]/100,n[3]/100,n[4]]}}],i=n.Color=function(t,i,r,u){return new n.Color.fn.parse(t,i,r,u)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=i.support={},l=n("<p>")[0],r=n.each;l.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=l.style.backgroundColor.indexOf("rgba")>-1,r(u,function(n,t){t.cache="_"+n,t.props.alpha={idx:3,type:"percent",def:1}}),i.fn=n.extend(i.prototype,{parse:function(o,h,c,l){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=n(o).css(h),h=t);var a=this,v=n.type(o),y=this._rgba=[];return h!==t&&(o=[o,h,c,l],v="array"),"string"===v?this.parse(s(o)||e._default):"array"===v?(r(u.rgba.props,function(n,t){y[t.idx]=f(o[t.idx],t)}),this):"object"===v?(o instanceof i?r(u,function(n,t){o[t.cache]&&(a[t.cache]=o[t.cache].slice())}):r(u,function(t,i){var u=i.cache;r(i.props,function(n,t){if(!a[u]&&i.to){if("alpha"===n||null==o[n])return;a[u]=i.to(a._rgba)}a[u][t.idx]=f(o[n],t,!0)}),a[u]&&0>n.inArray(null,a[u].slice(0,3))&&(a[u][3]=1,i.from&&(a._rgba=i.from(a[u])))}),this):t},is:function(n){var o=i(n),f=!0,e=this;return r(u,function(n,i){var s,u=o[i.cache];return u&&(s=e[i.cache]||i.to&&i.to(e._rgba)||[],r(i.props,function(n,i){return null!=u[i.idx]?f=u[i.idx]===s[i.idx]:t})),f}),f},_space:function(){var n=[],t=this;return r(u,function(i,r){t[r.cache]&&n.push(i)}),n.pop()},transition:function(n,t){var e=i(n),c=e._space(),o=u[c],l=0===this.alpha()?i("transparent"):this,a=l[o.cache]||o.to(l._rgba),s=a.slice();return e=e[o.cache],r(o.props,function(n,i){var c=i.idx,r=a[c],u=e[c],o=h[i.type]||{};null!==u&&(null===r?s[c]=u:(o.mod&&(u-r>o.mod/2?r+=o.mod:r-u>o.mod/2&&(r-=o.mod)),s[c]=f((u-r)*t+r,i)))}),this[c](s)},blend:function(t){if(1===this._rgba[3])return this;var r=this._rgba.slice(),u=r.pop(),f=i(t)._rgba;return i(n.map(r,function(n,t){return(1-u)*f[t]+u*n}))},toRgbaString:function(){var i="rgba(",t=n.map(this._rgba,function(n,t){return null==n?t>2?1:0:n});return 1===t[3]&&(t.pop(),i="rgb("),i+t.join()+")"},toHslaString:function(){var i="hsla(",t=n.map(this.hsla(),function(n,t){return null==n&&(n=t>2?1:0),t&&3>t&&(n=Math.round(100*n)+"%"),n});return 1===t[3]&&(t.pop(),i="hsl("),i+t.join()+")"},toHexString:function(t){var i=this._rgba.slice(),r=i.pop();return t&&i.push(~~(255*r)),"#"+n.map(i,function(n){return n=(n||0).toString(16),1===n.length?"0"+n:n}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),i.fn.parse.prototype=i.fn,u.hsla.to=function(n){if(null==n[0]||null==n[1]||null==n[2])return[null,null,null,n[3]];var s,h,i=n[0]/255,r=n[1]/255,f=n[2]/255,c=n[3],u=Math.max(i,r,f),e=Math.min(i,r,f),t=u-e,o=u+e,l=.5*o;return s=e===u?0:i===u?60*(r-f)/t+360:r===u?60*(f-i)/t+120:60*(i-r)/t+240,h=0===t?0:.5>=l?t/o:t/(2-o),[Math.round(s)%360,h,l,null==c?1:c]},u.hsla.from=function(n){if(null==n[0]||null==n[1]||null==n[2])return[null,null,null,n[3]];var r=n[0]/360,u=n[1],t=n[2],e=n[3],i=.5>=t?t*(1+u):t+u-t*u,f=2*t-i;return[Math.round(255*o(f,i,r+1/3)),Math.round(255*o(f,i,r)),Math.round(255*o(f,i,r-1/3)),e]},r(u,function(u,e){var s=e.props,o=e.cache,h=e.to,c=e.from;i.fn[u]=function(u){if(h&&!this[o]&&(this[o]=h(this._rgba)),u===t)return this[o].slice();var l,a=n.type(u),v="array"===a||"object"===a?u:arguments,e=this[o].slice();return r(s,function(n,t){var i=v["object"===a?n:t.idx];null==i&&(i=e[t.idx]),e[t.idx]=f(i,t)}),c?(l=i(c(e)),l[o]=e,l):i(e)},r(s,function(t,r){i.fn[t]||(i.fn[t]=function(i){var f,e=n.type(i),h="alpha"===t?this._hsla?"hsla":"rgba":u,o=this[h](),s=o[r.idx];return"undefined"===e?s:("function"===e&&(i=i.call(this,s),e=n.type(i)),null==i&&r.empty?this:("string"===e&&(f=a.exec(i),f&&(i=s+parseFloat(f[2])*("+"===f[1]?1:-1))),o[r.idx]=i,this[h](o)))})})}),i.hook=function(t){var u=t.split(" ");r(u,function(t,r){n.cssHooks[r]={set:function(t,u){var o,f,e="";if("transparent"!==u&&("string"!==n.type(u)||(o=s(u)))){if(u=i(o||u),!c.rgba&&1!==u._rgba[3]){for(f="backgroundColor"===r?t.parentNode:t;(""===e||"transparent"===e)&&f&&f.style;)try{e=n.css(f,"backgroundColor"),f=f.parentNode}catch(h){}u=u.blend(e&&"transparent"!==e?e:"_default")}u=u.toRgbaString()}try{t.style[r]=u}catch(h){}}},n.fx.step[r]=function(t){t.colorInit||(t.start=i(t.elem,r),t.end=i(t.end),t.colorInit=!0),n.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}})},i.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),n.cssHooks.borderColor={expand:function(n){var t={};return r(["Top","Right","Bottom","Left"],function(i,r){t["border"+r+"Color"]=n}),t}},e=n.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var r,u,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,f={};if(i&&i.length&&i[0]&&i[i[0]])for(u=i.length;u--;)r=i[u],"string"==typeof i[r]&&(f[n.camelCase(r)]=i[r]);else for(r in i)"string"==typeof i[r]&&(f[r]=i[r]);return f}function r(t,i){var r,u,e={};for(r in i)u=i[r],t[r]!==u&&(f[r]||(n.fx.step[r]||!isNaN(parseFloat(u)))&&(e[r]=u));return e}var u=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};n.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){n.fx.step[i]=function(n){("none"===n.end||n.setAttr)&&(1!==n.pos||n.setAttr)||(jQuery.style(n.elem,i,n.end),n.setAttr=!0)}}),n.fn.addBack||(n.fn.addBack=function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}),n.effects.animateClass=function(t,f,e,o){var s=n.speed(f,e,o);return this.queue(function(){var o,e=n(this),h=e.attr("class")||"",f=s.children?e.find("*").addBack():e;f=f.map(function(){var t=n(this);return{el:t,start:i(this)}}),o=function(){n.each(u,function(n,i){t[i]&&e[i+"Class"](t[i])})},o(),f=f.map(function(){return this.end=i(this.el[0]),this.diff=r(this.start,this.end),this}),e.attr("class",h),f=f.map(function(){var i=this,t=n.Deferred(),r=n.extend({},s,{queue:!1,complete:function(){t.resolve(i)}});return this.el.animate(this.diff,r),t.promise()}),n.when.apply(n,f.get()).done(function(){o(),n.each(arguments,function(){var t=this.el;n.each(this.diff,function(n){t.css(n,"")})}),s.complete.call(e[0])})})},n.fn.extend({addClass:function(t){return function(i,r,u,f){return r?n.effects.animateClass.call(this,{add:i},r,u,f):t.apply(this,arguments)}}(n.fn.addClass),removeClass:function(t){return function(i,r,u,f){return arguments.length>1?n.effects.animateClass.call(this,{remove:i},r,u,f):t.apply(this,arguments)}}(n.fn.removeClass),toggleClass:function(i){return function(r,u,f,e,o){return"boolean"==typeof u||u===t?f?n.effects.animateClass.call(this,u?{add:r}:{remove:r},f,e,o):i.apply(this,arguments):n.effects.animateClass.call(this,{toggle:r},u,f,e)}}(n.fn.toggleClass),switchClass:function(t,i,r,u,f){return n.effects.animateClass.call(this,{add:i,remove:t},r,u,f)}})}(),function(){function r(t,i,r,u){return n.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),n.isFunction(i)&&(u=i,r=null,i={}),("number"==typeof i||n.fx.speeds[i])&&(u=r,r=i,i={}),n.isFunction(r)&&(u=r,r=null),i&&n.extend(t,i),r=r||i.duration,t.duration=n.fx.off?0:"number"==typeof r?r:r in n.fx.speeds?n.fx.speeds[r]:n.fx.speeds._default,t.complete=u||i.complete,t}function u(t){return!t||"number"==typeof t||n.fx.speeds[t]?!0:"string"!=typeof t||n.effects.effect[t]?n.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}n.extend(n.effects,{version:"1.10.3",save:function(n,t){for(var r=0;t.length>r;r++)null!==t[r]&&n.data(i+t[r],n[0].style[t[r]])},restore:function(n,r){for(var f,u=0;r.length>u;u++)null!==r[u]&&(f=n.data(i+r[u]),f===t&&(f=""),n.css(r[u],f))},setMode:function(n,t){return"toggle"===t&&(t=n.is(":hidden")?"show":"hide"),t},getBaseline:function(n,t){var i,r;switch(n[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=n[0]/t.height}switch(n[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=n[1]/t.width}return{x:r,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},u=n("<div><\/div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),f={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}return t.wrap(u),(t[0]===r||n.contains(t[0],r))&&n(r).focus(),u=t.parent(),"static"===t.css("position")?(u.css({position:"relative"}),t.css({position:"relative"})):(n.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),n.each(["top","left","bottom","right"],function(n,r){i[r]=t.css(r),isNaN(parseInt(i[r],10))&&(i[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(f),u.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||n.contains(t[0],i))&&n(i).focus()),t},setTransition:function(t,i,r,u){return u=u||{},n.each(i,function(n,i){var f=t.cssUnit(i);f[0]>0&&(u[i]=f[0]*r+f[1])}),u}}),n.fn.extend({effect:function(){function i(i){function f(){n.isFunction(o)&&o.call(r[0]),n.isFunction(i)&&i()}var r=n(this),o=t.complete,u=t.mode;(r.is(":hidden")?"hide"===u:"show"===u)?(r[u](),f()):e.call(r[0],t,f)}var t=r.apply(this,arguments),u=t.mode,f=t.queue,e=n.effects.effect[t.effect];return n.fx.off||!e?u?this[u](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):f===!1?this.each(i):this.queue(f||"fx",i)},show:function(n){return function(t){if(u(t))return n.apply(this,arguments);var i=r.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(n.fn.show),hide:function(n){return function(t){if(u(t))return n.apply(this,arguments);var i=r.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(n.fn.hide),toggle:function(n){return function(t){if(u(t)||"boolean"==typeof t)return n.apply(this,arguments);var i=r.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(n.fn.toggle),cssUnit:function(t){var i=this.css(t),r=[];return n.each(["em","px","%","pt"],function(n,t){i.indexOf(t)>0&&(r=[parseFloat(i),t])}),r}})}(),function(){var t={};n.each(["Quad","Cubic","Quart","Quint","Expo"],function(n,i){t[i]=function(t){return Math.pow(t,n+2)}}),n.extend(t,{Sine:function(n){return 1-Math.cos(n*Math.PI/2)},Circ:function(n){return 1-Math.sqrt(1-n*n)},Elastic:function(n){return 0===n||1===n?n:-Math.pow(2,8*(n-1))*Math.sin((80*(n-1)-7.5)*Math.PI/15)},Back:function(n){return n*n*(3*n-2)},Bounce:function(n){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>n;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-n,2)}}),n.each(t,function(t,i){n.easing["easeIn"+t]=i,n.easing["easeOut"+t]=function(n){return 1-i(1-n)},n.easing["easeInOut"+t]=function(n){return.5>n?i(2*n)/2:1-i(-2*n+2)/2}})}()}(jQuery),function(n){var r=0,t={},i={};t.height=t.paddingTop=t.paddingBottom=t.borderTopWidth=t.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",n.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=n(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():n(),content:this.active.length?this.active.next():n()}},_createIcons:function(){var t=this.options.icons;t&&(n("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var n;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),n=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&n.css("height","")},_setOption:function(n,t){return"active"===n?(this._activate(t),undefined):("event"===n&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(n,t),"collapsible"!==n||t||this.options.active!==!1||this._activate(0),"icons"===n&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===n&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),undefined)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=n.ui.keyCode,u=this.headers.length,f=this.headers.index(t.target),r=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(f+1)%u];break;case i.LEFT:case i.UP:r=this.headers[(f-1+u)%u];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:r=this.headers[0];break;case i.END:r=this.headers[u-1]}r&&(n(t.target).attr("tabIndex",-1),n(r).attr("tabIndex",0),r.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===n.ui.keyCode.UP&&t.ctrlKey&&n(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=n()):t.active===!1?this._activate(0):this.active.length&&!n.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=n()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,i=this.options,u=i.heightStyle,e=this.element.parent(),f=this.accordionId="ui-accordion-"+(this.element.attr("id")||++r);this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=n(this),r=i.attr("id"),e=i.next(),u=e.attr("id");r||(r=f+"-header-"+t,i.attr("id",r)),u||(u=f+"-panel-"+t,e.attr("id",u)),i.attr("aria-controls",u),e.attr("aria-labelledby",r)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===u?(t=e.height(),this.element.siblings(":visible").each(function(){var i=n(this),r=i.css("position");"absolute"!==r&&"fixed"!==r&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=n(this).outerHeight(!0)}),this.headers.next().each(function(){n(this).height(Math.max(0,t-n(this).innerHeight()+n(this).height()))}).css("overflow","auto")):"auto"===u&&(t=0,this.headers.next().each(function(){t=Math.max(t,n(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:n.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):n()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&n.each(t.split(" "),function(n,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,u=this.active,r=n(t.currentTarget),f=r[0]===u[0],e=f&&i.collapsible,s=e?n():r.next(),h=u.next(),o={oldHeader:u,oldPanel:h,newHeader:e?n():r,newPanel:s};t.preventDefault(),f&&!i.collapsible||this._trigger("beforeActivate",t,o)===!1||(i.active=e?!1:this.headers.index(r),this.active=f?n():r,this._toggle(o),u.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&u.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),f||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&r.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var r=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=r,this.prevHide=i,this.options.animate?this._animate(r,i,t):(i.hide(),r.show(),this._toggleComplete(t)),i.attr({"aria-expanded":"false","aria-hidden":"true"}),i.prev().attr("aria-selected","false"),r.length&&i.length?i.prev().attr("tabIndex",-1):r.length&&this.headers.filter(function(){return 0===n(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(n,r,u){var l,f,e,a=this,h=0,v=n.length&&(!r.length||n.index()<r.index()),s=this.options.animate||{},o=v&&s.down||s,c=function(){a._toggleComplete(u)};return"number"==typeof o&&(e=o),"string"==typeof o&&(f=o),f=f||o.easing||s.easing,e=e||o.duration||s.duration,r.length?n.length?(l=n.show().outerHeight(),r.animate(t,{duration:e,easing:f,step:function(n,t){t.now=Math.round(n)}}),n.hide().animate(i,{duration:e,easing:f,complete:c,step:function(n,t){t.now=Math.round(n),"height"!==t.prop?h+=t.now:"content"!==a.options.heightStyle&&(t.now=Math.round(l-r.outerHeight()-h),h=0)}}),undefined):r.animate(t,e,f,c):n.animate(i,e,f,c)},_toggleComplete:function(n){var t=n.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,n)}})}(jQuery),function(n){var t=0;n.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,r,u=this.element[0].nodeName.toLowerCase(),f="textarea"===u,e="input"===u;this.isMultiLine=f?!0:e?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[f||e?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(u){if(this.element.prop("readOnly"))return t=!0,r=!0,i=!0,undefined;t=!1,r=!1,i=!1;var f=n.ui.keyCode;switch(u.keyCode){case f.PAGE_UP:t=!0,this._move("previousPage",u);break;case f.PAGE_DOWN:t=!0,this._move("nextPage",u);break;case f.UP:t=!0,this._keyEvent("previous",u);break;case f.DOWN:t=!0,this._keyEvent("next",u);break;case f.ENTER:case f.NUMPAD_ENTER:this.menu.active&&(t=!0,u.preventDefault(),this.menu.select(u));break;case f.TAB:this.menu.active&&this.menu.select(u);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(u),u.preventDefault());break;default:i=!0,this._searchTimeout(u)}},keypress:function(r){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&r.preventDefault(),undefined;if(!i){var u=n.ui.keyCode;switch(r.keyCode){case u.PAGE_UP:this._move("previousPage",r);break;case u.PAGE_DOWN:this._move("nextPage",r);break;case u.UP:this._keyEvent("previous",r);break;case u.DOWN:this._keyEvent("next",r)}}},input:function(n){return r?(r=!1,n.preventDefault(),undefined):(this._searchTimeout(n),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(n){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(n),this._change(n),undefined)}}),this._initSource(),this.menu=n("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];n(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target===t.element[0]||r.target===i||n.contains(i,r.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){n(t.target).trigger(t.originalEvent)}),undefined;var r=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(n,t){var i=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=i})),!1!==this._trigger("select",n,{item:i})&&this._value(i.value),this.term=this._value(),this.close(n),this.selectedItem=i}}),this.liveRegion=n("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(n,t){this._super(n,t),"source"===n&&this._initSource(),"appendTo"===n&&this.menu.element.appendTo(this._appendTo()),"disabled"===n&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?n(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var i,r,t=this;n.isArray(this.options.source)?(i=this.options.source,this.source=function(t,r){r(n.ui.autocomplete.filter(i,t.term))}):"string"==typeof this.options.source?(r=this.options.source,this.source=function(i,u){t.xhr&&t.xhr.abort(),t.xhr=n.ajax({url:r,data:i,dataType:"json",success:function(n){u(n)},error:function(){u([])}})}):this.source=this.options.source},_searchTimeout:function(n){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,n))},this.options.delay)},search:function(n,t){return n=null!=n?n:this._value(),this.term=this._value(),n.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(n):undefined},_search:function(n){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:n},this._response())},_response:function(){var n=this,i=++t;return function(r){i===t&&n.__response(r),n.pending--,n.pending||n.element.removeClass("ui-autocomplete-loading")}},__response:function(n){n&&(n=this._normalize(n)),this._trigger("response",null,{content:n}),!this.options.disabled&&n&&n.length&&!this.cancelSearch?(this._suggest(n),this._trigger("open")):this._close()},close:function(n){this.cancelSearch=!0,this._close(n)},_close:function(n){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",n))},_change:function(n){this.previous!==this._value()&&this._trigger("change",n,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:n.map(t,function(t){return"string"==typeof t?{label:t,value:t}:n.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(n.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var n=this.menu.element;n.outerWidth(Math.max(n.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var r=this;n.each(i,function(n,i){r._renderItemData(t,i)})},_renderItemData:function(n,t){return this._renderItem(n,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return n("<li>").append(n("<a>").text(i.label)).appendTo(t)},_move:function(n,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(n)||this.menu.isLastItem()&&/^next/.test(n)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[n](t),undefined):(this.search(null,t),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(n,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(n,t),t.preventDefault())}}),n.extend(n.ui.autocomplete,{escapeRegex:function(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var r=RegExp(n.ui.autocomplete.escapeRegex(i),"i");return n.grep(t,function(n){return r.test(n.label||n.value||n)})}}),n.widget("ui.autocomplete",n.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(n){return n+(n>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(n){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=n&&n.length?this.options.messages.results(n.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(n){var i,r,u,t,f="ui-button ui-widget ui-state-default ui-corner-all",s="ui-state-hover ui-state-active ",e="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var t=n(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},o=function(t){var i=t.name,r=t.form,u=n([]);return i&&(i=i.replace(/'/g,"\\'"),u=r?n(r).find("[name='"+i+"']"):n("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),u};n.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var s=this,e=this.options,c="checkbox"===this.type||"radio"===this.type,a=c?"":"ui-state-active",l="ui-state-focus";null===e.label&&(e.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(f).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){e.disabled||this===i&&n(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){e.disabled||n(this).removeClass(a)}).bind("click"+this.eventNamespace,function(n){e.disabled&&(n.preventDefault(),n.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){s.buttonElement.addClass(l)}).bind("blur"+this.eventNamespace,function(){s.buttonElement.removeClass(l)}),c&&(this.element.bind("change"+this.eventNamespace,function(){t||s.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(n){e.disabled||(t=!1,r=n.pageX,u=n.pageY)}).bind("mouseup"+this.eventNamespace,function(n){e.disabled||(r!==n.pageX||u!==n.pageY)&&(t=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return e.disabled||t?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(e.disabled||t)return!1;n(this).addClass("ui-state-active"),s.buttonElement.attr("aria-pressed","true");var i=s.element[0];o(i).not(i).map(function(){return n(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return e.disabled?!1:(n(this).addClass("ui-state-active"),i=this,s.document.one("mouseup",function(){i=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return e.disabled?!1:(n(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(t){return e.disabled?!1:((t.keyCode===n.ui.keyCode.SPACE||t.keyCode===n.ui.keyCode.ENTER)&&n(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){n(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===n.ui.keyCode.SPACE&&n(this).click()})),this._setOption("disabled",e.disabled),this._resetButton()},_determineButtonType:function(){var n,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(n=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=n.find(t),this.buttonElement.length||(n=n.length?n.siblings():this.element.siblings(),this.buttonElement=n.filter(t),this.buttonElement.length||(this.buttonElement=n.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(f+" "+s+" "+e).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(n,t){return this._super(n,t),"disabled"===n?(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?o(this.element[0]).each(function(){n(this).is(":checked")?n(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):n(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var i=this.buttonElement.removeClass(e),f=n("<span><\/span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(i.empty()).text(),t=this.options.icons,u=t.primary&&t.secondary,r=[];t.primary||t.secondary?(this.options.text&&r.push("ui-button-text-icon"+(u?"s":t.primary?"-primary":"-secondary")),t.primary&&i.prepend("<span class='ui-button-icon-primary ui-icon "+t.primary+"'><\/span>"),t.secondary&&i.append("<span class='ui-button-icon-secondary ui-icon "+t.secondary+"'><\/span>"),this.options.text||(r.push(u?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||i.attr("title",n.trim(f)))):r.push("ui-button-text-only"),i.addClass(r.join(" "))}}),n.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(n,t){"disabled"===n&&this.buttons.button("option",n,t),this._super(n,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return n(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return n(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(n,t){function f(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},n.extend(this._defaults,this.regional[""]),this.dpDiv=e(n("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>"))}function e(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){n(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&n(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&n(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){n.datepicker._isDisabledDatepicker(u.inline?t.parent()[0]:u.input[0])||(n(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),n(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&n(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&n(this).addClass("ui-datepicker-next-hover"))})}function r(t,i){n.extend(t,i);for(var r in i)null==i[r]&&(t[r]=i[r]);return t}n.extend(n.ui,{datepicker:{version:"1.10.3"}});var u,i="datepicker";n.extend(f.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(n){return r(this._defaults,n||{}),this},_attachDatepicker:function(t,i){var r,f,u;r=t.nodeName.toLowerCase(),f="div"===r||"span"===r,t.id||(this.uuid+=1,t.id="dp"+this.uuid),u=this._newInst(n(t),f),u.settings=n.extend({},i||{}),"input"===r?this._connectDatepicker(t,u):f&&this._inlineDatepicker(t,u)},_newInst:function(t,i){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?e(n("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>")):this.dpDiv}},_connectDatepicker:function(t,r){var u=n(t);r.append=n([]),r.trigger=n([]),u.hasClass(this.markerClassName)||(this._attachments(u,r),u.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(r),n.data(t,i,r),r.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var u,r,f,e=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove(),e&&(i.append=n("<span class='"+this._appendClass+"'>"+e+"<\/span>"),t[o?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),u=this._get(i,"showOn"),("focus"===u||"both"===u)&&t.focus(this._showDatepicker),("button"===u||"both"===u)&&(r=this._get(i,"buttonText"),f=this._get(i,"buttonImage"),i.trigger=n(this._get(i,"buttonImageOnly")?n("<img/>").addClass(this._triggerClass).attr({src:f,alt:r,title:r}):n("<button type='button'><\/button>").addClass(this._triggerClass).html(f?n("<img/>").attr({src:f,alt:r,title:r}):r)),t[o?"before":"after"](i.trigger),i.trigger.click(function(){return n.datepicker._datepickerShowing&&n.datepicker._lastInput===t[0]?n.datepicker._hideDatepicker():n.datepicker._datepickerShowing&&n.datepicker._lastInput!==t[0]?(n.datepicker._hideDatepicker(),n.datepicker._showDatepicker(t[0])):n.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(n){if(this._get(n,"autoSize")&&!n.inline){var r,u,f,t,i=new Date(2009,11,20),e=this._get(n,"dateFormat");e.match(/[DM]/)&&(r=function(n){for(u=0,f=0,t=0;n.length>t;t++)n[t].length>u&&(u=n[t].length,f=t);return f},i.setMonth(r(this._get(n,e.match(/MM/)?"monthNames":"monthNamesShort"))),i.setDate(r(this._get(n,e.match(/DD/)?"dayNames":"dayNamesShort"))+20-i.getDay())),n.input.attr("size",this._formatDate(n,i).length)}},_inlineDatepicker:function(t,r){var u=n(t);u.hasClass(this.markerClassName)||(u.addClass(this.markerClassName).append(r.dpDiv),n.data(t,i,r),this._setDate(r,this._getDefaultDate(r),!0),this._updateDatepicker(r),this._updateAlternate(r),r.settings.disabled&&this._disableDatepicker(t),r.dpDiv.css("display","block"))},_dialogDatepicker:function(t,u,f,e,o){var h,c,l,a,v,s=this._dialogInst;return s||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=n("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),n("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},n.data(this._dialogInput[0],i,s)),r(s.settings,e||{}),u=u&&u.constructor===Date?this._formatDate(s,u):u,this._dialogInput.val(u),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(c=document.documentElement.clientWidth,l=document.documentElement.clientHeight,a=document.documentElement.scrollLeft||document.body.scrollLeft,v=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+a,l/2-150+v]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=f,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),n.blockUI&&n.blockUI(this.dpDiv),n.data(this._dialogInput[0],i,s),this},_destroyDatepicker:function(t){var r,u=n(t),f=n.data(t,i);u.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),n.removeData(t,i),"input"===r?(f.append.remove(),f.trigger.remove(),u.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===r||"span"===r)&&u.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var r,u,f=n(t),e=n.data(t,i);f.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),"input"===r?(t.disabled=!1,e.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===r||"span"===r)&&(u=f.children("."+this._inlineClass),u.children().removeClass("ui-state-disabled"),u.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n===t?null:n}))},_disableDatepicker:function(t){var r,u,f=n(t),e=n.data(t,i);f.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),"input"===r?(t.disabled=!0,e.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===r||"span"===r)&&(u=f.children("."+this._inlineClass),u.children().addClass("ui-state-disabled"),u.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n===t?null:n}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(n){if(!n)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===n)return!0;return!1},_getInst:function(t){try{return n.data(t,i)}catch(r){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(i,u,f){var o,c,s,h,e=this._getInst(i);return 2===arguments.length&&"string"==typeof u?"defaults"===u?n.extend({},n.datepicker._defaults):e?"all"===u?n.extend({},e.settings):this._get(e,u):null:(o=u||{},"string"==typeof u&&(o={},o[u]=f),e&&(this._curInst===e&&this._hideDatepicker(),c=this._getDateDatepicker(i,!0),s=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),r(e.settings,o),null!==s&&o.dateFormat!==t&&o.minDate===t&&(e.settings.minDate=this._formatDate(e,s)),null!==h&&o.dateFormat!==t&&o.maxDate===t&&(e.settings.maxDate=this._formatDate(e,h)),"disabled"in o&&(o.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(n(i),e),this._autoSize(e),this._setDate(e,c),this._updateAlternate(e),this._updateDatepicker(e)),t)},_changeDatepicker:function(n,t,i){this._optionDatepicker(n,t,i)},_refreshDatepicker:function(n){var t=this._getInst(n);t&&this._updateDatepicker(t)},_setDateDatepicker:function(n,t){var i=this._getInst(n);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(n,t){var i=this._getInst(n);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var u,e,f,i=n.datepicker._getInst(t.target),r=!0,o=i.dpDiv.is(".ui-datepicker-rtl");if(i._keyEvent=!0,n.datepicker._datepickerShowing)switch(t.keyCode){case 9:n.datepicker._hideDatepicker(),r=!1;break;case 13:return f=n("td."+n.datepicker._dayOverClass+":not(."+n.datepicker._currentClass+")",i.dpDiv),f[0]&&n.datepicker._selectDay(t.target,i.selectedMonth,i.selectedYear,f[0]),u=n.datepicker._get(i,"onSelect"),u?(e=n.datepicker._formatDate(i),u.apply(i.input?i.input[0]:null,[e,i])):n.datepicker._hideDatepicker(),!1;case 27:n.datepicker._hideDatepicker();break;case 33:n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 34:n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&n.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&n.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,o?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,o?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?n.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(i){var r,u,f=n.datepicker._getInst(i.target);return n.datepicker._get(f,"constrainInput")?(r=n.datepicker._possibleChars(n.datepicker._get(f,"dateFormat")),u=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">u||!r||r.indexOf(u)>-1):t},_doKeyUp:function(t){var r,i=n.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{r=n.datepicker.parseDate(n.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,n.datepicker._getFormatConfig(i)),r&&(n.datepicker._setDateFromField(i),n.datepicker._updateAlternate(i),n.datepicker._updateDatepicker(i))}catch(u){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=n("input",t.parentNode)[0]),!n.datepicker._isDisabledDatepicker(t)&&n.datepicker._lastInput!==t){var i,o,s,u,f,e,h;i=n.datepicker._getInst(t),n.datepicker._curInst&&n.datepicker._curInst!==i&&(n.datepicker._curInst.dpDiv.stop(!0,!0),i&&n.datepicker._datepickerShowing&&n.datepicker._hideDatepicker(n.datepicker._curInst.input[0])),o=n.datepicker._get(i,"beforeShow"),s=o?o.apply(t,[t,i]):{},s!==!1&&(r(i.settings,s),i.lastVal=null,n.datepicker._lastInput=t,n.datepicker._setDateFromField(i),n.datepicker._inDialog&&(t.value=""),n.datepicker._pos||(n.datepicker._pos=n.datepicker._findPos(t),n.datepicker._pos[1]+=t.offsetHeight),u=!1,n(t).parents().each(function(){return u|="fixed"===n(this).css("position"),!u}),f={left:n.datepicker._pos[0],top:n.datepicker._pos[1]},n.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),n.datepicker._updateDatepicker(i),f=n.datepicker._checkOffset(i,f,u),i.dpDiv.css({position:n.datepicker._inDialog&&n.blockUI?"static":u?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"}),i.inline||(e=n.datepicker._get(i,"showAnim"),h=n.datepicker._get(i,"duration"),i.dpDiv.zIndex(n(t).zIndex()+1),n.datepicker._datepickerShowing=!0,n.effects&&n.effects.effect[e]?i.dpDiv.show(e,n.datepicker._get(i,"showOptions"),h):i.dpDiv[e||"show"](e?h:null),n.datepicker._shouldFocusInput(i)&&i.input.focus(),n.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,u=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,r=this._getNumberOfMonths(t),f=r[1];t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&t.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",17*f+"em"),t.dpDiv[(1!==r[0]||1!==r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===n.datepicker._curInst&&n.datepicker._datepickerShowing&&n.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(n){return n.input&&n.input.is(":visible")&&!n.input.is(":disabled")&&!n.input.is(":focus")},_checkOffset:function(t,i,r){var u=t.dpDiv.outerWidth(),f=t.dpDiv.outerHeight(),h=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,e=document.documentElement.clientWidth+(r?0:n(document).scrollLeft()),s=document.documentElement.clientHeight+(r?0:n(document).scrollTop());return i.left-=this._get(t,"isRTL")?u-h:0,i.left-=r&&i.left===t.input.offset().left?n(document).scrollLeft():0,i.top-=r&&i.top===t.input.offset().top+o?n(document).scrollTop():0,i.left-=Math.min(i.left,i.left+u>e&&e>u?Math.abs(i.left+u-e):0),i.top-=Math.min(i.top,i.top+f>s&&s>f?Math.abs(f+o):0),i},_findPos:function(t){for(var i,r=this._getInst(t),u=this._get(r,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||n.expr.filters.hidden(t));)t=t[u?"previousSibling":"nextSibling"];return i=n(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var u,e,f,o,r=this._curInst;!r||t&&r!==n.data(t,i)||this._datepickerShowing&&(u=this._get(r,"showAnim"),e=this._get(r,"duration"),f=function(){n.datepicker._tidyDialog(r)},n.effects&&(n.effects.effect[u]||n.effects[u])?r.dpDiv.hide(u,n.datepicker._get(r,"showOptions"),e,f):r.dpDiv["slideDown"===u?"slideUp":"fadeIn"===u?"fadeOut":"hide"](u?e:null,f),u||f(),this._datepickerShowing=!1,o=this._get(r,"onClose"),o&&o.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),n.blockUI&&(n.unblockUI(),n("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(n){n.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(n.datepicker._curInst){var i=n(t.target),r=n.datepicker._getInst(i[0]);(i[0].id===n.datepicker._mainDivId||0!==i.parents("#"+n.datepicker._mainDivId).length||i.hasClass(n.datepicker.markerClassName)||i.closest("."+n.datepicker._triggerClass).length||!n.datepicker._datepickerShowing||n.datepicker._inDialog&&n.blockUI)&&(!i.hasClass(n.datepicker.markerClassName)||n.datepicker._curInst===r)||n.datepicker._hideDatepicker()}},_adjustDate:function(t,i,r){var f=n(t),u=this._getInst(f[0]);this._isDisabledDatepicker(f[0])||(this._adjustInstDate(u,i+("M"===r?this._get(u,"showCurrentAtPos"):0),r),this._updateDatepicker(u))},_gotoToday:function(t){var r,u=n(t),i=this._getInst(u[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(r=new Date,i.selectedDay=r.getDate(),i.drawMonth=i.selectedMonth=r.getMonth(),i.drawYear=i.selectedYear=r.getFullYear()),this._notifyChange(i),this._adjustDate(u)},_selectMonthYear:function(t,i,r){var f=n(t),u=this._getInst(f[0]);u["selected"+("M"===r?"Month":"Year")]=u["draw"+("M"===r?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(u),this._adjustDate(f)},_selectDay:function(t,i,r,u){var f,e=n(t);n(u).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])||(f=this._getInst(e[0]),f.selectedDay=f.currentDay=n("a",u).html(),f.selectedMonth=f.currentMonth=i,f.selectedYear=f.currentYear=r,this._selectDate(t,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(t){var i=n(t);this._selectDate(i,"")},_selectDate:function(t,i){var u,f=n(t),r=this._getInst(f[0]);i=null!=i?i:this._formatDate(r),r.input&&r.input.val(i),this._updateAlternate(r),u=this._get(r,"onSelect"),u?u.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,r,u,f=this._get(t,"altField");f&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),u=this.formatDate(i,r,this._getFormatConfig(t)),n(f).each(function(){n(this).val(u)}))},noWeekends:function(n){var t=n.getDay();return[t>0&&6>t,""]},iso8601Week:function(n){var i,t=new Date(n.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),i=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(i,r,u){if(null==i||null==r)throw"Invalid arguments";if(r="object"==typeof r?""+r:r+"",""===r)return null;for(var v,y,f,e=0,p=(u?u.shortYearCutoff:null)||this._defaults.shortYearCutoff,g="string"!=typeof p?p:(new Date).getFullYear()%100+parseInt(p,10),nt=(u?u.dayNamesShort:null)||this._defaults.dayNamesShort,tt=(u?u.dayNames:null)||this._defaults.dayNames,it=(u?u.monthNamesShort:null)||this._defaults.monthNamesShort,rt=(u?u.monthNames:null)||this._defaults.monthNames,o=-1,h=-1,c=-1,w=-1,b=!1,a=function(n){var t=i.length>s+1&&i.charAt(s+1)===n;return t&&s++,t},l=function(n){var i=a(n),u="@"===n?14:"!"===n?20:"y"===n&&i?4:"o"===n?3:2,f=RegExp("^\\d{1,"+u+"}"),t=r.substring(e).match(f);if(!t)throw"Missing number at position "+e;return e+=t[0].length,parseInt(t[0],10)},d=function(i,u,f){var o=-1,s=n.map(a(i)?f:u,function(n,t){return[[t,n]]}).sort(function(n,t){return-(n[1].length-t[1].length)});if(n.each(s,function(n,i){var u=i[1];return r.substr(e,u.length).toLowerCase()===u.toLowerCase()?(o=i[0],e+=u.length,!1):t}),-1!==o)return o+1;throw"Unknown name at position "+e;},k=function(){if(r.charAt(e)!==i.charAt(s))throw"Unexpected literal at position "+e;e++},s=0;i.length>s;s++)if(b)"'"!==i.charAt(s)||a("'")?k():b=!1;else switch(i.charAt(s)){case"d":c=l("d");break;case"D":d("D",nt,tt);break;case"o":w=l("o");break;case"m":h=l("m");break;case"M":h=d("M",it,rt);break;case"y":o=l("y");break;case"@":f=new Date(l("@")),o=f.getFullYear(),h=f.getMonth()+1,c=f.getDate();break;case"!":f=new Date((l("!")-this._ticksTo1970)/1e4),o=f.getFullYear(),h=f.getMonth()+1,c=f.getDate();break;case"'":a("'")?k():b=!0;break;default:k()}if(r.length>e&&(y=r.substr(e),!/^\s+/.test(y)))throw"Extra/unparsed characters found in date: "+y;if(-1===o?o=(new Date).getFullYear():100>o&&(o+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g>=o?0:-100)),w>-1)for(h=1,c=w;;){if(v=this._getDaysInMonth(o,h-1),v>=c)break;h++,c-=v}if(f=this._daylightSavingAdjust(new Date(o,h-1,c)),f.getFullYear()!==o||f.getMonth()+1!==h||f.getDate()!==c)throw"Invalid date";return f},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(n,t,i){if(!t)return"";var u,h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,c=(i?i.dayNames:null)||this._defaults.dayNames,l=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,f=function(t){var i=n.length>u+1&&n.charAt(u+1)===t;return i&&u++,i},e=function(n,t,i){var r=""+t;if(f(n))for(;i>r.length;)r="0"+r;return r},s=function(n,t,i,r){return f(n)?r[t]:i[t]},r="",o=!1;if(t)for(u=0;n.length>u;u++)if(o)"'"!==n.charAt(u)||f("'")?r+=n.charAt(u):o=!1;else switch(n.charAt(u)){case"d":r+=e("d",t.getDate(),2);break;case"D":r+=s("D",t.getDay(),h,c);break;case"o":r+=e("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":r+=e("m",t.getMonth()+1,2);break;case"M":r+=s("M",t.getMonth(),l,a);break;case"y":r+=f("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":r+=t.getTime();break;case"!":r+=1e4*t.getTime()+this._ticksTo1970;break;case"'":f("'")?r+="'":o=!0;break;default:r+=n.charAt(u)}return r},_possibleChars:function(n){for(var i="",r=!1,u=function(i){var r=n.length>t+1&&n.charAt(t+1)===i;return r&&t++,r},t=0;n.length>t;t++)if(r)"'"!==n.charAt(t)||u("'")?i+=n.charAt(t):r=!1;else switch(n.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":u("'")?i+="'":r=!0;break;default:i+=n.charAt(t)}return i},_get:function(n,i){return n.settings[i]!==t?n.settings[i]:this._defaults[i]},_setDateFromField:function(n,t){if(n.input.val()!==n.lastVal){var f=this._get(n,"dateFormat"),r=n.lastVal=n.input?n.input.val():null,u=this._getDefaultDate(n),i=u,e=this._getFormatConfig(n);try{i=this.parseDate(f,r,e)||u}catch(o){r=t?"":r}n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear(),n.currentDay=r?i.getDate():0,n.currentMonth=r?i.getMonth():0,n.currentYear=r?i.getFullYear():0,this._adjustInstDate(n)}},_getDefaultDate:function(n){return this._restrictMinMax(n,this._determineDate(n,this._get(n,"defaultDate"),new Date))},_determineDate:function(t,i,r){var f=function(n){var t=new Date;return t.setDate(t.getDate()+n),t},e=function(i){try{return n.datepicker.parseDate(n.datepicker._get(t,"dateFormat"),i,n.datepicker._getFormatConfig(t))}catch(h){}for(var o=(i.toLowerCase().match(/^c/)?n.datepicker._getDate(t):null)||new Date,f=o.getFullYear(),e=o.getMonth(),r=o.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=s.exec(i);u;){switch(u[2]||"d"){case"d":case"D":r+=parseInt(u[1],10);break;case"w":case"W":r+=7*parseInt(u[1],10);break;case"m":case"M":e+=parseInt(u[1],10),r=Math.min(r,n.datepicker._getDaysInMonth(f,e));break;case"y":case"Y":f+=parseInt(u[1],10),r=Math.min(r,n.datepicker._getDaysInMonth(f,e))}u=s.exec(i)}return new Date(f,e,r)},u=null==i||""===i?r:"string"==typeof i?e(i):"number"==typeof i?isNaN(i)?r:f(i):new Date(i.getTime());return u=u&&"Invalid Date"==""+u?r:u,u&&(u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0)),this._daylightSavingAdjust(u)},_daylightSavingAdjust:function(n){return n?(n.setHours(n.getHours()>12?n.getHours()+2:0),n):null},_setDate:function(n,t,i){var u=!t,f=n.selectedMonth,e=n.selectedYear,r=this._restrictMinMax(n,this._determineDate(n,t,new Date));n.selectedDay=n.currentDay=r.getDate(),n.drawMonth=n.selectedMonth=n.currentMonth=r.getMonth(),n.drawYear=n.selectedYear=n.currentYear=r.getFullYear(),f===n.selectedMonth&&e===n.selectedYear||i||this._notifyChange(n),this._adjustInstDate(n),n.input&&n.input.val(u?"":this._formatDate(n))},_getDate:function(n){return!n.currentYear||n.input&&""===n.input.val()?null:this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay))},_attachHandlers:function(t){var r=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){n.datepicker._adjustDate(i,-r,"M")},next:function(){n.datepicker._adjustDate(i,+r,"M")},hide:function(){n.datepicker._hideDatepicker()},today:function(){n.datepicker._gotoToday(i)},selectDay:function(){return n.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return n.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return n.datepicker._selectMonthYear(i,this,"Y"),!1}};n(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(n){var b,s,rt,h,ut,k,ft,et,ri,c,ot,ui,fi,ei,oi,st,g,si,ht,nt,o,y,ct,p,lt,l,u,at,vt,yt,pt,tt,wt,i,bt,kt,d,a,it,dt=new Date,gt=this._daylightSavingAdjust(new Date(dt.getFullYear(),dt.getMonth(),dt.getDate())),f=this._get(n,"isRTL"),li=this._get(n,"showButtonPanel"),hi=this._get(n,"hideIfNoPrevNext"),ni=this._get(n,"navigationAsDateFormat"),e=this._getNumberOfMonths(n),ai=this._get(n,"showCurrentAtPos"),ci=this._get(n,"stepMonths"),ti=1!==e[0]||1!==e[1],ii=this._daylightSavingAdjust(n.currentDay?new Date(n.currentYear,n.currentMonth,n.currentDay):new Date(9999,9,9)),w=this._getMinMaxDate(n,"min"),v=this._getMinMaxDate(n,"max"),t=n.drawMonth-ai,r=n.drawYear;if(0>t&&(t+=12,r--),v)for(b=this._daylightSavingAdjust(new Date(v.getFullYear(),v.getMonth()-e[0]*e[1]+1,v.getDate())),b=w&&w>b?w:b;this._daylightSavingAdjust(new Date(r,t,1))>b;)t--,0>t&&(t=11,r--);for(n.drawMonth=t,n.drawYear=r,s=this._get(n,"prevText"),s=ni?this.formatDate(s,this._daylightSavingAdjust(new Date(r,t-ci,1)),this._getFormatConfig(n)):s,rt=this._canAdjustMonth(n,-1,r,t)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"e":"w")+"'>"+s+"<\/span><\/a>":hi?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"e":"w")+"'>"+s+"<\/span><\/a>",h=this._get(n,"nextText"),h=ni?this.formatDate(h,this._daylightSavingAdjust(new Date(r,t+ci,1)),this._getFormatConfig(n)):h,ut=this._canAdjustMonth(n,1,r,t)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+h+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"w":"e")+"'>"+h+"<\/span><\/a>":hi?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+h+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"w":"e")+"'>"+h+"<\/span><\/a>",k=this._get(n,"currentText"),ft=this._get(n,"gotoCurrent")&&n.currentDay?ii:gt,k=ni?this.formatDate(k,ft,this._getFormatConfig(n)):k,et=n.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(n,"closeText")+"<\/button>",ri=li?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(f?et:"")+(this._isInRange(n,ft)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+k+"<\/button>":"")+(f?"":et)+"<\/div>":"",c=parseInt(this._get(n,"firstDay"),10),c=isNaN(c)?0:c,ot=this._get(n,"showWeek"),ui=this._get(n,"dayNames"),fi=this._get(n,"dayNamesMin"),ei=this._get(n,"monthNames"),oi=this._get(n,"monthNamesShort"),st=this._get(n,"beforeShowDay"),g=this._get(n,"showOtherMonths"),si=this._get(n,"selectOtherMonths"),ht=this._getDefaultDate(n),nt="",y=0;e[0]>y;y++){for(ct="",this.maxRows=4,p=0;e[1]>p;p++){if(lt=this._daylightSavingAdjust(new Date(r,t,n.selectedDay)),l=" ui-corner-all",u="",ti){if(u+="<div class='ui-datepicker-group",e[1]>1)switch(p){case 0:u+=" ui-datepicker-group-first",l=" ui-corner-"+(f?"right":"left");break;case e[1]-1:u+=" ui-datepicker-group-last",l=" ui-corner-"+(f?"left":"right");break;default:u+=" ui-datepicker-group-middle",l=""}u+="'>"}for(u+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+l+"'>"+(/all|left/.test(l)&&0===y?f?ut:rt:"")+(/all|right/.test(l)&&0===y?f?rt:ut:"")+this._generateMonthYearHeader(n,t,r,w,v,y>0||p>0,ei,oi)+"<\/div><table class='ui-datepicker-calendar'><thead><tr>",at=ot?"<th class='ui-datepicker-week-col'>"+this._get(n,"weekHeader")+"<\/th>":"",o=0;7>o;o++)vt=(o+c)%7,at+="<th"+((o+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+ui[vt]+"'>"+fi[vt]+"<\/span><\/th>";for(u+=at+"<\/tr><\/thead><tbody>",yt=this._getDaysInMonth(r,t),r===n.selectedYear&&t===n.selectedMonth&&(n.selectedDay=Math.min(n.selectedDay,yt)),pt=(this._getFirstDayOfMonth(r,t)-c+7)%7,tt=Math.ceil((pt+yt)/7),wt=ti?this.maxRows>tt?this.maxRows:tt:tt,this.maxRows=wt,i=this._daylightSavingAdjust(new Date(r,t,1-pt)),bt=0;wt>bt;bt++){for(u+="<tr>",kt=ot?"<td class='ui-datepicker-week-col'>"+this._get(n,"calculateWeek")(i)+"<\/td>":"",o=0;7>o;o++)d=st?st.apply(n.input?n.input[0]:null,[i]):[!0,""],a=i.getMonth()!==t,it=a&&!si||!d[0]||w&&w>i||v&&i>v,kt+="<td class='"+((o+c+6)%7>=5?" ui-datepicker-week-end":"")+(a?" ui-datepicker-other-month":"")+(i.getTime()===lt.getTime()&&t===n.selectedMonth&&n._keyEvent||ht.getTime()===i.getTime()&&ht.getTime()===lt.getTime()?" "+this._dayOverClass:"")+(it?" "+this._unselectableClass+" ui-state-disabled":"")+(a&&!g?"":" "+d[1]+(i.getTime()===ii.getTime()?" "+this._currentClass:"")+(i.getTime()===gt.getTime()?" ui-datepicker-today":""))+"'"+(a&&!g||!d[2]?"":" title='"+d[2].replace(/'/g,"&#39;")+"'")+(it?"":" data-handler='selectDay' data-event='click' data-month='"+i.getMonth()+"' data-year='"+i.getFullYear()+"'")+">"+(a&&!g?"&#xa0;":it?"<span class='ui-state-default'>"+i.getDate()+"<\/span>":"<a class='ui-state-default"+(i.getTime()===gt.getTime()?" ui-state-highlight":"")+(i.getTime()===ii.getTime()?" ui-state-active":"")+(a?" ui-priority-secondary":"")+"' href='#'>"+i.getDate()+"<\/a>")+"<\/td>",i.setDate(i.getDate()+1),i=this._daylightSavingAdjust(i);u+=kt+"<\/tr>"}t++,t>11&&(t=0,r++),u+="<\/tbody><\/table>"+(ti?"<\/div>"+(e[0]>0&&p===e[1]-1?"<div class='ui-datepicker-row-break'><\/div>":""):""),ct+=u}nt+=ct}return nt+ri,n._keyEvent=!1,nt},_generateMonthYearHeader:function(n,t,i,r,u,f,e,o){var k,d,h,v,y,p,s,a,w=this._get(n,"changeMonth"),b=this._get(n,"changeYear"),g=this._get(n,"showMonthAfterYear"),c="<div class='ui-datepicker-title'>",l="";if(f||!w)l+="<span class='ui-datepicker-month'>"+e[t]+"<\/span>";else{for(k=r&&r.getFullYear()===i,d=u&&u.getFullYear()===i,l+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;12>h;h++)(!k||h>=r.getMonth())&&(!d||u.getMonth()>=h)&&(l+="<option value='"+h+"'"+(h===t?" selected='selected'":"")+">"+o[h]+"<\/option>");l+="<\/select>"}if(g||(c+=l+(!f&&w&&b?"":"&#xa0;")),!n.yearshtml)if(n.yearshtml="",f||!b)c+="<span class='ui-datepicker-year'>"+i+"<\/span>";else{for(v=this._get(n,"yearRange").split(":"),y=(new Date).getFullYear(),p=function(n){var t=n.match(/c[+\-].*/)?i+parseInt(n.substring(1),10):n.match(/[+\-].*/)?y+parseInt(n,10):parseInt(n,10);return isNaN(t)?y:t},s=p(v[0]),a=Math.max(s,p(v[1]||"")),s=r?Math.max(s,r.getFullYear()):s,a=u?Math.min(a,u.getFullYear()):a,n.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";a>=s;s++)n.yearshtml+="<option value='"+s+"'"+(s===i?" selected='selected'":"")+">"+s+"<\/option>";n.yearshtml+="<\/select>",c+=n.yearshtml,n.yearshtml=null}return c+this._get(n,"yearSuffix"),g&&(c+=(!f&&w&&b?"":"&#xa0;")+l),c+="<\/div>"},_adjustInstDate:function(n,t,i){var u=n.drawYear+("Y"===i?t:0),f=n.drawMonth+("M"===i?t:0),e=Math.min(n.selectedDay,this._getDaysInMonth(u,f))+("D"===i?t:0),r=this._restrictMinMax(n,this._daylightSavingAdjust(new Date(u,f,e)));n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(n)},_restrictMinMax:function(n,t){var i=this._getMinMaxDate(n,"min"),r=this._getMinMaxDate(n,"max"),u=i&&i>t?i:t;return r&&u>r?r:u},_notifyChange:function(n){var t=this._get(n,"onChangeMonthYear");t&&t.apply(n.input?n.input[0]:null,[n.selectedYear,n.selectedMonth+1,n])},_getNumberOfMonths:function(n){var t=this._get(n,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(n,t){return this._determineDate(n,this._get(n,t+"Date"),null)},_getDaysInMonth:function(n,t){return 32-this._daylightSavingAdjust(new Date(n,t,32)).getDate()},_getFirstDayOfMonth:function(n,t){return new Date(n,t,1).getDay()},_canAdjustMonth:function(n,t,i,r){var f=this._getNumberOfMonths(n),u=this._daylightSavingAdjust(new Date(i,r+(0>t?t:f[0]*f[1]),1));return 0>t&&u.setDate(this._getDaysInMonth(u.getFullYear(),u.getMonth())),this._isInRange(n,u)},_isInRange:function(n,t){var i,f,e=this._getMinMaxDate(n,"min"),o=this._getMinMaxDate(n,"max"),r=null,u=null,s=this._get(n,"yearRange");return s&&(i=s.split(":"),f=(new Date).getFullYear(),r=parseInt(i[0],10),u=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=f),i[1].match(/[+\-].*/)&&(u+=f)),(!e||t.getTime()>=e.getTime())&&(!o||t.getTime()<=o.getTime())&&(!r||t.getFullYear()>=r)&&(!u||u>=t.getFullYear())},_getFormatConfig:function(n){var t=this._get(n,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(n,"dayNamesShort"),dayNames:this._get(n,"dayNames"),monthNamesShort:this._get(n,"monthNamesShort"),monthNames:this._get(n,"monthNames")}},_formatDate:function(n,t,i,r){t||(n.currentDay=n.selectedDay,n.currentMonth=n.selectedMonth,n.currentYear=n.selectedYear);var u=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(r,i,t)):this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay));return this.formatDate(this._get(n,"dateFormat"),u,this._getFormatConfig(n))}}),n.fn.datepicker=function(t){if(!this.length)return this;n.datepicker.initialized||(n(document).mousedown(n.datepicker._checkExternalClick),n.datepicker.initialized=!0),0===n("#"+n.datepicker._mainDivId).length&&n("body").append(n.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this].concat(i)):n.datepicker._attachDatepicker(this,t)}):n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i))},n.datepicker=new f,n.datepicker.initialized=!1,n.datepicker.uuid=(new Date).getTime(),n.datepicker.version="1.10.3"}(jQuery),function(n){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};n.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=n(this).css(t).offset().top;0>i&&n(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&n.fn.draggable&&this._makeDraggable(),this.options.resizable&&n.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?n(t):this.document.find(t||"body").eq(0)},_destroy:function(){var n,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),n=t.parent.children().eq(t.index),n.length&&n[0]!==this.element[0]?n.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:n.noop,enable:n.noop,close:function(t){var i=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||n(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(n,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",n),i},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=n(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var n=this.element.find("[autofocus]");n.length||(n=this.element.find(":tabbable")),n.length||(n=this.uiDialogButtonPane.find(":tabbable")),n.length||(n=this.uiDialogTitlebarClose.filter(":tabbable")),n.length||(n=this.uiDialog),n.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||n.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=n("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===n.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),undefined;if(t.keyCode===n.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),r=i.filter(":first"),u=i.filter(":last");t.target!==u[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==r[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(u.focus(1),t.preventDefault()):(r.focus(1),t.preventDefault())}},mousedown:function(n){this._moveToTop(n)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=n("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){n(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=n("<button><\/button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(n){n.preventDefault(),this.close(n)}}),t=n("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(n){this.options.title||n.html("&#160;"),n.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=n("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=n("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var i=this,t=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),n.isEmptyObject(t)||n.isArray(t)&&!t.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(n.each(t,function(t,r){var u,f;r=n.isFunction(r)?{click:r,text:t}:r,r=n.extend({type:"button"},r),u=r.click,r.click=function(){u.apply(i.element[0],arguments)},f={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,n("<button><\/button>",r).button(f).appendTo(i.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function i(n){return{position:n.position,offset:n.offset}}var t=this,r=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,u){n(this).addClass("ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",r,i(u))},drag:function(n,r){t._trigger("drag",n,i(r))},stop:function(u,f){r.position=[f.position.left-t.document.scrollLeft(),f.position.top-t.document.scrollTop()],n(this).removeClass("ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",u,i(f))}})},_makeResizable:function(){function r(n){return{originalPosition:n.originalPosition,originalSize:n.originalSize,position:n.position,size:n.size}}var i=this,t=this.options,u=t.resizable,f=this.uiDialog.css("position"),e="string"==typeof u?u:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:t.maxWidth,maxHeight:t.maxHeight,minWidth:t.minWidth,minHeight:this._minHeight(),handles:e,start:function(t,u){n(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",t,r(u))},resize:function(n,t){i._trigger("resize",n,r(t))},stop:function(u,f){t.height=n(this).height(),t.width=n(this).width(),n(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",u,r(f))}}).css("position",f)},_minHeight:function(){var n=this.options;return"auto"===n.height?n.minHeight:Math.min(n.minHeight,n.height)},_position:function(){var n=this.uiDialog.is(":visible");n||this.uiDialog.show(),this.uiDialog.position(this.options.position),n||this.uiDialog.hide()},_setOptions:function(r){var e=this,u=!1,f={};n.each(r,function(n,r){e._setOption(n,r),n in t&&(u=!0),n in i&&(f[n]=r)}),u&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(n,t){var u,r,i=this.uiDialog;"dialogClass"===n&&i.removeClass(this.options.dialogClass).addClass(t),"disabled"!==n&&(this._super(n,t),"appendTo"===n&&this.uiDialog.appendTo(this._appendTo()),"buttons"===n&&this._createButtons(),"closeText"===n&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===n&&(u=i.is(":data(ui-draggable)"),u&&!t&&i.draggable("destroy"),!u&&t&&this._makeDraggable()),"position"===n&&this._position(),"resizable"===n&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&"string"==typeof t&&i.resizable("option","handles",t),r||t===!1||this._makeResizable()),"title"===n&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,i,r,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),i=Math.max(0,n.minHeight-t),r="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:i,maxHeight:r,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=n(this);return n("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return n(t.target).closest(".ui-dialog").length?!0:!!n(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;n.ui.dialog.overlayInstances||this._delay(function(){n.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(r){t._allowInteraction(r)||(r.preventDefault(),n(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=n("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),n.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(n.ui.dialog.overlayInstances--,n.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),n.ui.dialog.overlayInstances=0,n.uiBackCompat!==!1&&n.widget("ui.dialog",n.ui.dialog,{_position:function(){var u,t=this.options.position,i=[],r=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(i=t.split?t.split(" "):[t[0],t[1]],1===i.length&&(i[1]=i[0]),n.each(["left","top"],function(n,t){+i[n]===i[n]&&(r[n]=i[n],i[n]=t)}),t={my:i[0]+(0>r[0]?r[0]:"+"+r[0])+" "+i[1]+(0>r[1]?r[1]:"+"+r[1]),at:i.join(" ")}),t=n.extend({},n.ui.dialog.prototype.options.position,t)):t=n.ui.dialog.prototype.options.position,u=this.uiDialog.is(":visible"),u||this.uiDialog.show(),this.uiDialog.position(t),u||this.uiDialog.hide()}})}(jQuery),function(n){var t=/up|down|vertical/,i=/up|left|vertical|horizontal/;n.effects.effect.blind=function(r,u){var e,o,s,f=n(this),c=["position","top","bottom","left","right","height","width"],p=n.effects.setMode(f,r.mode||"hide"),w=r.direction||"up",h=t.test(w),l=h?"height":"width",a=h?"top":"left",b=i.test(w),v={},y="show"===p;f.parent().is(".ui-effects-wrapper")?n.effects.save(f.parent(),c):n.effects.save(f,c),f.show(),e=n.effects.createWrapper(f).css({overflow:"hidden"}),o=e[l](),s=parseFloat(e.css(a))||0,v[l]=y?o:0,b||(f.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),v[a]=y?s:o+s),y&&(e.css(l,0),b||e.css(a,s+o)),e.animate(v,{duration:r.duration,easing:r.easing,queue:!1,complete:function(){"hide"===p&&f.hide(),n.effects.restore(f,c),n.effects.removeWrapper(f),u()}})}}(jQuery),function(n){n.effects.effect.bounce=function(t,i){var v,f,e,r=n(this),y=["position","top","bottom","left","right","height","width"],k=n.effects.setMode(r,t.mode||"effect"),o="hide"===k,p="show"===k,h=t.direction||"up",u=t.distance,w=t.times||5,d=2*w+(p||o?1:0),c=t.duration/d,l=t.easing,s="up"===h||"down"===h?"top":"left",b="up"===h||"left"===h,a=r.queue(),g=a.length;for((p||o)&&y.push("opacity"),n.effects.save(r,y),r.show(),n.effects.createWrapper(r),u||(u=r["top"===s?"outerHeight":"outerWidth"]()/3),p&&(e={opacity:1},e[s]=0,r.css("opacity",0).css(s,b?2*-u:2*u).animate(e,c,l)),o&&(u/=Math.pow(2,w-1)),e={},e[s]=0,v=0;w>v;v++)f={},f[s]=(b?"-=":"+=")+u,r.animate(f,c,l).animate(e,c,l),u=o?2*u:u/2;o&&(f={opacity:0},f[s]=(b?"-=":"+=")+u,r.animate(f,c,l)),r.queue(function(){o&&r.hide(),n.effects.restore(r,y),n.effects.removeWrapper(r),i()}),g>1&&a.splice.apply(a,[1,0].concat(a.splice(g,d+1))),r.dequeue()}}(jQuery),function(n){n.effects.effect.clip=function(t,i){var h,u,f,r=n(this),c=["position","top","bottom","left","right","height","width"],v=n.effects.setMode(r,t.mode||"hide"),e="show"===v,y=t.direction||"vertical",l="vertical"===y,o=l?"height":"width",a=l?"top":"left",s={};n.effects.save(r,c),r.show(),h=n.effects.createWrapper(r).css({overflow:"hidden"}),u="IMG"===r[0].tagName?h:r,f=u[o](),e&&(u.css(o,0),u.css(a,f/2)),s[o]=e?f:0,s[a]=e?0:f/2,u.animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){e||r.hide(),n.effects.restore(r,c),n.effects.removeWrapper(r),i()}})}}(jQuery),function(n){n.effects.effect.drop=function(t,i){var u,r=n(this),h=["position","top","bottom","left","right","opacity","height","width"],c=n.effects.setMode(r,t.mode||"hide"),e="show"===c,f=t.direction||"left",o="up"===f||"down"===f?"top":"left",s="up"===f||"left"===f?"pos":"neg",l={opacity:e?1:0};n.effects.save(r,h),r.show(),n.effects.createWrapper(r),u=t.distance||r["top"===o?"outerHeight":"outerWidth"](!0)/2,e&&r.css("opacity",0).css(o,"pos"===s?-u:u),l[o]=(e?"pos"===s?"+=":"-=":"pos"===s?"-=":"+=")+u,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===c&&r.hide(),n.effects.restore(r,h),n.effects.removeWrapper(r),i()}})}}(jQuery),function(n){n.effects.effect.explode=function(t,i){function b(){p.push(this),p.length===o*c&&k()}function k(){r.css({visibility:"visible"}),n(p).remove(),u||r.hide(),i()}for(var e,l,a,v,y,o=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=o,r=n(this),d=n.effects.setMode(r,t.mode||"hide"),u="show"===d,w=r.show().css("visibility","hidden").offset(),s=Math.ceil(r.outerWidth()/c),h=Math.ceil(r.outerHeight()/o),p=[],f=0;o>f;f++)for(a=w.top+f*h,y=f-(o-1)/2,e=0;c>e;e++)l=w.left+e*s,v=e-(c-1)/2,r.clone().appendTo("body").wrap("<div><\/div>").css({position:"absolute",visibility:"visible",left:-e*s,top:-f*h}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:s,height:h,left:l+(u?v*s:0),top:a+(u?y*h:0),opacity:u?0:1}).animate({left:l+(u?0:v*s),top:a+(u?0:y*h),opacity:u?1:0},t.duration||500,t.easing,b)}}(jQuery),function(n){n.effects.effect.fade=function(t,i){var r=n(this),u=n.effects.setMode(r,t.mode||"toggle");r.animate({opacity:u},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(n){n.effects.effect.fold=function(t,i){var r,e,u=n(this),s=["position","top","bottom","left","right","height","width"],h=n.effects.setMode(u,t.mode||"hide"),o="show"===h,c="hide"===h,f=t.size||15,l=/([0-9]+)%/.exec(f),a=!!t.horizFirst,v=o!==a,y=v?["width","height"]:["height","width"],p=t.duration/2,w={},b={};n.effects.save(u,s),u.show(),r=n.effects.createWrapper(u).css({overflow:"hidden"}),e=v?[r.width(),r.height()]:[r.height(),r.width()],l&&(f=parseInt(l[1],10)/100*e[c?0:1]),o&&r.css(a?{height:0,width:f}:{height:f,width:0}),w[y[0]]=o?e[0]:f,b[y[1]]=o?e[1]:0,r.animate(w,p,t.easing).animate(b,p,t.easing,function(){c&&u.hide(),n.effects.restore(u,s),n.effects.removeWrapper(u),i()})}}(jQuery),function(n){n.effects.effect.highlight=function(t,i){var r=n(this),u=["backgroundImage","backgroundColor","opacity"],f=n.effects.setMode(r,t.mode||"show"),e={backgroundColor:r.css("backgroundColor")};"hide"===f&&(e.opacity=0),n.effects.save(r,u),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(e,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===f&&r.hide(),n.effects.restore(r,u),i()}})}}(jQuery),function(n){n.effects.effect.pulsate=function(t,i){var e,r=n(this),o=n.effects.setMode(r,t.mode||"show"),h="show"===o,a="hide"===o,v=h||"hide"===o,s=2*(t.times||5)+(v?1:0),c=t.duration/s,u=0,f=r.queue(),l=f.length;for((h||!r.is(":visible"))&&(r.css("opacity",0).show(),u=1),e=1;s>e;e++)r.animate({opacity:u},c,t.easing),u=1-u;r.animate({opacity:u},c,t.easing),r.queue(function(){a&&r.hide(),i()}),l>1&&f.splice.apply(f,[1,0].concat(f.splice(l,s+1))),r.dequeue()}}(jQuery),function(n){n.effects.effect.puff=function(t,i){var r=n(this),e=n.effects.setMode(r,t.mode||"hide"),o="hide"===e,s=parseInt(t.percent,10)||150,f=s/100,u={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};n.extend(t,{effect:"scale",queue:!1,fade:!0,mode:e,complete:i,percent:o?s:100,from:o?u:{height:u.height*f,width:u.width*f,outerHeight:u.outerHeight*f,outerWidth:u.outerWidth*f}}),r.effect(t)},n.effects.effect.scale=function(t,i){var u=n(this),r=n.extend(!0,{},t),f=n.effects.setMode(u,t.mode||"effect"),s=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===f?0:100),h=t.direction||"both",c=t.origin,e={height:u.height(),width:u.width(),outerHeight:u.outerHeight(),outerWidth:u.outerWidth()},o={y:"horizontal"!==h?s/100:1,x:"vertical"!==h?s/100:1};r.effect="size",r.queue=!1,r.complete=i,"effect"!==f&&(r.origin=c||["middle","center"],r.restore=!0),r.from=t.from||("show"===f?{height:0,width:0,outerHeight:0,outerWidth:0}:e),r.to={height:e.height*o.y,width:e.width*o.x,outerHeight:e.outerHeight*o.y,outerWidth:e.outerWidth*o.x},r.fade&&("show"===f&&(r.from.opacity=0,r.to.opacity=1),"hide"===f&&(r.from.opacity=1,r.to.opacity=0)),u.effect(r)},n.effects.effect.size=function(t,i){var f,l,u,r=n(this),w=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["width","height","overflow"],v=["fontSize"],e=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],o=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=n.effects.setMode(r,t.mode||"effect"),y=t.restore||"effect"!==h,c=t.scale||"both",b=t.origin||["middle","center"],k=r.css("position"),s=y?w:["position","top","bottom","left","right","overflow","opacity"],p={height:0,width:0,outerHeight:0,outerWidth:0};"show"===h&&r.show(),f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},"toggle"===t.mode&&"show"===h?(r.from=t.to||p,r.to=t.from||f):(r.from=t.from||("show"===h?p:f),r.to=t.to||("hide"===h?p:f)),u={from:{y:r.from.height/f.height,x:r.from.width/f.width},to:{y:r.to.height/f.height,x:r.to.width/f.width}},("box"===c||"both"===c)&&(u.from.y!==u.to.y&&(s=s.concat(e),r.from=n.effects.setTransition(r,e,u.from.y,r.from),r.to=n.effects.setTransition(r,e,u.to.y,r.to)),u.from.x!==u.to.x&&(s=s.concat(o),r.from=n.effects.setTransition(r,o,u.from.x,r.from),r.to=n.effects.setTransition(r,o,u.to.x,r.to))),("content"===c||"both"===c)&&u.from.y!==u.to.y&&(s=s.concat(v).concat(a),r.from=n.effects.setTransition(r,v,u.from.y,r.from),r.to=n.effects.setTransition(r,v,u.to.y,r.to)),n.effects.save(r,s),r.show(),n.effects.createWrapper(r),r.css("overflow","hidden").css(r.from),b&&(l=n.effects.getBaseline(b,f),r.from.top=(f.outerHeight-r.outerHeight())*l.y,r.from.left=(f.outerWidth-r.outerWidth())*l.x,r.to.top=(f.outerHeight-r.to.outerHeight)*l.y,r.to.left=(f.outerWidth-r.to.outerWidth)*l.x),r.css(r.from),("content"===c||"both"===c)&&(e=e.concat(["marginTop","marginBottom"]).concat(v),o=o.concat(["marginLeft","marginRight"]),a=w.concat(e).concat(o),r.find("*[width]").each(function(){var i=n(this),r={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};y&&n.effects.save(i,a),i.from={height:r.height*u.from.y,width:r.width*u.from.x,outerHeight:r.outerHeight*u.from.y,outerWidth:r.outerWidth*u.from.x},i.to={height:r.height*u.to.y,width:r.width*u.to.x,outerHeight:r.height*u.to.y,outerWidth:r.width*u.to.x},u.from.y!==u.to.y&&(i.from=n.effects.setTransition(i,e,u.from.y,i.from),i.to=n.effects.setTransition(i,e,u.to.y,i.to)),u.from.x!==u.to.x&&(i.from=n.effects.setTransition(i,o,u.from.x,i.from),i.to=n.effects.setTransition(i,o,u.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){y&&n.effects.restore(i,a)})})),r.animate(r.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===r.to.opacity&&r.css("opacity",r.from.opacity),"hide"===h&&r.hide(),n.effects.restore(r,s),y||("static"===k?r.css({position:"relative",top:r.to.top,left:r.to.left}):n.each(["top","left"],function(n,t){r.css(t,function(t,i){var f=parseInt(i,10),u=n?r.to.left:r.to.top;return"auto"===i?u+"px":f+u+"px"})})),n.effects.removeWrapper(r),i()}})}}(jQuery),function(n){n.effects.effect.shake=function(t,i){var o,r=n(this),v=["position","top","bottom","left","right","height","width"],k=n.effects.setMode(r,t.mode||"effect"),f=t.direction||"left",s=t.distance||20,y=t.times||3,p=2*y+1,u=Math.round(t.duration/p),h="up"===f||"down"===f?"top":"left",c="up"===f||"left"===f,l={},a={},w={},e=r.queue(),b=e.length;for(n.effects.save(r,v),r.show(),n.effects.createWrapper(r),l[h]=(c?"-=":"+=")+s,a[h]=(c?"+=":"-=")+2*s,w[h]=(c?"-=":"+=")+2*s,r.animate(l,u,t.easing),o=1;y>o;o++)r.animate(a,u,t.easing).animate(w,u,t.easing);r.animate(a,u,t.easing).animate(l,u/2,t.easing).queue(function(){"hide"===k&&r.hide(),n.effects.restore(r,v),n.effects.removeWrapper(r),i()}),b>1&&e.splice.apply(e,[1,0].concat(e.splice(b,p+1))),r.dequeue()}}(jQuery),function(n){n.effects.effect.slide=function(t,i){var u,r=n(this),s=["position","top","bottom","left","right","width","height"],h=n.effects.setMode(r,t.mode||"show"),c="show"===h,f=t.direction||"left",e="up"===f||"down"===f?"top":"left",o="up"===f||"left"===f,l={};n.effects.save(r,s),r.show(),u=t.distance||r["top"===e?"outerHeight":"outerWidth"](!0),n.effects.createWrapper(r).css({overflow:"hidden"}),c&&r.css(e,o?isNaN(u)?"-"+u:-u:u),l[e]=(c?o?"+=":"-=":o?"-=":"+=")+u,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===h&&r.hide(),n.effects.restore(r,s),n.effects.removeWrapper(r),i()}})}}(jQuery),function(n){n.effects.effect.transfer=function(t,i){var u=n(this),r=n(t.to),f="fixed"===r.css("position"),e=n("body"),o=f?e.scrollTop():0,s=f?e.scrollLeft():0,h=r.offset(),l={top:h.top-o,left:h.left-s,height:r.innerHeight(),width:r.innerWidth()},c=u.offset(),a=n("<div class='ui-effects-transfer'><\/div>").appendTo(document.body).addClass(t.className).css({top:c.top-o,left:c.left-s,height:u.innerHeight(),width:u.innerWidth(),position:f?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){a.remove(),i()})}}(jQuery),function(n){n.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,n.proxy(function(n){this.options.disabled&&n.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(n){n.preventDefault()},"click .ui-state-disabled > a":function(n){n.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=n(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=n(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(n,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(n,i)},blur:function(t){this._delay(function(){n.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){n(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=n(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function o(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,f,r,e,u,s=!0;switch(t.keyCode){case n.ui.keyCode.PAGE_UP:this.previousPage(t);break;case n.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case n.ui.keyCode.HOME:this._move("first","first",t);break;case n.ui.keyCode.END:this._move("last","last",t);break;case n.ui.keyCode.UP:this.previous(t);break;case n.ui.keyCode.DOWN:this.next(t);break;case n.ui.keyCode.LEFT:this.collapse(t);break;case n.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case n.ui.keyCode.ENTER:case n.ui.keyCode.SPACE:this._activate(t);break;case n.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1,f=this.previousFilter||"",r=String.fromCharCode(t.keyCode),e=!1,clearTimeout(this.filterTimer),r===f?e=!0:r=f+r,u=RegExp("^"+o(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return u.test(n(this).children("a").text())}),i=e&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(r=String.fromCharCode(t.keyCode),u=RegExp("^"+o(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return u.test(n(this).children("a").text())})),i.length?(this.focus(t,i),i.length>1?(this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}s&&t.preventDefault()},_activate:function(n){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(n):this.select(n))},refresh:function(){var t,r=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=n(this),i=t.prev("a"),u=n("<span>").addClass("ui-menu-icon ui-icon "+r).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(u),t.attr("aria-labelledby",i.attr("id"))}),t=i.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=n(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!n.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(n,t){"icons"===n&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(n,t)},focus:function(n,t){var i,r;this.blur(n,n&&"focus"===n.type),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),n&&"keydown"===n.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&/^mouse/.test(n.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",n,{item:t})},_scrollIntoView:function(t){var e,o,i,r,u,f;this._hasScroll()&&(e=parseFloat(n.css(this.activeMenu[0],"borderTopWidth"))||0,o=parseFloat(n.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-e-o,r=this.activeMenu.scrollTop(),u=this.activeMenu.height(),f=t.height(),0>i?this.activeMenu.scrollTop(r+i):i+f>u&&this.activeMenu.scrollTop(r+i-u+f))},blur:function(n,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",n,{item:this.active}))},_startOpening:function(n){clearTimeout(this.timer),"true"===n.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(n)},this.delay))},_open:function(t){var i=n.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var r=i?this.element:n(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(n){n||(n=this.active?this.active.parent():this.element),n.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(n){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(n,t))},expand:function(n){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(n,t)}))},next:function(n){this._move("next","first",n)},previous:function(n){this._move("prev","last",n)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(n,t,i){var r;this.active&&(r="first"===n||"last"===n?this.active["first"===n?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[n+"All"](".ui-menu-item").eq(0)),r&&r.length&&this.active||(r=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,r)},nextPage:function(t){var i,r,u;return this.active?(this.isLastItem()||(this._hasScroll()?(r=this.active.offset().top,u=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=n(this),0>i.offset().top-r-u}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(t),undefined)},previousPage:function(t){var i,r,u;return this.active?(this.isFirstItem()||(this._hasScroll()?(r=this.active.offset().top,u=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=n(this),i.offset().top-r+u>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(t),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||n(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(n,t){function e(n,t,i){return[parseFloat(n[0])*(a.test(n[0])?t/100:1),parseFloat(n[1])*(a.test(n[1])?i/100:1)]}function r(t,i){return parseInt(n.css(t,i),10)||0}function v(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:n.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}n.ui=n.ui||{};var f,u=Math.max,i=Math.abs,o=Math.round,s=/left|center|right/,h=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,a=/%$/,y=n.fn.position;n.position={scrollbarWidth:function(){if(f!==t)return f;var u,r,i=n("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>"),e=i.children()[0];return n("body").append(i),u=e.offsetWidth,i.css("overflow","scroll"),r=e.offsetWidth,u===r&&(r=i[0].clientWidth),i.remove(),f=u-r},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),u="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,f="scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight;return{width:f?n.position.scrollbarWidth():0,height:u?n.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=n(t||window),r=n.isWindow(i[0]);return{element:i,isWindow:r,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:r?i.width():i.outerWidth(),height:r?i.height():i.outerHeight()}}},n.fn.position=function(t){if(!t||!t.of)return y.apply(this,arguments);t=n.extend({},t);var b,f,a,w,p,d,g=n(t.of),tt=n.position.getWithinInfo(t.within),it=n.position.getScrollInfo(tt),k=(t.collision||"flip").split(" "),nt={};return d=v(g),g[0].preventDefault&&(t.at="left top"),f=d.width,a=d.height,w=d.offset,p=n.extend({},w),n.each(["my","at"],function(){var i,r,n=(t[this]||"").split(" ");1===n.length&&(n=s.test(n[0])?n.concat(["center"]):h.test(n[0])?["center"].concat(n):["center","center"]),n[0]=s.test(n[0])?n[0]:"center",n[1]=h.test(n[1])?n[1]:"center",i=c.exec(n[0]),r=c.exec(n[1]),nt[this]=[i?i[0]:0,r?r[0]:0],t[this]=[l.exec(n[0])[0],l.exec(n[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===t.at[0]?p.left+=f:"center"===t.at[0]&&(p.left+=f/2),"bottom"===t.at[1]?p.top+=a:"center"===t.at[1]&&(p.top+=a/2),b=e(nt.at,f,a),p.left+=b[0],p.top+=b[1],this.each(function(){var y,d,h=n(this),c=h.outerWidth(),l=h.outerHeight(),rt=r(this,"marginLeft"),ut=r(this,"marginTop"),ft=c+rt+r(this,"marginRight")+it.width,et=l+ut+r(this,"marginBottom")+it.height,s=n.extend({},p),v=e(nt.my,h.outerWidth(),h.outerHeight());"right"===t.my[0]?s.left-=c:"center"===t.my[0]&&(s.left-=c/2),"bottom"===t.my[1]?s.top-=l:"center"===t.my[1]&&(s.top-=l/2),s.left+=v[0],s.top+=v[1],n.support.offsetFractions||(s.left=o(s.left),s.top=o(s.top)),y={marginLeft:rt,marginTop:ut},n.each(["left","top"],function(i,r){n.ui.position[k[i]]&&n.ui.position[k[i]][r](s,{targetWidth:f,targetHeight:a,elemWidth:c,elemHeight:l,collisionPosition:y,collisionWidth:ft,collisionHeight:et,offset:[b[0]+v[0],b[1]+v[1]],my:t.my,at:t.at,within:tt,elem:h})}),t.using&&(d=function(n){var r=w.left-s.left,v=r+f-c,e=w.top-s.top,y=e+a-l,o={target:{element:g,left:w.left,top:w.top,width:f,height:a},element:{element:h,left:s.left,top:s.top,width:c,height:l},horizontal:0>v?"left":r>0?"right":"center",vertical:0>y?"top":e>0?"bottom":"middle"};c>f&&f>i(r+v)&&(o.horizontal="center"),l>a&&a>i(e+y)&&(o.vertical="middle"),o.important=u(i(r),i(v))>u(i(e),i(y))?"horizontal":"vertical",t.using.call(this,n,o)}),h.offset(n.extend(s,{using:d}))})},n.ui.position={fit:{left:function(n,t){var h,e=t.within,r=e.isWindow?e.scrollLeft:e.offset.left,o=e.width,s=n.left-t.collisionPosition.marginLeft,i=r-s,f=s+t.collisionWidth-o-r;t.collisionWidth>o?i>0&&0>=f?(h=n.left+i+t.collisionWidth-o-r,n.left+=i-h):n.left=f>0&&0>=i?r:i>f?r+o-t.collisionWidth:r:i>0?n.left+=i:f>0?n.left-=f:n.left=u(n.left-s,n.left)},top:function(n,t){var h,o=t.within,r=o.isWindow?o.scrollTop:o.offset.top,e=t.within.height,s=n.top-t.collisionPosition.marginTop,i=r-s,f=s+t.collisionHeight-e-r;t.collisionHeight>e?i>0&&0>=f?(h=n.top+i+t.collisionHeight-e-r,n.top+=i-h):n.top=f>0&&0>=i?r:i>f?r+e-t.collisionHeight:r:i>0?n.top+=i:f>0?n.top-=f:n.top=u(n.top-s,n.top)}},flip:{left:function(n,t){var o,s,r=t.within,y=r.offset.left+r.scrollLeft,c=r.width,h=r.isWindow?r.scrollLeft:r.offset.left,l=n.left-t.collisionPosition.marginLeft,a=l-h,v=l+t.collisionWidth-c-h,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,e=-2*t.offset[0];0>a?(o=n.left+u+f+e+t.collisionWidth-c-y,(0>o||i(a)>o)&&(n.left+=u+f+e)):v>0&&(s=n.left-t.collisionPosition.marginLeft+u+f+e-h,(s>0||v>i(s))&&(n.left+=u+f+e))},top:function(n,t){var o,s,r=t.within,y=r.offset.top+r.scrollTop,a=r.height,h=r.isWindow?r.scrollTop:r.offset.top,v=n.top-t.collisionPosition.marginTop,c=v-h,l=v+t.collisionHeight-a-h,p="top"===t.my[1],u=p?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,e=-2*t.offset[1];0>c?(s=n.top+u+f+e+t.collisionHeight-a-y,n.top+u+f+e>c&&(0>s||i(c)>s)&&(n.top+=u+f+e)):l>0&&(o=n.top-t.collisionPosition.marginTop+u+f+e-h,n.top+u+f+e>l&&(o>0||l>i(o))&&(n.top+=u+f+e))}},flipfit:{left:function(){n.ui.position.flip.left.apply(this,arguments),n.ui.position.fit.left.apply(this,arguments)},top:function(){n.ui.position.flip.top.apply(this,arguments),n.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,r,u,f,e=document.getElementsByTagName("body")[0],o=document.createElement("div");t=document.createElement(e?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},e&&n.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in r)t.style[f]=r[f];t.appendChild(o),i=e||document.documentElement,i.insertBefore(t,i.firstChild),o.style.cssText="position: absolute; left: 10.7432222px;",u=n(o).offset().left,n.support.offsetFractions=u>10&&11>u,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(n,t){n.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=n("<div class='ui-progressbar-value ui-widget-header ui-corner-left'><\/div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(n){return n===t?this.options.value:(this.options.value=this._constrainedValue(n),this._refreshValue(),t)},_constrainedValue:function(n){return n===t&&(n=this.options.value),this.indeterminate=n===!1,"number"!=typeof n&&(n=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,n))},_setOptions:function(n){var t=n.value;delete n.value,this._super(n),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(n,t){"max"===n&&(t=Math.max(this.min,t)),this._super(n,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=n("<div class='ui-progressbar-overlay'><\/div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(n){var t=5;n.widget("ui.slider",n.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var r,i,u=this.options,t=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f=[];for(i=u.values&&u.values.length||1,t.length>i&&(t.slice(i).remove(),t=t.slice(0,i)),r=t.length;i>r;r++)f.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'><\/a>");this.handles=t.add(n(f.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){n(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:n.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=n("<div><\/div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=n([])},_setupEvents:function(){var n=this.handles.add(this.range).filter("a");this._off(n),this._on(n,this._handleEvents),this._hoverable(n),this._focusable(n)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var s,f,r,i,u,h,e,c,o=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),s={x:t.pageX,y:t.pageY},f=this._normValueFromMouse(s),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(f-o.values(t));(r>e||r===e&&(t===o._lastChangedValue||o.values(t)===l.min))&&(r=e,i=n(this),u=t)}),h=this._start(t,u),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=u,i.addClass("ui-state-active").focus(),e=i.offset(),c=!n(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-e.left-i.width()/2,top:t.pageY-e.top-i.height()/2-(parseInt(i.css("borderTopWidth"),10)||0)-(parseInt(i.css("borderBottomWidth"),10)||0)+(parseInt(i.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,u,f),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(n){var t={x:n.pageX,y:n.pageY},i=this._normValueFromMouse(t);return this._slide(n,this._handleIndex,i),!1},_mouseStop:function(n){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(n,this._handleIndex),this._change(n,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(n){var i,r,t,u,f;return"horizontal"===this.orientation?(i=this.elementSize.width,r=n.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(i=this.elementSize.height,r=n.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),t=r/i,t>1&&(t=1),0>t&&(t=0),"vertical"===this.orientation&&(t=1-t),u=this._valueMax()-this._valueMin(),f=this._valueMin()+t*u,this._trimAlignValue(f)},_start:function(n,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",n,i)},_slide:function(n,t,i){var r,f,u;this.options.values&&this.options.values.length?(r=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>r||1===t&&r>i)&&(i=r),i!==this.values(t)&&(f=this.values(),f[t]=i,u=this._trigger("slide",n,{handle:this.handles[t],value:i,values:f}),r=this.values(t?0:1),u!==!1&&this.values(t,i,!0))):i!==this.value()&&(u=this._trigger("slide",n,{handle:this.handles[t],value:i}),u!==!1&&this.value(i))},_stop:function(n,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",n,i)},_change:function(n,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",n,i)}},value:function(n){return arguments.length?(this.options.value=this._trimAlignValue(n),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(t,i){var u,f,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),undefined;if(!arguments.length)return this._values();if(!n.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(u=this.options.values,f=arguments[0],r=0;u.length>r;r+=1)u[r]=this._trimAlignValue(f[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,i){var r,u=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),n.isArray(this.options.values)&&(u=this.options.values.length),n.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=0;u>r;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var n=this.options.value;return this._trimAlignValue(n)},_values:function(n){var r,t,i;if(arguments.length)return r=this.options.values[n],r=this._trimAlignValue(r);if(this.options.values&&this.options.values.length){for(t=this.options.values.slice(),i=0;t.length>i;i+=1)t[i]=this._trimAlignValue(t[i]);return t}return[]},_trimAlignValue:function(n){if(this._valueMin()>=n)return this._valueMin();if(n>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(n-this._valueMin())%t,r=n-i;return 2*Math.abs(i)>=t&&(r+=i>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var s,t,c,f,h,e=this.options.range,i=this.options,r=this,u=this._animateOff?!1:i.animate,o={};this.options.values&&this.options.values.length?this.handles.each(function(f){t=100*((r.values(f)-r._valueMin())/(r._valueMax()-r._valueMin())),o["horizontal"===r.orientation?"left":"bottom"]=t+"%",n(this).stop(1,1)[u?"animate":"css"](o,i.animate),r.options.range===!0&&("horizontal"===r.orientation?(0===f&&r.range.stop(1,1)[u?"animate":"css"]({left:t+"%"},i.animate),1===f&&r.range[u?"animate":"css"]({width:t-s+"%"},{queue:!1,duration:i.animate})):(0===f&&r.range.stop(1,1)[u?"animate":"css"]({bottom:t+"%"},i.animate),1===f&&r.range[u?"animate":"css"]({height:t-s+"%"},{queue:!1,duration:i.animate}))),s=t}):(c=this.value(),f=this._valueMin(),h=this._valueMax(),t=h!==f?100*((c-f)/(h-f)):0,o["horizontal"===this.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[u?"animate":"css"](o,i.animate),"min"===e&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:t+"%"},i.animate),"max"===e&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:i.animate}),"min"===e&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:t+"%"},i.animate),"max"===e&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:i.animate}))},_handleEvents:{keydown:function(i){var o,u,r,f,e=n(i.target).data("ui-slider-handle-index");switch(i.keyCode){case n.ui.keyCode.HOME:case n.ui.keyCode.END:case n.ui.keyCode.PAGE_UP:case n.ui.keyCode.PAGE_DOWN:case n.ui.keyCode.UP:case n.ui.keyCode.RIGHT:case n.ui.keyCode.DOWN:case n.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,n(i.target).addClass("ui-state-active"),o=this._start(i,e),o===!1))return}switch(f=this.options.step,u=r=this.options.values&&this.options.values.length?this.values(e):this.value(),i.keyCode){case n.ui.keyCode.HOME:r=this._valueMin();break;case n.ui.keyCode.END:r=this._valueMax();break;case n.ui.keyCode.PAGE_UP:r=this._trimAlignValue(u+(this._valueMax()-this._valueMin())/t);break;case n.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(u-(this._valueMax()-this._valueMin())/t);break;case n.ui.keyCode.UP:case n.ui.keyCode.RIGHT:if(u===this._valueMax())return;r=this._trimAlignValue(u+f);break;case n.ui.keyCode.DOWN:case n.ui.keyCode.LEFT:if(u===this._valueMin())return;r=this._trimAlignValue(u-f)}this._slide(i,e,r)},click:function(n){n.preventDefault()},keyup:function(t){var i=n(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),n(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(n){function t(n){return function(){var t=this.element.val();n.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}n.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return n.each(["min","max","step"],function(n,r){var u=i.attr(r);void 0!==u&&u.length&&(t[r]=u)}),t},_events:{keydown:function(n){this._start(n)&&this._keydown(n)&&n.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(n){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",n),void 0)},mousewheel:function(n,t){if(t){if(!this.spinning&&!this._start(n))return!1;this._spin((t>0?1:-1)*this.options.step,n),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(n)},100),n.preventDefault()}},"mousedown .ui-spinner-button":function(t){function r(){var n=this.element[0]===this.document[0].activeElement;n||(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i}))}var i;i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,r.call(this)}),this._start(t)!==!1&&this._repeat(null,n(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(n(t.currentTarget).hasClass("ui-state-active"))return this._start(t)===!1?!1:(this._repeat(null,n(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var n=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=n.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*n.height())&&n.height()>0&&n.height(n.height()),this.options.disabled&&this.disable()},_keydown:function(t){var r=this.options,i=n.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,r.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-r.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'><\/span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;<\/span><\/a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;<\/span><\/a>"},_start:function(n){return this.spinning||this._trigger("start",n)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(n,t,i){n=n||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},n),this._spin(t*this.options.step,i)},_spin:function(n,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+n*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?n.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var n=this._precisionOf(this.options.step);return null!==this.options.min&&(n=Math.max(n,this._precisionOf(this.options.min))),n},_precisionOf:function(n){var t=""+n,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(n){var r,i,t=this.options;return r=null!==t.min?t.min:0,i=n-r,i=Math.round(i/t.step)*t.step,n=r+i,n=parseFloat(n.toFixed(this._precision())),null!==t.max&&n>t.max?t.max:null!==t.min&&t.min>n?t.min:n},_stop:function(n){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",n))},_setOption:function(n,t){if("culture"===n||"numberFormat"===n){var i=this._parse(this.element.val());return this.options[n]=t,this.element.val(this._format(i)),void 0}("max"===n||"min"===n||"step"===n)&&"string"==typeof t&&(t=this._parse(t)),"icons"===n&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(n,t),"disabled"===n&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(n){this._super(n),this._value(this.element.val())}),_parse:function(n){return"string"==typeof n&&""!==n&&(n=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(n,10,this.options.culture):+n),""===n||isNaN(n)?null:n},_format:function(n){return""===n?"":window.Globalize&&this.options.numberFormat?Globalize.format(n,this.options.numberFormat,this.options.culture):n},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(n,t){var i;""!==n&&(i=this._parse(n),null!==i&&(t||(i=this._adjustValue(i)),n=this._format(i))),this.element.val(n),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(n){this._stepUp(n)}),_stepUp:function(n){this._start()&&(this._spin((n||1)*this.options.step),this._stop())},stepDown:t(function(n){this._stepDown(n)}),_stepDown:function(n){this._start()&&(this._spin((n||1)*-this.options.step),this._stop())},pageUp:t(function(n){this._stepUp((n||1)*this.options.page)}),pageDown:t(function(n){this._stepDown((n||1)*this.options.page)}),value:function(n){return arguments.length?(t(this._value).call(this,n),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(n,t){function u(){return++f}function i(n){return n.hash.length>1&&decodeURIComponent(n.href.replace(r,""))===decodeURIComponent(location.href.replace(r,""))}var f=0,r=/#.*$/;n.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var i=this,t=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",t.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){n(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){n(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),t.active=this._initialActive(),n.isArray(t.disabled)&&(t.disabled=n.unique(t.disabled.concat(n.map(this.tabs.filter(".ui-state-disabled"),function(n){return i.tabs.index(n)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(t.active):n(),this._refresh(),this.active.length&&this.load(t.active)},_initialActive:function(){var i=this.options.active,r=this.options.collapsible,u=location.hash.substring(1);return null===i&&(u&&this.tabs.each(function(r,f){return n(f).attr("aria-controls")===u?(i=r,!1):t}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=r?!1:0)),!r&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):n()}},_tabKeydown:function(i){var u=n(this.document[0].activeElement).closest("li"),r=this.tabs.index(u),f=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case n.ui.keyCode.RIGHT:case n.ui.keyCode.DOWN:r++;break;case n.ui.keyCode.UP:case n.ui.keyCode.LEFT:f=!1,r--;break;case n.ui.keyCode.END:r=this.anchors.length-1;break;case n.ui.keyCode.HOME:r=0;break;case n.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(r),t;case n.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r),t;default:return}i.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,f),i.ctrlKey||(u.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===n.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===n.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===n.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):t},_findNextTab:function(t,i){function u(){return t>r&&(t=0),0>t&&(t=r),t}for(var r=this.tabs.length-1;-1!==n.inArray(u(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(n,t){return n=this._findNextTab(n,t),this.tabs.eq(n).focus(),n},_setOption:function(n,i){return"active"===n?(this._activate(i),t):"disabled"===n?(this._setupDisabled(i),t):(this._super(n,i),"collapsible"===n&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===n&&this._setupEvents(i),"heightStyle"===n&&this._setupHeightStyle(i),t)},_tabId:function(n){return n.attr("aria-controls")||"ui-tabs-"+u()},_sanitizeSelector:function(n){return n?n.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=n.map(i.filter(".ui-state-disabled"),function(n){return i.index(n)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!n.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=n()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=n()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return n("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=n(),this.anchors.each(function(r,u){var e,f,s,h=n(u).uniqueId().attr("id"),o=n(u).closest("li"),c=o.attr("aria-controls");i(u)?(e=u.hash,f=t.element.find(t._sanitizeSelector(e))):(s=t._tabId(o),e="#"+s,f=t.element.find(e),f.length||(f=t._createPanel(s),f.insertAfter(t.panels[r-1]||t.tablist)),f.attr("aria-live","polite")),f.length&&(t.panels=t.panels.add(f)),c&&o.data("ui-tabs-aria-controls",c),o.attr({"aria-controls":e.substring(1),"aria-labelledby":h}),f.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return n("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){n.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,r=0;i=this.tabs[r];r++)t===!0||-1!==n.inArray(r,t)?n(i).addClass("ui-state-disabled").attr("aria-disabled","true"):n(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(n){n.preventDefault()}};t&&n.each(t.split(" "),function(n,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,r=this.element.parent();"fill"===t?(i=r.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=n(this),r=t.css("position");"absolute"!==r&&"fixed"!==r&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=n(this).outerHeight(!0)}),this.panels.each(function(){n(this).height(Math.max(0,i-n(this).innerHeight()+n(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,n(this).height("").height())}).height(i))},_eventHandler:function(t){var u=this.options,r=this.active,c=n(t.currentTarget),i=c.closest("li"),f=i[0]===r[0],e=f&&u.collapsible,o=e?n():this._getPanelForTab(i),s=r.length?this._getPanelForTab(r):n(),h={oldTab:r,oldPanel:s,newTab:e?n():i,newPanel:o};t.preventDefault(),i.hasClass("ui-state-disabled")||i.hasClass("ui-tabs-loading")||this.running||f&&!u.collapsible||this._trigger("beforeActivate",t,h)===!1||(u.active=e?!1:this.tabs.index(i),this.active=f?n():i,this.xhr&&this.xhr.abort(),s.length||o.length||n.error("jQuery UI Tabs: Mismatching fragment identifier."),o.length&&this.load(this.tabs.index(i),t),this._toggle(t,h))},_toggle:function(t,i){function e(){u.running=!1,u._trigger("activate",t,i)}function o(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&u.options.show?u._show(r,u.options.show,e):(r.show(),e())}var u=this,r=i.newPanel,f=i.oldPanel;this.running=!0,f.length&&this.options.hide?this._hide(f,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),f.hide(),o()),f.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),r.length&&f.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===n(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var r,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),r=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:r,currentTarget:r,preventDefault:n.noop}))},_findActive:function(t){return t===!1?n():this.tabs.eq(t)},_getIndex:function(n){return"string"==typeof n&&(n=this.anchors.index(this.anchors.filter("[href$='"+n+"']"))),n},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){n.data(this,"ui-tabs-destroy")?n(this).remove():n(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=n(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var r=this.options.disabled;r!==!1&&(i===t?r=!1:(i=this._getIndex(i),r=n.isArray(r)?n.map(r,function(n){return n!==i?n:null}):n.map(this.tabs,function(n,t){return t!==i?t:null})),this._setupDisabled(r))},disable:function(i){var r=this.options.disabled;if(r!==!0){if(i===t)r=!0;else{if(i=this._getIndex(i),-1!==n.inArray(i,r))return;r=n.isArray(r)?n.merge([i],r).sort():[i]}this._setupDisabled(r)}},load:function(t,r){t=this._getIndex(t);var f=this,u=this.tabs.eq(t),o=u.find(".ui-tabs-anchor"),e=this._getPanelForTab(u),s={tab:u,panel:e};i(o[0])||(this.xhr=n.ajax(this._ajaxSettings(o,r,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(u.addClass("ui-tabs-loading"),e.attr("aria-busy","true"),this.xhr.success(function(n){setTimeout(function(){e.html(n),f._trigger("load",r,s)},1)}).complete(function(n,t){setTimeout(function(){"abort"===t&&f.panels.stop(!1,!0),u.removeClass("ui-tabs-loading"),e.removeAttr("aria-busy"),n===f.xhr&&delete f.xhr},1)})))},_ajaxSettings:function(t,i,r){var u=this;return{url:t.attr("href"),beforeSend:function(t,f){return u._trigger("beforeLoad",i,n.extend({jqXHR:t,ajaxSettings:f},r))}}},_getPanelForTab:function(t){var i=n(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(n){function t(t,i){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",n.trim(r.join(" ")))}function i(t){var u=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),r=n.inArray(u,i);-1!==r&&i.splice(r,1),t.removeData("ui-tooltip-id"),i=n.trim(i.join(" ")),i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")}var r=0;n.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var t=n(this).attr("title")||"";return n("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var r=this;return"disabled"===t?(this[i?"_disable":"_enable"](),this.options[t]=i,void 0):(this._super(t,i),"content"===t&&n.each(this.tooltips,function(n,t){r._updateContent(t)}),void 0)},_disable:function(){var t=this;n.each(this.tooltips,function(i,r){var u=n.Event("blur");u.target=u.currentTarget=r[0],t.close(u,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=n(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=n(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var r=this,i=n(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each(function(){var i,t=n(this);t.data("ui-tooltip-open")&&(i=n.Event("blur"),i.target=i.currentTarget=this,r.close(i,!0)),t.attr("title")&&(t.uniqueId(),r.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._updateContent(i,t))},_updateContent:function(n,t){var i,r=this.options.content,u=this,f=t?t.type:null;return"string"==typeof r?this._open(t,n,r):(i=r.call(n[0],function(i){n.data("ui-tooltip-open")&&u._delay(function(){t&&(t.type=f),this._open(t,n,i)})}),i&&this._open(t,n,i),void 0)},_open:function(i,r,u){function o(n){s.of=n,f.is(":hidden")||f.position(s)}var f,e,h,s=n.extend({},this.options.position);if(u){if(f=this._find(r),f.length)return f.find(".ui-tooltip-content").html(u),void 0;r.is("[title]")&&(i&&"mouseover"===i.type?r.attr("title",""):r.removeAttr("title")),f=this._tooltip(r),t(r,f.attr("id")),f.find(".ui-tooltip-content").html(u),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):f.position(n.extend({of:r},this.options.position)),f.hide(),this._show(f,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){f.is(":visible")&&(o(s.of),clearInterval(h))},n.fx.interval)),this._trigger("open",i,{tooltip:f}),e={keyup:function(t){if(t.keyCode===n.ui.keyCode.ESCAPE){var i=n.Event(t);i.currentTarget=r[0],this.close(i,!0)}},remove:function(){this._removeTooltip(f)}},i&&"mouseover"!==i.type||(e.mouseleave="close"),i&&"focusin"!==i.type||(e.focusout="close"),this._on(!0,r,e)}},close:function(t){var f=this,r=n(t?t.currentTarget:this.element),u=this._find(r);this.closing||(clearInterval(this.delayedShow),r.data("ui-tooltip-title")&&r.attr("title",r.data("ui-tooltip-title")),i(r),u.stop(!0),this._hide(u,this.options.hide,function(){f._removeTooltip(n(this))}),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&n.each(this.parents,function(t,i){n(i.element).attr("title",i.title),delete f.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:u}),this.closing=!1)},_tooltip:function(t){var u="ui-tooltip-"+r++,i=n("<div>").attr({id:u,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return n("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[u]=t,i},_find:function(t){var i=t.data("ui-tooltip-id");return i?n("#"+i):n()},_removeTooltip:function(n){n.remove(),delete this.tooltips[n.attr("id")]},_destroy:function(){var t=this;n.each(this.tooltips,function(i,r){var u=n.Event("blur");u.target=u.currentTarget=r[0],t.close(u,!0),n("#"+i).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})}(jQuery),function(){"use strict";function n(n){function s(s,h){var rt,ut,p=s==window,l=h&&h.message!==undefined?h.message:undefined,g,k,d,tt,nt,w,b,it,ft,et,at;if(h=n.extend({},n.blockUI.defaults,h||{}),!h.ignoreIfBlocked||!n(s).data("blockUI.isBlocked")){if(h.overlayCSS=n.extend({},n.blockUI.defaults.overlayCSS,h.overlayCSS||{}),rt=n.extend({},n.blockUI.defaults.css,h.css||{}),h.onOverlayClick&&(h.overlayCSS.cursor="pointer"),ut=n.extend({},n.blockUI.defaults.themedCSS,h.themedCSS||{}),l=l===undefined?h.message:l,p&&t&&e(window,{fadeOut:0}),l&&typeof l!="string"&&(l.parentNode||l.jquery)&&(g=l.jquery?l[0]:l,k={},n(s).data("blockUI.history",k),k.el=g,k.parent=g.parentNode,k.display=g.style.display,k.position=g.style.position,k.parent&&k.parent.removeChild(g)),n(s).data("blockUI.onUnblock",h.onUnblock),d=h.baseZ,tt=f||h.forceIframe?n('<iframe class="blockUI" style="z-index:'+d+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+h.iframeSrc+'"><\/iframe>'):n('<div class="blockUI" style="display:none"><\/div>'),nt=h.theme?n('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+d+++';display:none"><\/div>'):n('<div class="blockUI blockOverlay" style="z-index:'+d+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"><\/div>'),h.theme&&p?(b='<div class="blockUI '+h.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(d+10)+';display:none;position:fixed">',h.title&&(b+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(h.title||"&nbsp;")+"<\/div>"),b+='<div class="ui-widget-content ui-dialog-content"><\/div>',b+="<\/div>"):h.theme?(b='<div class="blockUI '+h.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(d+10)+';display:none;position:absolute">',h.title&&(b+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(h.title||"&nbsp;")+"<\/div>"),b+='<div class="ui-widget-content ui-dialog-content"><\/div>',b+="<\/div>"):b=p?'<div class="blockUI '+h.blockMsgClass+' blockPage" style="z-index:'+(d+10)+';display:none;position:fixed"><\/div>':'<div class="blockUI '+h.blockMsgClass+' blockElement" style="z-index:'+(d+10)+';display:none;position:absolute"><\/div>',w=n(b),l&&(h.theme?(w.css(ut),w.addClass("ui-widget-content")):w.css(rt)),h.theme||nt.css(h.overlayCSS),nt.css("position",p?"fixed":"absolute"),(f||h.forceIframe)&&tt.css("opacity",0),it=[tt,nt,w],ft=p?n("body"):n(s),n.each(it,function(){this.appendTo(ft)}),h.theme&&h.draggable&&n.fn.draggable&&w.draggable({handle:".ui-dialog-titlebar",cancel:"li"}),et=v&&(!n.support.boxModel||n("object,embed",p?null:s).length>0),o||et){if(p&&h.allowBodyStretch&&n.support.boxModel&&n("html,body").css("height","100%"),(o||!n.support.boxModel)&&!p)var ot=r(s,"borderTopWidth"),st=r(s,"borderLeftWidth"),ht=ot?"(0 - "+ot+")":0,ct=st?"(0 - "+st+")":0;n.each(it,function(n,t){var i=t[0].style,r,u;i.position="absolute",n<2?(p?i.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+h.quirksmodeOffsetHack+') + "px"'):i.setExpression("height",'this.parentNode.offsetHeight + "px"'),p?i.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):i.setExpression("width",'this.parentNode.offsetWidth + "px"'),ct&&i.setExpression("left",ct),ht&&i.setExpression("top",ht)):h.centerY?(p&&i.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),i.marginTop=0):!h.centerY&&p&&(r=h.css&&h.css.top?parseInt(h.css.top,10):0,u="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+r+') + "px"',i.setExpression("top",u))})}if(l&&(h.theme?w.find(".ui-widget-content").append(l):w.append(l),(l.jquery||l.nodeType)&&n(l).show()),(f||h.forceIframe)&&h.showOverlay&&tt.show(),h.fadeIn){var lt=h.onBlock?h.onBlock:u,vt=h.showOverlay&&!l?lt:u,yt=l?lt:u;h.showOverlay&&nt._fadeIn(h.fadeIn,vt),l&&w._fadeIn(h.fadeIn,yt)}else h.showOverlay&&nt.show(),l&&w.show(),h.onBlock&&h.onBlock();c(1,s,h),p?(t=w[0],i=n(h.focusableElements,t),h.focusInput&&setTimeout(a,20)):y(w[0],h.centerX,h.centerY),h.timeout&&(at=setTimeout(function(){p?n.unblockUI(h):n(s).unblock(h)},h.timeout),n(s).data("blockUI.timeout",at))}}function e(r,u){var o,s=r==window,e=n(r),l=e.data("blockUI.history"),a=e.data("blockUI.timeout"),f;a&&(clearTimeout(a),e.removeData("blockUI.timeout")),u=n.extend({},n.blockUI.defaults,u||{}),c(0,r,u),u.onUnblock===null&&(u.onUnblock=e.data("blockUI.onUnblock"),e.removeData("blockUI.onUnblock")),f=s?n("body").children().filter(".blockUI").add("body > .blockUI"):e.find(">.blockUI"),u.cursorReset&&(f.length>1&&(f[1].style.cursor=u.cursorReset),f.length>2&&(f[2].style.cursor=u.cursorReset)),s&&(t=i=null),u.fadeOut?(o=f.length,f.fadeOut(u.fadeOut,function(){--o==0&&h(f,l,u,r)})):h(f,l,u,r)}function h(t,i,r,u){var e=n(u);if(t.each(function(){this.parentNode&&this.parentNode.removeChild(this)}),i&&i.el&&(i.el.style.display=i.display,i.el.style.position=i.position,i.parent&&i.parent.appendChild(i.el),e.removeData("blockUI.history")),e.data("blockUI.static")&&e.css("position","static"),typeof r.onUnblock=="function")r.onUnblock(u,r);var f=n(document.body),o=f.width(),s=f[0].style.width;f.width(o-1).width(o),f[0].style.width=s}function c(i,r,u){var f=r==window,o=n(r),e;(i||(!f||t)&&(f||o.data("blockUI.isBlocked")))&&(o.data("blockUI.isBlocked",i),f&&u.bindEvents&&(!i||u.showOverlay))&&(e="mousedown mouseup keydown keypress keyup touchstart touchend touchmove",i?n(document).bind(e,u,l):n(document).unbind(e,l))}function l(r){var u,f;if(r.keyCode&&r.keyCode==9&&t&&r.data.constrainTabKey){var e=i,s=!r.shiftKey&&r.target===e[e.length-1],o=r.shiftKey&&r.target===e[0];if(s||o)return setTimeout(function(){a(o)},10),!1}return(u=r.data,f=n(r.target),f.hasClass("blockOverlay")&&u.onOverlayClick&&u.onOverlayClick(),f.parents("div."+u.blockMsgClass).length>0)?!0:f.parents().children().filter("div.blockUI").length===0}function a(n){if(i){var t=i[n===!0?i.length-1:0];t&&t.focus()}}function y(n,t,i){var u=n.parentNode,f=n.style,e=(u.offsetWidth-n.offsetWidth)/2-r(u,"borderLeftWidth"),o=(u.offsetHeight-n.offsetHeight)/2-r(u,"borderTopWidth");t&&(f.left=e>0?e+"px":"0"),i&&(f.top=o>0?o+"px":"0")}function r(t,i){return parseInt(n.css(t,i),10)||0}var t,i;n.fn._fadeIn=n.fn.fadeIn;var u=n.noop||function(){},f=/MSIE/.test(navigator.userAgent),o=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),p=document.documentMode||0,v=n.isFunction(document.createElement("div").style.setExpression);n.blockUI=function(n){s(window,n)},n.unblockUI=function(n){e(window,n)},n.growlUI=function(t,i,r,u){var f=n('<div class="growlUI"><\/div>');t&&f.append("<h1>"+t+"<\/h1>"),i&&f.append("<h2>"+i+"<\/h2>"),r===undefined&&(r=3e3),n.blockUI({message:f,fadeIn:700,fadeOut:1e3,centerY:!1,timeout:r,showOverlay:!1,onUnblock:u,css:n.blockUI.defaults.growlCSS})},n.fn.block=function(t){if(this[0]===window)return n.blockUI(t),this;var i=n.extend({},n.blockUI.defaults,t||{});return this.each(function(){var t=n(this);i.ignoreIfBlocked&&t.data("blockUI.isBlocked")||t.unblock({fadeOut:0})}),this.each(function(){n.css(this,"position")=="static"&&(this.style.position="relative",n(this).data("blockUI.static",!0)),this.style.zoom=1,s(this,t)})},n.fn.unblock=function(t){return this[0]===window?(n.unblockUI(t),this):this.each(function(){e(this,t)})},n.blockUI.version=2.6,n.blockUI.defaults={message:"<h1>Please wait...<\/h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1},t=null,i=[]}typeof define=="function"&&define.amd&&define.amd.jQuery?define(["jquery"],n):n(jQuery)}(),function(n){n(["jquery"],function(n){return function(){function l(n,t,u){return r({type:f.error,iconClass:i().iconClasses.error,message:n,optionsOverride:u,title:t})}function a(n,t,u){return r({type:f.info,iconClass:i().iconClasses.info,message:n,optionsOverride:u,title:t})}function v(n){e=n}function y(n,t,u){return r({type:f.success,iconClass:i().iconClasses.success,message:n,optionsOverride:u,title:t})}function p(n,t,u){return r({type:f.warning,iconClass:i().iconClasses.warning,message:n,optionsOverride:u,title:t})}function w(r){var f=i();if(t||u(f),r&&n(":focus",r).length===0){r[f.hideMethod]({duration:f.hideDuration,easing:f.hideEasing,complete:function(){s(r)}});return}t.children().length&&t[f.hideMethod]({duration:f.hideDuration,easing:f.hideEasing,complete:function(){t.remove()}})}function b(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:undefined,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:undefined,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:"<button>&times;<\/button>",newestOnTop:!0}}function o(n){e&&e(n)}function r(r){function c(t){if(!n(":focus",e).length||t)return e[f.hideMethod]({duration:f.hideDuration,easing:f.hideEasing,complete:function(){s(e),f.onHidden&&f.onHidden(),l.state="hidden",l.endTime=new Date,o(l)}})}function b(){(f.timeOut>0||f.extendedTimeOut>0)&&(y=setTimeout(c,f.extendedTimeOut))}function k(){clearTimeout(y),e.stop(!0,!0)[f.showMethod]({duration:f.showDuration,easing:f.showEasing})}var f=i(),v=r.iconClass||f.iconClass;typeof r.optionsOverride!="undefined"&&(f=n.extend(f,r.optionsOverride),v=r.optionsOverride.iconClass||v),h++,t=u(f);var y=null,e=n("<div/>"),p=n("<div/>"),w=n("<div/>"),a=n(f.closeHtml),l={toastId:h,state:"visible",startTime:new Date,options:f,map:r};return r.iconClass&&e.addClass(f.toastClass).addClass(v),r.title&&(p.append(r.title).addClass(f.titleClass),e.append(p)),r.message&&(w.append(r.message).addClass(f.messageClass),e.append(w)),f.closeButton&&(a.addClass("toast-close-button"),e.prepend(a)),e.hide(),f.newestOnTop?t.prepend(e):t.append(e),e[f.showMethod]({duration:f.showDuration,easing:f.showEasing,complete:f.onShown}),f.timeOut>0&&(y=setTimeout(c,f.timeOut)),e.hover(k,b),!f.onclick&&f.tapToDismiss&&e.click(c),f.closeButton&&a&&a.click(function(n){n.stopPropagation(),c(!0)}),f.onclick&&e.click(function(){f.onclick(),c()}),o(l),f.debug&&console&&console.log(l),e}function u(r){return(r||(r=i()),t=n("#"+r.containerId),t.length)?t:(t=n("<div/>").attr("id",r.containerId).addClass(r.positionClass),t.appendTo(n(r.target)),t)}function i(){return n.extend({},b(),c.options)}function s(n){(t||(t=u()),n.is(":visible"))||(n.remove(),n=null,t.children().length===0&&t.remove())}var t,e,h=0,f={error:"error",info:"info",success:"success",warning:"warning"},c={clear:w,error:l,getContainer:u,info:a,options:{},subscribe:v,success:y,version:"2.0.1",warning:p};return c}()})}(typeof define=="function"&&define.amd?define:function(n,t){typeof module!="undefined"&&module.exports?module.exports=t(require(n[0])):window.toastr=t(window.jQuery)});var OpenLayers={VERSION_NUMBER:"Release 2.13.1",singleFile:!0,_getScriptLocation:function(){for(var i=document.getElementsByTagName("script"),n,r="",t=0,u=i.length;t<u;t++)if((n=i[t].getAttribute("src"))&&(n=n.match(/(^|(.*?\/))(OpenLayers[^\/]*?\.js)(\?|$)/))){r=n[1];break}return function(){return r}}(),ImgPath:""};OpenLayers.String={startsWith:function(n,t){return 0==n.indexOf(t)},contains:function(n,t){return-1!=n.indexOf(t)},trim:function(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(n){var r,t;n=n.split("-");for(var t=n[0],i=1,u=n.length;i<u;i++)r=n[i],t=t+(r.charAt(0).toUpperCase()+r.substring(1));return t},format:function(n,t,i){return t||(t=window),n.replace(OpenLayers.String.tokenRegEx,function(n,r){for(var u,e=r.split(/\.+/),f=0;f<e.length;f++){if(0==f&&(u=t),void 0===u)break;u=u[e[f]]}return"function"==typeof u&&(u=i?u.apply(null,i):u()),"undefined"==typeof u?"undefined":u})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(n){return OpenLayers.String.numberRegEx.test(n)},numericIf:function(n,t){var i=n;return!0===t&&null!=n&&n.replace&&(n=n.replace(/^\s*|\s*$/g,"")),OpenLayers.String.isNumeric(n)?parseFloat(n):i}},OpenLayers.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(n,t){var i=0;return 0<t&&(i=parseFloat(n.toPrecision(t))),i},format:function(n,t,i,r){var u,f;if(t="undefined"!=typeof t?t:0,i="undefined"!=typeof i?i:OpenLayers.Number.thousandsSeparator,r="undefined"!=typeof r?r:OpenLayers.Number.decimalSeparator,null!=t&&(n=parseFloat(n.toFixed(t))),u=n.toString().split("."),1==u.length&&null==t&&(t=0),n=u[0],i)for(f=/(-?[0-9]+)([0-9]{3})/;f.test(n);)n=n.replace(f,"$1"+i+"$2");return 0==t?t=n:(i=1<u.length?u[1]:"0",null!=t&&(i+=Array(t-i.length+1).join("0")),t=n+r+i),t},zeroPad:function(n,t,i){for(n=n.toString(i||10);n.length<t;)n="0"+n;return n}},OpenLayers.Function={bind:function(n,t){var i=Array.prototype.slice.apply(arguments,[2]);return function(){var r=i.concat(Array.prototype.slice.apply(arguments,[0]));return n.apply(t,r)}},bindAsEventListener:function(n,t){return function(i){return n.call(t,i||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},OpenLayers.Array={filter:function(n,t,i){var u=[],e,r,f;if(Array.prototype.filter)u=n.filter(t,i);else{if(e=n.length,"function"!=typeof t)throw new TypeError;for(r=0;r<e;r++)r in n&&(f=n[r],t.call(i,f,r,n)&&u.push(f))}return u}},OpenLayers.Class=function(){var n=arguments.length,r=arguments[0],t=arguments[n-1],i="function"==typeof t.initialize?t.initialize:function(){r.prototype.initialize.apply(this,arguments)};return 1<n?(n=[i,r].concat(Array.prototype.slice.call(arguments).slice(1,n-1),t),OpenLayers.inherit.apply(null,n)):i.prototype=t,i},OpenLayers.inherit=function(n,t){var i=function(){},u,r;for(i.prototype=t.prototype,n.prototype=new i,i=2,u=arguments.length;i<u;i++)r=arguments[i],"function"==typeof r&&(r=r.prototype),OpenLayers.Util.extend(n.prototype,r)},OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.extend=function(n,t){var i,r;if(n=n||{},t){for(i in t)r=t[i],void 0!==r&&(n[i]=r);"function"==typeof window.Event&&t instanceof window.Event||!t.hasOwnProperty||!t.hasOwnProperty("toString")||(n.toString=t.toString)}return n},OpenLayers.Bounds=OpenLayers.Class({left:null,bottom:null,right:null,top:null,centerLonLat:null,initialize:function(n,t,i,r){OpenLayers.Util.isArray(n)&&(r=n[3],i=n[2],t=n[1],n=n[0]),null!=n&&(this.left=OpenLayers.Util.toFloat(n)),null!=t&&(this.bottom=OpenLayers.Util.toFloat(t)),null!=i&&(this.right=OpenLayers.Util.toFloat(i)),null!=r&&(this.top=OpenLayers.Util.toFloat(r))},clone:function(){return new OpenLayers.Bounds(this.left,this.bottom,this.right,this.top)},equals:function(n){var t=!1;return null!=n&&(t=this.left==n.left&&this.right==n.right&&this.top==n.top&&this.bottom==n.bottom),t},toString:function(){return[this.left,this.bottom,this.right,this.top].join()},toArray:function(n){return!0===n?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]},toBBOX:function(n,t){null==n&&(n=6);var i=Math.pow(10,n),r=Math.round(this.left*i)/i,u=Math.round(this.bottom*i)/i,f=Math.round(this.right*i)/i,i=Math.round(this.top*i)/i;return!0===t?u+","+r+","+i+","+f:r+","+u+","+f+","+i},toGeometry:function(){return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(this.left,this.bottom),new OpenLayers.Geometry.Point(this.right,this.bottom),new OpenLayers.Geometry.Point(this.right,this.top),new OpenLayers.Geometry.Point(this.left,this.top)])])},getWidth:function(){return this.right-this.left},getHeight:function(){return this.top-this.bottom},getSize:function(){return new OpenLayers.Size(this.getWidth(),this.getHeight())},getCenterPixel:function(){return new OpenLayers.Pixel((this.left+this.right)/2,(this.bottom+this.top)/2)},getCenterLonLat:function(){return this.centerLonLat||(this.centerLonLat=new OpenLayers.LonLat((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat},scale:function(n,t){null==t&&(t=this.getCenterLonLat());var i,r;return"OpenLayers.LonLat"==t.CLASS_NAME?(i=t.lon,r=t.lat):(i=t.x,r=t.y),new OpenLayers.Bounds((this.left-i)*n+i,(this.bottom-r)*n+r,(this.right-i)*n+i,(this.top-r)*n+r)},add:function(n,t){if(null==n||null==t)throw new TypeError("Bounds.add cannot receive null values");return new OpenLayers.Bounds(this.left+n,this.bottom+t,this.right+n,this.top+t)},extend:function(n){if(n)switch(n.CLASS_NAME){case"OpenLayers.LonLat":this.extendXY(n.lon,n.lat);break;case"OpenLayers.Geometry.Point":this.extendXY(n.x,n.y);break;case"OpenLayers.Bounds":this.centerLonLat=null,(null==this.left||n.left<this.left)&&(this.left=n.left),(null==this.bottom||n.bottom<this.bottom)&&(this.bottom=n.bottom),(null==this.right||n.right>this.right)&&(this.right=n.right),(null==this.top||n.top>this.top)&&(this.top=n.top)}},extendXY:function(n,t){this.centerLonLat=null,(null==this.left||n<this.left)&&(this.left=n),(null==this.bottom||t<this.bottom)&&(this.bottom=t),(null==this.right||n>this.right)&&(this.right=n),(null==this.top||t>this.top)&&(this.top=t)},containsLonLat:function(n,t){"boolean"==typeof t&&(t={inclusive:t}),t=t||{};var i=this.contains(n.lon,n.lat,t.inclusive),r=t.worldBounds;return r&&!i&&(i=r.getWidth(),r=Math.round((n.lon-(r.left+r.right)/2)/i),i=this.containsLonLat({lon:n.lon-r*i,lat:n.lat},{inclusive:t.inclusive})),i},containsPixel:function(n,t){return this.contains(n.x,n.y,t)},contains:function(n,t,i){if(null==i&&(i=!0),null==n||null==t)return!1;n=OpenLayers.Util.toFloat(n),t=OpenLayers.Util.toFloat(t);return i?n>=this.left&&n<=this.right&&t>=this.bottom&&t<=this.top:n>this.left&&n<this.right&&t>this.bottom&&t<this.top},intersectsBounds:function(n,t){var i,r,u;if("boolean"==typeof t&&(t={inclusive:t}),t=t||{},t.worldBounds?(i=this.wrapDateLine(t.worldBounds),n=n.wrapDateLine(t.worldBounds)):i=this,null==t.inclusive&&(t.inclusive=!0),r=!1,u=i.left==n.right||i.right==n.left||i.top==n.bottom||i.bottom==n.top,t.inclusive||!u)var r=n.top>=i.bottom&&n.top<=i.top||i.top>n.bottom&&i.top<n.top,u=n.left>=i.left&&n.left<=i.right||i.left>=n.left&&i.left<=n.right,e=n.right>=i.left&&n.right<=i.right||i.right>=n.left&&i.right<=n.right,r=(n.bottom>=i.bottom&&n.bottom<=i.top||i.bottom>=n.bottom&&i.bottom<=n.top||r)&&(u||e);if(t.worldBounds&&!r){var f=t.worldBounds,u=f.getWidth(),e=!f.containsBounds(i),f=!f.containsBounds(n);e&&!f?(n=n.add(-u,0),r=i.intersectsBounds(n,{inclusive:t.inclusive})):f&&!e&&(i=i.add(-u,0),r=n.intersectsBounds(i,{inclusive:t.inclusive}))}return r},containsBounds:function(n,t,i){null==t&&(t=!1),null==i&&(i=!0);var r=this.contains(n.left,n.bottom,i),u=this.contains(n.right,n.bottom,i),f=this.contains(n.left,n.top,i);return n=this.contains(n.right,n.top,i),t?r||u||f||n:r&&u&&f&&n},determineQuadrant:function(n){var t="",i=this.getCenterLonLat(),t=t+(n.lat<i.lat?"b":"t");return t+(n.lon<i.lon?"l":"r")},transform:function(n,t){this.centerLonLat=null;var i=OpenLayers.Projection.transform({x:this.left,y:this.bottom},n,t),r=OpenLayers.Projection.transform({x:this.right,y:this.bottom},n,t),u=OpenLayers.Projection.transform({x:this.left,y:this.top},n,t),f=OpenLayers.Projection.transform({x:this.right,y:this.top},n,t);return this.left=Math.min(i.x,u.x),this.bottom=Math.min(i.y,r.y),this.right=Math.max(r.x,f.x),this.top=Math.max(u.y,f.y),this},wrapDateLine:function(n,t){var u;t=t||{};var r=t.leftTolerance||0,f=t.rightTolerance||0,i=this.clone();if(n){for(u=n.getWidth();i.left<n.left&&i.right-f<=n.left;)i=i.add(u,0);for(;i.left+r>=n.right&&i.right>n.right;)i=i.add(-u,0);r=i.left+r,r<n.right&&r>n.left&&i.right-f>n.right&&(i=i.add(-u,0))}return i},CLASS_NAME:"OpenLayers.Bounds"}),OpenLayers.Bounds.fromString=function(n,t){var i=n.split(",");return OpenLayers.Bounds.fromArray(i,t)},OpenLayers.Bounds.fromArray=function(n,t){return!0===t?new OpenLayers.Bounds(n[1],n[0],n[3],n[2]):new OpenLayers.Bounds(n[0],n[1],n[2],n[3])},OpenLayers.Bounds.fromSize=function(n){return new OpenLayers.Bounds(0,n.h,n.w,0)},OpenLayers.Bounds.oppositeQuadrant=function(n){var t;return t=""+("t"==n.charAt(0)?"b":"t"),t+("l"==n.charAt(1)?"r":"l")},OpenLayers.Element={visible:function(n){return"none"!=OpenLayers.Util.getElement(n).style.display},toggle:function(){for(var t,r,n=0,i=arguments.length;n<i;n++)t=OpenLayers.Util.getElement(arguments[n]),r=OpenLayers.Element.visible(t)?"none":"",t.style.display=r},remove:function(n){n=OpenLayers.Util.getElement(n),n.parentNode.removeChild(n)},getHeight:function(n){return n=OpenLayers.Util.getElement(n),n.offsetHeight},hasClass:function(n,t){var i=n.className;return!!i&&RegExp("(^|\\s)"+t+"(\\s|$)").test(i)},addClass:function(n,t){return OpenLayers.Element.hasClass(n,t)||(n.className+=(n.className?" ":"")+t),n},removeClass:function(n,t){var i=n.className;return i&&(n.className=OpenLayers.String.trim(i.replace(RegExp("(^|\\s+)"+t+"(\\s+|$)")," "))),n},toggleClass:function(n,t){return OpenLayers.Element.hasClass(n,t)?OpenLayers.Element.removeClass(n,t):OpenLayers.Element.addClass(n,t),n},getStyle:function(n,t){var i,r;return n=OpenLayers.Util.getElement(n),i=null,n&&n.style&&(i=n.style[OpenLayers.String.camelize(t)],i||(document.defaultView&&document.defaultView.getComputedStyle?i=(i=document.defaultView.getComputedStyle(n,null))?i.getPropertyValue(t):null:n.currentStyle&&(i=n.currentStyle[OpenLayers.String.camelize(t)])),r=["left","top","right","bottom"],window.opera&&-1!=OpenLayers.Util.indexOf(r,t)&&"static"==OpenLayers.Element.getStyle(n,"position")&&(i="auto")),"auto"==i?null:i}},OpenLayers.LonLat=OpenLayers.Class({lon:0,lat:0,initialize:function(n,t){OpenLayers.Util.isArray(n)&&(t=n[1],n=n[0]),this.lon=OpenLayers.Util.toFloat(n),this.lat=OpenLayers.Util.toFloat(t)},toString:function(){return"lon="+this.lon+",lat="+this.lat},toShortString:function(){return this.lon+", "+this.lat},clone:function(){return new OpenLayers.LonLat(this.lon,this.lat)},add:function(n,t){if(null==n||null==t)throw new TypeError("LonLat.add cannot receive null values");return new OpenLayers.LonLat(this.lon+OpenLayers.Util.toFloat(n),this.lat+OpenLayers.Util.toFloat(t))},equals:function(n){var t=!1;return null!=n&&(t=this.lon==n.lon&&this.lat==n.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(n.lon)&&isNaN(n.lat)),t},transform:function(n,t){var i=OpenLayers.Projection.transform({x:this.lon,y:this.lat},n,t);return this.lon=i.x,this.lat=i.y,this},wrapDateLine:function(n){var t=this.clone();if(n){for(;t.lon<n.left;)t.lon+=n.getWidth();for(;t.lon>n.right;)t.lon-=n.getWidth()}return t},CLASS_NAME:"OpenLayers.LonLat"}),OpenLayers.LonLat.fromString=function(n){return n=n.split(","),new OpenLayers.LonLat(n[0],n[1])},OpenLayers.LonLat.fromArray=function(n){var t=OpenLayers.Util.isArray(n);return new OpenLayers.LonLat(t&&n[0],t&&n[1])},OpenLayers.Pixel=OpenLayers.Class({x:0,y:0,initialize:function(n,t){this.x=parseFloat(n),this.y=parseFloat(t)},toString:function(){return"x="+this.x+",y="+this.y},clone:function(){return new OpenLayers.Pixel(this.x,this.y)},equals:function(n){var t=!1;return null!=n&&(t=this.x==n.x&&this.y==n.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(n.x)&&isNaN(n.y)),t},distanceTo:function(n){return Math.sqrt(Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2))},add:function(n,t){if(null==n||null==t)throw new TypeError("Pixel.add cannot receive null values");return new OpenLayers.Pixel(this.x+n,this.y+t)},offset:function(n){var t=this.clone();return n&&(t=this.add(n.x,n.y)),t},CLASS_NAME:"OpenLayers.Pixel"}),OpenLayers.Size=OpenLayers.Class({w:0,h:0,initialize:function(n,t){this.w=parseFloat(n),this.h=parseFloat(t)},toString:function(){return"w="+this.w+",h="+this.h},clone:function(){return new OpenLayers.Size(this.w,this.h)},equals:function(n){var t=!1;return null!=n&&(t=this.w==n.w&&this.h==n.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(n.w)&&isNaN(n.h)),t},CLASS_NAME:"OpenLayers.Size"}),OpenLayers.Console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},userError:function(n){alert(n)},assert:function(){},dir:function(){},dirxml:function(){},trace:function(){},group:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){},profile:function(){},profileEnd:function(){},count:function(){},CLASS_NAME:"OpenLayers.Console"},function(){for(var t=document.getElementsByTagName("script"),n=0,i=t.length;n<i;++n)if(-1!=t[n].src.indexOf("firebug.js")&&console){OpenLayers.Util.extend(OpenLayers.Console,console);break}}(),OpenLayers.Lang={code:null,defaultCode:"en",getCode:function(){return OpenLayers.Lang.code||OpenLayers.Lang.setCode(),OpenLayers.Lang.code},setCode:function(n){var t,i;n||(n="msie"==OpenLayers.BROWSER_NAME?navigator.userLanguage:navigator.language),n=n.split("-"),n[0]=n[0].toLowerCase(),"object"==typeof OpenLayers.Lang[n[0]]&&(t=n[0]),n[1]&&(i=n[0]+"-"+n[1].toUpperCase(),"object"==typeof OpenLayers.Lang[i]&&(t=i)),t||(OpenLayers.Console.warn("Failed to find OpenLayers.Lang."+n.join("-")+" dictionary, falling back to default language"),t=OpenLayers.Lang.defaultCode),OpenLayers.Lang.code=t},translate:function(n,t){var i=OpenLayers.Lang[OpenLayers.Lang.getCode()];return(i=i&&i[n])||(i=n),t&&(i=OpenLayers.String.format(i,t)),i}},OpenLayers.i18n=OpenLayers.Lang.translate,OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.getElement=function(){for(var n,i=[],t=0,r=arguments.length;t<r;t++){if(n=arguments[t],"string"==typeof n&&(n=document.getElementById(n)),1==arguments.length)return n;i.push(n)}return i},OpenLayers.Util.isElement=function(n){return!(!n||1!==n.nodeType)},OpenLayers.Util.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)},OpenLayers.Util.removeItem=function(n,t){for(var i=n.length-1;0<=i;i--)n[i]==t&&n.splice(i,1);return n},OpenLayers.Util.indexOf=function(n,t){if("function"==typeof n.indexOf)return n.indexOf(t);for(var i=0,r=n.length;i<r;i++)if(n[i]==t)return i;return-1},OpenLayers.Util.dotless=/\./g,OpenLayers.Util.modifyDOMElement=function(n,t,i,r,u,f,e,o){t&&(n.id=t.replace(OpenLayers.Util.dotless,"_")),i&&(n.style.left=i.x+"px",n.style.top=i.y+"px"),r&&(n.style.width=r.w+"px",n.style.height=r.h+"px"),u&&(n.style.position=u),f&&(n.style.border=f),e&&(n.style.overflow=e),0<=parseFloat(o)&&1>parseFloat(o)?(n.style.filter="alpha(opacity="+100*o+")",n.style.opacity=o):1==parseFloat(o)&&(n.style.filter="",n.style.opacity="")},OpenLayers.Util.createDiv=function(n,t,i,r,u,f,e,o){var s=document.createElement("div");return r&&(s.style.backgroundImage="url("+r+")"),n||(n=OpenLayers.Util.createUniqueID("OpenLayersDiv")),u||(u="absolute"),OpenLayers.Util.modifyDOMElement(s,n,t,i,u,f,e,o),s},OpenLayers.Util.createImage=function(n,t,i,r,u,f,e,o){var s=document.createElement("img");return n||(n=OpenLayers.Util.createUniqueID("OpenLayersDiv")),u||(u="relative"),OpenLayers.Util.modifyDOMElement(s,n,t,i,u,f,null,e),o&&(s.style.display="none",t=function(){s.style.display="",OpenLayers.Event.stopObservingElement(s)},OpenLayers.Event.observe(s,"load",t),OpenLayers.Event.observe(s,"error",t)),s.style.alt=n,s.galleryImg="no",r&&(s.src=r),s},OpenLayers.IMAGE_RELOAD_ATTEMPTS=0,OpenLayers.Util.alphaHackNeeded=null,OpenLayers.Util.alphaHack=function(){if(null==OpenLayers.Util.alphaHackNeeded){var n=navigator.appVersion.split("MSIE"),n=parseFloat(n[1]),t=!1;try{t=!!document.body.filters}catch(i){}OpenLayers.Util.alphaHackNeeded=t&&5.5<=n&&7>n}return OpenLayers.Util.alphaHackNeeded},OpenLayers.Util.modifyAlphaImageDiv=function(n,t,i,r,u,f,e,o,s){OpenLayers.Util.modifyDOMElement(n,t,i,r,f,null,null,s),t=n.childNodes[0],u&&(t.src=u),OpenLayers.Util.modifyDOMElement(t,n.id+"_innerImage",null,r,"relative",e),OpenLayers.Util.alphaHack()&&("none"!=n.style.display&&(n.style.display="inline-block"),null==o&&(o="scale"),n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t.src+"', sizingMethod='"+o+"')",0<=parseFloat(n.style.opacity)&&1>parseFloat(n.style.opacity)&&(n.style.filter+=" alpha(opacity="+100*n.style.opacity+")"),t.style.filter="alpha(opacity=0)")},OpenLayers.Util.createAlphaImageDiv=function(n,t,i,r,u,f,e,o,s){var h=OpenLayers.Util.createDiv();return s=OpenLayers.Util.createImage(null,null,null,null,null,null,null,s),s.className="olAlphaImg",h.appendChild(s),OpenLayers.Util.modifyAlphaImageDiv(h,n,t,i,r,u,f,e,o),h},OpenLayers.Util.upperCaseObject=function(n){var i={},t;for(t in n)i[t.toUpperCase()]=n[t];return i},OpenLayers.Util.applyDefaults=function(n,t){n=n||{};var r="function"==typeof window.Event&&t instanceof window.Event,i;for(i in t)(void 0===n[i]||!r&&t.hasOwnProperty&&t.hasOwnProperty(i)&&!n.hasOwnProperty(i))&&(n[i]=t[i]);return!r&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!n.hasOwnProperty("toString")&&(n.toString=t.toString),n},OpenLayers.Util.getParameterString=function(n){var f=[],r,t;for(r in n)if(t=n[r],null!=t&&"function"!=typeof t){if("object"==typeof t&&t.constructor==Array){for(var e=[],i,u=0,o=t.length;u<o;u++)i=t[u],e.push(encodeURIComponent(null===i||void 0===i?"":i));t=e.join(",")}else t=encodeURIComponent(t);f.push(encodeURIComponent(r)+"="+t)}return f.join("&")},OpenLayers.Util.urlAppend=function(n,t){var i=n,r;return t&&(r=(n+" ").split(/[?&]/),i=i+(" "===r.pop()?t:r.length?"&"+t:"?"+t)),i},OpenLayers.Util.getImagesLocation=function(){return OpenLayers.ImgPath||OpenLayers._getScriptLocation()+"img/"},OpenLayers.Util.getImageLocation=function(n){return OpenLayers.Util.getImagesLocation()+n},OpenLayers.Util.Try=function(){for(var i,t=null,n=0,r=arguments.length;n<r;n++){i=arguments[n];try{t=i();break}catch(u){}}return t},OpenLayers.Util.getXmlNodeValue=function(n){var t=null;return OpenLayers.Util.Try(function(){t=n.text,t||(t=n.textContent),t||(t=n.firstChild.nodeValue)},function(){t=n.textContent}),t},OpenLayers.Util.mouseLeft=function(n,t){for(var i=n.relatedTarget?n.relatedTarget:n.toElement;i!=t&&null!=i;)i=i.parentNode;return i!=t},OpenLayers.Util.DEFAULT_PRECISION=14,OpenLayers.Util.toFloat=function(n,t){return null==t&&(t=OpenLayers.Util.DEFAULT_PRECISION),"number"!=typeof n&&(n=parseFloat(n)),0===t?n:parseFloat(n.toPrecision(t))},OpenLayers.Util.rad=function(n){return n*Math.PI/180},OpenLayers.Util.deg=function(n){return 180*n/Math.PI},OpenLayers.Util.VincentyConstants={a:6378137,b:6356752.3142,f:1/298.257223563},OpenLayers.Util.distVincenty=function(n,t){for(var i=OpenLayers.Util.VincentyConstants,u=i.a,h=i.b,i=i.f,w=OpenLayers.Util.rad(t.lon-n.lon),o=Math.atan((1-i)*Math.tan(OpenLayers.Util.rad(n.lat))),f=Math.atan((1-i)*Math.tan(OpenLayers.Util.rad(t.lat))),l=Math.sin(o),o=Math.cos(o),a=Math.sin(f),f=Math.cos(f),c=w,b=2*Math.PI,k=20;1e-12<Math.abs(c-b)&&0<--k;){var r=Math.sin(c),e=Math.cos(c),s=Math.sqrt(f*r*f*r+(o*a-l*f*e)*(o*a-l*f*e));if(0==s)return 0;var e=l*a+o*f*e,d=Math.atan2(s,e),y=Math.asin(o*f*r/s),v=Math.cos(y)*Math.cos(y),r=e-2*l*a/v,p=i/16*v*(4+i*(4-3*v)),b=c,c=w+(1-p)*i*Math.sin(y)*(d+p*s*(r+p*e*(-1+2*r*r)))}return 0==k?NaN:(u=v*(u*u-h*h)/(h*h),i=u/1024*(256+u*(-128+u*(74-47*u))),(h*(1+u/16384*(4096+u*(-768+u*(320-175*u))))*(d-i*s*(r+i/4*(e*(-1+2*r*r)-i/6*r*(-3+4*s*s)*(-3+4*r*r))))).toFixed(3)/1e3)},OpenLayers.Util.destinationVincenty=function(n,t,i){var s=OpenLayers.Util,h=s.VincentyConstants,r=h.a,e=h.b,c=h.f,h=n.lon,u;n=n.lat,u=s.rad(t),t=Math.sin(u),u=Math.cos(u),n=(1-c)*Math.tan(s.rad(n));var l=1/Math.sqrt(1+n*n),v=n*l,k=Math.atan2(n,u);n=l*t;for(var y=1-n*n,r=y*(r*r-e*e)/(e*e),w=1+r/16384*(4096+r*(-768+r*(320-175*r))),p=r/1024*(256+r*(-128+r*(74-47*r))),r=i/(e*w),b=2*Math.PI;1e-12<Math.abs(r-b);)var f=Math.cos(2*k+r),o=Math.sin(r),a=Math.cos(r),d=p*o*(f+p/4*(a*(-1+2*f*f)-p/6*f*(-3+4*o*o)*(-3+4*f*f))),b=r,r=i/(e*w)+d;return i=v*o-l*a*u,e=Math.atan2(v*a+l*o*u,(1-c)*Math.sqrt(n*n+i*i)),t=Math.atan2(o*t,l*a-v*o*u),u=c/16*y*(4+c*(4-3*y)),f=t-(1-u)*c*n*(r+u*o*(f+u*a*(-1+2*f*f))),Math.atan2(n,-i),new OpenLayers.LonLat(h+s.deg(f),s.deg(e))},OpenLayers.Util.getParameters=function(n,t){var r,i,u;if(t=t||{},n=null===n||void 0===n?window.location.href:n,r="",OpenLayers.String.contains(n,"?"))var f=n.indexOf("?")+1,r=OpenLayers.String.contains(n,"#")?n.indexOf("#"):n.length,r=n.substring(f,r);for(var f={},r=r.split(/[&;]/),e=0,o=r.length;e<o;++e)if(i=r[e].split("="),i[0]){u=i[0];try{u=decodeURIComponent(u)}catch(s){u=unescape(u)}i=(i[1]||"").replace(/\+/g," ");try{i=decodeURIComponent(i)}catch(h){i=unescape(i)}!1!==t.splitArgs&&(i=i.split(",")),1==i.length&&(i=i[0]),f[u]=i}return f},OpenLayers.Util.lastSeqID=0,OpenLayers.Util.createUniqueID=function(n){return n=null==n?"id_":n.replace(OpenLayers.Util.dotless,"_"),OpenLayers.Util.lastSeqID+=1,n+OpenLayers.Util.lastSeqID},OpenLayers.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.37,km:39370,dd:4374754,yd:36},OpenLayers.INCHES_PER_UNIT["in"]=OpenLayers.INCHES_PER_UNIT.inches,OpenLayers.INCHES_PER_UNIT.degrees=OpenLayers.INCHES_PER_UNIT.dd,OpenLayers.INCHES_PER_UNIT.nmi=1852*OpenLayers.INCHES_PER_UNIT.m,OpenLayers.METERS_PER_INCH=.0254000508001016,OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{Inch:OpenLayers.INCHES_PER_UNIT.inches,Meter:1/OpenLayers.METERS_PER_INCH,Foot:.30480060960121919/OpenLayers.METERS_PER_INCH,IFoot:.3048/OpenLayers.METERS_PER_INCH,ClarkeFoot:.3047972651151/OpenLayers.METERS_PER_INCH,SearsFoot:.30479947153867626/OpenLayers.METERS_PER_INCH,GoldCoastFoot:.30479971018150881/OpenLayers.METERS_PER_INCH,IInch:.0254/OpenLayers.METERS_PER_INCH,MicroInch:254e-7/OpenLayers.METERS_PER_INCH,Mil:254e-10/OpenLayers.METERS_PER_INCH,Centimeter:.01/OpenLayers.METERS_PER_INCH,Kilometer:1e3/OpenLayers.METERS_PER_INCH,Yard:.91440182880365761/OpenLayers.METERS_PER_INCH,SearsYard:.914398414616029/OpenLayers.METERS_PER_INCH,IndianYard:.91439853074444077/OpenLayers.METERS_PER_INCH,IndianYd37:.91439523/OpenLayers.METERS_PER_INCH,IndianYd62:.9143988/OpenLayers.METERS_PER_INCH,IndianYd75:.9143985/OpenLayers.METERS_PER_INCH,IndianFoot:.30479951/OpenLayers.METERS_PER_INCH,IndianFt37:.30479841/OpenLayers.METERS_PER_INCH,IndianFt62:.3047996/OpenLayers.METERS_PER_INCH,IndianFt75:.3047995/OpenLayers.METERS_PER_INCH,Mile:1609.3472186944373/OpenLayers.METERS_PER_INCH,IYard:.9144/OpenLayers.METERS_PER_INCH,IMile:1609.344/OpenLayers.METERS_PER_INCH,NautM:1852/OpenLayers.METERS_PER_INCH,"Lat-66":110943.31648893273/OpenLayers.METERS_PER_INCH,"Lat-83":110946.25736872235/OpenLayers.METERS_PER_INCH,Decimeter:.1/OpenLayers.METERS_PER_INCH,Millimeter:.001/OpenLayers.METERS_PER_INCH,Dekameter:10/OpenLayers.METERS_PER_INCH,Decameter:10/OpenLayers.METERS_PER_INCH,Hectometer:100/OpenLayers.METERS_PER_INCH,GermanMeter:1.0000135965/OpenLayers.METERS_PER_INCH,CaGrid:.999738/OpenLayers.METERS_PER_INCH,ClarkeChain:20.1166194976/OpenLayers.METERS_PER_INCH,GunterChain:20.11684023368047/OpenLayers.METERS_PER_INCH,BenoitChain:20.116782494375872/OpenLayers.METERS_PER_INCH,SearsChain:20.11676512155/OpenLayers.METERS_PER_INCH,ClarkeLink:.201166194976/OpenLayers.METERS_PER_INCH,GunterLink:.20116840233680469/OpenLayers.METERS_PER_INCH,BenoitLink:.20116782494375873/OpenLayers.METERS_PER_INCH,SearsLink:.2011676512155/OpenLayers.METERS_PER_INCH,Rod:5.02921005842012/OpenLayers.METERS_PER_INCH,IntnlChain:20.1168/OpenLayers.METERS_PER_INCH,IntnlLink:.201168/OpenLayers.METERS_PER_INCH,Perch:5.02921005842012/OpenLayers.METERS_PER_INCH,Pole:5.02921005842012/OpenLayers.METERS_PER_INCH,Furlong:201.1684023368046/OpenLayers.METERS_PER_INCH,Rood:3.778266898/OpenLayers.METERS_PER_INCH,CapeFoot:.3047972615/OpenLayers.METERS_PER_INCH,Brealey:375/OpenLayers.METERS_PER_INCH,ModAmFt:.304812252984506/OpenLayers.METERS_PER_INCH,Fathom:1.8288/OpenLayers.METERS_PER_INCH,"NautM-UK":1853.184/OpenLayers.METERS_PER_INCH,"50kilometers":5e4/OpenLayers.METERS_PER_INCH,"150kilometers":15e4/OpenLayers.METERS_PER_INCH}),OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{mm:OpenLayers.INCHES_PER_UNIT.Meter/1e3,cm:OpenLayers.INCHES_PER_UNIT.Meter/100,dm:100*OpenLayers.INCHES_PER_UNIT.Meter,km:1e3*OpenLayers.INCHES_PER_UNIT.Meter,kmi:OpenLayers.INCHES_PER_UNIT.nmi,fath:OpenLayers.INCHES_PER_UNIT.Fathom,ch:OpenLayers.INCHES_PER_UNIT.IntnlChain,link:OpenLayers.INCHES_PER_UNIT.IntnlLink,"us-in":OpenLayers.INCHES_PER_UNIT.inches,"us-ft":OpenLayers.INCHES_PER_UNIT.Foot,"us-yd":OpenLayers.INCHES_PER_UNIT.Yard,"us-ch":OpenLayers.INCHES_PER_UNIT.GunterChain,"us-mi":OpenLayers.INCHES_PER_UNIT.Mile,"ind-yd":OpenLayers.INCHES_PER_UNIT.IndianYd37,"ind-ft":OpenLayers.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/OpenLayers.METERS_PER_INCH}),OpenLayers.DOTS_PER_INCH=72,OpenLayers.Util.normalizeScale=function(n){return 1<n?1/n:n},OpenLayers.Util.getResolutionFromScale=function(n,t){var i;return n&&(null==t&&(t="degrees"),i=1/(OpenLayers.Util.normalizeScale(n)*OpenLayers.INCHES_PER_UNIT[t]*OpenLayers.DOTS_PER_INCH)),i},OpenLayers.Util.getScaleFromResolution=function(n,t){return null==t&&(t="degrees"),n*OpenLayers.INCHES_PER_UNIT[t]*OpenLayers.DOTS_PER_INCH},OpenLayers.Util.pagePosition=function(n){var i=[0,0],r=OpenLayers.Util.getViewportElement(),u,t;if(!n||n==window||n==r)return i;if(u=OpenLayers.IS_GECKO&&document.getBoxObjectFor&&"absolute"==OpenLayers.Element.getStyle(n,"position")&&(""==n.style.top||""==n.style.left),t=null,n.getBoundingClientRect)n=n.getBoundingClientRect(),t=window.pageYOffset||r.scrollTop,i[0]=n.left+(window.pageXOffset||r.scrollLeft),i[1]=n.top+t;else if(document.getBoxObjectFor&&!u)n=document.getBoxObjectFor(n),r=document.getBoxObjectFor(r),i[0]=n.screenX-r.screenX,i[1]=n.screenY-r.screenY;else{if(i[0]=n.offsetLeft,i[1]=n.offsetTop,t=n.offsetParent,t!=n)for(;t;)i[0]+=t.offsetLeft,i[1]+=t.offsetTop,t=t.offsetParent;for(r=OpenLayers.BROWSER_NAME,("opera"==r||"safari"==r&&"absolute"==OpenLayers.Element.getStyle(n,"position"))&&(i[1]-=document.body.offsetTop),t=n.offsetParent;t&&t!=document.body;)i[0]-=t.scrollLeft,("opera"!=r||"TR"!=t.tagName)&&(i[1]-=t.scrollTop),t=t.offsetParent}return i},OpenLayers.Util.getViewportElement=function(){var n=arguments.callee.viewportElement;return void 0==n&&(n="msie"==OpenLayers.BROWSER_NAME&&"CSS1Compat"!=document.compatMode?document.body:document.documentElement,arguments.callee.viewportElement=n),n},OpenLayers.Util.isEquivalentUrl=function(n,t,i){i=i||{},OpenLayers.Util.applyDefaults(i,{ignoreCase:!0,ignorePort80:!0,ignoreHash:!0,splitArgs:!1}),n=OpenLayers.Util.createUrlObject(n,i),t=OpenLayers.Util.createUrlObject(t,i);for(var r in n)if("args"!==r&&n[r]!=t[r])return!1;for(r in n.args){if(n.args[r]!=t.args[r])return!1;delete t.args[r]}for(r in t.args)return!1;return!0},OpenLayers.Util.createUrlObject=function(n,t){var u;if(t=t||{},!/^\w+:\/\//.test(n)){var i=window.location,r=i.port?":"+i.port:"",r=i.protocol+"//"+i.host.split(":").shift()+r;0===n.indexOf("/")?n=r+n:(i=i.pathname.split("/"),i.pop(),n=r+i.join("/")+"/"+n)}return t.ignoreCase&&(n=n.toLowerCase()),i=document.createElement("a"),i.href=n,r={},r.host=i.host.split(":").shift(),r.protocol=i.protocol,r.port=t.ignorePort80?"80"==i.port||"0"==i.port?"":i.port:""==i.port||"0"==i.port?"80":i.port,r.hash=t.ignoreHash||"#"===i.hash?"":i.hash,u=i.search,u||(u=n.indexOf("?"),u=-1!=u?n.substr(u):""),r.args=OpenLayers.Util.getParameters(u,{splitArgs:t.splitArgs}),r.pathname="/"==i.pathname.charAt(0)?i.pathname:"/"+i.pathname,r},OpenLayers.Util.removeTail=function(n){var t=null,t=n.indexOf("?"),i=n.indexOf("#");return-1==t?-1!=i?n.substr(0,i):n:-1!=i?n.substr(0,Math.min(t,i)):n.substr(0,t)},OpenLayers.IS_GECKO=function(){var n=navigator.userAgent.toLowerCase();return-1==n.indexOf("webkit")&&-1!=n.indexOf("gecko")}(),OpenLayers.CANVAS_SUPPORTED=function(){var n=document.createElement("canvas");return!(!n.getContext||!n.getContext("2d"))}(),OpenLayers.BROWSER_NAME=function(){var n="",t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("opera")?n="opera":-1!=t.indexOf("msie")?n="msie":-1!=t.indexOf("safari")?n="safari":-1!=t.indexOf("mozilla")&&(n=-1!=t.indexOf("firefox")?"firefox":"mozilla"),n}(),OpenLayers.Util.getBrowserName=function(){return OpenLayers.BROWSER_NAME},OpenLayers.Util.getRenderedDimensions=function(n,t,i){var e,o,r=document.createElement("div"),h;r.style.visibility="hidden";for(var f=i&&i.containerElement?i.containerElement:document.body,c=!1,u=null,s=f;s&&"body"!=s.tagName.toLowerCase();){if(h=OpenLayers.Element.getStyle(s,"position"),"absolute"==h){c=!0;break}else if(h&&"static"!=h)break;s=s.parentNode}if(c&&(0===f.clientHeight||0===f.clientWidth)&&(u=document.createElement("div"),u.style.visibility="hidden",u.style.position="absolute",u.style.overflow="visible",u.style.width=document.body.clientWidth+"px",u.style.height=document.body.clientHeight+"px",u.appendChild(r)),r.style.position="absolute",t&&(t.w?(e=t.w,r.style.width=e+"px"):t.h&&(o=t.h,r.style.height=o+"px")),i&&i.displayClass&&(r.className=i.displayClass),t=document.createElement("div"),t.innerHTML=n,t.style.overflow="visible",t.childNodes)for(n=0,i=t.childNodes.length;n<i;n++)t.childNodes[n].style&&(t.childNodes[n].style.overflow="visible");return r.appendChild(t),u?f.appendChild(u):f.appendChild(r),e||(e=parseInt(t.scrollWidth),r.style.width=e+"px"),o||(o=parseInt(t.scrollHeight)),r.removeChild(t),u?(u.removeChild(r),f.removeChild(u)):f.removeChild(r),new OpenLayers.Size(e,o)},OpenLayers.Util.getScrollbarWidth=function(){var t=OpenLayers.Util._scrollbarWidth;if(null==t){var n=null,i=null,n=t=0,n=document.createElement("div");n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.style.width="100px",n.style.height="50px",n.style.overflow="hidden",i=document.createElement("div"),i.style.width="100%",i.style.height="200px",n.appendChild(i),document.body.appendChild(n),t=i.offsetWidth,n.style.overflow="scroll",n=i.offsetWidth,document.body.removeChild(document.body.lastChild),OpenLayers.Util._scrollbarWidth=t-n,t=OpenLayers.Util._scrollbarWidth}return t},OpenLayers.Util.getFormattedLonLat=function(n,t,i){i||(i="dms"),n=(n+540)%360-180;var r=Math.abs(n),u=Math.floor(r),f=r=(r-u)/(1/60),r=Math.floor(r),f=Math.round(10*((f-r)/(1/60))),f=f/10;return 60<=f&&(f-=60,r+=1,60<=r&&(r-=60,u+=1)),10>u&&(u="0"+u),u+="°",0<=i.indexOf("dm")&&(10>r&&(r="0"+r),u+=r+"'",0<=i.indexOf("dms")&&(10>f&&(f="0"+f),u+=f+'"')),"lon"==t?u+(0>n?OpenLayers.i18n("W"):OpenLayers.i18n("E")):u+(0>n?OpenLayers.i18n("S"):OpenLayers.i18n("N"))},OpenLayers.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(n){return n.target||n.srcElement},isSingleTouch:function(n){return n.touches&&1==n.touches.length},isMultiTouch:function(n){return n.touches&&1<n.touches.length},isLeftClick:function(n){return n.which&&1==n.which||n.button&&1==n.button},isRightClick:function(n){return n.which&&3==n.which||n.button&&2==n.button},stop:function(n,t){t||OpenLayers.Event.preventDefault(n),n.stopPropagation?n.stopPropagation():n.cancelBubble=!0},preventDefault:function(n){n.preventDefault?n.preventDefault():n.returnValue=!1},findElement:function(n,t){for(var i=OpenLayers.Event.element(n);i.parentNode&&(!i.tagName||i.tagName.toUpperCase()!=t.toUpperCase());)i=i.parentNode;return i},observe:function(n,t,i,r){if(n=OpenLayers.Util.getElement(n),r=r||!1,"keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||n.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!n._eventCacheID){var u="eventCacheID_";n.id&&(u=n.id+"_"+u),n._eventCacheID=OpenLayers.Util.createUniqueID(u)}u=n._eventCacheID,this.observers[u]||(this.observers[u]=[]),this.observers[u].push({element:n,name:t,observer:i,useCapture:r}),n.addEventListener?n.addEventListener(t,i,r):n.attachEvent&&n.attachEvent("on"+t,i)},stopObservingElement:function(n){n=OpenLayers.Util.getElement(n)._eventCacheID,this._removeElementObservers(OpenLayers.Event.observers[n])},_removeElementObservers:function(n){var i,t;if(n)for(i=n.length-1;0<=i;i--)t=n[i],OpenLayers.Event.stopObserving.apply(this,[t.element,t.name,t.observer,t.useCapture])},stopObserving:function(n,t,i,r){var s,f,u,e,o;if(r=r||!1,n=OpenLayers.Util.getElement(n),s=n._eventCacheID,"keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||n.detachEvent)&&(t="keydown"),f=!1,u=OpenLayers.Event.observers[s],u)for(e=0;!f&&e<u.length;){if(o=u[e],o.name==t&&o.observer==i&&o.useCapture==r){u.splice(e,1),0==u.length&&delete OpenLayers.Event.observers[s],f=!0;break}e++}return f&&(n.removeEventListener?n.removeEventListener(t,i,r):n&&n.detachEvent&&n.detachEvent("on"+t,i)),f},unloadCache:function(){if(OpenLayers.Event&&OpenLayers.Event.observers){for(var n in OpenLayers.Event.observers)OpenLayers.Event._removeElementObservers.apply(this,[OpenLayers.Event.observers[n]]);OpenLayers.Event.observers=!1}},CLASS_NAME:"OpenLayers.Event"},OpenLayers.Event.observe(window,"unload",OpenLayers.Event.unloadCache,!1),OpenLayers.Events=OpenLayers.Class({BROWSER_EVENTS:"mouseover mouseout mousedown mouseup mousemove click dblclick rightclick dblrightclick resize focus blur touchstart touchmove touchend keydown".split(" "),listeners:null,object:null,element:null,eventHandler:null,fallThrough:null,includeXY:!1,extensions:null,extensionCount:null,clearMouseListener:null,initialize:function(n,t,i,r,u){OpenLayers.Util.extend(this,u),this.object=n,this.fallThrough=r,this.listeners={},this.extensions={},this.extensionCount={},this._msTouches=[],null!=t&&this.attachToElement(t)},destroy:function(){for(var n in this.extensions)"boolean"!=typeof this.extensions[n]&&this.extensions[n].destroy();this.extensions=null,this.element&&(OpenLayers.Event.stopObservingElement(this.element),this.element.hasScrollEvent&&OpenLayers.Event.stopObserving(window,"scroll",this.clearMouseListener)),this.eventHandler=this.fallThrough=this.object=this.listeners=this.element=null},addEventType:function(){},attachToElement:function(n){this.element?OpenLayers.Event.stopObservingElement(this.element):(this.eventHandler=OpenLayers.Function.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=OpenLayers.Function.bind(this.clearMouseCache,this)),this.element=n;for(var r=!!window.navigator.msMaxTouchPoints,t,i=0,u=this.BROWSER_EVENTS.length;i<u;i++)t=this.BROWSER_EVENTS[i],OpenLayers.Event.observe(n,t,this.eventHandler),r&&0===t.indexOf("touch")&&this.addMsTouchListener(n,t,this.eventHandler);OpenLayers.Event.observe(n,"dragstart",OpenLayers.Event.stop)},on:function(n){for(var t in n)"scope"!=t&&n.hasOwnProperty(t)&&this.register(t,n.scope,n[t])},register:function(n,t,i,r){if(n in OpenLayers.Events&&!this.extensions[n]&&(this.extensions[n]=new OpenLayers.Events[n](this)),null!=i){null==t&&(t=this.object);var u=this.listeners[n];u||(u=[],this.listeners[n]=u,this.extensionCount[n]=0),t={obj:t,func:i},r?(u.splice(this.extensionCount[n],0,t),"object"==typeof r&&r.extension&&this.extensionCount[n]++):u.push(t)}},registerPriority:function(n,t,i){this.register(n,t,i,!0)},un:function(n){for(var t in n)"scope"!=t&&n.hasOwnProperty(t)&&this.unregister(t,n.scope,n[t])},unregister:function(n,t,i){if(null==t&&(t=this.object),n=this.listeners[n],null!=n)for(var r=0,u=n.length;r<u;r++)if(n[r].obj==t&&n[r].func==i){n.splice(r,1);break}},remove:function(n){null!=this.listeners[n]&&(this.listeners[n]=[])},triggerEvent:function(n,t){var r=this.listeners[n];if(r&&0!=r.length){null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=n);for(var r=r.slice(),i,u=0,f=r.length;u<f&&(i=r[u],i=i.func.apply(i.obj,[t]),void 0==i||!1!=i);u++);return this.fallThrough||OpenLayers.Event.stop(t,!0),i}},handleBrowserEvent:function(n){var f=n.type,t=this.listeners[f];if(t&&0!=t.length){if((t=n.touches)&&t[0]){for(var e=0,o=0,i=t.length,r,u=0;u<i;++u)r=this.getTouchClientXY(t[u]),e+=r.clientX,o+=r.clientY;n.clientX=e/i,n.clientY=o/i}this.includeXY&&(n.xy=this.getMousePosition(n)),this.triggerEvent(f,n)}},getTouchClientXY:function(n){var t=window.olMockWin||window,u=t.pageXOffset,t=t.pageYOffset,i=n.clientX,r=n.clientY;return 0===n.pageY&&Math.floor(r)>Math.floor(n.pageY)||0===n.pageX&&Math.floor(i)>Math.floor(n.pageX)?(i-=u,r-=t):(r<n.pageY-t||i<n.pageX-u)&&(i=n.pageX-u,r=n.pageY-t),n.olClientX=i,n.olClientY=r,{clientX:i,clientY:r}},clearMouseCache:function(){this.element.scrolls=null,this.element.lefttop=null,this.element.offsets=null},getMousePosition:function(n){if(this.includeXY?this.element.hasScrollEvent||(OpenLayers.Event.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=OpenLayers.Util.getViewportElement();this.element.scrolls=[window.pageXOffset||t.scrollLeft,window.pageYOffset||t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=OpenLayers.Util.pagePosition(this.element)),new OpenLayers.Pixel(n.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],n.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])},addMsTouchListener:function(n,t,i){function u(n){i(OpenLayers.Util.applyDefaults({stopPropagation:function(){for(var n=r.length-1;0<=n;--n)r[n].stopPropagation()},preventDefault:function(){for(var n=r.length-1;0<=n;--n)r[n].preventDefault()},type:t},n))}var r=this._msTouches;switch(t){case"touchstart":return this.addMsTouchListenerStart(n,t,u);case"touchend":return this.addMsTouchListenerEnd(n,t,u);case"touchmove":return this.addMsTouchListenerMove(n,t,u);default:throw"Unknown touch event type";}},addMsTouchListenerStart:function(n,t,i){var r=this._msTouches;OpenLayers.Event.observe(n,"MSPointerDown",function(n){for(var u=!1,t=0,f=r.length;t<f;++t)if(r[t].pointerId==n.pointerId){u=!0;break}u||r.push(n),n.touches=r.slice(),i(n)}),OpenLayers.Event.observe(n,"MSPointerUp",function(n){for(var t=0,i=r.length;t<i;++t)if(r[t].pointerId==n.pointerId){r.splice(t,1);break}})},addMsTouchListenerMove:function(n,t,i){var r=this._msTouches;OpenLayers.Event.observe(n,"MSPointerMove",function(n){if((n.pointerType!=n.MSPOINTER_TYPE_MOUSE||0!=n.buttons)&&(1!=r.length||r[0].pageX!=n.pageX||r[0].pageY!=n.pageY)){for(var t=0,u=r.length;t<u;++t)if(r[t].pointerId==n.pointerId){r[t]=n;break}n.touches=r.slice(),i(n)}})},addMsTouchListenerEnd:function(n,t,i){var r=this._msTouches;OpenLayers.Event.observe(n,"MSPointerUp",function(n){for(var t=0,u=r.length;t<u;++t)if(r[t].pointerId==n.pointerId){r.splice(t,1);break}n.touches=r.slice(),i(n)})},CLASS_NAME:"OpenLayers.Events"}),OpenLayers.Events.buttonclick=OpenLayers.Class({target:null,events:"mousedown mouseup click dblclick touchstart touchmove touchend keydown".split(" "),startRegEx:/^mousedown|touchstart$/,cancelRegEx:/^touchmove$/,completeRegEx:/^mouseup|touchend$/,initialize:function(n){for(this.target=n,n=this.events.length-1;0<=n;--n)this.target.register(this.events[n],this,this.buttonClick,{extension:!0})},destroy:function(){for(var n=this.events.length-1;0<=n;--n)this.target.unregister(this.events[n],this,this.buttonClick);delete this.target},getPressedButton:function(n){var i=3,t;do{if(OpenLayers.Element.hasClass(n,"olButton")){t=n;break}n=n.parentNode}while(0<--i&&n);return t},ignore:function(n){var i=3,t=!1;do{if("a"===n.nodeName.toLowerCase()){t=!0;break}n=n.parentNode}while(0<--i&&n);return t},buttonClick:function(n){var t=!0,i=OpenLayers.Event.element(n);if(i&&(OpenLayers.Event.isLeftClick(n)||!~n.type.indexOf("mouse")))if(i=this.getPressedButton(i)){if("keydown"===n.type)switch(n.keyCode){case OpenLayers.Event.KEY_RETURN:case OpenLayers.Event.KEY_SPACE:this.target.triggerEvent("buttonclick",{buttonElement:i}),OpenLayers.Event.stop(n),t=!1}else if(this.startEvt){if(this.completeRegEx.test(n.type)){var t=OpenLayers.Util.pagePosition(i),r=OpenLayers.Util.getViewportElement(),u=window.pageYOffset||r.scrollTop;t[0]-=window.pageXOffset||r.scrollLeft,t[1]-=u,this.target.triggerEvent("buttonclick",{buttonElement:i,buttonXY:{x:this.startEvt.clientX-t[0],y:this.startEvt.clientY-t[1]}})}this.cancelRegEx.test(n.type)&&delete this.startEvt,OpenLayers.Event.stop(n),t=!1}this.startRegEx.test(n.type)&&(this.startEvt=n,OpenLayers.Event.stop(n),t=!1)}else t=!this.ignore(OpenLayers.Event.element(n)),delete this.startEvt;return t}}),OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.vendorPrefix=function(){function f(n){return n?n.replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()}).replace(/^ms-/,"-ms-"):null}function i(t,i){if(void 0===n[i]){var r,f=0,e=u.length,o="undefined"!=typeof t.cssText;for(n[i]=null;f<e;f++)if((r=u[f])?(o||(r=r.toLowerCase()),r=r+i.charAt(0).toUpperCase()+i.slice(1)):r=i,void 0!==t[r]){n[i]=r;break}}return n[i]}function r(n){return i(e,n)}var u=["","O","ms","Moz","Webkit"],e=document.createElement("div").style,t={},n={};return{css:function(n){if(void 0===t[n]){var i=n.replace(/(-[\s\S])/g,function(n){return n.charAt(1).toUpperCase()}),i=r(i);t[n]=f(i)}return t[n]},js:i,style:r,cssCache:t,jsCache:n}}(),OpenLayers.Animation=function(n){var r=OpenLayers.Util.vendorPrefix.js(n,"requestAnimationFrame"),u=!!r,i=function(){var t=n[r]||function(t){n.setTimeout(t,16)};return function(i,r){t.apply(n,[i,r])}}(),f=0,t={};return{isNative:u,requestFrame:i,start:function(n,r,u){r=0<r?r:Number.POSITIVE_INFINITY;var e=++f,o=+new Date;return t[e]=function(){t[e]&&+new Date-o<=r?(n(),t[e]&&i(t[e],u)):delete t[e]},i(t[e],u),e},stop:function(n){delete t[n]}}}(window),OpenLayers.Tween=OpenLayers.Class({easing:null,begin:null,finish:null,duration:null,callbacks:null,time:null,minFrameRate:null,startTime:null,animationId:null,playing:!1,initialize:function(n){this.easing=n?n:OpenLayers.Easing.Expo.easeOut},start:function(n,t,i,r){this.playing=!0,this.begin=n,this.finish=t,this.duration=i,this.callbacks=r.callbacks,this.minFrameRate=r.minFrameRate||30,this.time=0,this.startTime=(new Date).getTime(),OpenLayers.Animation.stop(this.animationId),this.animationId=null,this.callbacks&&this.callbacks.start&&this.callbacks.start.call(this,this.begin),this.animationId=OpenLayers.Animation.start(OpenLayers.Function.bind(this.play,this))},stop:function(){this.playing&&(this.callbacks&&this.callbacks.done&&this.callbacks.done.call(this,this.finish),OpenLayers.Animation.stop(this.animationId),this.animationId=null,this.playing=!1)},play:function(){var r={},t,n,i;for(t in this.begin){if(n=this.begin[t],i=this.finish[t],null==n||null==i||isNaN(n)||isNaN(i))throw new TypeError("invalid value for Tween");r[t]=this.easing.apply(this,[this.time,n,i-n,this.duration])}this.time++,this.callbacks&&this.callbacks.eachStep&&((new Date).getTime()-this.startTime)/this.time<=1e3/this.minFrameRate&&this.callbacks.eachStep.call(this,r),this.time>this.duration&&this.stop()},CLASS_NAME:"OpenLayers.Tween"}),OpenLayers.Easing={CLASS_NAME:"OpenLayers.Easing"},OpenLayers.Easing.Linear={easeIn:function(n,t,i,r){return i*n/r+t},easeOut:function(n,t,i,r){return i*n/r+t},easeInOut:function(n,t,i,r){return i*n/r+t},CLASS_NAME:"OpenLayers.Easing.Linear"},OpenLayers.Easing.Expo={easeIn:function(n,t,i,r){return 0==n?t:i*Math.pow(2,10*(n/r-1))+t},easeOut:function(n,t,i,r){return n==r?t+i:i*(-Math.pow(2,-10*n/r)+1)+t},easeInOut:function(n,t,i,r){return 0==n?t:n==r?t+i:1>(n/=r/2)?i/2*Math.pow(2,10*(n-1))+t:i/2*(-Math.pow(2,-10*--n)+2)+t},CLASS_NAME:"OpenLayers.Easing.Expo"},OpenLayers.Easing.Quad={easeIn:function(n,t,i,r){return i*(n/=r)*n+t},easeOut:function(n,t,i,r){return-i*(n/=r)*(n-2)+t},easeInOut:function(n,t,i,r){return 1>(n/=r/2)?i/2*n*n+t:-i/2*(--n*(n-2)-1)+t},CLASS_NAME:"OpenLayers.Easing.Quad"},OpenLayers.Projection=OpenLayers.Class({proj:null,projCode:null,titleRegEx:/\+title=[^\+]*/,initialize:function(n,t){OpenLayers.Util.extend(this,t),this.projCode=n,"object"==typeof Proj4js&&(this.proj=new Proj4js.Proj(n))},getCode:function(){return this.proj?this.proj.srsCode:this.projCode},getUnits:function(){return this.proj?this.proj.units:null},toString:function(){return this.getCode()},equals:function(n){var t=!1;return n&&(n instanceof OpenLayers.Projection||(n=new OpenLayers.Projection(n)),"object"==typeof Proj4js&&this.proj.defData&&n.proj.defData?t=this.proj.defData.replace(this.titleRegEx,"")==n.proj.defData.replace(this.titleRegEx,""):n.getCode&&(t=this.getCode(),n=n.getCode(),t=t==n||!!OpenLayers.Projection.transforms[t]&&OpenLayers.Projection.transforms[t][n]===OpenLayers.Projection.nullTransform)),t},destroy:function(){delete this.proj,delete this.projCode},CLASS_NAME:"OpenLayers.Projection"}),OpenLayers.Projection.transforms={},OpenLayers.Projection.defaults={"EPSG:4326":{units:"degrees",maxExtent:[-180,-90,180,90],yx:!0},"CRS:84":{units:"degrees",maxExtent:[-180,-90,180,90]},"EPSG:900913":{units:"m",maxExtent:[-20037508.34,-20037508.34,20037508.34,20037508.34]}},OpenLayers.Projection.addTransform=function(n,t,i){if(i===OpenLayers.Projection.nullTransform){var r=OpenLayers.Projection.defaults[n];r&&!OpenLayers.Projection.defaults[t]&&(OpenLayers.Projection.defaults[t]=r)}OpenLayers.Projection.transforms[n]||(OpenLayers.Projection.transforms[n]={}),OpenLayers.Projection.transforms[n][t]=i},OpenLayers.Projection.transform=function(n,t,i){if(t&&i)if(t instanceof OpenLayers.Projection||(t=new OpenLayers.Projection(t)),i instanceof OpenLayers.Projection||(i=new OpenLayers.Projection(i)),t.proj&&i.proj)n=Proj4js.transform(t.proj,i.proj,n);else{t=t.getCode(),i=i.getCode();var r=OpenLayers.Projection.transforms;r[t]&&r[t][i]&&r[t][i](n)}return n},OpenLayers.Projection.nullTransform=function(n){return n},function(){function f(n){return n.x=180*n.x/t,n.y=180/Math.PI*(2*Math.atan(Math.exp(n.y/t*Math.PI))-Math.PI/2),n}function e(n){n.x=n.x*t/180;var i=Math.log(Math.tan((90+n.y)*Math.PI/360))/Math.PI*t;return n.y=Math.max(-20037508.34,Math.min(i,20037508.34)),n}function u(n,t){for(var u=OpenLayers.Projection.addTransform,c=OpenLayers.Projection.nullTransform,r,h,o,i=0,s=t.length;i<s;++i)for(r=t[i],u(n,r,e),u(r,n,f),o=i+1;o<s;++o)h=t[o],u(r,h,c),u(h,r,c)}for(var t=20037508.34,i=["EPSG:900913","EPSG:3857","EPSG:102113","EPSG:102100"],r=["CRS:84","urn:ogc:def:crs:EPSG:6.6:4326","EPSG:4326"],n=i.length-1;0<=n;--n)u(i[n],r);for(n=r.length-1;0<=n;--n)u(r[n],i)}(),OpenLayers.Map=OpenLayers.Class({Z_INDEX_BASE:{BaseLayer:100,Overlay:325,Feature:725,Popup:750,Control:1e3},id:null,fractionalZoom:!1,events:null,allOverlays:!1,div:null,dragging:!1,size:null,viewPortDiv:null,layerContainerOrigin:null,layerContainerDiv:null,layers:null,controls:null,popups:null,baseLayer:null,center:null,resolution:null,zoom:0,panRatio:1.5,options:null,tileSize:null,projection:"EPSG:4326",units:null,resolutions:null,maxResolution:null,minResolution:null,maxScale:null,minScale:null,maxExtent:null,minExtent:null,restrictedExtent:null,numZoomLevels:16,theme:null,displayProjection:null,fallThrough:!1,autoUpdateSize:!0,eventListeners:null,panTween:null,panMethod:OpenLayers.Easing.Expo.easeOut,panDuration:50,zoomTween:null,zoomMethod:OpenLayers.Easing.Quad.easeOut,zoomDuration:20,paddingForPopups:null,layerContainerOriginPx:null,minPx:null,maxPx:null,initialize:function(n,t){var i;if(1===arguments.length&&"object"==typeof n&&(n=(t=n)&&t.div),this.tileSize=new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH,OpenLayers.Map.TILE_HEIGHT),this.paddingForPopups=new OpenLayers.Bounds(15,15,15,15),this.theme=OpenLayers._getScriptLocation()+"theme/default/style.css",this.options=OpenLayers.Util.extend({},t),OpenLayers.Util.extend(this,t),OpenLayers.Util.applyDefaults(this,OpenLayers.Projection.defaults[this.projection instanceof OpenLayers.Projection?this.projection.projCode:this.projection]),!this.maxExtent||this.maxExtent instanceof OpenLayers.Bounds||(this.maxExtent=new OpenLayers.Bounds(this.maxExtent)),!this.minExtent||this.minExtent instanceof OpenLayers.Bounds||(this.minExtent=new OpenLayers.Bounds(this.minExtent)),!this.restrictedExtent||this.restrictedExtent instanceof OpenLayers.Bounds||(this.restrictedExtent=new OpenLayers.Bounds(this.restrictedExtent)),!this.center||this.center instanceof OpenLayers.LonLat||(this.center=new OpenLayers.LonLat(this.center)),this.layers=[],this.id=OpenLayers.Util.createUniqueID("OpenLayers.Map_"),this.div=OpenLayers.Util.getElement(n),this.div||(this.div=document.createElement("div"),this.div.style.height="1px",this.div.style.width="1px"),OpenLayers.Element.addClass(this.div,"olMap"),i=this.id+"_OpenLayers_ViewPort",this.viewPortDiv=OpenLayers.Util.createDiv(i,null,null,null,"relative",null,"hidden"),this.viewPortDiv.style.width="100%",this.viewPortDiv.style.height="100%",this.viewPortDiv.className="olMapViewport",this.div.appendChild(this.viewPortDiv),this.events=new OpenLayers.Events(this,this.viewPortDiv,null,this.fallThrough,{includeXY:!0}),OpenLayers.TileManager&&null!==this.tileManager&&(this.tileManager instanceof OpenLayers.TileManager||(this.tileManager=new OpenLayers.TileManager(this.tileManager)),this.tileManager.addMap(this)),i=this.id+"_OpenLayers_Container",this.layerContainerDiv=OpenLayers.Util.createDiv(i),this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE.Popup-1,this.layerContainerOriginPx={x:0,y:0},this.applyTransform(),this.viewPortDiv.appendChild(this.layerContainerDiv),this.updateSize(),this.eventListeners instanceof Object)this.events.on(this.eventListeners);if(!0===this.autoUpdateSize&&(this.updateSizeDestroy=OpenLayers.Function.bind(this.updateSize,this),OpenLayers.Event.observe(window,"resize",this.updateSizeDestroy)),this.theme){for(var i=!0,f=document.getElementsByTagName("link"),r=0,u=f.length;r<u;++r)if(OpenLayers.Util.isEquivalentUrl(f.item(r).href,this.theme)){i=!1;break}i&&(i=document.createElement("link"),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",this.theme),document.getElementsByTagName("head")[0].appendChild(i))}for(null==this.controls&&(this.controls=[],null!=OpenLayers.Control&&(OpenLayers.Control.Navigation?this.controls.push(new OpenLayers.Control.Navigation):OpenLayers.Control.TouchNavigation&&this.controls.push(new OpenLayers.Control.TouchNavigation),OpenLayers.Control.Zoom?this.controls.push(new OpenLayers.Control.Zoom):OpenLayers.Control.PanZoom&&this.controls.push(new OpenLayers.Control.PanZoom),OpenLayers.Control.ArgParser&&this.controls.push(new OpenLayers.Control.ArgParser),OpenLayers.Control.Attribution&&this.controls.push(new OpenLayers.Control.Attribution))),r=0,u=this.controls.length;r<u;r++)this.addControlToMap(this.controls[r]);this.popups=[],this.unloadDestroy=OpenLayers.Function.bind(this.destroy,this),OpenLayers.Event.observe(window,"unload",this.unloadDestroy),t&&t.layers&&(delete this.center,delete this.zoom,this.addLayers(t.layers),t.center&&!this.getCenter()&&this.setCenter(t.center,t.zoom)),this.panMethod&&(this.panTween=new OpenLayers.Tween(this.panMethod)),this.zoomMethod&&this.applyTransform.transform&&(this.zoomTween=new OpenLayers.Tween(this.zoomMethod))},getViewport:function(){return this.viewPortDiv},render:function(n){this.div=OpenLayers.Util.getElement(n),OpenLayers.Element.addClass(this.div,"olMap"),this.viewPortDiv.parentNode.removeChild(this.viewPortDiv),this.div.appendChild(this.viewPortDiv),this.updateSize()},unloadDestroy:null,updateSizeDestroy:null,destroy:function(){if(!this.unloadDestroy)return!1;if(this.panTween&&(this.panTween.stop(),this.panTween=null),this.zoomTween&&(this.zoomTween.stop(),this.zoomTween=null),OpenLayers.Event.stopObserving(window,"unload",this.unloadDestroy),this.unloadDestroy=null,this.updateSizeDestroy&&OpenLayers.Event.stopObserving(window,"resize",this.updateSizeDestroy),this.paddingForPopups=null,null!=this.controls){for(var n=this.controls.length-1;0<=n;--n)this.controls[n].destroy();this.controls=null}if(null!=this.layers){for(n=this.layers.length-1;0<=n;--n)this.layers[n].destroy(!1);this.layers=null}this.viewPortDiv&&this.viewPortDiv.parentNode&&this.viewPortDiv.parentNode.removeChild(this.viewPortDiv),this.viewPortDiv=null,this.tileManager&&(this.tileManager.removeMap(this),this.tileManager=null),this.eventListeners&&(this.events.un(this.eventListeners),this.eventListeners=null),this.events.destroy(),this.options=this.events=null},setOptions:function(n){var t=this.minPx&&n.restrictedExtent!=this.restrictedExtent;OpenLayers.Util.extend(this,n),t&&this.moveTo(this.getCachedCenter(),this.zoom,{forceZoomChange:!0})},getTileSize:function(){return this.tileSize},getBy:function(n,t,i){var r="function"==typeof i.test;return OpenLayers.Array.filter(this[n],function(n){return n[t]==i||r&&i.test(n[t])})},getLayersBy:function(n,t){return this.getBy("layers",n,t)},getLayersByName:function(n){return this.getLayersBy("name",n)},getLayersByClass:function(n){return this.getLayersBy("CLASS_NAME",n)},getControlsBy:function(n,t){return this.getBy("controls",n,t)},getControlsByClass:function(n){return this.getControlsBy("CLASS_NAME",n)},getLayer:function(n){for(var i,r=null,t=0,u=this.layers.length;t<u;t++)if(i=this.layers[t],i.id==n){r=i;break}return r},setLayerZIndex:function(n,t){n.setZIndex(this.Z_INDEX_BASE[n.isBaseLayer?"BaseLayer":"Overlay"]+5*t)},resetLayersZIndex:function(){for(var n=0,t=this.layers.length;n<t;n++)this.setLayerZIndex(this.layers[n],n)},addLayer:function(n){for(var t=0,i=this.layers.length;t<i;t++)if(this.layers[t]==n)return!1;return!1===this.events.triggerEvent("preaddlayer",{layer:n})?!1:(this.allOverlays&&(n.isBaseLayer=!1),n.div.className="olLayerDiv",n.div.style.overflow="",this.setLayerZIndex(n,this.layers.length),n.isFixed?this.viewPortDiv.appendChild(n.div):this.layerContainerDiv.appendChild(n.div),this.layers.push(n),n.setMap(this),n.isBaseLayer||this.allOverlays&&!this.baseLayer?null==this.baseLayer?this.setBaseLayer(n):n.setVisibility(!1):n.redraw(),this.events.triggerEvent("addlayer",{layer:n}),n.events.triggerEvent("added",{map:this,layer:n}),n.afterAdd(),!0)},addLayers:function(n){for(var t=0,i=n.length;t<i;t++)this.addLayer(n[t])},removeLayer:function(n,t){var i,u,r;if(!1!==this.events.triggerEvent("preremovelayer",{layer:n})){if(null==t&&(t=!0),n.isFixed?this.viewPortDiv.removeChild(n.div):this.layerContainerDiv.removeChild(n.div),OpenLayers.Util.removeItem(this.layers,n),n.removeMap(this),n.map=null,this.baseLayer==n&&(this.baseLayer=null,t))for(i=0,u=this.layers.length;i<u;i++)if(r=this.layers[i],r.isBaseLayer||this.allOverlays){this.setBaseLayer(r);break}this.resetLayersZIndex(),this.events.triggerEvent("removelayer",{layer:n}),n.events.triggerEvent("removed",{map:this,layer:n})}},getNumLayers:function(){return this.layers.length},getLayerIndex:function(n){return OpenLayers.Util.indexOf(this.layers,n)},setLayerIndex:function(n,t){var i=this.getLayerIndex(n),r;if(0>t?t=0:t>this.layers.length&&(t=this.layers.length),i!=t){for(this.layers.splice(i,1),this.layers.splice(t,0,n),i=0,r=this.layers.length;i<r;i++)this.setLayerZIndex(this.layers[i],i);this.events.triggerEvent("changelayer",{layer:n,property:"order"}),this.allOverlays&&(0===t?this.setBaseLayer(n):this.baseLayer!==this.layers[0]&&this.setBaseLayer(this.layers[0]))}},raiseLayer:function(n,t){var i=this.getLayerIndex(n)+t;this.setLayerIndex(n,i)},setBaseLayer:function(n){if(n!=this.baseLayer&&-1!=OpenLayers.Util.indexOf(this.layers,n)){var t=this.getCachedCenter(),i=OpenLayers.Util.getResolutionFromScale(this.getScale(),n.units);null==this.baseLayer||this.allOverlays||this.baseLayer.setVisibility(!1),this.baseLayer=n,(!this.allOverlays||this.baseLayer.visibility)&&(this.baseLayer.setVisibility(!0),!1===this.baseLayer.inRange&&this.baseLayer.redraw()),null!=t&&(n=this.getZoomForResolution(i||this.resolution,!0),this.setCenter(t,n,!1,!0)),this.events.triggerEvent("changebaselayer",{layer:this.baseLayer})}},addControl:function(n,t){this.controls.push(n),this.addControlToMap(n,t)},addControls:function(n,t){for(var r=1===arguments.length?[]:t,i=0,u=n.length;i<u;i++)this.addControl(n[i],r[i]?r[i]:null)},addControlToMap:function(n,t){n.outsideViewport=null!=n.div,this.displayProjection&&!n.displayProjection&&(n.displayProjection=this.displayProjection),n.setMap(this);var i=n.draw(t);i&&!n.outsideViewport&&(i.style.zIndex=this.Z_INDEX_BASE.Control+this.controls.length,this.viewPortDiv.appendChild(i)),n.autoActivate&&n.activate()},getControl:function(n){for(var i,r=null,t=0,u=this.controls.length;t<u;t++)if(i=this.controls[t],i.id==n){r=i;break}return r},removeControl:function(n){n&&n==this.getControl(n.id)&&(n.div&&n.div.parentNode==this.viewPortDiv&&this.viewPortDiv.removeChild(n.div),OpenLayers.Util.removeItem(this.controls,n))},addPopup:function(n,t){if(t)for(var i=this.popups.length-1;0<=i;--i)this.removePopup(this.popups[i]);n.map=this,this.popups.push(n),(i=n.draw())&&(i.style.zIndex=this.Z_INDEX_BASE.Popup+this.popups.length,this.layerContainerDiv.appendChild(i))},removePopup:function(n){if(OpenLayers.Util.removeItem(this.popups,n),n.div)try{this.layerContainerDiv.removeChild(n.div)}catch(t){}n.map=null},getSize:function(){var n=null;return null!=this.size&&(n=this.size.clone()),n},updateSize:function(){var n=this.getCurrentSize(),t;if(n&&!isNaN(n.h)&&!isNaN(n.w)&&(this.events.clearMouseCache(),t=this.getSize(),null==t&&(this.size=t=n),!n.equals(t))){for(this.size=n,n=0,t=this.layers.length;n<t;n++)this.layers[n].onMapResize();n=this.getCachedCenter(),null!=this.baseLayer&&null!=n&&(t=this.getZoom(),this.zoom=null,this.setCenter(n,t))}this.events.triggerEvent("updatesize")},getCurrentSize:function(){var n=new OpenLayers.Size(this.div.clientWidth,this.div.clientHeight);return(0==n.w&&0==n.h||isNaN(n.w)&&isNaN(n.h))&&(n.w=this.div.offsetWidth,n.h=this.div.offsetHeight),(0==n.w&&0==n.h||isNaN(n.w)&&isNaN(n.h))&&(n.w=parseInt(this.div.style.width),n.h=parseInt(this.div.style.height)),n},calculateBounds:function(n,t){var i=null;if(null==n&&(n=this.getCachedCenter()),null==t&&(t=this.getResolution()),null!=n&&null!=t)var i=this.size.w*t/2,r=this.size.h*t/2,i=new OpenLayers.Bounds(n.lon-i,n.lat-r,n.lon+i,n.lat+r);return i},getCenter:function(){var n=null,t=this.getCachedCenter();return t&&(n=t.clone()),n},getCachedCenter:function(){return!this.center&&this.size&&(this.center=this.getLonLatFromViewPortPx({x:this.size.w/2,y:this.size.h/2})),this.center},getZoom:function(){return this.zoom},pan:function(n,t,i){if(i=OpenLayers.Util.applyDefaults(i,{animate:!0,dragging:!1}),i.dragging)0==n&&0==t||this.moveByPx(n,t);else{var r=this.getViewPortPxFromLonLat(this.getCachedCenter());n=r.add(n,t),(this.dragging||!n.equals(r))&&(r=this.getLonLatFromViewPortPx(n),i.animate?this.panTo(r):(this.moveTo(r),this.dragging&&(this.dragging=!1,this.events.triggerEvent("moveend"))))}},panTo:function(n){var t;if(this.panTween&&this.getExtent().scale(this.panRatio).containsLonLat(n)){if(t=this.getCachedCenter(),!n.equals(t)){var t=this.getPixelFromLonLat(t),i=this.getPixelFromLonLat(n),r=0,u=0;this.panTween.start({x:0,y:0},{x:i.x-t.x,y:i.y-t.y},this.panDuration,{callbacks:{eachStep:OpenLayers.Function.bind(function(n){this.moveByPx(n.x-r,n.y-u),r=Math.round(n.x),u=Math.round(n.y)},this),done:OpenLayers.Function.bind(function(){this.moveTo(n),this.dragging=!1,this.events.triggerEvent("moveend")},this)}})}}else this.setCenter(n)},setCenter:function(n,t,i,r){this.panTween&&this.panTween.stop(),this.zoomTween&&this.zoomTween.stop(),this.moveTo(n,t,{dragging:i,forceZoomChange:r})},moveByPx:function(n,t){var i=this.size.w/2,r=this.size.h/2,u=i+n,o=r+t,s=this.baseLayer.wrapDateLine,f=0,e=0;if(this.restrictedExtent&&(f=i,e=r,s=!1),n=s||u<=this.maxPx.x-f&&u>=this.minPx.x+f?Math.round(n):0,t=o<=this.maxPx.y-e&&o>=this.minPx.y+e?Math.round(t):0,n||t){for(this.dragging||(this.dragging=!0,this.events.triggerEvent("movestart")),this.center=null,n&&(this.layerContainerOriginPx.x-=n,this.minPx.x-=n,this.maxPx.x-=n),t&&(this.layerContainerOriginPx.y-=t,this.minPx.y-=t,this.maxPx.y-=t),this.applyTransform(),r=0,u=this.layers.length;r<u;++r)i=this.layers[r],i.visibility&&(i===this.baseLayer||i.inRange)&&(i.moveByPx(n,t),i.events.triggerEvent("move"));this.events.triggerEvent("move")}},adjustZoom:function(n){var r,i,t,u;if(this.baseLayer&&this.baseLayer.wrapDateLine&&(r=this.baseLayer.resolutions,i=this.getMaxExtent().getWidth()/this.size.w,this.getResolutionForZoom(n)>i))if(this.fractionalZoom)n=this.getZoomForResolution(i);else for(t=n|0,u=r.length;t<u;++t)if(r[t]<=i){n=t;break}return n},getMinZoom:function(){return this.adjustZoom(0)},moveTo:function(n,t,i){var e,u,r,f;if(null==n||n instanceof OpenLayers.LonLat||(n=new OpenLayers.LonLat(n)),i||(i={}),null!=t&&(t=parseFloat(t),this.fractionalZoom||(t=Math.round(t))),e=t,t=this.adjustZoom(t),t!==e&&(n=this.getCenter()),e=i.dragging||this.dragging,u=i.forceZoomChange,this.getCachedCenter()||this.isValidLonLat(n)||(n=this.maxExtent.getCenterLonLat(),this.center=n.clone()),null!=this.restrictedExtent&&(null==n&&(n=this.center),null==t&&(t=this.getZoom()),r=this.getResolutionForZoom(t),r=this.calculateBounds(n,r),this.restrictedExtent.containsBounds(r)||(f=this.restrictedExtent.getCenterLonLat(),r.getWidth()>this.restrictedExtent.getWidth()?n=new OpenLayers.LonLat(f.lon,n.lat):r.left<this.restrictedExtent.left?n=n.add(this.restrictedExtent.left-r.left,0):r.right>this.restrictedExtent.right&&(n=n.add(this.restrictedExtent.right-r.right,0)),r.getHeight()>this.restrictedExtent.getHeight()?n=new OpenLayers.LonLat(n.lon,f.lat):r.bottom<this.restrictedExtent.bottom?n=n.add(0,this.restrictedExtent.bottom-r.bottom):r.top>this.restrictedExtent.top&&(n=n.add(0,this.restrictedExtent.top-r.top)))),u=u||this.isValidZoomLevel(t)&&t!=this.getZoom(),r=this.isValidLonLat(n)&&!n.equals(this.center),u||r||e){if(e||this.events.triggerEvent("movestart",{zoomChanged:u}),r&&(!u&&this.center&&this.centerLayerContainer(n),this.center=n.clone()),n=u?this.getResolutionForZoom(t):this.getResolution(),u||null==this.layerContainerOrigin){this.layerContainerOrigin=this.getCachedCenter(),this.layerContainerOriginPx.x=0,this.layerContainerOriginPx.y=0,this.applyTransform();var r=this.getMaxExtent({restricted:!0}),o=r.getCenterLonLat(),f=this.center.lon-o.lon,o=o.lat-this.center.lat,s=Math.round(r.getWidth()/n),h=Math.round(r.getHeight()/n);this.minPx={x:(this.size.w-s)/2-f/n,y:(this.size.h-h)/2-o/n},this.maxPx={x:this.minPx.x+Math.round(r.getWidth()/n),y:this.minPx.y+Math.round(r.getHeight()/n)}}for(u&&(this.zoom=t,this.resolution=n),n=this.getExtent(),this.baseLayer.visibility&&(this.baseLayer.moveTo(n,u,i.dragging),i.dragging||this.baseLayer.events.triggerEvent("moveend",{zoomChanged:u})),n=this.baseLayer.getExtent(),t=this.layers.length-1;0<=t;--t)r=this.layers[t],r===this.baseLayer||r.isBaseLayer||(f=r.calculateInRange(),r.inRange!=f&&((r.inRange=f)||r.display(!1),this.events.triggerEvent("changelayer",{layer:r,property:"visibility"})),f&&r.visibility&&(r.moveTo(n,u,i.dragging),i.dragging||r.events.triggerEvent("moveend",{zoomChanged:u})));if(this.events.triggerEvent("move"),e||this.events.triggerEvent("moveend"),u){for(t=0,i=this.popups.length;t<i;t++)this.popups[t].updatePosition();this.events.triggerEvent("zoomend")}}},centerLayerContainer:function(n){var t=this.getViewPortPxFromLonLat(this.layerContainerOrigin),r=this.getViewPortPxFromLonLat(n),i,u;null!=t&&null!=r&&(i=this.layerContainerOriginPx.x,n=this.layerContainerOriginPx.y,u=Math.round(t.x-r.x),t=Math.round(t.y-r.y),this.applyTransform(this.layerContainerOriginPx.x=u,this.layerContainerOriginPx.y=t),i-=u,n-=t,this.minPx.x-=i,this.maxPx.x-=i,this.minPx.y-=n,this.maxPx.y-=n)},isValidZoomLevel:function(n){return null!=n&&0<=n&&n<this.getNumZoomLevels()},isValidLonLat:function(n){var t=!1;return null!=n&&(t=this.getMaxExtent(),t=t.containsLonLat(n,{worldBounds:this.baseLayer.wrapDateLine&&t})),t},getProjection:function(){var n=this.getProjectionObject();return n?n.getCode():null},getProjectionObject:function(){var n=null;return null!=this.baseLayer&&(n=this.baseLayer.projection),n},getMaxResolution:function(){var n=null;return null!=this.baseLayer&&(n=this.baseLayer.maxResolution),n},getMaxExtent:function(n){var t=null;return n&&n.restricted&&this.restrictedExtent?t=this.restrictedExtent:null!=this.baseLayer&&(t=this.baseLayer.maxExtent),t},getNumZoomLevels:function(){var n=null;return null!=this.baseLayer&&(n=this.baseLayer.numZoomLevels),n},getExtent:function(){var n=null;return null!=this.baseLayer&&(n=this.baseLayer.getExtent()),n},getResolution:function(){var n=null;return null!=this.baseLayer?n=this.baseLayer.getResolution():!0===this.allOverlays&&0<this.layers.length&&(n=this.layers[0].getResolution()),n},getUnits:function(){var n=null;return null!=this.baseLayer&&(n=this.baseLayer.units),n},getScale:function(){var n=null;return null!=this.baseLayer&&(n=this.getResolution(),n=OpenLayers.Util.getScaleFromResolution(n,this.baseLayer.units)),n},getZoomForExtent:function(n,t){var i=null;return null!=this.baseLayer&&(i=this.baseLayer.getZoomForExtent(n,t)),i},getResolutionForZoom:function(n){var t=null;return this.baseLayer&&(t=this.baseLayer.getResolutionForZoom(n)),t},getZoomForResolution:function(n,t){var i=null;return null!=this.baseLayer&&(i=this.baseLayer.getZoomForResolution(n,t)),i},zoomTo:function(n,t){var i=this;if(i.isValidZoomLevel(n))if(i.baseLayer.wrapDateLine&&(n=i.adjustZoom(n)),i.zoomTween){var r=i.getResolution(),u=i.getResolutionForZoom(n),f={scale:1},r={scale:r/u};i.zoomTween.playing&&i.zoomTween.duration<3*i.zoomDuration?i.zoomTween.finish={scale:i.zoomTween.finish.scale*r.scale}:(t||(u=i.getSize(),t={x:u.w/2,y:u.h/2}),i.zoomTween.start(f,r,i.zoomDuration,{minFrameRate:50,callbacks:{eachStep:function(n){var r=i.layerContainerOriginPx;n=n.scale,i.applyTransform(r.x+((n-1)*(r.x-t.x)|0),r.y+((n-1)*(r.y-t.y)|0),n)},done:function(n){i.applyTransform(),n=i.getResolution()/n.scale;var r=i.getZoomForResolution(n,!0);i.moveTo(i.getZoomTargetCenter(t,n),r,!0)}}}))}else f=t?i.getZoomTargetCenter(t,i.getResolutionForZoom(n)):null,i.setCenter(f,n)},zoomIn:function(){this.zoomTo(this.getZoom()+1)},zoomOut:function(){this.zoomTo(this.getZoom()-1)},zoomToExtent:function(n,t){n instanceof OpenLayers.Bounds||(n=new OpenLayers.Bounds(n));var i=n.getCenterLonLat();if(this.baseLayer.wrapDateLine){for(i=this.getMaxExtent(),n=n.clone();n.right<n.left;)n.right+=i.getWidth();i=n.getCenterLonLat().wrapDateLine(i)}this.setCenter(i,this.getZoomForExtent(n,t))},zoomToMaxExtent:function(n){n=this.getMaxExtent({restricted:n?n.restricted:!0}),this.zoomToExtent(n)},zoomToScale:function(n,t){var i=OpenLayers.Util.getResolutionFromScale(n,this.baseLayer.units),r=this.size.w*i/2,i=this.size.h*i/2,u=this.getCachedCenter(),r=new OpenLayers.Bounds(u.lon-r,u.lat-i,u.lon+r,u.lat+i);this.zoomToExtent(r,t)},getLonLatFromViewPortPx:function(n){var t=null;return null!=this.baseLayer&&(t=this.baseLayer.getLonLatFromViewPortPx(n)),t},getViewPortPxFromLonLat:function(n){var t=null;return null!=this.baseLayer&&(t=this.baseLayer.getViewPortPxFromLonLat(n)),t},getZoomTargetCenter:function(n,t){var u=null,i=this.getSize(),f=i.w/2-n.x,i=n.y-i.h/2,r=this.getLonLatFromPixel(n);return r&&(u=new OpenLayers.LonLat(r.lon+f*t,r.lat+i*t)),u},getLonLatFromPixel:function(n){return this.getLonLatFromViewPortPx(n)},getPixelFromLonLat:function(n){return n=this.getViewPortPxFromLonLat(n),n.x=Math.round(n.x),n.y=Math.round(n.y),n},getGeodesicPixelSize:function(n){var i=n?this.getLonLatFromPixel(n):this.getCachedCenter()||new OpenLayers.LonLat(0,0),t=this.getResolution();n=i.add(-t/2,0);var u=i.add(t/2,0),f=i.add(0,-t/2),i=i.add(0,t/2),t=new OpenLayers.Projection("EPSG:4326"),r=this.getProjectionObject()||t;return r.equals(t)||(n.transform(r,t),u.transform(r,t),f.transform(r,t),i.transform(r,t)),new OpenLayers.Size(OpenLayers.Util.distVincenty(n,u),OpenLayers.Util.distVincenty(f,i))},getViewPortPxFromLayerPx:function(n){var t=null;return null!=n&&(t=n.add(this.layerContainerOriginPx.x,this.layerContainerOriginPx.y)),t},getLayerPxFromViewPortPx:function(n){var t=null;return null!=n&&(t=n.add(-this.layerContainerOriginPx.x,-this.layerContainerOriginPx.y),isNaN(t.x)||isNaN(t.y))&&(t=null),t},getLonLatFromLayerPx:function(n){return n=this.getViewPortPxFromLayerPx(n),this.getLonLatFromViewPortPx(n)},getLayerPxFromLonLat:function(n){return n=this.getPixelFromLonLat(n),this.getLayerPxFromViewPortPx(n)},applyTransform:function(n,t,i){var e,o,s;i=i||1,e=this.layerContainerOriginPx,o=1!==i,n=n||e.x,t=t||e.y;var f=this.layerContainerDiv.style,u=this.applyTransform.transform,r=this.applyTransform.template;void 0===u&&(u=OpenLayers.Util.vendorPrefix.style("transform"),this.applyTransform.transform=u)&&(s=OpenLayers.Element.getStyle(this.viewPortDiv,OpenLayers.Util.vendorPrefix.css("transform")),s&&"none"===s||(r=["translate3d(",",0) ","scale3d(",",1)"],f[u]=[r[0],"0,0",r[1]].join("")),r&&~f[u].indexOf(r[0])||(r=["translate(",") ","scale(",")"]),this.applyTransform.template=r),null===u||"translate3d("!==r[0]&&!0!==o?(f.left=n+"px",f.top=t+"px",null!==u&&(f[u]="")):(!0===o&&"translate("===r[0]&&(n-=e.x,t-=e.y,f.left=e.x+"px",f.top=e.y+"px"),f[u]=[r[0],n,"px,",t,"px",r[1],r[2],i,",",i,r[3]].join(""))},CLASS_NAME:"OpenLayers.Map"}),OpenLayers.Map.TILE_WIDTH=256,OpenLayers.Map.TILE_HEIGHT=256,OpenLayers.Layer=OpenLayers.Class({id:null,name:null,div:null,opacity:1,alwaysInRange:null,RESOLUTION_PROPERTIES:"scales resolutions maxScale minScale maxResolution minResolution numZoomLevels maxZoomLevel".split(" "),events:null,map:null,isBaseLayer:!1,alpha:!1,displayInLayerSwitcher:!0,visibility:!0,attribution:null,inRange:!1,imageSize:null,options:null,eventListeners:null,gutter:0,projection:null,units:null,scales:null,resolutions:null,maxExtent:null,minExtent:null,maxResolution:null,minResolution:null,numZoomLevels:null,minScale:null,maxScale:null,displayOutsideMaxExtent:!1,wrapDateLine:!1,metadata:null,initialize:function(n,t){if(this.metadata={},t=OpenLayers.Util.extend({},t),null!=this.alwaysInRange&&(t.alwaysInRange=this.alwaysInRange),this.addOptions(t),this.name=n,null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"),this.div=OpenLayers.Util.createDiv(this.id),this.div.style.width="100%",this.div.style.height="100%",this.div.dir="ltr",this.events=new OpenLayers.Events(this,this.div),this.eventListeners instanceof Object))this.events.on(this.eventListeners)},destroy:function(n){null==n&&(n=!0),null!=this.map&&this.map.removeLayer(this,n),this.options=this.div=this.name=this.map=this.projection=null,this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy()),this.events=this.eventListeners=null},clone:function(n){return null==n&&(n=new OpenLayers.Layer(this.name,this.getOptions())),OpenLayers.Util.applyDefaults(n,this),n.map=null,n},getOptions:function(){var t={},n;for(n in this.options)t[n]=this[n];return t},setName:function(n){n!=this.name&&(this.name=n,null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"name"}))},addOptions:function(n,t){if(null==this.options&&(this.options={}),n&&("string"==typeof n.projection&&(n.projection=new OpenLayers.Projection(n.projection)),n.projection&&OpenLayers.Util.applyDefaults(n,OpenLayers.Projection.defaults[n.projection.getCode()]),!n.maxExtent||n.maxExtent instanceof OpenLayers.Bounds||(n.maxExtent=new OpenLayers.Bounds(n.maxExtent)),!n.minExtent||n.minExtent instanceof OpenLayers.Bounds||(n.minExtent=new OpenLayers.Bounds(n.minExtent))),OpenLayers.Util.extend(this.options,n),OpenLayers.Util.extend(this,n),this.projection&&this.projection.getUnits()&&(this.units=this.projection.getUnits()),this.map){var r=this.map.getResolution(),u=this.RESOLUTION_PROPERTIES.concat(["projection","units","minExtent","maxExtent"]),i;for(i in n)if(n.hasOwnProperty(i)&&0<=OpenLayers.Util.indexOf(u,i)){this.initResolutions(),t&&this.map.baseLayer===this&&(this.map.setCenter(this.map.getCenter(),this.map.getZoomForResolution(r),!1,!0),this.map.events.triggerEvent("changebaselayer",{layer:this}));break}}},onMapResize:function(){},redraw:function(){var t=!1,n;return this.map&&(this.inRange=this.calculateInRange(),n=this.getExtent(),n&&this.inRange&&this.visibility&&(this.moveTo(n,!0,!1),this.events.triggerEvent("moveend",{zoomChanged:!0}),t=!0)),t},moveTo:function(n){n=this.visibility,this.isBaseLayer||(n=n&&this.inRange),this.display(n)},moveByPx:function(){},setMap:function(n){null==this.map&&(this.map=n,this.maxExtent=this.maxExtent||this.map.maxExtent,this.minExtent=this.minExtent||this.map.minExtent,this.projection=this.projection||this.map.projection,"string"==typeof this.projection&&(this.projection=new OpenLayers.Projection(this.projection)),this.units=this.projection.getUnits()||this.units||this.map.units,this.initResolutions(),this.isBaseLayer||(this.inRange=this.calculateInRange(),this.div.style.display=this.visibility&&this.inRange?"":"none"),this.setTileSize())},afterAdd:function(){},removeMap:function(){},getImageSize:function(){return this.imageSize||this.tileSize},setTileSize:function(n){this.tileSize=n=n?n:this.tileSize?this.tileSize:this.map.getTileSize(),this.gutter&&(this.imageSize=new OpenLayers.Size(n.w+2*this.gutter,n.h+2*this.gutter))},getVisibility:function(){return this.visibility},setVisibility:function(n){n!=this.visibility&&(this.visibility=n,this.display(n),this.redraw(),null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"visibility"}),this.events.triggerEvent("visibilitychanged"))},display:function(n){n!=("none"!=this.div.style.display)&&(this.div.style.display=n&&this.calculateInRange()?"block":"none")},calculateInRange:function(){var n=!1;return this.alwaysInRange?n=!0:this.map&&(n=this.map.getResolution(),n=n>=this.minResolution&&n<=this.maxResolution),n},setIsBaseLayer:function(n){n!=this.isBaseLayer&&(this.isBaseLayer=n,null!=this.map&&this.map.events.triggerEvent("changebaselayer",{layer:this}))},initResolutions:function(){for(var i,n={},e=!0,u,f,t=0,r=this.RESOLUTION_PROPERTIES.length;t<r;t++)i=this.RESOLUTION_PROPERTIES[t],n[i]=this.options[i],e&&this.options[i]&&(e=!1);if(null==this.options.alwaysInRange&&(this.alwaysInRange=e),null==n.resolutions&&(n.resolutions=this.resolutionsFromScales(n.scales)),null==n.resolutions&&(n.resolutions=this.calculateResolutions(n)),null==n.resolutions){for(t=0,r=this.RESOLUTION_PROPERTIES.length;t<r;t++)i=this.RESOLUTION_PROPERTIES[t],n[i]=null!=this.options[i]?this.options[i]:this.map[i];null==n.resolutions&&(n.resolutions=this.resolutionsFromScales(n.scales)),null==n.resolutions&&(n.resolutions=this.calculateResolutions(n))}if(this.options.maxResolution&&"auto"!==this.options.maxResolution&&(u=this.options.maxResolution),this.options.minScale&&(u=OpenLayers.Util.getResolutionFromScale(this.options.minScale,this.units)),this.options.minResolution&&"auto"!==this.options.minResolution&&(f=this.options.minResolution),this.options.maxScale&&(f=OpenLayers.Util.getResolutionFromScale(this.options.maxScale,this.units)),n.resolutions&&(n.resolutions.sort(function(n,t){return t-n}),u||(u=n.resolutions[0]),f||(f=n.resolutions[n.resolutions.length-1])),this.resolutions=n.resolutions){for(r=this.resolutions.length,this.scales=Array(r),t=0;t<r;t++)this.scales[t]=OpenLayers.Util.getScaleFromResolution(this.resolutions[t],this.units);this.numZoomLevels=r}(this.minResolution=f)&&(this.maxScale=OpenLayers.Util.getScaleFromResolution(f,this.units)),(this.maxResolution=u)&&(this.minScale=OpenLayers.Util.getScaleFromResolution(u,this.units))},resolutionsFromScales:function(n){if(null!=n){var i,t,r;for(r=n.length,i=Array(r),t=0;t<r;t++)i[t]=OpenLayers.Util.getResolutionFromScale(n[t],this.units);return i}},calculateResolutions:function(n){var t,r,i=n.maxResolution,f,u;if(null!=n.minScale?i=OpenLayers.Util.getResolutionFromScale(n.minScale,this.units):"auto"==i&&null!=this.maxExtent&&(t=this.map.getSize(),r=this.maxExtent.getWidth()/t.w,t=this.maxExtent.getHeight()/t.h,i=Math.max(r,t)),r=n.minResolution,null!=n.maxScale?r=OpenLayers.Util.getResolutionFromScale(n.maxScale,this.units):"auto"==n.minResolution&&null!=this.minExtent&&(t=this.map.getSize(),r=this.minExtent.getWidth()/t.w,t=this.minExtent.getHeight()/t.h,r=Math.max(r,t)),"number"!=typeof i&&"number"!=typeof r&&null!=this.maxExtent&&(i=this.map.getTileSize(),i=Math.max(this.maxExtent.getWidth()/i.w,this.maxExtent.getHeight()/i.h)),t=n.maxZoomLevel,n=n.numZoomLevels,"number"==typeof r&&"number"==typeof i&&void 0===n?n=Math.floor(Math.log(i/r)/Math.log(2))+1:void 0===n&&null!=t&&(n=t+1),!("number"!=typeof n||0>=n||"number"!=typeof i&&"number"!=typeof r)){if(t=Array(n),f=2,"number"==typeof r&&"number"==typeof i&&(f=Math.pow(i/r,1/(n-1))),"number"==typeof i)for(u=0;u<n;u++)t[u]=i/Math.pow(f,u);else for(u=0;u<n;u++)t[n-1-u]=r*Math.pow(f,u);return t}},getResolution:function(){var n=this.map.getZoom();return this.getResolutionForZoom(n)},getExtent:function(){return this.map.calculateBounds()},getZoomForExtent:function(n,t){var i=this.map.getSize(),i=Math.max(n.getWidth()/i.w,n.getHeight()/i.h);return this.getZoomForResolution(i,t)},getDataExtent:function(){},getResolutionForZoom:function(n){if(n=Math.max(0,Math.min(n,this.resolutions.length-1)),this.map.fractionalZoom){var t=Math.floor(n),i=Math.ceil(n);n=this.resolutions[t]-(n-t)*(this.resolutions[t]-this.resolutions[i])}else n=this.resolutions[Math.round(n)];return n},getZoomForResolution:function(n,t){var i,e;if(this.map.fractionalZoom){var r=0,u=this.resolutions[r],o=this.resolutions[this.resolutions.length-1],f;for(i=0,e=this.resolutions.length;i<e;++i)if(f=this.resolutions[i],f>=n&&(u=f,r=i),f<=n){o=f;break}i=u-o,i=0<i?r+(u-n)/i:r}else{for(u=Number.POSITIVE_INFINITY,i=0,e=this.resolutions.length;i<e;i++)if(t){if(r=Math.abs(this.resolutions[i]-n),r>u)break;u=r}else if(this.resolutions[i]<n)break;i=Math.max(0,i-1)}return i},getLonLatFromViewPortPx:function(n){var t=null,i=this.map;if(null!=n&&i.minPx){var t=i.getResolution(),r=i.getMaxExtent({restricted:!0}),t=new OpenLayers.LonLat((n.x-i.minPx.x)*t+r.left,(i.minPx.y-n.y)*t+r.top);this.wrapDateLine&&(t=t.wrapDateLine(this.maxExtent))}return t},getViewPortPxFromLonLat:function(n,t){var i=null;return null!=n&&(t=t||this.map.getResolution(),i=this.map.calculateBounds(null,t),i=new OpenLayers.Pixel(1/t*(n.lon-i.left),1/t*(i.top-n.lat))),i},setOpacity:function(n){var u,r;if(n!=this.opacity){this.opacity=n;for(var i=this.div.childNodes,t=0,f=i.length;t<f;++t)u=i[t].firstChild||i[t],r=i[t].lastChild,r&&"iframe"===r.nodeName.toLowerCase()&&(u=r.parentNode),OpenLayers.Util.modifyDOMElement(u,null,null,null,null,null,null,n);null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"})}},getZIndex:function(){return this.div.style.zIndex},setZIndex:function(n){this.div.style.zIndex=n},adjustBounds:function(n){if(this.gutter){var t=this.gutter*this.map.getResolution();n=new OpenLayers.Bounds(n.left-t,n.bottom-t,n.right+t,n.top+t)}return this.wrapDateLine&&(t={rightTolerance:this.getResolution(),leftTolerance:this.getResolution()},n=n.wrapDateLine(this.maxExtent,t)),n},CLASS_NAME:"OpenLayers.Layer"}),OpenLayers.Layer.SphericalMercator={getExtent:function(){return this.sphericalMercator?this.map.calculateBounds():OpenLayers.Layer.FixedZoomLevels.prototype.getExtent.apply(this)},getLonLatFromViewPortPx:function(){return OpenLayers.Layer.prototype.getLonLatFromViewPortPx.apply(this,arguments)},getViewPortPxFromLonLat:function(){return OpenLayers.Layer.prototype.getViewPortPxFromLonLat.apply(this,arguments)},initMercatorParameters:function(){this.RESOLUTIONS=[];for(var n=0;n<=this.MAX_ZOOM_LEVEL;++n)this.RESOLUTIONS[n]=156543.03390625/Math.pow(2,n);this.units="m",this.projection=this.projection||"EPSG:900913"},forwardMercator:function(){var n=new OpenLayers.Projection("EPSG:4326"),t=new OpenLayers.Projection("EPSG:900913");return function(i,r){var u=OpenLayers.Projection.transform({x:i,y:r},n,t);return new OpenLayers.LonLat(u.x,u.y)}}(),inverseMercator:function(){var n=new OpenLayers.Projection("EPSG:4326"),t=new OpenLayers.Projection("EPSG:900913");return function(i,r){var u=OpenLayers.Projection.transform({x:i,y:r},t,n);return new OpenLayers.LonLat(u.x,u.y)}}()},OpenLayers.Layer.EventPane=OpenLayers.Class(OpenLayers.Layer,{smoothDragPan:!0,isBaseLayer:!0,isFixed:!0,pane:null,mapObject:null,initialize:function(){OpenLayers.Layer.prototype.initialize.apply(this,arguments),null==this.pane&&(this.pane=OpenLayers.Util.createDiv(this.div.id+"_EventPane"))},destroy:function(){this.pane=this.mapObject=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},setMap:function(){OpenLayers.Layer.prototype.setMap.apply(this,arguments),this.pane.style.zIndex=parseInt(this.div.style.zIndex)+1,this.pane.style.display=this.div.style.display,this.pane.style.width="100%",this.pane.style.height="100%","msie"==OpenLayers.BROWSER_NAME&&(this.pane.style.background="url("+OpenLayers.Util.getImageLocation("blank.gif")+")"),this.isFixed?this.map.viewPortDiv.appendChild(this.pane):this.map.layerContainerDiv.appendChild(this.pane),this.loadMapObject(),null==this.mapObject&&this.loadWarningMessage()},removeMap:function(){this.pane&&this.pane.parentNode&&this.pane.parentNode.removeChild(this.pane),OpenLayers.Layer.prototype.removeMap.apply(this,arguments)},loadWarningMessage:function(){this.div.style.backgroundColor="darkblue";var n=this.map.getSize(),t=Math.min(n.w,300),i=Math.min(n.h,200),t=new OpenLayers.Size(t,i),n=new OpenLayers.Pixel(n.w/2,n.h/2).add(-t.w/2,-t.h/2),n=OpenLayers.Util.createDiv(this.name+"_warning",n,t,null,null,null,"auto");n.style.padding="7px",n.style.backgroundColor="yellow",n.innerHTML=this.getWarningHTML(),this.div.appendChild(n)},getWarningHTML:function(){return""},display:function(){OpenLayers.Layer.prototype.display.apply(this,arguments),this.pane.style.display=this.div.style.display},setZIndex:function(){OpenLayers.Layer.prototype.setZIndex.apply(this,arguments),this.pane.style.zIndex=parseInt(this.div.style.zIndex)+1},moveByPx:function(n,t){OpenLayers.Layer.prototype.moveByPx.apply(this,arguments),this.dragPanMapObject?this.dragPanMapObject(n,-t):this.moveTo(this.map.getCachedCenter())},moveTo:function(n,t,i){var r,u;if(OpenLayers.Layer.prototype.moveTo.apply(this,arguments),null!=this.mapObject&&(r=this.map.getCenter(),u=this.map.getZoom(),null!=r)){var f=this.getMapObjectCenter(),f=this.getOLLonLatFromMapObjectLonLat(f),e=this.getMapObjectZoom(),e=this.getOLZoomFromMapObjectZoom(e);r.equals(f)&&u==e||(!t&&f&&this.dragPanMapObject&&this.smoothDragPan?(u=this.map.getViewPortPxFromLonLat(f),r=this.map.getViewPortPxFromLonLat(r),this.dragPanMapObject(r.x-u.x,u.y-r.y)):(r=this.getMapObjectLonLatFromOLLonLat(r),u=this.getMapObjectZoomFromOLZoom(u),this.setMapObjectCenter(r,u,i)))}},getLonLatFromViewPortPx:function(n){var t=null;return null!=this.mapObject&&null!=this.getMapObjectCenter()&&(n=this.getMapObjectPixelFromOLPixel(n),n=this.getMapObjectLonLatFromMapObjectPixel(n),t=this.getOLLonLatFromMapObjectLonLat(n)),t},getViewPortPxFromLonLat:function(n){var t=null;return null!=this.mapObject&&null!=this.getMapObjectCenter()&&(n=this.getMapObjectLonLatFromOLLonLat(n),n=this.getMapObjectPixelFromMapObjectLonLat(n),t=this.getOLPixelFromMapObjectPixel(n)),t},getOLLonLatFromMapObjectLonLat:function(n){var t=null;return null!=n&&(t=this.getLongitudeFromMapObjectLonLat(n),n=this.getLatitudeFromMapObjectLonLat(n),t=new OpenLayers.LonLat(t,n)),t},getMapObjectLonLatFromOLLonLat:function(n){var t=null;return null!=n&&(t=this.getMapObjectLonLatFromLonLat(n.lon,n.lat)),t},getOLPixelFromMapObjectPixel:function(n){var t=null;return null!=n&&(t=this.getXFromMapObjectPixel(n),n=this.getYFromMapObjectPixel(n),t=new OpenLayers.Pixel(t,n)),t},getMapObjectPixelFromOLPixel:function(n){var t=null;return null!=n&&(t=this.getMapObjectPixelFromXY(n.x,n.y)),t},CLASS_NAME:"OpenLayers.Layer.EventPane"}),OpenLayers.Layer.FixedZoomLevels=OpenLayers.Class({initialize:function(){},initResolutions:function(){for(var i,t=["minZoomLevel","maxZoomLevel","numZoomLevels"],n=0,r=t.length;n<r;n++)i=t[n],this[i]=null!=this.options[i]?this.options[i]:this.map[i];if((null==this.minZoomLevel||this.minZoomLevel<this.MIN_ZOOM_LEVEL)&&(this.minZoomLevel=this.MIN_ZOOM_LEVEL),t=this.MAX_ZOOM_LEVEL-this.minZoomLevel+1,n=null==this.options.numZoomLevels&&null!=this.options.maxZoomLevel||null==this.numZoomLevels&&null!=this.maxZoomLevel?this.maxZoomLevel-this.minZoomLevel+1:this.numZoomLevels,this.numZoomLevels=null!=n?Math.min(n,t):t,this.maxZoomLevel=this.minZoomLevel+this.numZoomLevels-1,null!=this.RESOLUTIONS){for(t=0,this.resolutions=[],n=this.minZoomLevel;n<=this.maxZoomLevel;n++)this.resolutions[t++]=this.RESOLUTIONS[n];this.maxResolution=this.resolutions[0],this.minResolution=this.resolutions[this.resolutions.length-1]}},getResolution:function(){if(null!=this.resolutions)return OpenLayers.Layer.prototype.getResolution.apply(this,arguments);var i=null,n=this.map.getSize(),t=this.getExtent();return null!=n&&null!=t&&(i=Math.max(t.getWidth()/n.w,t.getHeight()/n.h)),i},getExtent:function(){var n=this.map.getSize(),t=this.getLonLatFromViewPortPx({x:0,y:0}),n=this.getLonLatFromViewPortPx({x:n.w,y:n.h});return null!=t&&null!=n?new OpenLayers.Bounds(t.lon,n.lat,n.lon,t.lat):null},getZoomForResolution:function(){if(null!=this.resolutions)return OpenLayers.Layer.prototype.getZoomForResolution.apply(this,arguments);var n=OpenLayers.Layer.prototype.getExtent.apply(this,[]);return this.getZoomForExtent(n)},getOLZoomFromMapObjectZoom:function(n){var t=null;return null!=n&&(t=n-this.minZoomLevel,this.map.baseLayer!==this&&(t=this.map.baseLayer.getZoomForResolution(this.getResolutionForZoom(t)))),t},getMapObjectZoomFromOLZoom:function(n){var t=null;return null!=n&&(t=n+this.minZoomLevel,this.map.baseLayer!==this&&(t=this.getZoomForResolution(this.map.baseLayer.getResolutionForZoom(t)))),t},CLASS_NAME:"OpenLayers.Layer.FixedZoomLevels"}),OpenLayers.Layer.Google=OpenLayers.Class(OpenLayers.Layer.EventPane,OpenLayers.Layer.FixedZoomLevels,{MIN_ZOOM_LEVEL:0,MAX_ZOOM_LEVEL:21,RESOLUTIONS:[1.40625,.703125,.3515625,.17578125,.087890625,.0439453125,.02197265625,.010986328125,.0054931640625,.00274658203125,.001373291015625,.0006866455078125,.00034332275390625,.000171661376953125,858306884765625e-19,4291534423828125e-20,21457672119140622e-21,10728836059570311e-21,536441802978515e-20,268220901489257e-20,13411045074462891e-22,67055225372314453e-23],type:null,wrapDateLine:!0,sphericalMercator:!1,version:null,initialize:function(n,t){t=t||{},t.version||(t.version="function"==typeof GMap2?"2":"3");var i=OpenLayers.Layer.Google["v"+t.version.replace(/\./g,"_")];if(i)OpenLayers.Util.applyDefaults(t,i);else throw"Unsupported Google Maps API version: "+t.version;OpenLayers.Util.applyDefaults(t,i.DEFAULTS),t.maxExtent&&(t.maxExtent=t.maxExtent.clone()),OpenLayers.Layer.EventPane.prototype.initialize.apply(this,[n,t]),OpenLayers.Layer.FixedZoomLevels.prototype.initialize.apply(this,[n,t]),this.sphericalMercator&&(OpenLayers.Util.extend(this,OpenLayers.Layer.SphericalMercator),this.initMercatorParameters())},clone:function(){return new OpenLayers.Layer.Google(this.name,this.getOptions())},setVisibility:function(){var n=null==this.opacity?1:this.opacity;OpenLayers.Layer.EventPane.prototype.setVisibility.apply(this,arguments),this.setOpacity(n)},display:function(n){this._dragging||this.setGMapVisibility(n),OpenLayers.Layer.EventPane.prototype.display.apply(this,arguments)},moveTo:function(n,t,i){this._dragging=i,OpenLayers.Layer.EventPane.prototype.moveTo.apply(this,arguments),delete this._dragging},setOpacity:function(n){if(n!==this.opacity&&(null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"}),this.opacity=n),this.getVisibility()){var t=this.getMapContainer();OpenLayers.Util.modifyDOMElement(t,null,null,null,null,null,null,n)}},destroy:function(){if(this.map){this.setGMapVisibility(!1);var n=OpenLayers.Layer.Google.cache[this.map.id];n&&1>=n.count&&this.removeGMapElements()}OpenLayers.Layer.EventPane.prototype.destroy.apply(this,arguments)},removeGMapElements:function(){var t=OpenLayers.Layer.Google.cache[this.map.id],n;t&&(n=this.mapObject&&this.getMapContainer(),n&&n.parentNode&&n.parentNode.removeChild(n),(n=t.termsOfUse)&&n.parentNode&&n.parentNode.removeChild(n),(t=t.poweredBy)&&t.parentNode&&t.parentNode.removeChild(t),this.mapObject&&window.google&&google.maps&&google.maps.event&&google.maps.event.clearListeners&&google.maps.event.clearListeners(this.mapObject,"tilesloaded"))},removeMap:function(n){this.visibility&&this.mapObject&&this.setGMapVisibility(!1);var t=OpenLayers.Layer.Google.cache[n.id];t&&(1>=t.count?(this.removeGMapElements(),delete OpenLayers.Layer.Google.cache[n.id]):--t.count),delete this.termsOfUse,delete this.poweredBy,delete this.mapObject,delete this.dragObject,OpenLayers.Layer.EventPane.prototype.removeMap.apply(this,arguments)},getOLBoundsFromMapObjectBounds:function(n){var t=null;return null!=n&&(t=n.getSouthWest(),n=n.getNorthEast(),this.sphericalMercator?(t=this.forwardMercator(t.lng(),t.lat()),n=this.forwardMercator(n.lng(),n.lat())):(t=new OpenLayers.LonLat(t.lng(),t.lat()),n=new OpenLayers.LonLat(n.lng(),n.lat())),t=new OpenLayers.Bounds(t.lon,t.lat,n.lon,n.lat)),t},getWarningHTML:function(){return OpenLayers.i18n("googleWarning")},getMapObjectCenter:function(){return this.mapObject.getCenter()},getMapObjectZoom:function(){return this.mapObject.getZoom()},getLongitudeFromMapObjectLonLat:function(n){return this.sphericalMercator?this.forwardMercator(n.lng(),n.lat()).lon:n.lng()},getLatitudeFromMapObjectLonLat:function(n){return this.sphericalMercator?this.forwardMercator(n.lng(),n.lat()).lat:n.lat()},getXFromMapObjectPixel:function(n){return n.x},getYFromMapObjectPixel:function(n){return n.y},CLASS_NAME:"OpenLayers.Layer.Google"}),OpenLayers.Layer.Google.cache={},OpenLayers.Layer.Google.v2={termsOfUse:null,poweredBy:null,dragObject:null,loadMapObject:function(){var u,t,i,n,r;if(this.type||(this.type=G_NORMAL_MAP),n=OpenLayers.Layer.Google.cache[this.map.id],n)u=n.mapObject,t=n.termsOfUse,i=n.poweredBy,++n.count;else{n=this.map.viewPortDiv,r=document.createElement("div"),r.id=this.map.id+"_GMap2Container",r.style.position="absolute",r.style.width="100%",r.style.height="100%",n.appendChild(r);try{u=new GMap2(r),t=r.lastChild,n.appendChild(t),t.style.zIndex="1100",t.style.right="",t.style.bottom="",t.className="olLayerGoogleCopyright",i=r.lastChild,n.appendChild(i),i.style.zIndex="1100",i.style.right="",i.style.bottom="",i.className="olLayerGooglePoweredBy gmnoprint"}catch(f){throw f;}OpenLayers.Layer.Google.cache[this.map.id]={mapObject:u,termsOfUse:t,poweredBy:i,count:1}}this.mapObject=u,this.termsOfUse=t,this.poweredBy=i,-1===OpenLayers.Util.indexOf(this.mapObject.getMapTypes(),this.type)&&this.mapObject.addMapType(this.type),"function"==typeof u.getDragObject?this.dragObject=u.getDragObject():this.dragPanMapObject=null,!1===this.isBaseLayer&&this.setGMapVisibility("none"!==this.div.style.display)},onMapResize:function(){if(this.visibility&&this.mapObject.isLoaded())this.mapObject.checkResize();else{if(!this._resized)var n=this,t=GEvent.addListener(this.mapObject,"load",function(){GEvent.removeListener(t),delete n._resized,n.mapObject.checkResize(),n.moveTo(n.map.getCenter(),n.map.getZoom())});this._resized=!0}},setGMapVisibility:function(n){var t=OpenLayers.Layer.Google.cache[this.map.id],i;t&&(i=this.mapObject.getContainer(),!0===n?(this.mapObject.setMapType(this.type),i.style.display="",this.termsOfUse.style.left="",this.termsOfUse.style.display="",this.poweredBy.style.display="",t.displayed=this.id):(t.displayed===this.id&&delete t.displayed,t.displayed||(i.style.display="none",this.termsOfUse.style.display="none",this.termsOfUse.style.left="-9999px",this.poweredBy.style.display="none")))},getMapContainer:function(){return this.mapObject.getContainer()},getMapObjectBoundsFromOLBounds:function(n){var t=null;return null!=n&&(t=this.sphericalMercator?this.inverseMercator(n.bottom,n.left):new OpenLayers.LonLat(n.bottom,n.left),n=this.sphericalMercator?this.inverseMercator(n.top,n.right):new OpenLayers.LonLat(n.top,n.right),t=new GLatLngBounds(new GLatLng(t.lat,t.lon),new GLatLng(n.lat,n.lon))),t},setMapObjectCenter:function(n,t){this.mapObject.setCenter(n,t)},dragPanMapObject:function(n,t){this.dragObject.moveBy(new GSize(-n,t))},getMapObjectLonLatFromMapObjectPixel:function(n){return this.mapObject.fromContainerPixelToLatLng(n)},getMapObjectPixelFromMapObjectLonLat:function(n){return this.mapObject.fromLatLngToContainerPixel(n)},getMapObjectZoomFromMapObjectBounds:function(n){return this.mapObject.getBoundsZoomLevel(n)},getMapObjectLonLatFromLonLat:function(n,t){var i;return this.sphericalMercator?(i=this.inverseMercator(n,t),i=new GLatLng(i.lat,i.lon)):i=new GLatLng(t,n),i},getMapObjectPixelFromXY:function(n,t){return new GPoint(n,t)}},OpenLayers.Geometry=OpenLayers.Class({id:null,parent:null,bounds:null,initialize:function(){this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){this.bounds=this.id=null},clone:function(){return new OpenLayers.Geometry},setBounds:function(n){n&&(this.bounds=n.clone())},clearBounds:function(){this.bounds=null,this.parent&&this.parent.clearBounds()},extendBounds:function(n){this.getBounds()?this.bounds.extend(n):this.setBounds(n)},getBounds:function(){return null==this.bounds&&this.calculateBounds(),this.bounds},calculateBounds:function(){},distanceTo:function(){},getVertices:function(){},atPoint:function(n,t,i){var r=!1;return null!=this.getBounds()&&null!=n&&(t=null!=t?t:0,i=null!=i?i:0,r=new OpenLayers.Bounds(this.bounds.left-t,this.bounds.bottom-i,this.bounds.right+t,this.bounds.top+i).containsLonLat(n)),r},getLength:function(){return 0},getArea:function(){return 0},getCentroid:function(){return null},toString:function(){return OpenLayers.Format&&OpenLayers.Format.WKT?OpenLayers.Format.WKT.prototype.write(new OpenLayers.Feature.Vector(this)):Object.prototype.toString.call(this)},CLASS_NAME:"OpenLayers.Geometry"}),OpenLayers.Geometry.fromWKT=function(n){var i,t,r;if(OpenLayers.Format&&OpenLayers.Format.WKT)if(t=OpenLayers.Geometry.fromWKT.format,t||(t=new OpenLayers.Format.WKT,OpenLayers.Geometry.fromWKT.format=t),n=t.read(n),n instanceof OpenLayers.Feature.Vector)i=n.geometry;else if(OpenLayers.Util.isArray(n)){for(i=n.length,t=Array(i),r=0;r<i;++r)t[r]=n[r].geometry;i=new OpenLayers.Geometry.Collection(t)}return i},OpenLayers.Geometry.segmentsIntersect=function(n,t,i){var h=i&&i.point;i=i&&i.tolerance;var o=!1,r=n.x1-t.x1,s=n.y1-t.y1,e=n.x2-n.x1,u=n.y2-n.y1,c=t.y2-t.y1,l=t.x2-t.x1,f=c*e-l*u,c=l*s-c*r,s=e*s-u*r;if(0==f?0==c&&0==s&&(o=!0):(r=c/f,f=s/f,0<=r&&1>=r&&0<=f&&1>=f&&(h?(e=n.x1+r*e,f=n.y1+r*u,o=new OpenLayers.Geometry.Point(e,f)):o=!0)),i)if(o){if(h)n:for(n=[n,t],t=0;2>t;++t)for(r=n[t],u=1;3>u;++u)if(e=r["x"+u],f=r["y"+u],h=Math.sqrt(Math.pow(e-o.x,2)+Math.pow(f-o.y,2)),h<i){o.x=e,o.y=f;break n}}else n:for(n=[n,t],t=0;2>t;++t)for(e=n[t],f=n[(t+1)%2],u=1;3>u;++u)if(r={x:e["x"+u],y:e["y"+u]},s=OpenLayers.Geometry.distanceToSegment(r,f),s.distance<i){o=h?new OpenLayers.Geometry.Point(r.x,r.y):!0;break n}return o},OpenLayers.Geometry.distanceToSegment=function(n,t){var i=OpenLayers.Geometry.distanceSquaredToSegment(n,t);return i.distance=Math.sqrt(i.distance),i},OpenLayers.Geometry.distanceSquaredToSegment=function(n,t){var o=n.x,s=n.y,i=t.x1,r=t.y1,h=t.x2,c=t.y2,f=h-i,e=c-r,u=(f*(o-i)+e*(s-r))/(Math.pow(f,2)+Math.pow(e,2));return 0>=u||(1<=u?(i=h,r=c):(i+=u*f,r+=u*e)),{distance:Math.pow(i-o,2)+Math.pow(r-s,2),x:i,y:r,along:u}},OpenLayers.Geometry.Collection=OpenLayers.Class(OpenLayers.Geometry,{components:null,componentTypes:null,initialize:function(n){OpenLayers.Geometry.prototype.initialize.apply(this,arguments),this.components=[],null!=n&&this.addComponents(n)},destroy:function(){this.components.length=0,this.components=null,OpenLayers.Geometry.prototype.destroy.apply(this,arguments)},clone:function(){for(var a=eval("new "+this.CLASS_NAME+"()"),b=0,c=this.components.length;b<c;b++)a.addComponent(this.components[b].clone());return OpenLayers.Util.applyDefaults(a,this),a},getComponentsString:function(){for(var t=[],n=0,i=this.components.length;n<i;n++)t.push(this.components[n].toShortString());return t.join(",")},calculateBounds:function(){var n,t,i,r;if(this.bounds=null,n=new OpenLayers.Bounds,t=this.components,t)for(i=0,r=t.length;i<r;i++)n.extend(t[i].getBounds());null!=n.left&&null!=n.bottom&&null!=n.right&&null!=n.top&&this.setBounds(n)},addComponents:function(n){OpenLayers.Util.isArray(n)||(n=[n]);for(var t=0,i=n.length;t<i;t++)this.addComponent(n[t])},addComponent:function(n,t){var i=!1,r;return n&&(null==this.componentTypes||-1<OpenLayers.Util.indexOf(this.componentTypes,n.CLASS_NAME))&&(null!=t&&t<this.components.length?(i=this.components.slice(0,t),r=this.components.slice(t,this.components.length),i.push(n),this.components=i.concat(r)):this.components.push(n),n.parent=this,this.clearBounds(),i=!0),i},removeComponents:function(n){var i=!1,t;for(OpenLayers.Util.isArray(n)||(n=[n]),t=n.length-1;0<=t;--t)i=this.removeComponent(n[t])||i;return i},removeComponent:function(n){return OpenLayers.Util.removeItem(this.components,n),this.clearBounds(),!0},getLength:function(){for(var t=0,n=0,i=this.components.length;n<i;n++)t+=this.components[n].getLength();return t},getArea:function(){for(var t=0,n=0,i=this.components.length;n<i;n++)t+=this.components[n].getArea();return t},getGeodesicArea:function(n){for(var i=0,t=0,r=this.components.length;t<r;t++)i+=this.components[t].getGeodesicArea(n);return i},getCentroid:function(n){var r,o,t;if(!n)return this.components.length&&this.components[0].getCentroid();if(n=this.components.length,!n)return!1;for(var f=[],s=[],e=0,u=Number.MAX_VALUE,i,t=0;t<n;++t)i=this.components[t],r=i.getArea(),i=i.getCentroid(!0),isNaN(r)||isNaN(i.x)||isNaN(i.y)||(f.push(r),e+=r,u=r<u&&0<r?r:u,s.push(i));if(n=f.length,0===e){for(t=0;t<n;++t)f[t]=1;e=f.length}else{for(t=0;t<n;++t)f[t]/=u;e/=u}for(o=u=0,t=0;t<n;++t)i=s[t],r=f[t],u+=i.x*r,o+=i.y*r;return new OpenLayers.Geometry.Point(u/e,o/e)},getGeodesicLength:function(n){for(var i=0,t=0,r=this.components.length;t<r;t++)i+=this.components[t].getGeodesicLength(n);return i},move:function(n,t){for(var i=0,r=this.components.length;i<r;i++)this.components[i].move(n,t)},rotate:function(n,t){for(var i=0,r=this.components.length;i<r;++i)this.components[i].rotate(n,t)},resize:function(n,t,i){for(var r=0;r<this.components.length;++r)this.components[r].resize(n,t,i);return this},distanceTo:function(n,t){for(var o=!(t&&!1===t.edge)&&t&&t.details,i,e,r,u=Number.POSITIVE_INFINITY,f=0,s=this.components.length;f<s&&!(i=this.components[f].distanceTo(n,t),r=o?i.distance:i,r<u&&(u=r,e=i,0==u));++f);return e},equals:function(n){var i=!0,t,r;if(n&&n.CLASS_NAME&&this.CLASS_NAME==n.CLASS_NAME)if(OpenLayers.Util.isArray(n.components)&&n.components.length==this.components.length){for(t=0,r=this.components.length;t<r;++t)if(!this.components[t].equals(n.components[t])){i=!1;break}}else i=!1;else i=!1;return i},transform:function(n,t){if(n&&t){for(var i=0,r=this.components.length;i<r;i++)this.components[i].transform(n,t);this.bounds=null}return this},intersects:function(n){for(var i=!1,t=0,r=this.components.length;t<r&&!(i=n.intersects(this.components[t]));++t);return i},getVertices:function(n){for(var i=[],t=0,r=this.components.length;t<r;++t)Array.prototype.push.apply(i,this.components[t].getVertices(n));return i},CLASS_NAME:"OpenLayers.Geometry.Collection"}),OpenLayers.Geometry.Point=OpenLayers.Class(OpenLayers.Geometry,{x:null,y:null,initialize:function(n,t){OpenLayers.Geometry.prototype.initialize.apply(this,arguments),this.x=parseFloat(n),this.y=parseFloat(t)},clone:function(n){return null==n&&(n=new OpenLayers.Geometry.Point(this.x,this.y)),OpenLayers.Util.applyDefaults(n,this),n},calculateBounds:function(){this.bounds=new OpenLayers.Bounds(this.x,this.y,this.x,this.y)},distanceTo:function(n,t){var o=!(t&&!1===t.edge)&&t&&t.details,i,r,u,f,e;return n instanceof OpenLayers.Geometry.Point?(r=this.x,u=this.y,f=n.x,e=n.y,i=Math.sqrt(Math.pow(r-f,2)+Math.pow(u-e,2)),i=o?{x0:r,y0:u,x1:f,y1:e,distance:i}:i):(i=n.distanceTo(this,t),o&&(i={x0:i.x1,y0:i.y1,x1:i.x0,y1:i.y0,distance:i.distance})),i},equals:function(n){var t=!1;return null!=n&&(t=this.x==n.x&&this.y==n.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(n.x)&&isNaN(n.y)),t},toShortString:function(){return this.x+", "+this.y},move:function(n,t){this.x+=n,this.y+=t,this.clearBounds()},rotate:function(n,t){n*=Math.PI/180;var i=this.distanceTo(t),r=n+Math.atan2(this.y-t.y,this.x-t.x);this.x=t.x+i*Math.cos(r),this.y=t.y+i*Math.sin(r),this.clearBounds()},getCentroid:function(){return new OpenLayers.Geometry.Point(this.x,this.y)},resize:function(n,t,i){return this.x=t.x+n*(void 0==i?1:i)*(this.x-t.x),this.y=t.y+n*(this.y-t.y),this.clearBounds(),this},intersects:function(n){return"OpenLayers.Geometry.Point"==n.CLASS_NAME?this.equals(n):n.intersects(this)},transform:function(n,t){return n&&t&&(OpenLayers.Projection.transform(this,n,t),this.bounds=null),this},getVertices:function(){return[this]},CLASS_NAME:"OpenLayers.Geometry.Point"}),OpenLayers.Geometry.MultiPoint=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Point"],addPoint:function(n,t){this.addComponent(n,t)},removePoint:function(n){this.removeComponent(n)},CLASS_NAME:"OpenLayers.Geometry.MultiPoint"}),OpenLayers.Geometry.Curve=OpenLayers.Class(OpenLayers.Geometry.MultiPoint,{componentTypes:["OpenLayers.Geometry.Point"],getLength:function(){var t=0,n,i;if(this.components&&1<this.components.length)for(n=1,i=this.components.length;n<i;n++)t+=this.components[n-1].distanceTo(this.components[n]);return t},getGeodesicLength:function(n){var t=this,i,u,r,f;if(n&&(i=new OpenLayers.Projection("EPSG:4326"),i.equals(n)||(t=this.clone().transform(n,i))),n=0,t.components&&1<t.components.length)for(r=1,f=t.components.length;r<f;r++)i=t.components[r-1],u=t.components[r],n+=OpenLayers.Util.distVincenty({lon:i.x,lat:i.y},{lon:u.x,lat:u.y});return 1e3*n},CLASS_NAME:"OpenLayers.Geometry.Curve"}),OpenLayers.Geometry.LineString=OpenLayers.Class(OpenLayers.Geometry.Curve,{removeComponent:function(){var n=this.components&&2<this.components.length;return n&&OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments),n},intersects:function(n){var f=!1,t=n.CLASS_NAME,e,l,a,o,s,i,h,c,r,v,u,y;if("OpenLayers.Geometry.LineString"==t||"OpenLayers.Geometry.LinearRing"==t||"OpenLayers.Geometry.Point"==t){e=this.getSortedSegments(),n="OpenLayers.Geometry.Point"==t?[{x1:n.x,y1:n.y,x2:n.x,y2:n.y}]:n.getSortedSegments(),r=0,v=e.length;n:for(;r<v;++r)for(t=e[r],l=t.x1,a=t.x2,o=t.y1,s=t.y2,u=0,y=n.length;u<y;++u){if(i=n[u],i.x1>a)break;if(!(i.x2<l||(h=i.y1,c=i.y2,Math.min(h,c)>Math.max(o,s)||Math.max(h,c)<Math.min(o,s)||!OpenLayers.Geometry.segmentsIntersect(t,i)))){f=!0;break n}}}else f=n.intersects(this);return f},getSortedSegments:function(){for(var r=this.components.length-1,u=Array(r),n,t,i=0;i<r;++i)n=this.components[i],t=this.components[i+1],u[i]=n.x<t.x?{x1:n.x,y1:n.y,x2:t.x,y2:t.y}:{x1:t.x,y1:t.y,x2:n.x,y2:n.y};return u.sort(function(n,t){return n.x1-t.x1})},splitWithSegment:function(n,t){for(var y=!(t&&!1===t.edge),r=t&&t.tolerance,s=[],h=this.getVertices(),u=[],e=[],c=!1,f,i,p,w={point:!0,tolerance:r},l=null,o=0,b=h.length-2;o<=b;++o)(r=h[o],u.push(r.clone()),f=h[o+1],i={x1:r.x,y1:r.y,x2:f.x,y2:f.y},i=OpenLayers.Geometry.segmentsIntersect(n,i,w),i instanceof OpenLayers.Geometry.Point&&((p=i.x===n.x1&&i.y===n.y1||i.x===n.x2&&i.y===n.y2||i.equals(r)||i.equals(f)?!0:!1)||y))&&(i.equals(e[e.length-1])||e.push(i.clone()),0===o&&i.equals(r)||i.equals(f)||(c=!0,i.equals(r)||u.push(i),s.push(new OpenLayers.Geometry.LineString(u)),u=[i.clone()]));if(c&&(u.push(f.clone()),s.push(new OpenLayers.Geometry.LineString(u))),0<e.length)var a=n.x1<n.x2?1:-1,v=n.y1<n.y2?1:-1,l={lines:s,points:e.sort(function(n,t){return a*n.x-a*t.x||v*n.y-v*t.y})};return l},split:function(n,t){var y=null,c=t&&t.mutual,p,w,u,i,l,o,s,b,a,r,f,h,k,e,v,d;if(n instanceof OpenLayers.Geometry.LineString){for(l=this.getVertices(),f=[],u=[],h=0,k=l.length-2;h<=k;++h)for(o=l[h],s=l[h+1],b={x1:o.x,y1:o.y,x2:s.x,y2:s.y},i=i||[n],c&&f.push(o.clone()),e=0;e<i.length;++e)if((a=i[e].splitWithSegment(b,t))&&(r=a.lines,0<r.length&&(r.unshift(e,1),Array.prototype.splice.apply(i,r),e+=r.length-2),c))for(v=0,d=a.points.length;v<d;++v)r=a.points[v],r.equals(o)||(f.push(r),u.push(new OpenLayers.Geometry.LineString(f)),f=r.equals(s)?[]:[r.clone()]);c&&0<u.length&&0<f.length&&(f.push(s.clone()),u.push(new OpenLayers.Geometry.LineString(f)))}else y=n.splitWith(this,t);return i&&1<i.length?w=!0:i=[],u&&1<u.length?p=!0:u=[],(w||p)&&(y=c?[u,i]:i),y},splitWith:function(n,t){return n.split(this,t)},getVertices:function(n){return!0===n?[this.components[0],this.components[this.components.length-1]]:!1===n?this.components.slice(1,this.components.length-1):this.components.slice()},distanceTo:function(n,t){var s=!(t&&!1===t.edge)&&t&&t.details,i,r={},f=Number.POSITIVE_INFINITY,a;if(n instanceof OpenLayers.Geometry.Point){for(var h=this.getSortedSegments(),c=n.x,u=n.y,e,o=0,v=h.length;o<v;++o)if(e=h[o],i=OpenLayers.Geometry.distanceToSegment(n,e),i.distance<f){if(f=i.distance,r=i,0===f)break}else if(e.x2>c&&(u>e.y1&&u<e.y2||u<e.y1&&u>e.y2))break;r=s?{distance:r.distance,x0:r.x,y0:r.y,x1:c,y1:u}:r.distance}else if(n instanceof OpenLayers.Geometry.LineString){var h=this.getSortedSegments(),c=n.getSortedSegments(),l,y,p=c.length,w={point:!0},o=0,v=h.length;n:for(;o<v;++o)for(u=h[o],e=u.x1,y=u.y1,a=0;a<p;++a)if(i=c[a],l=OpenLayers.Geometry.segmentsIntersect(u,i,w)){f=0,r={distance:0,x0:l.x,y0:l.y,x1:l.x,y1:l.y};break n}else i=OpenLayers.Geometry.distanceToSegment({x:e,y:y},i),i.distance<f&&(f=i.distance,r={distance:f,x0:e,y0:y,x1:i.x,y1:i.y});s||(r=r.distance),0!==f&&u&&(i=n.distanceTo(new OpenLayers.Geometry.Point(u.x2,u.y2),t),o=s?i.distance:i,o<f&&(r=s?{distance:f,x0:i.x1,y0:i.y1,x1:i.x0,y1:i.y0}:o))}else r=n.distanceTo(this,t),s&&(r={distance:r.distance,x0:r.x1,y0:r.y1,x1:r.x0,y1:r.y0});return r},simplify:function(n){var i;if(this&&null!==this){if(i=this.getVertices(),3>i.length)return this;var u=function(n,t,i,f){for(var l=0,h=0,c=t,e;c<i;c++){e=n[t];var o=n[i],s=n[c],s=Math.abs(.5*(e.x*o.y+o.x*s.y+s.x*e.y-o.x*e.y-s.x*o.y-e.x*s.y));e=Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2)),e=2*(s/e),e>l&&(l=e,h=c)}l>f&&h!=t&&(r.push(h),u(n,t,h,f),u(n,h,i,f))},t=i.length-1,r=[];for(r.push(0),r.push(t);i[0].equals(i[t]);)t--,r.push(t);for(u(i,0,t,n),n=[],r.sort(function(n,t){return n-t}),t=0;t<r.length;t++)n.push(i[r[t]]);return new OpenLayers.Geometry.LineString(n)}return this},CLASS_NAME:"OpenLayers.Geometry.LineString"}),OpenLayers.Geometry.LinearRing=OpenLayers.Class(OpenLayers.Geometry.LineString,{componentTypes:["OpenLayers.Geometry.Point"],addComponent:function(n,t){var i=!1,r=this.components.pop();return null==t&&n.equals(r)||(i=OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,arguments)),OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]]),i},removeComponent:function(){var n=this.components&&3<this.components.length;return n&&(this.components.pop(),OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments),OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]])),n},move:function(n,t){for(var i=0,r=this.components.length;i<r-1;i++)this.components[i].move(n,t)},rotate:function(n,t){for(var i=0,r=this.components.length;i<r-1;++i)this.components[i].rotate(n,t)},resize:function(n,t,i){for(var r=0,u=this.components.length;r<u-1;++r)this.components[r].resize(n,t,i);return this},transform:function(n,t){if(n&&t){for(var i=0,r=this.components.length;i<r-1;i++)this.components[i].transform(n,t);this.bounds=null}return this},getCentroid:function(){var n,t;if(this.components){if(n=this.components.length,0<n&&2>=n)return this.components[0].clone();if(2<n){var i=0,o=0,r=this.components[0].x,u=this.components[0].y,s=-1*this.getArea();if(0!=s){for(t=0;t<n-1;t++)var f=this.components[t],e=this.components[t+1],i=i+(f.x+e.x-2*r)*((f.x-r)*(e.y-u)-(e.x-r)*(f.y-u)),o=o+(f.y+e.y-2*u)*((f.x-r)*(e.y-u)-(e.x-r)*(f.y-u));i=r+i/(6*s),n=u+o/(6*s)}else{for(t=0;t<n-1;t++)i+=this.components[t].x,o+=this.components[t].y;i/=n-1,n=o/(n-1)}return new OpenLayers.Geometry.Point(i,n)}return null}},getArea:function(){var n=0,t,i;if(this.components&&2<this.components.length){for(t=n=0,i=this.components.length;t<i-1;t++)var r=this.components[t],u=this.components[t+1],n=n+(r.x+u.x)*(u.y-r.y);n=-n/2}return n},getGeodesicArea:function(n){var i=this,t,u,f,r;if(n&&(t=new OpenLayers.Projection("EPSG:4326"),t.equals(n)||(i=this.clone().transform(n,t))),n=0,t=i.components&&i.components.length,2<t){for(r=0;r<t-1;r++)u=i.components[r],f=i.components[r+1],n+=OpenLayers.Util.rad(f.x-u.x)*(2+Math.sin(OpenLayers.Util.rad(u.y))+Math.sin(OpenLayers.Util.rad(f.y)));n=40680631590769*n/2}return n},containsPoint:function(n){var f=OpenLayers.Number.limitSigDigs,e=f(n.x,14);n=f(n.y,14);for(var c=this.components.length-1,t,i,u,r,o,s=0,h=0;h<c;++h)if(t=this.components[h],u=f(t.x,14),t=f(t.y,14),i=this.components[h+1],r=f(i.x,14),i=f(i.y,14),t==i){if(n==t&&(u<=r&&e>=u&&e<=r||u>=r&&e<=u&&e>=r)){s=-1;break}}else{if(o=f((n-i)*((r-u)/(i-t))+r,14),o==e&&(t<i&&n>=t&&n<=i||t>i&&n<=t&&n>=i)){s=-1;break}o<=e||u!=r&&(o<Math.min(u,r)||o>Math.max(u,r))||(t<i&&n>=t&&n<i||t>i&&n<t&&n>=i)&&++s}return-1==s?1:!!(s&1)},intersects:function(n){var t=!1,i,r;if("OpenLayers.Geometry.Point"==n.CLASS_NAME)t=this.containsPoint(n);else if("OpenLayers.Geometry.LineString"==n.CLASS_NAME)t=n.intersects(this);else if("OpenLayers.Geometry.LinearRing"==n.CLASS_NAME)t=OpenLayers.Geometry.LineString.prototype.intersects.apply(this,[n]);else for(i=0,r=n.components.length;i<r&&!(t=n.components[i].intersects(this));++i);return t},getVertices:function(n){return!0===n?[]:this.components.slice(0,this.components.length-1)},CLASS_NAME:"OpenLayers.Geometry.LinearRing"}),OpenLayers.Layer.HTTPRequest=OpenLayers.Class(OpenLayers.Layer,{URL_HASH_FACTOR:(Math.sqrt(5)-1)/2,url:null,params:null,reproject:!1,initialize:function(n,t,i,r){OpenLayers.Layer.prototype.initialize.apply(this,[n,r]),this.url=t,this.params||(this.params=OpenLayers.Util.extend({},i))},destroy:function(){this.params=this.url=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(n){return null==n&&(n=new OpenLayers.Layer.HTTPRequest(this.name,this.url,this.params,this.getOptions())),OpenLayers.Layer.prototype.clone.apply(this,[n])},setUrl:function(n){this.url=n},mergeNewParams:function(n){return this.params=OpenLayers.Util.extend(this.params,n),n=this.redraw(),null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"params"}),n},redraw:function(n){return n?this.mergeNewParams({_olSalt:Math.random()}):OpenLayers.Layer.prototype.redraw.apply(this,[])},selectUrl:function(n,t){for(var i=1,r=0,u=n.length;r<u;r++)i*=n.charCodeAt(r)*this.URL_HASH_FACTOR,i-=Math.floor(i);return t[Math.floor(i*t.length)]},getFullRequestString:function(n,t){var u=t||this.url,i=OpenLayers.Util.extend({},this.params),i=OpenLayers.Util.extend(i,n),r=OpenLayers.Util.getParameterString(i),f;OpenLayers.Util.isArray(u)&&(u=this.selectUrl(r,u)),r=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(u));for(f in i)f.toUpperCase()in r&&delete i[f];return r=OpenLayers.Util.getParameterString(i),OpenLayers.Util.urlAppend(u,r)},CLASS_NAME:"OpenLayers.Layer.HTTPRequest"}),OpenLayers.Tile=OpenLayers.Class({events:null,eventListeners:null,id:null,layer:null,url:null,bounds:null,size:null,position:null,isLoading:!1,initialize:function(n,t,i,r,u,f){if(this.layer=n,this.position=t.clone(),this.setBounds(i),this.url=r,u&&(this.size=u.clone()),this.id=OpenLayers.Util.createUniqueID("Tile_"),OpenLayers.Util.extend(this,f),this.events=new OpenLayers.Events(this),this.eventListeners instanceof Object)this.events.on(this.eventListeners)},unload:function(){this.isLoading&&(this.isLoading=!1,this.events.triggerEvent("unload"))},destroy:function(){this.position=this.size=this.bounds=this.layer=null,this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.events=this.eventListeners=null},draw:function(n){n||this.clear();var t=this.shouldDraw();return t&&!n&&!1===this.events.triggerEvent("beforedraw")&&(t=null),t},shouldDraw:function(){var t=!1,i=this.layer.maxExtent,n;return i&&(n=this.layer.map,n=n.baseLayer.wrapDateLine&&n.getMaxExtent(),this.bounds.intersectsBounds(i,{inclusive:!1,worldBounds:n})&&(t=!0)),t||this.layer.displayOutsideMaxExtent},setBounds:function(n){if(n=n.clone(),this.layer.map.baseLayer.wrapDateLine){var i=this.layer.map.getMaxExtent(),t=this.layer.map.getResolution();n=n.wrapDateLine(i,{leftTolerance:t,rightTolerance:t})}this.bounds=n},moveTo:function(n,t,i){null==i&&(i=!0),this.setBounds(n),this.position=t.clone(),i&&this.draw()},clear:function(){},CLASS_NAME:"OpenLayers.Tile"}),OpenLayers.Tile.Image=OpenLayers.Class(OpenLayers.Tile,{url:null,imgDiv:null,frame:null,imageReloadAttempts:null,layerAlphaHack:null,asyncRequestId:null,maxGetUrlLength:null,canvasContext:null,crossOriginKeyword:null,initialize:function(n,t,i,r){OpenLayers.Tile.prototype.initialize.apply(this,arguments),this.url=r,this.layerAlphaHack=this.layer.alpha&&OpenLayers.Util.alphaHack(),(null!=this.maxGetUrlLength||this.layer.gutter||this.layerAlphaHack)&&(this.frame=document.createElement("div"),this.frame.style.position="absolute",this.frame.style.overflow="hidden"),null!=this.maxGetUrlLength&&OpenLayers.Util.extend(this,OpenLayers.Tile.Image.IFrame)},destroy:function(){this.imgDiv&&(this.clear(),this.frame=this.imgDiv=null),this.asyncRequestId=null,OpenLayers.Tile.prototype.destroy.apply(this,arguments)},draw:function(){var n=OpenLayers.Tile.prototype.draw.apply(this,arguments);return n?(this.layer!=this.layer.map.baseLayer&&this.layer.reproject&&(this.bounds=this.getBoundsFromBaseLayer(this.position)),this.isLoading?this._loadEvent="reload":(this.isLoading=!0,this._loadEvent="loadstart"),this.renderTile(),this.positionTile()):!1===n&&this.unload(),n},renderTile:function(){if(this.layer.async){var n=this.asyncRequestId=(this.asyncRequestId||0)+1;this.layer.getURLasync(this.bounds,function(t){n==this.asyncRequestId&&(this.url=t,this.initImage())},this)}else this.url=this.layer.getURL(this.bounds),this.initImage()},positionTile:function(){var n=this.getTile().style,i=this.frame?this.size:this.layer.getImageSize(this.bounds),t=1;this.layer instanceof OpenLayers.Layer.Grid&&(t=this.layer.getServerResolution()/this.layer.map.getResolution()),n.left=this.position.x+"px",n.top=this.position.y+"px",n.width=Math.round(t*i.w)+"px",n.height=Math.round(t*i.h)+"px"},clear:function(){var n,t;OpenLayers.Tile.prototype.clear.apply(this,arguments),n=this.imgDiv,n&&(t=this.getTile(),t.parentNode===this.layer.div&&this.layer.div.removeChild(t),this.setImgSrc(),!0===this.layerAlphaHack&&(n.style.filter=""),OpenLayers.Element.removeClass(n,"olImageLoadError")),this.canvasContext=null},getImage:function(){var n,t,i;return this.imgDiv||(this.imgDiv=OpenLayers.Tile.Image.IMAGE.cloneNode(!1),n=this.imgDiv.style,this.frame&&(t=0,i=0,this.layer.gutter&&(t=100*(this.layer.gutter/this.layer.tileSize.w),i=100*(this.layer.gutter/this.layer.tileSize.h)),n.left=-t+"%",n.top=-i+"%",n.width=2*t+100+"%",n.height=2*i+100+"%"),n.visibility="hidden",n.opacity=0,1>this.layer.opacity&&(n.filter="alpha(opacity="+100*this.layer.opacity+")"),n.position="absolute",this.layerAlphaHack&&(n.paddingTop=n.height,n.height="0",n.width="100%"),this.frame&&this.frame.appendChild(this.imgDiv)),this.imgDiv},setImage:function(n){this.imgDiv=n},initImage:function(){if(this.url||this.imgDiv){this.events.triggerEvent("beforeload"),this.layer.div.appendChild(this.getTile()),this.events.triggerEvent(this._loadEvent);var n=this.getImage(),t=n.getAttribute("src")||"";this.url&&OpenLayers.Util.isEquivalentUrl(t,this.url)?this._loadTimeout=window.setTimeout(OpenLayers.Function.bind(this.onImageLoad,this),0):(this.stopLoading(),this.crossOriginKeyword&&n.removeAttribute("crossorigin"),OpenLayers.Event.observe(n,"load",OpenLayers.Function.bind(this.onImageLoad,this)),OpenLayers.Event.observe(n,"error",OpenLayers.Function.bind(this.onImageError,this)),this.imageReloadAttempts=0,this.setImgSrc(this.url))}else this.isLoading=!1},setImgSrc:function(n){var t=this.imgDiv;n?(t.style.visibility="hidden",t.style.opacity=0,this.crossOriginKeyword&&("data:"!==n.substr(0,5)?t.setAttribute("crossorigin",this.crossOriginKeyword):t.removeAttribute("crossorigin")),t.src=n):(this.stopLoading(),this.imgDiv=null,t.parentNode&&t.parentNode.removeChild(t))},getTile:function(){return this.frame?this.frame:this.getImage()},createBackBuffer:function(){if(this.imgDiv&&!this.isLoading){var n;return this.frame?(n=this.frame.cloneNode(!1),n.appendChild(this.imgDiv)):n=this.imgDiv,this.imgDiv=null,n}},onImageLoad:function(){var n=this.imgDiv;this.stopLoading(),n.style.visibility="inherit",n.style.opacity=this.layer.opacity,this.isLoading=!1,this.canvasContext=null,this.events.triggerEvent("loadend"),!0===this.layerAlphaHack&&(n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+n.src+"', sizingMethod='scale')")},onImageError:function(){var n=this.imgDiv;null!=n.src&&(this.imageReloadAttempts++,this.imageReloadAttempts<=OpenLayers.IMAGE_RELOAD_ATTEMPTS?this.setImgSrc(this.layer.getURL(this.bounds)):(OpenLayers.Element.addClass(n,"olImageLoadError"),this.events.triggerEvent("loaderror"),this.onImageLoad()))},stopLoading:function(){OpenLayers.Event.stopObservingElement(this.imgDiv),window.clearTimeout(this._loadTimeout),delete this._loadTimeout},getCanvasContext:function(){if(OpenLayers.CANVAS_SUPPORTED&&this.imgDiv&&!this.isLoading){if(!this.canvasContext){var n=document.createElement("canvas");n.width=this.size.w,n.height=this.size.h,this.canvasContext=n.getContext("2d"),this.canvasContext.drawImage(this.imgDiv,0,0)}return this.canvasContext}},CLASS_NAME:"OpenLayers.Tile.Image"}),OpenLayers.Tile.Image.IMAGE=function(){var n=new Image;return n.className="olTileImage",n.galleryImg="no",n}(),OpenLayers.Layer.Grid=OpenLayers.Class(OpenLayers.Layer.HTTPRequest,{tileSize:null,tileOriginCorner:"bl",tileOrigin:null,tileOptions:null,tileClass:OpenLayers.Tile.Image,grid:null,singleTile:!1,ratio:1.5,buffer:0,transitionEffect:"resize",numLoadingTiles:0,serverResolutions:null,loading:!1,backBuffer:null,gridResolution:null,backBufferResolution:null,backBufferLonLat:null,backBufferTimerId:null,removeBackBufferDelay:null,className:null,gridLayout:null,rowSign:null,transitionendEvents:["transitionend","webkitTransitionEnd","otransitionend","oTransitionEnd"],initialize:function(){OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this,arguments),this.grid=[],this._removeBackBuffer=OpenLayers.Function.bind(this.removeBackBuffer,this),this.initProperties(),this.rowSign="t"===this.tileOriginCorner.substr(0,1)?1:-1},initProperties:function(){void 0===this.options.removeBackBufferDelay&&(this.removeBackBufferDelay=this.singleTile?0:2500),void 0===this.options.className&&(this.className=this.singleTile?"olLayerGridSingleTile":"olLayerGrid")},setMap:function(n){OpenLayers.Layer.HTTPRequest.prototype.setMap.call(this,n),OpenLayers.Element.addClass(this.div,this.className)},removeMap:function(){this.removeBackBuffer()},destroy:function(){this.removeBackBuffer(),this.clearGrid(),this.tileSize=this.grid=null,OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this,arguments)},clearGrid:function(){var n,i;if(this.grid){for(n=0,i=this.grid.length;n<i;n++)for(var r=this.grid[n],t=0,u=r.length;t<u;t++)this.destroyTile(r[t]);this.grid=[],this.gridLayout=this.gridResolution=null}},addOptions:function(n){var t=void 0!==n.singleTile&&n.singleTile!==this.singleTile;OpenLayers.Layer.HTTPRequest.prototype.addOptions.apply(this,arguments),this.map&&t&&(this.initProperties(),this.clearGrid(),this.tileSize=this.options.tileSize,this.setTileSize(),this.moveTo(null,!0))},clone:function(n){return null==n&&(n=new OpenLayers.Layer.Grid(this.name,this.url,this.params,this.getOptions())),n=OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this,[n]),null!=this.tileSize&&(n.tileSize=this.tileSize.clone()),n.grid=[],n.gridResolution=null,n.backBuffer=null,n.backBufferTimerId=null,n.loading=!1,n.numLoadingTiles=0,n},moveTo:function(n,t,i){if(OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this,arguments),n=n||this.map.getExtent(),null!=n){var u=!this.grid.length||t,f=this.getTilesBounds(),r=this.map.getResolution();this.getServerResolution(r),this.singleTile?!u&&(i||f.containsBounds(n))||(t&&"resize"!==this.transitionEffect&&this.removeBackBuffer(),t&&"resize"!==this.transitionEffect||this.applyBackBuffer(r),this.initSingleTile(n)):(u=u||!f.intersectsBounds(n,{worldBounds:this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent()}))?(!t||"resize"!==this.transitionEffect&&this.gridResolution!==r||this.applyBackBuffer(r),this.initGriddedTiles(n)):this.moveGriddedTiles()}},getTileData:function(n){var o=null,t=n.lon,u=n.lat,f=this.grid.length,r;if(this.map&&f){r=this.map.getResolution(),n=this.tileSize.w;var s=this.tileSize.h,e=this.grid[0][0].bounds,i=e.left,e=e.top;if(t<i&&this.map.baseLayer.wrapDateLine)var h=this.map.getMaxExtent().getWidth(),c=Math.ceil((i-t)/h),t=t+h*c;t=(t-i)/(r*n),u=(e-u)/(r*s),r=Math.floor(t),i=Math.floor(u),0<=i&&i<f&&(f=this.grid[i][r])&&(o={tile:f,i:Math.floor((t-r)*n),j:Math.floor((u-i)*s)})}return o},destroyTile:function(n){this.removeTileMonitoringHooks(n),n.destroy()},getServerResolution:function(n){var u=Number.POSITIVE_INFINITY,t,i,r,f;if(n=n||this.map.getResolution(),this.serverResolutions&&-1===OpenLayers.Util.indexOf(this.serverResolutions,n)){for(t=this.serverResolutions.length-1;0<=t;t--){if(r=this.serverResolutions[t],i=Math.abs(r-n),i>u)break;u=i,f=r}n=f}return n},getServerZoom:function(){var n=this.getServerResolution();return this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,n):this.map.getZoomForResolution(n)+(this.zoomOffset||0)},applyBackBuffer:function(n){var i,r;if(null!==this.backBufferTimerId&&this.removeBackBuffer(),i=this.backBuffer,!i){if(i=this.createBackBuffer(),!i)return;n===this.gridResolution?this.div.insertBefore(i,this.div.firstChild):this.map.baseLayer.div.parentNode.insertBefore(i,this.map.baseLayer.div),this.backBuffer=i,r=this.grid[0][0].bounds,this.backBufferLonLat={lon:r.left,lat:r.top},this.backBufferResolution=this.gridResolution}for(var r=this.backBufferResolution/n,f=i.childNodes,t,u=f.length-1;0<=u;--u)t=f[u],t.style.top=(r*t._i*t._h|0)+"px",t.style.left=(r*t._j*t._w|0)+"px",t.style.width=Math.round(r*t._w)+"px",t.style.height=Math.round(r*t._h)+"px";n=this.getViewPortPxFromLonLat(this.backBufferLonLat,n),r=this.map.layerContainerOriginPx.y,i.style.left=Math.round(n.x-this.map.layerContainerOriginPx.x)+"px",i.style.top=Math.round(n.y-r)+"px"},createBackBuffer:function(){var i,n,f,r,e,u,t;if(0<this.grid.length)for(i=document.createElement("div"),i.id=this.div.id+"_bb",i.className="olBackBuffer",i.style.position="absolute",n=this.map,i.style.zIndex="resize"===this.transitionEffect?this.getZIndex()-1:n.Z_INDEX_BASE.BaseLayer-(n.getNumLayers()-n.getLayerIndex(this)),n=0,f=this.grid.length;n<f;n++)for(r=0,e=this.grid[n].length;r<e;r++)u=this.grid[n][r],t=this.grid[n][r].createBackBuffer(),t&&(t._i=n,t._j=r,t._w=u.size.w,t._h=u.size.h,t.id=u.id+"_bb",i.appendChild(t));return i},removeBackBuffer:function(){if(this._transitionElement){for(var n=this.transitionendEvents.length-1;0<=n;--n)OpenLayers.Event.stopObserving(this._transitionElement,this.transitionendEvents[n],this._removeBackBuffer);delete this._transitionElement}this.backBuffer&&(this.backBuffer.parentNode&&this.backBuffer.parentNode.removeChild(this.backBuffer),this.backBufferResolution=this.backBuffer=null,null!==this.backBufferTimerId&&(window.clearTimeout(this.backBufferTimerId),this.backBufferTimerId=null))},moveByPx:function(){this.singleTile||this.moveGriddedTiles()},setTileSize:function(n){this.singleTile&&(n=this.map.getSize(),n.h=parseInt(n.h*this.ratio,10),n.w=parseInt(n.w*this.ratio,10)),OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this,[n])},getTilesBounds:function(){var n=null,t=this.grid.length;if(t)var n=this.grid[t-1][0].bounds,t=this.grid[0].length*n.getWidth(),i=this.grid.length*n.getHeight(),n=new OpenLayers.Bounds(n.left,n.bottom,n.left+t,n.bottom+i);return n},initSingleTile:function(n){this.events.triggerEvent("retile");var t=n.getCenterLonLat(),i=n.getWidth()*this.ratio;n=n.getHeight()*this.ratio,t=new OpenLayers.Bounds(t.lon-i/2,t.lat-n/2,t.lon+i/2,t.lat+n/2),i=this.map.getLayerPxFromLonLat({lon:t.left,lat:t.top}),this.grid.length||(this.grid[0]=[]),(n=this.grid[0][0])?n.moveTo(t,i):(n=this.addTile(t,i),this.addTileMonitoringHooks(n),n.draw(),this.grid[0][0]=n),this.removeExcessTiles(1,1),this.gridResolution=this.getServerResolution()},calculateGridLayout:function(n,t,i){var u=i*this.tileSize.w,f,r;return i*=this.tileSize.h,f=Math.floor((n.left-t.lon)/u)-this.buffer,r=this.rowSign,n=Math[~r?"floor":"ceil"](r*(t.lat-n.top+i)/i)-this.buffer*r,{tilelon:u,tilelat:i,startcol:f,startrow:n}},getTileOrigin:function(){var n=this.tileOrigin;if(!n)var n=this.getMaxExtent(),t={tl:["left","top"],tr:["right","top"],bl:["left","bottom"],br:["right","bottom"]}[this.tileOriginCorner],n=new OpenLayers.LonLat(n[t[0]],n[t[1]]);return n},getTileBoundsForGridIndex:function(n,t){var r=this.getTileOrigin(),i=this.gridLayout,f=i.tilelon,e=i.tilelat,o=i.startcol,i=i.startrow,u=this.rowSign;return new OpenLayers.Bounds(r.lon+(o+t)*f,r.lat-(i+n*u)*e*u,r.lon+(o+t+1)*f,r.lat-(i+(n-1)*u)*e*u)},initGriddedTiles:function(n){var s,f,i,r,e;this.events.triggerEvent("retile");var l=this.map.getSize(),v=this.getTileOrigin(),u=this.map.getResolution(),t=this.getServerResolution(),h=u/t,u=this.tileSize.w/h,h=this.tileSize.h/h,y=Math.ceil(l.h/h)+2*this.buffer+1,l=Math.ceil(l.w/u)+2*this.buffer+1;this.gridLayout=t=this.calculateGridLayout(n,v,t);var v=t.tilelon,p=t.tilelat,t=this.map.layerContainerOriginPx.x,a=this.map.layerContainerOriginPx.y,i=this.getTileBoundsForGridIndex(0,0),c=this.map.getViewPortPxFromLonLat(new OpenLayers.LonLat(i.left,i.top));c.x=Math.round(c.x)-t,c.y=Math.round(c.y)-a;var t=[],a=this.map.getCenter(),o=0;do{s=this.grid[o],s||(s=[],this.grid.push(s)),f=0;do i=this.getTileBoundsForGridIndex(o,f),r=c.clone(),r.x+=f*Math.round(u),r.y+=o*Math.round(h),e=s[f],e?e.moveTo(i,r,!1):(e=this.addTile(i,r),this.addTileMonitoringHooks(e),s.push(e)),r=i.getCenterLonLat(),t.push({tile:e,distance:Math.pow(r.lon-a.lon,2)+Math.pow(r.lat-a.lat,2)}),f+=1;while(i.right<=n.right+v*this.buffer||f<l);o+=1}while(i.bottom>=n.bottom-p*this.buffer||o<y);for(this.removeExcessTiles(o,f),this.gridResolution=u=this.getServerResolution(),t.sort(function(n,t){return n.distance-t.distance}),n=0,u=t.length;n<u;++n)t[n].tile.draw()},getMaxExtent:function(){return this.maxExtent},addTile:function(n,t){var i=new this.tileClass(this,t,n,null,this.tileSize,this.tileOptions);return this.events.triggerEvent("addtile",{tile:i}),i},addTileMonitoringHooks:function(n){n.onLoadStart=function(){!1===this.loading&&(this.loading=!0,this.events.triggerEvent("loadstart")),this.events.triggerEvent("tileloadstart",{tile:n}),this.numLoadingTiles++,!this.singleTile&&this.backBuffer&&this.gridResolution===this.backBufferResolution&&OpenLayers.Element.addClass(n.getTile(),"olTileReplacing")},n.onLoadEnd=function(t){var i,r;if(this.numLoadingTiles--,t="unload"===t.type,this.events.triggerEvent("tileloaded",{tile:n,aborted:t}),this.singleTile||t||!this.backBuffer||this.gridResolution!==this.backBufferResolution||(i=n.getTile(),"none"===OpenLayers.Element.getStyle(i,"display")&&(r=document.getElementById(n.id+"_bb"),r&&r.parentNode.removeChild(r)),OpenLayers.Element.removeClass(i,"olTileReplacing")),0===this.numLoadingTiles){if(this.backBuffer)if(0===this.backBuffer.childNodes.length)this.removeBackBuffer();else{for(this._transitionElement=t?this.div.lastChild:n.imgDiv,t=this.transitionendEvents,i=t.length-1;0<=i;--i)OpenLayers.Event.observe(this._transitionElement,t[i],this._removeBackBuffer);this.backBufferTimerId=window.setTimeout(this._removeBackBuffer,this.removeBackBufferDelay)}this.loading=!1,this.events.triggerEvent("loadend")}},n.onLoadError=function(){this.events.triggerEvent("tileerror",{tile:n})};n.events.on({loadstart:n.onLoadStart,loadend:n.onLoadEnd,unload:n.onLoadEnd,loaderror:n.onLoadError,scope:this})},removeTileMonitoringHooks:function(n){n.unload(),n.events.un({loadstart:n.onLoadStart,loadend:n.onLoadEnd,unload:n.onLoadEnd,loaderror:n.onLoadError,scope:this})},moveGriddedTiles:function(){for(var t=this.buffer+1;;){var i=this.grid[0][0],r=i.position.x+this.map.layerContainerOriginPx.x,i=i.position.y+this.map.layerContainerOriginPx.y,n=this.getServerResolution()/this.map.getResolution(),n={w:Math.round(this.tileSize.w*n),h:Math.round(this.tileSize.h*n)};if(r>-n.w*(t-1))this.shiftColumn(!0,n);else if(r<-n.w*t)this.shiftColumn(!1,n);else if(i>-n.h*(t-1))this.shiftRow(!0,n);else if(i<-n.h*t)this.shiftRow(!1,n);else break}},shiftRow:function(n,t){var r=this.grid,e=n?0:r.length-1,o=n?-1:1,s,f;this.gridLayout.startrow+=o*this.rowSign;for(var h=r[e],u=r[n?"pop":"shift"](),i=0,c=u.length;i<c;i++)s=u[i],f=h[i].position.clone(),f.y+=t.h*o,s.moveTo(this.getTileBoundsForGridIndex(e,i),f);r[n?"unshift":"push"](u)},shiftColumn:function(n,t){var r=this.grid,f=n?0:r[0].length-1,e=n?-1:1,i,o;for(this.gridLayout.startcol+=e,i=0,o=r.length;i<o;i++){var u=r[i],s=u[f].position.clone(),h=u[n?"pop":"shift"]();s.x+=t.w*e,h.moveTo(this.getTileBoundsForGridIndex(i,f),s),u[n?"unshift":"push"](h)}},removeExcessTiles:function(n,t){for(var i,u,r,f;this.grid.length>n;)for(r=this.grid.pop(),i=0,u=r.length;i<u;i++)f=r[i],this.destroyTile(f);for(i=0,u=this.grid.length;i<u;i++)for(;this.grid[i].length>t;)r=this.grid[i],f=r.pop(),this.destroyTile(f)},onMapResize:function(){this.singleTile&&(this.clearGrid(),this.setTileSize())},getTileBounds:function(n){var t=this.maxExtent,i=this.getResolution(),r=i*this.tileSize.w,i=i*this.tileSize.h,u=this.getLonLatFromViewPortPx(n);return n=t.left+r*Math.floor((u.lon-t.left)/r),t=t.bottom+i*Math.floor((u.lat-t.bottom)/i),new OpenLayers.Bounds(n,t,n+r,t+i)},CLASS_NAME:"OpenLayers.Layer.Grid"}),OpenLayers.Layer.XYZ=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,sphericalMercator:!1,zoomOffset:0,serverResolutions:null,initialize:function(n,t,i){(i&&i.sphericalMercator||this.sphericalMercator)&&(i=OpenLayers.Util.extend({projection:"EPSG:900913",numZoomLevels:19},i)),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[n||this.name,t||this.url,{},i])},clone:function(n){return null==n&&(n=new OpenLayers.Layer.XYZ(this.name,this.url,this.getOptions())),OpenLayers.Layer.Grid.prototype.clone.apply(this,[n])},getURL:function(n){n=this.getXYZ(n);var t=this.url;return OpenLayers.Util.isArray(t)&&(t=this.selectUrl(""+n.x+n.y+n.z,t)),OpenLayers.String.format(t,n)},getXYZ:function(n){var t=this.getServerResolution(),i=Math.round((n.left-this.maxExtent.left)/(t*this.tileSize.w)),r;return n=Math.round((this.maxExtent.top-n.top)/(t*this.tileSize.h)),t=this.getServerZoom(),this.wrapDateLine&&(r=Math.pow(2,t),i=(i%r+r)%r),{x:i,y:n,z:t}},setMap:function(){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.maxExtent.left,this.maxExtent.bottom))},CLASS_NAME:"OpenLayers.Layer.XYZ"}),OpenLayers.Layer.OSM=OpenLayers.Class(OpenLayers.Layer.XYZ,{name:"OpenStreetMap",url:["http://a.tile.openstreetmap.org/${z}/${x}/${y}.png","http://b.tile.openstreetmap.org/${z}/${x}/${y}.png","http://c.tile.openstreetmap.org/${z}/${x}/${y}.png"],attribution:"&copy; <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap<\/a> contributors",sphericalMercator:!0,wrapDateLine:!0,tileOptions:null,initialize:function(){OpenLayers.Layer.XYZ.prototype.initialize.apply(this,arguments),this.tileOptions=OpenLayers.Util.extend({crossOriginKeyword:"anonymous"},this.options&&this.options.tileOptions)},clone:function(n){return null==n&&(n=new OpenLayers.Layer.OSM(this.name,this.url,this.getOptions())),OpenLayers.Layer.XYZ.prototype.clone.apply(this,[n])},CLASS_NAME:"OpenLayers.Layer.OSM"}),OpenLayers.Renderer=OpenLayers.Class({container:null,root:null,extent:null,locked:!1,size:null,resolution:null,map:null,featureDx:0,initialize:function(n,t){this.container=OpenLayers.Util.getElement(n),OpenLayers.Util.extend(this,t)},destroy:function(){this.map=this.resolution=this.size=this.extent=this.container=null},supported:function(){return!1},setExtent:function(n,t){if(this.extent=n.clone(),this.map.baseLayer&&this.map.baseLayer.wrapDateLine){var i=n.getWidth()/this.map.getExtent().getWidth();n=n.scale(1/i),this.extent=n.wrapDateLine(this.map.getMaxExtent()).scale(i)}return t&&(this.resolution=null),!0},setSize:function(n){this.size=n.clone(),this.resolution=null},getResolution:function(){return this.resolution=this.resolution||this.map.getResolution()},drawFeature:function(n,t){var i,r;if(null==t&&(t=n.style),n.geometry&&(i=n.geometry.getBounds(),i)){if(this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(r=this.map.getMaxExtent()),i.intersectsBounds(this.extent,{worldBounds:r})?this.calculateFeatureDx(i,r):t={display:"none"},i=this.drawGeometry(n.geometry,t,n.id),"none"!=t.display&&t.label&&!1!==i){if(r=n.geometry.getCentroid(),t.labelXOffset||t.labelYOffset){var f=isNaN(t.labelXOffset)?0:t.labelXOffset,e=isNaN(t.labelYOffset)?0:t.labelYOffset,u=this.getResolution();r.move(f*u,e*u)}this.drawText(n.id,t,r)}else this.removeText(n.id);return i}},calculateFeatureDx:function(n,t){if(this.featureDx=0,t){var i=t.getWidth();this.featureDx=Math.round(((n.left+n.right)/2-(this.extent.left+this.extent.right)/2)/i)*i}},drawGeometry:function(){},drawText:function(){},removeText:function(){},clear:function(){},getFeatureIdFromEvent:function(){},eraseFeatures:function(n){var t,r,i;for(OpenLayers.Util.isArray(n)||(n=[n]),t=0,r=n.length;t<r;++t)i=n[t],this.eraseGeometry(i.geometry,i.id),this.removeText(i.id)},eraseGeometry:function(){},moveRoot:function(){},getRenderLayerId:function(){return this.container.id},applyDefaultSymbolizer:function(n){var t=OpenLayers.Util.extend({},OpenLayers.Renderer.defaultSymbolizer);return!1===n.stroke&&(delete t.strokeWidth,delete t.strokeColor),!1===n.fill&&delete t.fillColor,OpenLayers.Util.extend(t,n),t},CLASS_NAME:"OpenLayers.Renderer"}),OpenLayers.Renderer.defaultSymbolizer={fillColor:"#000000",strokeColor:"#000000",strokeWidth:2,fillOpacity:1,strokeOpacity:1,pointRadius:0,labelAlign:"cm"},OpenLayers.Renderer.symbol={star:[350,75,379,161,469,161,397,215,423,301,350,250,277,301,303,215,231,161,321,161,350,75],cross:[4,0,6,0,6,4,10,4,10,6,6,6,6,10,4,10,4,6,0,6,0,4,4,4,4,0],x:[0,0,25,0,50,35,75,0,100,0,65,50,100,100,75,100,50,65,25,100,0,100,35,50,0,0],square:[0,0,0,1,1,1,1,0,0,0],triangle:[0,10,10,10,5,0,0,10]},OpenLayers.Renderer.Canvas=OpenLayers.Class(OpenLayers.Renderer,{hitDetection:!0,hitOverflow:0,canvas:null,features:null,pendingRedraw:!1,cachedSymbolBounds:{},initialize:function(){OpenLayers.Renderer.prototype.initialize.apply(this,arguments),this.root=document.createElement("canvas"),this.container.appendChild(this.root),this.canvas=this.root.getContext("2d"),this.features={},this.hitDetection&&(this.hitCanvas=document.createElement("canvas"),this.hitContext=this.hitCanvas.getContext("2d"))},setExtent:function(){return OpenLayers.Renderer.prototype.setExtent.apply(this,arguments),!1},eraseGeometry:function(n,t){this.eraseFeatures(this.features[t][0])},supported:function(){return OpenLayers.CANVAS_SUPPORTED},setSize:function(n){this.size=n.clone();var t=this.root;t.style.width=n.w+"px",t.style.height=n.h+"px",t.width=n.w,t.height=n.h,this.resolution=null,this.hitDetection&&(t=this.hitCanvas,t.style.width=n.w+"px",t.style.height=n.h+"px",t.width=n.w,t.height=n.h)},drawFeature:function(n,t){var i,r;return n.geometry&&(t=this.applyDefaultSymbolizer(t||n.style),i=n.geometry.getBounds(),this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(r=this.map.getMaxExtent()),r=i&&i.intersectsBounds(this.extent,{worldBounds:r}),(i="none"!==t.display&&!!i&&r)?this.features[n.id]=[n,t]:delete this.features[n.id],this.pendingRedraw=!0),this.pendingRedraw&&!this.locked&&(this.redraw(),this.pendingRedraw=!1),i},drawGeometry:function(n,t,i){var r=n.CLASS_NAME;if("OpenLayers.Geometry.Collection"==r||"OpenLayers.Geometry.MultiPoint"==r||"OpenLayers.Geometry.MultiLineString"==r||"OpenLayers.Geometry.MultiPolygon"==r)for(r=0;r<n.components.length;r++)this.drawGeometry(n.components[r],t,i);else switch(n.CLASS_NAME){case"OpenLayers.Geometry.Point":this.drawPoint(n,t,i);break;case"OpenLayers.Geometry.LineString":this.drawLineString(n,t,i);break;case"OpenLayers.Geometry.LinearRing":this.drawLinearRing(n,t,i);break;case"OpenLayers.Geometry.Polygon":this.drawPolygon(n,t,i)}},drawExternalGraphic:function(n,t,i){var f=new Image,e=t.title||t.graphicTitle;e&&(f.title=e);var r=t.graphicWidth||t.graphicHeight,u=t.graphicHeight||t.graphicWidth,r=r?r:2*t.pointRadius,u=u?u:2*t.pointRadius,o=void 0!=t.graphicXOffset?t.graphicXOffset:-(.5*r),s=void 0!=t.graphicYOffset?t.graphicYOffset:-(.5*u),h=t.graphicOpacity||t.fillOpacity;f.onload=OpenLayers.Function.bind(function(){var c;if(this.features[i]){var t=this.getLocalXY(n),e=t[0],t=t[1];if(!isNaN(e)&&!isNaN(t)){var e=e+o|0,t=t+s|0,l=this.canvas;l.globalAlpha=h,c=OpenLayers.Renderer.Canvas.drawImageScaleFactor||(OpenLayers.Renderer.Canvas.drawImageScaleFactor=/android 2.1/.test(navigator.userAgent.toLowerCase())?320/window.screen.width:1),l.drawImage(f,e*c,t*c,r*c,u*c),this.hitDetection&&(this.setHitContextStyle("fill",i),this.hitContext.fillRect(e,t,r,u))}}},this),f.src=t.externalGraphic},drawNamedSymbol:function(n,t,i){var r,f,e,o,u;if(e=Math.PI/180,u=OpenLayers.Renderer.symbol[t.graphicName],!u)throw Error(t.graphicName+" is not a valid symbol name");if(!(!u.length||2>u.length||(n=this.getLocalXY(n),f=n[0],o=n[1],isNaN(f)||isNaN(o)))){if(this.canvas.lineCap="round",this.canvas.lineJoin="round",this.hitDetection&&(this.hitContext.lineCap="round",this.hitContext.lineJoin="round"),t.graphicName in this.cachedSymbolBounds)r=this.cachedSymbolBounds[t.graphicName];else{for(r=new OpenLayers.Bounds,n=0;n<u.length;n+=2)r.extend(new OpenLayers.LonLat(u[n],u[n+1]));this.cachedSymbolBounds[t.graphicName]=r}if(this.canvas.save(),this.hitDetection&&this.hitContext.save(),this.canvas.translate(f,o),this.hitDetection&&this.hitContext.translate(f,o),n=e*t.rotation,isNaN(n)||(this.canvas.rotate(n),this.hitDetection&&this.hitContext.rotate(n)),e=2*t.pointRadius/Math.max(r.getWidth(),r.getHeight()),this.canvas.scale(e,e),this.hitDetection&&this.hitContext.scale(e,e),n=r.getCenterLonLat().lon,r=r.getCenterLonLat().lat,this.canvas.translate(-n,-r),this.hitDetection&&this.hitContext.translate(-n,-r),o=t.strokeWidth,t.strokeWidth=o/e,!1!==t.fill){for(this.setCanvasStyle("fill",t),this.canvas.beginPath(),n=0;n<u.length;n+=2)r=u[n],f=u[n+1],0==n&&this.canvas.moveTo(r,f),this.canvas.lineTo(r,f);if(this.canvas.closePath(),this.canvas.fill(),this.hitDetection){for(this.setHitContextStyle("fill",i,t),this.hitContext.beginPath(),n=0;n<u.length;n+=2)r=u[n],f=u[n+1],0==n&&this.canvas.moveTo(r,f),this.hitContext.lineTo(r,f);this.hitContext.closePath(),this.hitContext.fill()}}if(!1!==t.stroke){for(this.setCanvasStyle("stroke",t),this.canvas.beginPath(),n=0;n<u.length;n+=2)r=u[n],f=u[n+1],0==n&&this.canvas.moveTo(r,f),this.canvas.lineTo(r,f);if(this.canvas.closePath(),this.canvas.stroke(),this.hitDetection){for(this.setHitContextStyle("stroke",i,t,e),this.hitContext.beginPath(),n=0;n<u.length;n+=2)r=u[n],f=u[n+1],0==n&&this.hitContext.moveTo(r,f),this.hitContext.lineTo(r,f);this.hitContext.closePath(),this.hitContext.stroke()}}t.strokeWidth=o,this.canvas.restore(),this.hitDetection&&this.hitContext.restore(),this.setCanvasStyle("reset")}},setCanvasStyle:function(n,t){"fill"===n?(this.canvas.globalAlpha=t.fillOpacity,this.canvas.fillStyle=t.fillColor):"stroke"===n?(this.canvas.globalAlpha=t.strokeOpacity,this.canvas.strokeStyle=t.strokeColor,this.canvas.lineWidth=t.strokeWidth):(this.canvas.globalAlpha=0,this.canvas.lineWidth=1)},featureIdToHex:function(n){n=Number(n.split("_").pop())+1,16777216<=n&&(this.hitOverflow=n-16777215,n=n%16777216+1),n="000000"+n.toString(16);var t=n.length;return"#"+n.substring(t-6,t)},setHitContextStyle:function(n,t,i,r){t=this.featureIdToHex(t),"fill"==n?(this.hitContext.globalAlpha=1,this.hitContext.fillStyle=t):"stroke"==n?(this.hitContext.globalAlpha=1,this.hitContext.strokeStyle=t,"undefined"==typeof r?this.hitContext.lineWidth=i.strokeWidth+2:isNaN(r)||(this.hitContext.lineWidth=i.strokeWidth+2/r)):(this.hitContext.globalAlpha=0,this.hitContext.lineWidth=1)},drawPoint:function(n,t,i){var r,u,f;!1!==t.graphic&&(t.externalGraphic?this.drawExternalGraphic(n,t,i):t.graphicName&&"circle"!=t.graphicName?this.drawNamedSymbol(n,t,i):(r=this.getLocalXY(n),n=r[0],r=r[1],isNaN(n)||isNaN(r)||(u=2*Math.PI,f=t.pointRadius,!1!==t.fill&&(this.setCanvasStyle("fill",t),this.canvas.beginPath(),this.canvas.arc(n,r,f,0,u,!0),this.canvas.fill(),this.hitDetection&&(this.setHitContextStyle("fill",i,t),this.hitContext.beginPath(),this.hitContext.arc(n,r,f,0,u,!0),this.hitContext.fill())),!1!==t.stroke&&(this.setCanvasStyle("stroke",t),this.canvas.beginPath(),this.canvas.arc(n,r,f,0,u,!0),this.canvas.stroke(),this.hitDetection&&(this.setHitContextStyle("stroke",i,t),this.hitContext.beginPath(),this.hitContext.arc(n,r,f,0,u,!0),this.hitContext.stroke()),this.setCanvasStyle("reset")))))},drawLineString:function(n,t,i){t=OpenLayers.Util.applyDefaults({fill:!1},t),this.drawLinearRing(n,t,i)},drawLinearRing:function(n,t,i){!1!==t.fill&&(this.setCanvasStyle("fill",t),this.renderPath(this.canvas,n,t,i,"fill"),this.hitDetection&&(this.setHitContextStyle("fill",i,t),this.renderPath(this.hitContext,n,t,i,"fill"))),!1!==t.stroke&&(this.setCanvasStyle("stroke",t),this.renderPath(this.canvas,n,t,i,"stroke"),this.hitDetection&&(this.setHitContextStyle("stroke",i,t),this.renderPath(this.hitContext,n,t,i,"stroke"))),this.setCanvasStyle("reset")},renderPath:function(n,t,i,r,u){t=t.components,i=t.length,n.beginPath(),r=this.getLocalXY(t[0]);var f=r[1];if(!isNaN(r[0])&&!isNaN(f)){for(n.moveTo(r[0],r[1]),r=1;r<i;++r)f=this.getLocalXY(t[r]),n.lineTo(f[0],f[1]);"fill"===u?n.fill():n.stroke()}},drawPolygon:function(n,t,i){var u,r;for(n=n.components,u=n.length,this.drawLinearRing(n[0],t,i),r=1;r<u;++r)this.canvas.globalCompositeOperation="destination-out",this.hitDetection&&(this.hitContext.globalCompositeOperation="destination-out"),this.drawLinearRing(n[r],OpenLayers.Util.applyDefaults({stroke:!1,fillOpacity:1},t),i),this.canvas.globalCompositeOperation="source-over",this.hitDetection&&(this.hitContext.globalCompositeOperation="source-over"),this.drawLinearRing(n[r],OpenLayers.Util.applyDefaults({fill:!1},t),i)},drawText:function(n,t){var u=this.getLocalXY(n),i,o,s,h;this.setCanvasStyle("reset"),this.canvas.fillStyle=t.fontColor,this.canvas.globalAlpha=t.fontOpacity||1;var r=[t.fontStyle?t.fontStyle:"normal","normal",t.fontWeight?t.fontWeight:"normal",t.fontSize?t.fontSize:"1em",t.fontFamily?t.fontFamily:"sans-serif"].join(" "),f=t.label.split("\n"),e=f.length;if(this.canvas.fillText)for(this.canvas.font=r,this.canvas.textAlign=OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[0]]||"center",this.canvas.textBaseline=OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[1]]||"middle",i=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]],null==i&&(i=-.5),r=this.canvas.measureText("Mg").height||this.canvas.measureText("xx").width,u[1]+=r*i*(e-1),i=0;i<e;i++)t.labelOutlineWidth&&(this.canvas.save(),this.canvas.globalAlpha=t.labelOutlineOpacity||t.fontOpacity||1,this.canvas.strokeStyle=t.labelOutlineColor,this.canvas.lineWidth=t.labelOutlineWidth,this.canvas.strokeText(f[i],u[0],u[1]+r*i+1),this.canvas.restore()),this.canvas.fillText(f[i],u[0],u[1]+r*i);else if(this.canvas.mozDrawText)for(this.canvas.mozTextStyle=r,o=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[0]],null==o&&(o=-.5),i=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]],null==i&&(i=-.5),r=this.canvas.mozMeasureText("xx"),u[1]+=r*(1+i*e),i=0;i<e;i++)s=u[0]+o*this.canvas.mozMeasureText(f[i]),h=u[1]+i*r,this.canvas.translate(s,h),this.canvas.mozDrawText(f[i]),this.canvas.translate(-s,-h);this.setCanvasStyle("reset")},getLocalXY:function(n){var t=this.getResolution(),i=this.extent;return[(n.x-this.featureDx)/t+-i.left/t,i.top/t-n.y/t]},clear:function(){var n=this.root.height,t=this.root.width;this.canvas.clearRect(0,0,t,n),this.features={},this.hitDetection&&this.hitContext.clearRect(0,0,t,n)},getFeatureIdFromEvent:function(n){var t;if(this.hitDetection&&"none"!==this.root.style.display&&!this.map.dragging&&(n=n.xy,n=this.hitContext.getImageData(n.x|0,n.y|0,1,1).data,255===n[3]&&(n=n[2]+256*(n[1]+256*n[0])))){n="OpenLayers_Feature_Vector_"+(n-1+this.hitOverflow);try{t=this.features[n][0]}catch(i){}}return t},eraseFeatures:function(n){OpenLayers.Util.isArray(n)||(n=[n]);for(var t=0;t<n.length;++t)delete this.features[n[t].id];this.redraw()},redraw:function(){var n,t,r,u,f,i;if(!this.locked){t=this.root.height,n=this.root.width,this.canvas.clearRect(0,0,n,t),this.hitDetection&&this.hitContext.clearRect(0,0,n,t),t=[],f=this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent();for(i in this.features)this.features.hasOwnProperty(i)&&(n=this.features[i][0],r=n.geometry,this.calculateFeatureDx(r.getBounds(),f),u=this.features[i][1],this.drawGeometry(r,u,n.id),u.label&&t.push([n,u]));for(n=0,r=t.length;n<r;++n)i=t[n],this.drawText(i[0].geometry.getCentroid(),i[1])}},CLASS_NAME:"OpenLayers.Renderer.Canvas"}),OpenLayers.Renderer.Canvas.LABEL_ALIGN={l:"left",r:"right",t:"top",b:"bottom"},OpenLayers.Renderer.Canvas.LABEL_FACTOR={l:0,r:-1,t:0,b:-1},OpenLayers.Renderer.Canvas.drawImageScaleFactor=null,OpenLayers.Control=OpenLayers.Class({id:null,map:null,div:null,type:null,allowSelection:!1,displayClass:"",title:"",autoActivate:!1,active:null,handlerOptions:null,handler:null,eventListeners:null,events:null,initialize:function(n){if(this.displayClass=this.CLASS_NAME.replace("OpenLayers.","ol").replace(/\./g,""),OpenLayers.Util.extend(this,n),this.events=new OpenLayers.Events(this),this.eventListeners instanceof Object)this.events.on(this.eventListeners);null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"))},destroy:function(){if(this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.events=null),this.eventListeners=null,this.handler&&(this.handler.destroy(),this.handler=null),this.handlers){for(var n in this.handlers)this.handlers.hasOwnProperty(n)&&"function"==typeof this.handlers[n].destroy&&this.handlers[n].destroy();this.handlers=null}this.map&&(this.map.removeControl(this),this.map=null),this.div=null},setMap:function(n){this.map=n,this.handler&&this.handler.setMap(n)},draw:function(n){return null==this.div&&(this.div=OpenLayers.Util.createDiv(this.id),this.div.className=this.displayClass,this.allowSelection||(this.div.className+=" olControlNoSelect",this.div.setAttribute("unselectable","on",0),this.div.onselectstart=OpenLayers.Function.False),""!=this.title&&(this.div.title=this.title)),null!=n&&(this.position=n.clone()),this.moveTo(this.position),this.div},moveTo:function(n){null!=n&&null!=this.div&&(this.div.style.left=n.x+"px",this.div.style.top=n.y+"px")},activate:function(){return this.active?!1:(this.handler&&this.handler.activate(),this.active=!0,this.map&&OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active"),this.events.triggerEvent("activate"),!0)},deactivate:function(){return this.active?(this.handler&&this.handler.deactivate(),this.active=!1,this.map&&OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active"),this.events.triggerEvent("deactivate"),!0):!1},CLASS_NAME:"OpenLayers.Control"}),OpenLayers.Control.TYPE_BUTTON=1,OpenLayers.Control.TYPE_TOGGLE=2,OpenLayers.Control.TYPE_TOOL=3,OpenLayers.Handler=OpenLayers.Class({id:null,control:null,map:null,keyMask:null,active:!1,evt:null,touch:!1,initialize:function(n,t,i){OpenLayers.Util.extend(this,i),this.control=n,this.callbacks=t,(n=this.map||n.map)&&this.setMap(n),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},setMap:function(n){this.map=n},checkModifiers:function(n){return null==this.keyMask?!0:((n.shiftKey?OpenLayers.Handler.MOD_SHIFT:0)|(n.ctrlKey?OpenLayers.Handler.MOD_CTRL:0)|(n.altKey?OpenLayers.Handler.MOD_ALT:0)|(n.metaKey?OpenLayers.Handler.MOD_META:0))==this.keyMask},activate:function(){if(this.active)return!1;for(var t=OpenLayers.Events.prototype.BROWSER_EVENTS,n=0,i=t.length;n<i;n++)this[t[n]]&&this.register(t[n],this[t[n]]);return this.active=!0},deactivate:function(){if(!this.active)return!1;for(var t=OpenLayers.Events.prototype.BROWSER_EVENTS,n=0,i=t.length;n<i;n++)this[t[n]]&&this.unregister(t[n],this[t[n]]);return this.active=this.touch=!1,!0},startTouch:function(){if(!this.touch){this.touch=!0;for(var t="mousedown mouseup mousemove click dblclick mouseout".split(" "),n=0,i=t.length;n<i;n++)this[t[n]]&&this.unregister(t[n],this[t[n]])}},callback:function(n,t){n&&this.callbacks[n]&&this.callbacks[n].apply(this.control,t)},register:function(n,t){this.map.events.registerPriority(n,this,t),this.map.events.registerPriority(n,this,this.setEvent)},unregister:function(n,t){this.map.events.unregister(n,this,t),this.map.events.unregister(n,this,this.setEvent)},setEvent:function(n){return this.evt=n,!0},destroy:function(){this.deactivate(),this.control=this.map=null},CLASS_NAME:"OpenLayers.Handler"}),OpenLayers.Handler.MOD_NONE=0,OpenLayers.Handler.MOD_SHIFT=1,OpenLayers.Handler.MOD_CTRL=2,OpenLayers.Handler.MOD_ALT=4,OpenLayers.Handler.MOD_META=8,OpenLayers.Handler.Drag=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!0,dragging:!1,last:null,start:null,lastMoveEvt:null,oldOnselectstart:null,interval:0,timeoutId:null,documentDrag:!1,documentEvents:null,initialize:function(){if(OpenLayers.Handler.prototype.initialize.apply(this,arguments),!0===this.documentDrag){var n=this;this._docMove=function(t){n.mousemove({xy:{x:t.clientX,y:t.clientY},element:document})},this._docUp=function(t){n.mouseup({xy:{x:t.clientX,y:t.clientY}})}}},dragstart:function(n){var t=!0;return this.dragging=!1,this.checkModifiers(n)&&(OpenLayers.Event.isLeftClick(n)||OpenLayers.Event.isSingleTouch(n))?(this.started=!0,this.last=this.start=n.xy,OpenLayers.Element.addClass(this.map.viewPortDiv,"olDragDown"),this.down(n),this.callback("down",[n.xy]),OpenLayers.Event.preventDefault(n),this.oldOnselectstart||(this.oldOnselectstart=document.onselectstart?document.onselectstart:OpenLayers.Function.True),document.onselectstart=OpenLayers.Function.False,t=!this.stopDown):(this.started=!1,this.last=this.start=null),t},dragmove:function(n){return this.lastMoveEvt=n,!this.started||this.timeoutId||n.xy.x==this.last.x&&n.xy.y==this.last.y||(!0===this.documentDrag&&this.documentEvents&&(n.element===document?(this.adjustXY(n),this.setEvent(n)):this.removeDocumentEvents()),0<this.interval&&(this.timeoutId=setTimeout(OpenLayers.Function.bind(this.removeTimeout,this),this.interval)),this.dragging=!0,this.move(n),this.callback("move",[n.xy]),this.oldOnselectstart||(this.oldOnselectstart=document.onselectstart,document.onselectstart=OpenLayers.Function.False),this.last=n.xy),!0},dragend:function(n){if(this.started){!0===this.documentDrag&&this.documentEvents&&(this.adjustXY(n),this.removeDocumentEvents());var t=this.start!=this.last;this.dragging=this.started=!1,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown"),this.up(n),this.callback("up",[n.xy]),t&&this.callback("done",[n.xy]),document.onselectstart=this.oldOnselectstart}return!0},down:function(){},move:function(){},up:function(){},out:function(){},mousedown:function(n){return this.dragstart(n)},touchstart:function(n){return this.startTouch(),this.dragstart(n)},mousemove:function(n){return this.dragmove(n)},touchmove:function(n){return this.dragmove(n)},removeTimeout:function(){this.timeoutId=null,this.dragging&&this.mousemove(this.lastMoveEvt)},mouseup:function(n){return this.dragend(n)},touchend:function(n){return n.xy=this.last,this.dragend(n)},mouseout:function(n){if(this.started&&OpenLayers.Util.mouseLeft(n,this.map.viewPortDiv))if(!0===this.documentDrag)this.addDocumentEvents();else{var t=this.start!=this.last;this.dragging=this.started=!1,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown"),this.out(n),this.callback("out",[]),t&&this.callback("done",[n.xy]),document.onselectstart&&(document.onselectstart=this.oldOnselectstart)}return!0},click:function(){return this.start==this.last},activate:function(){var n=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.dragging=!1,n=!0),n},deactivate:function(){var n=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.dragging=this.started=!1,this.last=this.start=null,n=!0,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown")),n},adjustXY:function(n){var t=OpenLayers.Util.pagePosition(this.map.viewPortDiv);n.xy.x-=t[0],n.xy.y-=t[1]},addDocumentEvents:function(){OpenLayers.Element.addClass(document.body,"olDragDown"),this.documentEvents=!0,OpenLayers.Event.observe(document,"mousemove",this._docMove),OpenLayers.Event.observe(document,"mouseup",this._docUp)},removeDocumentEvents:function(){OpenLayers.Element.removeClass(document.body,"olDragDown"),this.documentEvents=!1,OpenLayers.Event.stopObserving(document,"mousemove",this._docMove),OpenLayers.Event.stopObserving(document,"mouseup",this._docUp)},CLASS_NAME:"OpenLayers.Handler.Drag"}),OpenLayers.Handler.Keyboard=OpenLayers.Class(OpenLayers.Handler,{KEY_EVENTS:["keydown","keyup"],eventListener:null,observeElement:null,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.eventListener=OpenLayers.Function.bindAsEventListener(this.handleKeyEvent,this)},destroy:function(){this.deactivate(),this.eventListener=null,OpenLayers.Handler.prototype.destroy.apply(this,arguments)},activate:function(){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.observeElement=this.observeElement||document;for(var n=0,t=this.KEY_EVENTS.length;n<t;n++)OpenLayers.Event.observe(this.observeElement,this.KEY_EVENTS[n],this.eventListener);return!0}return!1},deactivate:function(){var n=!1,t;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){for(n=0,t=this.KEY_EVENTS.length;n<t;n++)OpenLayers.Event.stopObserving(this.observeElement,this.KEY_EVENTS[n],this.eventListener);n=!0}return n},handleKeyEvent:function(n){this.checkModifiers(n)&&this.callback(n.type,[n])},CLASS_NAME:"OpenLayers.Handler.Keyboard"}),OpenLayers.Control.ModifyFeature=OpenLayers.Class(OpenLayers.Control,{documentDrag:!1,geometryTypes:null,clickout:!0,toggle:!0,standalone:!1,layer:null,feature:null,vertex:null,vertices:null,virtualVertices:null,handlers:null,deleteCodes:null,virtualStyle:null,vertexRenderIntent:null,mode:null,createVertices:!0,modified:!1,radiusHandle:null,dragHandle:null,onModificationStart:function(){},onModification:function(){},onModificationEnd:function(){},initialize:function(n,t){t=t||{},this.layer=n,this.vertices=[],this.virtualVertices=[],this.virtualStyle=OpenLayers.Util.extend({},this.layer.style||this.layer.styleMap.createSymbolizer(null,t.vertexRenderIntent)),this.virtualStyle.fillOpacity=.3,this.virtualStyle.strokeOpacity=.3,this.deleteCodes=[46,68],this.mode=OpenLayers.Control.ModifyFeature.RESHAPE,OpenLayers.Control.prototype.initialize.apply(this,[t]),OpenLayers.Util.isArray(this.deleteCodes)||(this.deleteCodes=[this.deleteCodes]);var i={documentDrag:this.documentDrag,stopDown:!1};this.handlers={keyboard:new OpenLayers.Handler.Keyboard(this,{keydown:this.handleKeypress}),drag:new OpenLayers.Handler.Drag(this,{down:function(n){this.vertex=null,(n=this.layer.getFeatureFromEvent(this.handlers.drag.evt))?this.dragStart(n):this.clickout&&(this._unselect=this.feature)},move:function(n){delete this._unselect,this.vertex&&this.dragVertex(this.vertex,n)},up:function(){this.handlers.drag.stopDown=!1,this._unselect&&(this.unselectFeature(this._unselect),delete this._unselect)},done:function(){this.vertex&&this.dragComplete(this.vertex)}},i)}},destroy:function(){this.map&&this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this.layer=null,OpenLayers.Control.prototype.destroy.apply(this,[])},activate:function(){this.moveLayerToTop();this.map.events.on({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this});return this.handlers.keyboard.activate()&&this.handlers.drag.activate()&&OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){var n=!1;return OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.moveLayerBack(),this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this.layer.removeFeatures(this.vertices,{silent:!0}),this.layer.removeFeatures(this.virtualVertices,{silent:!0}),this.vertices=[],this.handlers.drag.deactivate(),this.handlers.keyboard.deactivate(),(n=this.feature)&&n.geometry&&n.layer&&this.unselectFeature(n),n=!0),n},beforeSelectFeature:function(n){return this.layer.events.triggerEvent("beforefeaturemodified",{feature:n})},selectFeature:function(n){if(!(this.feature===n||this.geometryTypes&&-1==OpenLayers.Util.indexOf(this.geometryTypes,n.geometry.CLASS_NAME))){!1!==this.beforeSelectFeature(n)&&(this.feature&&this.unselectFeature(this.feature),this.feature=n,this.layer.selectedFeatures.push(n),this.layer.drawFeature(n,"select"),this.modified=!1,this.resetVertices(),this.onModificationStart(this.feature));var t=n.modified;!n.geometry||t&&t.geometry||(this._originalGeometry=n.geometry.clone())}},unselectFeature:function(n){this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[],this.layer.destroyFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[],this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),delete this.dragHandle),this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),delete this.radiusHandle),this.layer.drawFeature(this.feature,"default"),this.feature=null,OpenLayers.Util.removeItem(this.layer.selectedFeatures,n);this.onModificationEnd(n);this.layer.events.triggerEvent("afterfeaturemodified",{feature:n,modified:this.modified}),this.modified=!1},dragStart:function(n){var t="OpenLayers.Geometry.Point"==n.geometry.CLASS_NAME;this.standalone||(n._sketch||!t)&&n._sketch||(this.toggle&&this.feature===n&&(this._unselect=n),this.selectFeature(n)),(n._sketch||t)&&(this.vertex=n,this.handlers.drag.stopDown=!0)},dragVertex:function(n,t){var r=this.map.getLonLatFromViewPortPx(t),i=n.geometry;i.move(r.lon-i.x,r.lat-i.y),this.modified=!0,"OpenLayers.Geometry.Point"==this.feature.geometry.CLASS_NAME?this.layer.events.triggerEvent("vertexmodified",{vertex:n.geometry,feature:this.feature,pixel:t}):(n._index?(n.geometry.parent.addComponent(n.geometry,n._index),delete n._index,OpenLayers.Util.removeItem(this.virtualVertices,n),this.vertices.push(n)):n==this.dragHandle?(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[],this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null)):n!==this.radiusHandle&&this.layer.events.triggerEvent("vertexmodified",{vertex:n.geometry,feature:this.feature,pixel:t}),0<this.virtualVertices.length&&(this.layer.destroyFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]),this.layer.drawFeature(this.feature,this.standalone?void 0:"select")),this.layer.drawFeature(n)},dragComplete:function(){this.resetVertices(),this.setFeatureState();this.onModification(this.feature);this.layer.events.triggerEvent("featuremodified",{feature:this.feature})},setFeatureState:function(){if(this.feature.state!=OpenLayers.State.INSERT&&this.feature.state!=OpenLayers.State.DELETE&&(this.feature.state=OpenLayers.State.UPDATE,this.modified&&this._originalGeometry)){var n=this.feature;n.modified=OpenLayers.Util.extend(n.modified,{geometry:this._originalGeometry}),delete this._originalGeometry}},resetVertices:function(){0<this.vertices.length&&(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[]),0<this.virtualVertices.length&&(this.layer.removeFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]),this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),this.dragHandle=null),this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null),this.feature&&"OpenLayers.Geometry.Point"!=this.feature.geometry.CLASS_NAME&&(this.mode&OpenLayers.Control.ModifyFeature.DRAG&&this.collectDragHandle(),this.mode&(OpenLayers.Control.ModifyFeature.ROTATE|OpenLayers.Control.ModifyFeature.RESIZE)&&this.collectRadiusHandle(),this.mode&OpenLayers.Control.ModifyFeature.RESHAPE&&(this.mode&OpenLayers.Control.ModifyFeature.RESIZE||this.collectVertices()))},handleKeypress:function(n){var t=n.keyCode;this.feature&&-1!=OpenLayers.Util.indexOf(this.deleteCodes,t)&&(t=this.layer.getFeatureFromEvent(this.handlers.drag.evt))&&-1!=OpenLayers.Util.indexOf(this.vertices,t)&&!this.handlers.drag.dragging&&t.geometry.parent&&(t.geometry.parent.removeComponent(t.geometry),this.layer.events.triggerEvent("vertexremoved",{vertex:t.geometry,feature:this.feature,pixel:n.xy}),this.layer.drawFeature(this.feature,this.standalone?void 0:"select"),this.modified=!0,this.resetVertices(),this.setFeatureState(),this.onModification(this.feature),this.layer.events.triggerEvent("featuremodified",{feature:this.feature}))},collectVertices:function(){function t(i){var u,r,f,e;if("OpenLayers.Geometry.Point"==i.CLASS_NAME)r=new OpenLayers.Feature.Vector(i),r._sketch=!0,r.renderIntent=n.vertexRenderIntent,n.vertices.push(r);else{for(f=i.components.length,"OpenLayers.Geometry.LinearRing"==i.CLASS_NAME&&(f-=1),u=0;u<f;++u)r=i.components[u],"OpenLayers.Geometry.Point"==r.CLASS_NAME?(r=new OpenLayers.Feature.Vector(r),r._sketch=!0,r.renderIntent=n.vertexRenderIntent,n.vertices.push(r)):t(r);if(n.createVertices&&"OpenLayers.Geometry.MultiPoint"!=i.CLASS_NAME)for(u=0,f=i.components.length;u<f-1;++u)r=i.components[u],e=i.components[u+1],"OpenLayers.Geometry.Point"==r.CLASS_NAME&&"OpenLayers.Geometry.Point"==e.CLASS_NAME&&(r=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point((r.x+e.x)/2,(r.y+e.y)/2),null,n.virtualStyle),r.geometry.parent=i,r._index=u+1,r._sketch=!0,n.virtualVertices.push(r))}}this.vertices=[],this.virtualVertices=[];var n=this;t.call(this,this.feature.geometry),this.layer.addFeatures(this.virtualVertices,{silent:!0}),this.layer.addFeatures(this.vertices,{silent:!0})},collectDragHandle:function(){var t=this.feature.geometry,n=t.getBounds().getCenterLonLat(),n=new OpenLayers.Geometry.Point(n.lon,n.lat),i=new OpenLayers.Feature.Vector(n);n.move=function(n,i){OpenLayers.Geometry.Point.prototype.move.call(this,n,i),t.move(n,i)},i._sketch=!0,this.dragHandle=i,this.dragHandle.renderIntent=this.vertexRenderIntent,this.layer.addFeatures([this.dragHandle],{silent:!0})},collectRadiusHandle:function(){var r=this.feature.geometry,n=r.getBounds(),t=n.getCenterLonLat(),i=new OpenLayers.Geometry.Point(t.lon,t.lat),n=new OpenLayers.Geometry.Point(n.right,n.bottom),t=new OpenLayers.Feature.Vector(n),u=this.mode&OpenLayers.Control.ModifyFeature.RESIZE,f=this.mode&OpenLayers.Control.ModifyFeature.RESHAPE,e=this.mode&OpenLayers.Control.ModifyFeature.ROTATE;n.move=function(n,t){var a;OpenLayers.Geometry.Point.prototype.move.call(this,n,t);var h=this.x-i.x,o=this.y-i.y,s=h-n,l=o-t;if(e){var c=Math.atan2(l,s),c=Math.atan2(o,h)-c,c=c*(180/Math.PI);r.rotate(c,i)}u&&(f?(o/=l,a=h/s/o):(s=Math.sqrt(s*s+l*l),o=Math.sqrt(h*h+o*o)/s),r.resize(o,i,a))},t._sketch=!0,this.radiusHandle=t,this.radiusHandle.renderIntent=this.vertexRenderIntent,this.layer.addFeatures([this.radiusHandle],{silent:!0})},setMap:function(n){this.handlers.drag.setMap(n),OpenLayers.Control.prototype.setMap.apply(this,arguments)},handleMapEvents:function(n){"removelayer"!=n.type&&"order"!=n.property||this.moveLayerToTop()},moveLayerToTop:function(){var n=Math.max(this.map.Z_INDEX_BASE.Feature-1,this.layer.getZIndex())+1;this.layer.setZIndex(n)},moveLayerBack:function(){var n=this.layer.getZIndex()-1;n>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(n):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Control.ModifyFeature"}),OpenLayers.Control.ModifyFeature.RESHAPE=1,OpenLayers.Control.ModifyFeature.RESIZE=2,OpenLayers.Control.ModifyFeature.ROTATE=4,OpenLayers.Control.ModifyFeature.DRAG=8,OpenLayers.Layer.Bing=OpenLayers.Class(OpenLayers.Layer.XYZ,{key:null,serverResolutions:[156543.03390625,78271.516953125,39135.7584765625,19567.87923828125,9783.9396191406249,4891.9698095703125,2445.9849047851562,1222.9924523925781,611.49622619628906,305.74811309814453,152.87405654907226,76.437028274536132,38.218514137268066,19.109257068634033,9.5546285343170165,4.7773142671585083,2.3886571335792541,1.1943285667896271,.59716428339481353,.29858214169740677,.14929107084870338,.074645535424351692],attributionTemplate:'<span class="olBingAttribution ${type}"><div><a target="_blank" href="http://www.bing.com/maps/"><img src="${logo}" /><\/a><\/div>${copyrights}<a style="white-space: nowrap" target="_blank" href="http://www.microsoft.com/maps/product/terms.html">Terms of Use<\/a><\/span>',metadata:null,protocolRegex:/^http:/i,type:"Road",culture:"en-US",metadataParams:null,tileOptions:null,protocol:~window.location.href.indexOf("http")?"":"http:",initialize:function(n){n=OpenLayers.Util.applyDefaults({sphericalMercator:!0},n),OpenLayers.Layer.XYZ.prototype.initialize.apply(this,[n.name||"Bing "+(n.type||this.type),null,n]),this.tileOptions=OpenLayers.Util.extend({crossOriginKeyword:"anonymous"},this.options.tileOptions),this.loadMetadata()},loadMetadata:function(){this._callbackId="_callback_"+this.id.replace(/\./g,"_"),window[this._callbackId]=OpenLayers.Function.bind(OpenLayers.Layer.Bing.processMetadata,this);var t=OpenLayers.Util.applyDefaults({key:this.key,jsonp:this._callbackId,include:"ImageryProviders"},this.metadataParams),t=this.protocol+"//dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.type+"?"+OpenLayers.Util.getParameterString(t),n=document.createElement("script");n.type="text/javascript",n.src=t,n.id=this._callbackId,document.getElementsByTagName("head")[0].appendChild(n)},initLayer:function(){var n=this.metadata.resourceSets[0].resources[0],t=n.imageUrl.replace("{quadkey}","${quadkey}"),t=t.replace("{culture}",this.culture),t=t.replace(this.protocolRegex,this.protocol),i;for(this.url=[],i=0;i<n.imageUrlSubdomains.length;++i)this.url.push(t.replace("{subdomain}",n.imageUrlSubdomains[i]));this.addOptions({maxResolution:Math.min(this.serverResolutions[n.zoomMin],this.maxResolution||Number.POSITIVE_INFINITY),numZoomLevels:Math.min(n.zoomMax+1-n.zoomMin,this.numZoomLevels)},!0),this.isBaseLayer||this.redraw(),this.updateAttribution()},getURL:function(n){var t,i,f;if(this.url){t=this.getXYZ(n),n=t.x;for(var e=t.y,t=t.z,r=[],u=t;0<u;--u)i="0",f=1<<u-1,0!=(n&f)&&i++,0!=(e&f)&&(i++,i++),r.push(i);return r=r.join(""),n=this.selectUrl(""+n+e+t,this.url),OpenLayers.String.format(n,{quadkey:r})}},updateAttribution:function(){var n=this.metadata;if(n.resourceSets&&this.map&&this.map.center){for(var t=n.resourceSets[0].resources[0],l=this.map.getExtent().transform(this.map.getProjectionObject(),new OpenLayers.Projection("EPSG:4326")),e=t.imageryProviders||[],o=OpenLayers.Util.indexOf(this.serverResolutions,this.getServerResolution()),t="",i,u,h,c,f,r=0,s=e.length;r<s;++r)for(i=e[r],u=0,h=i.coverageAreas.length;u<h;++u)f=i.coverageAreas[u],c=OpenLayers.Bounds.fromArray(f.bbox,!0),l.intersectsBounds(c)&&o<=f.zoomMax&&o>=f.zoomMin&&(t+=i.attribution+" ");n=n.brandLogoUri.replace(this.protocolRegex,this.protocol),this.attribution=OpenLayers.String.format(this.attributionTemplate,{type:this.type.toLowerCase(),logo:n,copyrights:t}),this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"attribution"})}},setMap:function(){OpenLayers.Layer.XYZ.prototype.setMap.apply(this,arguments),this.map.events.register("moveend",this,this.updateAttribution)},clone:function(n){return null==n&&(n=new OpenLayers.Layer.Bing(this.options)),OpenLayers.Layer.XYZ.prototype.clone.apply(this,[n])},destroy:function(){this.map&&this.map.events.unregister("moveend",this,this.updateAttribution),OpenLayers.Layer.XYZ.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Layer.Bing"}),OpenLayers.Layer.Bing.processMetadata=function(n){this.metadata=n,this.initLayer(),n=document.getElementById(this._callbackId),n.parentNode.removeChild(n),window[this._callbackId]=void 0,delete this._callbackId},OpenLayers.Handler.MouseWheel=OpenLayers.Class(OpenLayers.Handler,{wheelListener:null,interval:0,maxDelta:Number.POSITIVE_INFINITY,delta:0,cumulative:!0,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.wheelListener=OpenLayers.Function.bindAsEventListener(this.onWheelEvent,this)},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments),this.wheelListener=null},onWheelEvent:function(n){var f,t,r,o,e,s;if(this.map&&this.checkModifiers(n)){for(var t=!1,u=!1,r=!1,i=OpenLayers.Event.element(n);null!=i&&!r&&!t;){if(!t)try{t=(f=i.currentStyle?i.currentStyle.overflow:document.defaultView.getComputedStyle(i,null).getPropertyValue("overflow"))&&"auto"==f||"scroll"==f}catch(h){}if(!u&&(u=OpenLayers.Element.hasClass(i,"olScrollable"),!u))for(r=0,o=this.map.layers.length;r<o;r++)if(e=this.map.layers[r],i==e.div||i==e.pane){u=!0;break}r=i==this.map.div,i=i.parentNode}!t&&r&&(u&&((t=0,n.wheelDelta?(t=n.wheelDelta,0==t%160&&(t*=.75),t/=120):n.detail&&(t=-(n.detail/Math.abs(n.detail))),this.delta+=t,window.clearTimeout(this._timeoutId),this.interval&&Math.abs(this.delta)<this.maxDelta)?(s=OpenLayers.Util.extend({},n),this._timeoutId=window.setTimeout(OpenLayers.Function.bind(function(){this.wheelZoom(s)},this),this.interval)):this.wheelZoom(n)),OpenLayers.Event.stop(n))}},wheelZoom:function(n){var t=this.delta;this.delta=0,t&&(n.xy=this.map.events.getMousePosition(n),0>t?this.callback("down",[n,this.cumulative?Math.max(-this.maxDelta,t):-1]):this.callback("up",[n,this.cumulative?Math.min(this.maxDelta,t):1]))},activate:function(){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){var n=this.wheelListener;return OpenLayers.Event.observe(window,"DOMMouseScroll",n),OpenLayers.Event.observe(window,"mousewheel",n),OpenLayers.Event.observe(document,"mousewheel",n),!0}return!1},deactivate:function(){if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){var n=this.wheelListener;return OpenLayers.Event.stopObserving(window,"DOMMouseScroll",n),OpenLayers.Event.stopObserving(window,"mousewheel",n),OpenLayers.Event.stopObserving(document,"mousewheel",n),!0}return!1},CLASS_NAME:"OpenLayers.Handler.MouseWheel"}),OpenLayers.Geometry.MultiLineString=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LineString"],split:function(n,t){for(var o,e,v,c=null,l=t&&t.mutual,f,s,r,a,i=[],u=[n],h=0,y=this.components.length;h<y;++h){for(s=this.components[h],r=!1,o=0;o<u.length;++o)if(f=s.split(u[o],t)){if(l){for(r=f[0],e=0,v=r.length;e<v;++e)0===e&&i.length?i[i.length-1].addComponent(r[e]):i.push(new OpenLayers.Geometry.MultiLineString([r[e]]));r=!0,f=f[1]}if(f.length){f.unshift(o,1),Array.prototype.splice.apply(u,f);break}}r||(i.length?i[i.length-1].addComponent(s.clone()):i=[new OpenLayers.Geometry.MultiLineString(s.clone())])}return i&&1<i.length?r=!0:i=[],u&&1<u.length?a=!0:u=[],(r||a)&&(c=l?[i,u]:u),c},splitWith:function(n,t){var h=null,c=t&&t.mutual,u,o,i,l,f,r,s,a,e,v;if(n instanceof OpenLayers.Geometry.LineString)for(r=[],f=[n],s=0,a=this.components.length;s<a;++s){for(i=!1,o=this.components[s],e=0;e<f.length;++e)if(u=f[e].split(o,t)){for(c&&(i=u[0],i.length&&(i.unshift(e,1),Array.prototype.splice.apply(f,i),e+=i.length-2),u=u[1],0===u.length&&(u=[o.clone()])),i=0,v=u.length;i<v;++i)0===i&&r.length?r[r.length-1].addComponent(u[i]):r.push(new OpenLayers.Geometry.MultiLineString([u[i]]));i=!0}i||(r.length?r[r.length-1].addComponent(o.clone()):r=[new OpenLayers.Geometry.MultiLineString([o.clone()])])}else h=n.split(this);return f&&1<f.length?l=!0:f=[],r&&1<r.length?i=!0:r=[],(l||i)&&(h=c?[f,r]:r),h},CLASS_NAME:"OpenLayers.Geometry.MultiLineString"}),OpenLayers.Format=OpenLayers.Class({options:null,externalProjection:null,internalProjection:null,data:null,keepData:!1,initialize:function(n){OpenLayers.Util.extend(this,n),this.options=n},destroy:function(){},read:function(){throw Error("Read not implemented.");},write:function(){throw Error("Write not implemented.");},CLASS_NAME:"OpenLayers.Format"}),OpenLayers.Format.JSON=OpenLayers.Class(OpenLayers.Format,{indent:"    ",space:" ",newline:"\n",level:0,pretty:!1,nativeJSON:function(){return!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify)}(),read:function(a,b){var c,d;if(this.nativeJSON)c=JSON.parse(a,b);else try{/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))&&(c=eval("("+a+")"),"function"==typeof b)&&(d=function(n,t){if(t&&"object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(t[i]=d(i,t[i]));return b(n,t)},c=d("",c))}catch(e){}return this.keepData&&(this.data=c),c},write:function(n,t){this.pretty=!!t;var i=null,r=typeof n;if(this.serialize[r])try{i=!this.pretty&&this.nativeJSON?JSON.stringify(n):this.serialize[r].apply(this,[n])}catch(u){OpenLayers.Console.error("Trouble serializing: "+u)}return i},writeIndent:function(){var t=[],n;if(this.pretty)for(n=0;n<this.level;++n)t.push(this.indent);return t.join("")},writeNewline:function(){return this.pretty?this.newline:""},writeSpace:function(){return this.pretty?this.space:""},serialize:{object:function(n){var t,i,r,u,f;if(null==n)return"null";if(n.constructor==Date)return this.serialize.date.apply(this,[n]);if(n.constructor==Array)return this.serialize.array.apply(this,[n]);t=["{"],this.level+=1,f=!1;for(i in n)n.hasOwnProperty(i)&&(r=OpenLayers.Format.JSON.prototype.write.apply(this,[i,this.pretty]),u=OpenLayers.Format.JSON.prototype.write.apply(this,[n[i],this.pretty]),null!=r&&null!=u&&(f&&t.push(","),t.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),u),f=!0));return this.level-=1,t.push(this.writeNewline(),this.writeIndent(),"}"),t.join("")},array:function(n){var r,i=["["],t,u;for(this.level+=1,t=0,u=n.length;t<u;++t)r=OpenLayers.Format.JSON.prototype.write.apply(this,[n[t],this.pretty]),null!=r&&(0<t&&i.push(","),i.push(this.writeNewline(),this.writeIndent(),r));return this.level-=1,i.push(this.writeNewline(),this.writeIndent(),"]"),i.join("")},string:function(n){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(n)?'"'+n.replace(/([\x00-\x1f\\"])/g,function(n,i){var r=t[i];return r?r:(r=i.charCodeAt(),"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16))})+'"':'"'+n+'"'},number:function(n){return isFinite(n)?String(n):"null"},boolean:function(n){return String(n)},date:function(n){function t(n){return 10>n?"0"+n:n}return'"'+n.getFullYear()+"-"+t(n.getMonth()+1)+"-"+t(n.getDate())+"T"+t(n.getHours())+":"+t(n.getMinutes())+":"+t(n.getSeconds())+'"'}},CLASS_NAME:"OpenLayers.Format.JSON"}),OpenLayers.Format.XML=OpenLayers.Class(OpenLayers.Format,{namespaces:null,namespaceAlias:null,defaultPrefix:null,readers:{},writers:{},xmldom:null,initialize:function(n){window.ActiveXObject&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM")),OpenLayers.Format.prototype.initialize.apply(this,[n]),this.namespaces=OpenLayers.Util.extend({},this.namespaces),this.namespaceAlias={};for(var t in this.namespaces)this.namespaceAlias[this.namespaces[t]]=t},destroy:function(){this.xmldom=null,OpenLayers.Format.prototype.destroy.apply(this,arguments)},setNamespace:function(n,t){this.namespaces[n]=t,this.namespaceAlias[t]=n},read:function(n){var t=n.indexOf("<");return 0<t&&(n=n.substring(t)),t=OpenLayers.Util.Try(OpenLayers.Function.bind(function(){var t;return t=window.ActiveXObject&&!this.xmldom?new ActiveXObject("Microsoft.XMLDOM"):this.xmldom,t.loadXML(n),t},this),function(){return(new DOMParser).parseFromString(n,"text/xml")},function(){var t=new XMLHttpRequest;return t.open("GET","data:text/xml;charset=utf-8,"+encodeURIComponent(n),!1),t.overrideMimeType&&t.overrideMimeType("text/xml"),t.send(null),t.responseXML}),this.keepData&&(this.data=t),t},write:function(n){var i,t;return this.xmldom?n=n.xml:(i=new XMLSerializer,1==n.nodeType?(t=document.implementation.createDocument("","",null),t.importNode&&(n=t.importNode(n,!0)),t.appendChild(n),n=i.serializeToString(t)):n=i.serializeToString(n)),n},createElementNS:function(n,t){return this.xmldom?"string"==typeof n?this.xmldom.createNode(1,t,n):this.xmldom.createNode(1,t,""):document.createElementNS(n,t)},createDocumentFragment:function(){return this.xmldom?this.xmldom.createDocumentFragment():document.createDocumentFragment()},createTextNode:function(n){return"string"!=typeof n&&(n=String(n)),this.xmldom?this.xmldom.createTextNode(n):document.createTextNode(n)},getElementsByTagNameNS:function(n,t,i){var f=[],r,e,u,o;if(n.getElementsByTagNameNS)f=n.getElementsByTagNameNS(t,i);else for(n=n.getElementsByTagName("*"),u=0,o=n.length;u<o;++u)(r=n[u],e=r.prefix?r.prefix+":"+i:i,"*"==i||e==r.nodeName)&&("*"!=t&&t!=r.namespaceURI||f.push(r));return f},getAttributeNodeNS:function(n,t,i){var f=null,r,e,u,o;if(n.getAttributeNodeNS)f=n.getAttributeNodeNS(t,i);else for(n=n.attributes,u=0,o=n.length;u<o;++u)if(r=n[u],r.namespaceURI==t&&(e=r.prefix?r.prefix+":"+i:i,e==r.nodeName)){f=r;break}return f},getAttributeNS:function(n,t,i){var r="";return n.getAttributeNS?r=n.getAttributeNS(t,i)||"":(n=this.getAttributeNodeNS(n,t,i))&&(r=n.nodeValue),r},getChildValue:function(n,t){var r=t||"",i;if(n)for(i=n.firstChild;i;i=i.nextSibling)switch(i.nodeType){case 3:case 4:r+=i.nodeValue}return r},isSimpleContent:function(n){var t=!0;for(n=n.firstChild;n;n=n.nextSibling)if(1===n.nodeType){t=!1;break}return t},contentType:function(n){var t=!1,i=!1,r=OpenLayers.Format.XML.CONTENT_TYPE.EMPTY;for(n=n.firstChild;n;n=n.nextSibling){switch(n.nodeType){case 1:i=!0;break;case 8:break;default:t=!0}if(i&&t)break}if(i&&t)r=OpenLayers.Format.XML.CONTENT_TYPE.MIXED;else{if(i)return OpenLayers.Format.XML.CONTENT_TYPE.COMPLEX;if(t)return OpenLayers.Format.XML.CONTENT_TYPE.SIMPLE}return r},hasAttributeNS:function(n,t,i){return n.hasAttributeNS?n.hasAttributeNS(t,i):!!this.getAttributeNodeNS(n,t,i)},setAttributeNS:function(n,t,i,r){if(n.setAttributeNS)n.setAttributeNS(t,i,r);else if(this.xmldom)t?(t=n.ownerDocument.createNode(2,i,t),t.nodeValue=r,n.setAttributeNode(t)):n.setAttribute(i,r);else throw"setAttributeNS not implemented";},createElementNSPlus:function(n,t){var i,r;return t=t||{},i=t.uri||this.namespaces[t.prefix],i||(i=n.indexOf(":"),i=this.namespaces[n.substring(0,i)]),i||(i=this.namespaces[this.defaultPrefix]),i=this.createElementNS(i,n),t.attributes&&this.setAttributes(i,t.attributes),r=t.value,null!=r&&i.appendChild(this.createTextNode(r)),i},setAttributes:function(n,t){var r,u,i;for(i in t)null!=t[i]&&t[i].toString&&(r=t[i].toString(),u=this.namespaces[i.substring(0,i.indexOf(":"))]||null,this.setAttributeNS(n,u,i,r))},readNode:function(n,t){var i,r;return t||(t={}),i=this.readers[n.namespaceURI?this.namespaceAlias[n.namespaceURI]:this.defaultPrefix],i&&(r=n.localName||n.nodeName.split(":").pop(),(i=i[r]||i["*"])&&i.apply(this,[n,t])),t},readChildNodes:function(n,t){t||(t={});for(var u=n.childNodes,i,r=0,f=u.length;r<f;++r)i=u[r],1==i.nodeType&&this.readNode(i,t);return t},writeNode:function(n,t,i){var r,u=n.indexOf(":");return 0<u?(r=n.substring(0,u),n=n.substring(u+1)):r=i?this.namespaceAlias[i.namespaceURI]:this.defaultPrefix,t=this.writers[r][n].apply(this,[t]),i&&i.appendChild(t),t},getChildEl:function(n,t,i){return n&&this.getThisOrNextEl(n.firstChild,t,i)},getNextEl:function(n,t,i){return n&&this.getThisOrNextEl(n.nextSibling,t,i)},getThisOrNextEl:function(n,t,i){n:for(;n;n=n.nextSibling)switch(n.nodeType){case 1:if(!(t&&t!==(n.localName||n.nodeName.split(":").pop())||i&&i!==n.namespaceURI))break n;n=null;break n;case 3:if(/^\s*$/.test(n.nodeValue))break;case 4:case 6:case 12:case 10:case 11:n=null;break n}return n||null},lookupNamespaceURI:function(n,t){var i=null,r,u;if(n)if(n.lookupNamespaceURI)i=n.lookupNamespaceURI(t);else n:switch(n.nodeType){case 1:if(null!==n.namespaceURI&&n.prefix===t){i=n.namespaceURI;break n}if(i=n.attributes.length)for(u=0;u<i;++u)if(r=n.attributes[u],"xmlns"===r.prefix&&r.name==="xmlns:"+t){i=r.value||null;break n}else if("xmlns"===r.name&&null===t){i=r.value||null;break n}i=this.lookupNamespaceURI(n.parentNode,t);break n;case 2:i=this.lookupNamespaceURI(n.ownerElement,t);break n;case 9:i=this.lookupNamespaceURI(n.documentElement,t);break n;case 6:case 12:case 10:case 11:break n;default:i=this.lookupNamespaceURI(n.parentNode,t)}return i},getXMLDoc:function(){return OpenLayers.Format.XML.document||this.xmldom||(document.implementation&&document.implementation.createDocument?OpenLayers.Format.XML.document=document.implementation.createDocument("","",null):!this.xmldom&&window.ActiveXObject&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM"))),OpenLayers.Format.XML.document||this.xmldom},CLASS_NAME:"OpenLayers.Format.XML"}),OpenLayers.Format.XML.CONTENT_TYPE={EMPTY:0,SIMPLE:1,COMPLEX:2,MIXED:3},OpenLayers.Format.XML.lookupNamespaceURI=OpenLayers.Function.bind(OpenLayers.Format.XML.prototype.lookupNamespaceURI,OpenLayers.Format.XML.prototype),OpenLayers.Format.XML.document=null,OpenLayers.Format.OGCExceptionReport=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ogc:"http://www.opengis.net/ogc"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},defaultPrefix:"ogc",read:function(n){"string"==typeof n&&(n=OpenLayers.Format.XML.prototype.read.apply(this,[n]));var t={exceptionReport:null};return n.documentElement&&(this.readChildNodes(n,t),null===t.exceptionReport&&(t=(new OpenLayers.Format.OWSCommon).read(n))),t},readers:{ogc:{ServiceExceptionReport:function(n,t){t.exceptionReport={exceptions:[]},this.readChildNodes(n,t.exceptionReport)},ServiceException:function(n,t){var i={code:n.getAttribute("code"),locator:n.getAttribute("locator"),text:this.getChildValue(n)};t.exceptions.push(i)}}},CLASS_NAME:"OpenLayers.Format.OGCExceptionReport"}),OpenLayers.Format.XML.VersionedOGC=OpenLayers.Class(OpenLayers.Format.XML,{defaultVersion:null,version:null,profile:null,allowFallback:!1,name:null,stringifyOutput:!1,parser:null,initialize:function(n){OpenLayers.Format.XML.prototype.initialize.apply(this,[n]),n=this.CLASS_NAME,this.name=n.substring(n.lastIndexOf(".")+1)},getVersion:function(n,t){var i;return n?(i=this.version,i||(i=n.getAttribute("version"),i||(i=this.defaultVersion))):i=t&&t.version||this.version||this.defaultVersion,i},getParser:function(n){var t,i;if(n=n||this.defaultVersion,t=this.profile?"_"+this.profile:"",!this.parser||this.parser.VERSION!=n){if(i=OpenLayers.Format[this.name]["v"+n.replace(/\./g,"_")+t],!i&&(""!==t&&this.allowFallback&&(t="",i=OpenLayers.Format[this.name]["v"+n.replace(/\./g,"_")]),!i))throw"Can't find a "+this.name+" parser for version "+n+t;this.parser=new i(this.options)}return this.parser},write:function(n,t){var i=this.getVersion(null,t);return this.parser=this.getParser(i),i=this.parser.write(n,t),!1===this.stringifyOutput?i:OpenLayers.Format.XML.prototype.write.apply(this,[i])},read:function(n,t){var u,i,r;return"string"==typeof n&&(n=OpenLayers.Format.XML.prototype.read.apply(this,[n])),u=this.getVersion(n.documentElement),this.parser=this.getParser(u),i=this.parser.read(n,t),r=this.parser.errorProperty||null,null!==r&&void 0===i[r]&&(r=new OpenLayers.Format.OGCExceptionReport,i.error=r.read(n)),i.version=u,i},CLASS_NAME:"OpenLayers.Format.XML.VersionedOGC"}),OpenLayers.Feature=OpenLayers.Class({layer:null,id:null,lonlat:null,data:null,marker:null,popupClass:null,popup:null,initialize:function(n,t,i){this.layer=n,this.lonlat=t,this.data=null!=i?i:{},this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){null!=this.layer&&null!=this.layer.map&&null!=this.popup&&this.layer.map.removePopup(this.popup),null!=this.layer&&null!=this.marker&&this.layer.removeMarker(this.marker),this.data=this.lonlat=this.id=this.layer=null,null!=this.marker&&(this.destroyMarker(this.marker),this.marker=null),null!=this.popup&&(this.destroyPopup(this.popup),this.popup=null)},onScreen:function(){var n=!1;return null!=this.layer&&null!=this.layer.map&&(n=this.layer.map.getExtent().containsLonLat(this.lonlat)),n},createMarker:function(){return null!=this.lonlat&&(this.marker=new OpenLayers.Marker(this.lonlat,this.data.icon)),this.marker},destroyMarker:function(){this.marker.destroy()},createPopup:function(n){return null!=this.lonlat&&(this.popup||(this.popup=new(this.popupClass?this.popupClass:OpenLayers.Popup.Anchored)(this.id+"_popup",this.lonlat,this.data.popupSize,this.data.popupContentHTML,this.marker?this.marker.icon:null,n)),null!=this.data.overflow&&(this.popup.contentDiv.style.overflow=this.data.overflow),this.popup.feature=this),this.popup},destroyPopup:function(){this.popup&&(this.popup.feature=null,this.popup.destroy(),this.popup=null)},CLASS_NAME:"OpenLayers.Feature"}),OpenLayers.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"},OpenLayers.Feature.Vector=OpenLayers.Class(OpenLayers.Feature,{fid:null,geometry:null,attributes:null,bounds:null,state:null,style:null,url:null,renderIntent:"default",modified:null,initialize:function(n,t,i){OpenLayers.Feature.prototype.initialize.apply(this,[null,null,t]),this.lonlat=null,this.geometry=n?n:null,this.state=null,this.attributes={},t&&(this.attributes=OpenLayers.Util.extend(this.attributes,t)),this.style=i?i:null},destroy:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.modified=this.geometry=null,OpenLayers.Feature.prototype.destroy.apply(this,arguments)},clone:function(){return new OpenLayers.Feature.Vector(this.geometry?this.geometry.clone():null,this.attributes,this.style)},onScreen:function(n){var t=!1;return this.layer&&this.layer.map&&(t=this.layer.map.getExtent(),n?(n=this.geometry.getBounds(),t=t.intersectsBounds(n)):t=t.toGeometry().intersects(this.geometry)),t},getVisibility:function(){return!(this.style&&"none"==this.style.display||!this.layer||this.layer&&this.layer.styleMap&&"none"==this.layer.styleMap.createSymbolizer(this,this.renderIntent).display||this.layer&&!this.layer.getVisibility())},createMarker:function(){return null},destroyMarker:function(){},createPopup:function(){return null},atPoint:function(n,t,i){var r=!1;return this.geometry&&(r=this.geometry.atPoint(n,t,i)),r},destroyPopup:function(){},move:function(n){if(this.layer&&this.geometry.move){n="OpenLayers.LonLat"==n.CLASS_NAME?this.layer.getViewPortPxFromLonLat(n):n;var t=this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat()),i=this.layer.map.getResolution();return this.geometry.move(i*(n.x-t.x),i*(t.y-n.y)),this.layer.drawFeature(this),t}},toState:function(n){if(n==OpenLayers.State.UPDATE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.DELETE:this.state=n}else if(n==OpenLayers.State.INSERT)switch(this.state){case OpenLayers.State.UNKNOWN:break;default:this.state=n}else if(n==OpenLayers.State.DELETE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.UPDATE:this.state=n}else n==OpenLayers.State.UNKNOWN&&(this.state=n)},CLASS_NAME:"OpenLayers.Feature.Vector"}),OpenLayers.Feature.Vector.style={"default":{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},"delete":{display:"none"}},OpenLayers.Style=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:!1,rules:null,context:null,defaultStyle:null,defaultsPerSymbolizer:!1,propertyStyles:null,initialize:function(n,t){OpenLayers.Util.extend(this,t),this.rules=[],t&&t.rules&&this.addRules(t.rules),this.setDefaultStyle(n||OpenLayers.Feature.Vector.style["default"]),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var n=0,t=this.rules.length;n<t;n++)this.rules[n].destroy(),this.rules[n]=null;this.defaultStyle=this.rules=null},createSymbolizer:function(n){for(var t=this.defaultsPerSymbolizer?{}:this.createLiterals(OpenLayers.Util.extend({},this.defaultStyle),n),e=this.rules,r,u=[],f=!1,i=0,o=e.length;i<o;i++)r=e[i],r.evaluate(n)&&(r instanceof OpenLayers.Rule&&r.elseFilter?u.push(r):(f=!0,this.applySymbolizer(r,t,n)));if(!1==f&&0<u.length)for(f=!0,i=0,o=u.length;i<o;i++)this.applySymbolizer(u[i],t,n);return 0<e.length&&!1==f&&(t.display="none"),null!=t.label&&"string"!=typeof t.label&&(t.label=String(t.label)),t},applySymbolizer:function(n,t,i){var r=i.geometry?this.getSymbolizerPrefix(i.geometry):OpenLayers.Style.SYMBOLIZER_PREFIXES[0];return n=n.symbolizer[r]||n.symbolizer,!0===this.defaultsPerSymbolizer&&(r=this.defaultStyle,OpenLayers.Util.applyDefaults(n,{pointRadius:r.pointRadius}),!0!==n.stroke&&!0!==n.graphic||OpenLayers.Util.applyDefaults(n,{strokeWidth:r.strokeWidth,strokeColor:r.strokeColor,strokeOpacity:r.strokeOpacity,strokeDashstyle:r.strokeDashstyle,strokeLinecap:r.strokeLinecap}),!0!==n.fill&&!0!==n.graphic||OpenLayers.Util.applyDefaults(n,{fillColor:r.fillColor,fillOpacity:r.fillOpacity}),!0===n.graphic&&OpenLayers.Util.applyDefaults(n,{pointRadius:this.defaultStyle.pointRadius,externalGraphic:this.defaultStyle.externalGraphic,graphicName:this.defaultStyle.graphicName,graphicOpacity:this.defaultStyle.graphicOpacity,graphicWidth:this.defaultStyle.graphicWidth,graphicHeight:this.defaultStyle.graphicHeight,graphicXOffset:this.defaultStyle.graphicXOffset,graphicYOffset:this.defaultStyle.graphicYOffset})),this.createLiterals(OpenLayers.Util.extend(t,n),i)},createLiterals:function(n,t){var r=OpenLayers.Util.extend({},t.attributes||t.data),i;OpenLayers.Util.extend(r,this.context);for(i in this.propertyStyles)n[i]=OpenLayers.Style.createLiteral(n[i],r,t,i);return n},findPropertyStyles:function(){var n={},f;this.addPropertyStyles(n,this.defaultStyle);for(var u=this.rules,t,i,r=0,e=u.length;r<e;r++){t=u[r].symbolizer;for(f in t)if(i=t[f],"object"==typeof i)this.addPropertyStyles(n,i);else{this.addPropertyStyles(n,t);break}}return n},addPropertyStyles:function(n,t){var i,r;for(r in t)i=t[r],"string"==typeof i&&i.match(/\$\{\w+\}/)&&(n[r]=!0);return n},addRules:function(n){Array.prototype.push.apply(this.rules,n),this.propertyStyles=this.findPropertyStyles()},setDefaultStyle:function(n){this.defaultStyle=n,this.propertyStyles=this.findPropertyStyles()},getSymbolizerPrefix:function(n){for(var i=OpenLayers.Style.SYMBOLIZER_PREFIXES,t=0,r=i.length;t<r;t++)if(-1!=n.CLASS_NAME.indexOf(i[t]))return i[t]},clone:function(){var t=OpenLayers.Util.extend({},this),n,i;if(this.rules)for(t.rules=[],n=0,i=this.rules.length;n<i;++n)t.rules.push(this.rules[n].clone());return t.context=this.context&&OpenLayers.Util.extend({},this.context),n=OpenLayers.Util.extend({},this.defaultStyle),new OpenLayers.Style(n,t)},CLASS_NAME:"OpenLayers.Style"}),OpenLayers.Style.createLiteral=function(n,t,i,r){return"string"==typeof n&&-1!=n.indexOf("${")&&(n=OpenLayers.String.format(n,t,[i,r]),n=isNaN(n)||!n?n:parseFloat(n)),n},OpenLayers.Style.SYMBOLIZER_PREFIXES=["Point","Line","Polygon","Text","Raster"],OpenLayers.Filter=OpenLayers.Class({initialize:function(n){OpenLayers.Util.extend(this,n)},destroy:function(){},evaluate:function(){return!0},clone:function(){return null},toString:function(){return OpenLayers.Format&&OpenLayers.Format.CQL?OpenLayers.Format.CQL.prototype.write(this):Object.prototype.toString.call(this)},CLASS_NAME:"OpenLayers.Filter"}),OpenLayers.Filter.FeatureId=OpenLayers.Class(OpenLayers.Filter,{fids:null,type:"FID",initialize:function(n){this.fids=[],OpenLayers.Filter.prototype.initialize.apply(this,[n])},evaluate:function(n){for(var t=0,i=this.fids.length;t<i;t++)if((n.fid||n.id)==this.fids[t])return!0;return!1},clone:function(){var n=new OpenLayers.Filter.FeatureId;return OpenLayers.Util.extend(n,this),n.fids=this.fids.slice(),n},CLASS_NAME:"OpenLayers.Filter.FeatureId"}),OpenLayers.Filter.Logical=OpenLayers.Class(OpenLayers.Filter,{filters:null,type:null,initialize:function(n){this.filters=[],OpenLayers.Filter.prototype.initialize.apply(this,[n])},destroy:function(){this.filters=null,OpenLayers.Filter.prototype.destroy.apply(this)},evaluate:function(n){var t,i;switch(this.type){case OpenLayers.Filter.Logical.AND:for(t=0,i=this.filters.length;t<i;t++)if(!1==this.filters[t].evaluate(n))return!1;return!0;case OpenLayers.Filter.Logical.OR:for(t=0,i=this.filters.length;t<i;t++)if(!0==this.filters[t].evaluate(n))return!0;return!1;case OpenLayers.Filter.Logical.NOT:return!this.filters[0].evaluate(n)}},clone:function(){for(var t=[],n=0,i=this.filters.length;n<i;++n)t.push(this.filters[n].clone());return new OpenLayers.Filter.Logical({type:this.type,filters:t})},CLASS_NAME:"OpenLayers.Filter.Logical"}),OpenLayers.Filter.Logical.AND="&&",OpenLayers.Filter.Logical.OR="||",OpenLayers.Filter.Logical.NOT="!",OpenLayers.Filter.Comparison=OpenLayers.Class(OpenLayers.Filter,{type:null,property:null,value:null,matchCase:!0,lowerBoundary:null,upperBoundary:null,initialize:function(n){OpenLayers.Filter.prototype.initialize.apply(this,[n]),this.type===OpenLayers.Filter.Comparison.LIKE&&void 0===n.matchCase&&(this.matchCase=null)},evaluate:function(n){n instanceof OpenLayers.Feature.Vector&&(n=n.attributes);var t=!1;n=n[this.property];switch(this.type){case OpenLayers.Filter.Comparison.EQUAL_TO:t=this.value,t=this.matchCase||"string"!=typeof n||"string"!=typeof t?n==t:n.toUpperCase()==t.toUpperCase();break;case OpenLayers.Filter.Comparison.NOT_EQUAL_TO:t=this.value,t=this.matchCase||"string"!=typeof n||"string"!=typeof t?n!=t:n.toUpperCase()!=t.toUpperCase();break;case OpenLayers.Filter.Comparison.LESS_THAN:t=n<this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN:t=n>this.value;break;case OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO:t=n<=this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO:t=n>=this.value;break;case OpenLayers.Filter.Comparison.BETWEEN:t=n>=this.lowerBoundary&&n<=this.upperBoundary;break;case OpenLayers.Filter.Comparison.LIKE:t=RegExp(this.value,"gi").test(n);break;case OpenLayers.Filter.Comparison.IS_NULL:t=null===n}return t},value2regex:function(n,t,i){if("."==n)throw Error("'.' is an unsupported wildCard character for OpenLayers.Filter.Comparison");return n=n?n:"*",t=t?t:".",this.value=this.value.replace(RegExp("\\"+(i?i:"!")+"(.|$)","g"),"\\$1"),this.value=this.value.replace(RegExp("\\"+t,"g"),"."),this.value=this.value.replace(RegExp("\\"+n,"g"),".*"),this.value=this.value.replace(RegExp("\\\\.\\*","g"),"\\"+n),this.value=this.value.replace(RegExp("\\\\\\.","g"),"\\"+t)},regex2value:function(){var n=this.value,n=n.replace(/!/g,"!!"),n=n.replace(/(\\)?\\\./g,function(n,t){return t?n:"!."}),n=n.replace(/(\\)?\\\*/g,function(n,t){return t?n:"!*"}),n=n.replace(/\\\\/g,"\\");return n.replace(/\.\*/g,"*")},clone:function(){return OpenLayers.Util.extend(new OpenLayers.Filter.Comparison,this)},CLASS_NAME:"OpenLayers.Filter.Comparison"}),OpenLayers.Filter.Comparison.EQUAL_TO="==",OpenLayers.Filter.Comparison.NOT_EQUAL_TO="!=",OpenLayers.Filter.Comparison.LESS_THAN="<",OpenLayers.Filter.Comparison.GREATER_THAN=">",OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO="<=",OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO=">=",OpenLayers.Filter.Comparison.BETWEEN="..",OpenLayers.Filter.Comparison.LIKE="~",OpenLayers.Filter.Comparison.IS_NULL="NULL",OpenLayers.Format.Filter=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.Filter"}),OpenLayers.Format.WFST=function(n){n=OpenLayers.Util.applyDefaults(n,OpenLayers.Format.WFST.DEFAULTS);var t=OpenLayers.Format.WFST["v"+n.version.replace(/\./g,"_")];if(!t)throw"Unsupported WFST version: "+n.version;return new t(n)},OpenLayers.Format.WFST.DEFAULTS={version:"1.0.0"},OpenLayers.Filter.Spatial=OpenLayers.Class(OpenLayers.Filter,{type:null,property:null,value:null,distance:null,distanceUnits:null,evaluate:function(n){var i=!1,t;switch(this.type){case OpenLayers.Filter.Spatial.BBOX:case OpenLayers.Filter.Spatial.INTERSECTS:n.geometry&&(t=this.value,"OpenLayers.Bounds"==this.value.CLASS_NAME&&(t=this.value.toGeometry()),n.geometry.intersects(t)&&(i=!0));break;default:throw Error("evaluate is not implemented for this filter type.");}return i},clone:function(){var n=OpenLayers.Util.applyDefaults({value:this.value&&this.value.clone&&this.value.clone()},this);return new OpenLayers.Filter.Spatial(n)},CLASS_NAME:"OpenLayers.Filter.Spatial"}),OpenLayers.Filter.Spatial.BBOX="BBOX",OpenLayers.Filter.Spatial.INTERSECTS="INTERSECTS",OpenLayers.Filter.Spatial.DWITHIN="DWITHIN",OpenLayers.Filter.Spatial.WITHIN="WITHIN",OpenLayers.Filter.Spatial.CONTAINS="CONTAINS",OpenLayers.Format.WFST.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",wfs:"http://www.opengis.net/wfs",gml:"http://www.opengis.net/gml",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows"},defaultPrefix:"wfs",version:null,schemaLocations:null,srsName:null,extractAttributes:!0,xy:!0,stateName:null,initialize:function(n){this.stateName={},this.stateName[OpenLayers.State.INSERT]="wfs:Insert",this.stateName[OpenLayers.State.UPDATE]="wfs:Update",this.stateName[OpenLayers.State.DELETE]="wfs:Delete",OpenLayers.Format.XML.prototype.initialize.apply(this,[n])},getSrsName:function(n,t){var i=t&&t.srsName;return i||(i=n&&n.layer?n.layer.projection.getCode():this.srsName),i},read:function(n,t){t=t||{},OpenLayers.Util.applyDefaults(t,{output:"features"}),"string"==typeof n&&(n=OpenLayers.Format.XML.prototype.read.apply(this,[n])),n&&9==n.nodeType&&(n=n.documentElement);var i={};return n&&this.readNode(n,i,!0),i.features&&"features"===t.output&&(i=i.features),i},readers:{wfs:{FeatureCollection:function(n,t){t.features=[],this.readChildNodes(n,t)}}},write:function(n,t){var i=this.writeNode("wfs:Transaction",{features:n,options:t}),r=this.schemaLocationAttr();return r&&this.setAttributeNS(i,this.namespaces.xsi,"xsi:schemaLocation",r),OpenLayers.Format.XML.prototype.write.apply(this,[i])},writers:{wfs:{GetFeature:function(n){var i=this.createElementNSPlus("wfs:GetFeature",{attributes:{service:"WFS",version:this.version,handle:n&&n.handle,outputFormat:n&&n.outputFormat,maxFeatures:n&&n.maxFeatures,"xsi:schemaLocation":this.schemaLocationAttr(n)}}),t,r;if("string"==typeof this.featureType)this.writeNode("Query",n,i);else for(t=0,r=this.featureType.length;t<r;t++)n.featureType=this.featureType[t],this.writeNode("Query",n,i);return i},Transaction:function(n){var e,f;n=n||{};var t=n.options||{},r=this.createElementNSPlus("wfs:Transaction",{attributes:{service:"WFS",version:this.version,handle:t.handle}}),i,u=n.features;if(u){for(!0===t.multi&&OpenLayers.Util.extend(this.geometryTypes,{"OpenLayers.Geometry.Point":"MultiPoint","OpenLayers.Geometry.LineString":!0===this.multiCurve?"MultiCurve":"MultiLineString","OpenLayers.Geometry.Polygon":!0===this.multiSurface?"MultiSurface":"MultiPolygon"}),n=0,i=u.length;n<i;++n)f=u[n],(e=this.stateName[f.state])&&this.writeNode(e,{feature:f,options:t},r);!0===t.multi&&this.setGeometryTypes()}if(t.nativeElements)for(n=0,i=t.nativeElements.length;n<i;++n)this.writeNode("wfs:Native",t.nativeElements[n],r);return r},Native:function(n){return this.createElementNSPlus("wfs:Native",{attributes:{vendorId:n.vendorId,safeToIgnore:n.safeToIgnore},value:n.value})},Insert:function(n){var t=n.feature;return n=n.options,n=this.createElementNSPlus("wfs:Insert",{attributes:{handle:n&&n.handle}}),this.srsName=this.getSrsName(t),this.writeNode("feature:_typeName",t,n),n},Update:function(n){var t=n.feature,i,r;n=n.options,n=this.createElementNSPlus("wfs:Update",{attributes:{handle:n&&n.handle,typeName:(this.featureNS?this.featurePrefix+":":"")+this.featureType}}),this.featureNS&&n.setAttribute("xmlns:"+this.featurePrefix,this.featureNS),i=t.modified,null===this.geometryName||i&&void 0===i.geometry||(this.srsName=this.getSrsName(t),this.writeNode("Property",{name:this.geometryName,value:t.geometry},n));for(r in t.attributes)void 0===t.attributes[r]||i&&i.attributes&&(!i.attributes||void 0===i.attributes[r])||this.writeNode("Property",{name:r,value:t.attributes[r]},n);return this.writeNode("ogc:Filter",new OpenLayers.Filter.FeatureId({fids:[t.fid]}),n),n},Property:function(n){var t=this.createElementNSPlus("wfs:Property");return this.writeNode("Name",n.name,t),null!==n.value&&this.writeNode("Value",n.value,t),t},Name:function(n){return this.createElementNSPlus("wfs:Name",{value:n})},Value:function(n){var t;return n instanceof OpenLayers.Geometry?(t=this.createElementNSPlus("wfs:Value"),n=this.writeNode("feature:_geometry",n).firstChild,t.appendChild(n)):t=this.createElementNSPlus("wfs:Value",{value:n}),t},Delete:function(n){var t=n.feature;return n=n.options,n=this.createElementNSPlus("wfs:Delete",{attributes:{handle:n&&n.handle,typeName:(this.featureNS?this.featurePrefix+":":"")+this.featureType}}),this.featureNS&&n.setAttribute("xmlns:"+this.featurePrefix,this.featureNS),this.writeNode("ogc:Filter",new OpenLayers.Filter.FeatureId({fids:[t.fid]}),n),n}}},schemaLocationAttr:function(n){var t,r,i;n=OpenLayers.Util.extend({featurePrefix:this.featurePrefix,schema:this.schema},n),t=OpenLayers.Util.extend({},this.schemaLocations),n.schema&&(t[n.featurePrefix]=n.schema),n=[];for(i in t)(r=this.namespaces[i])&&n.push(r+" "+t[i]);return n.join(" ")||void 0},setFilterProperty:function(n){if(n.filters)for(var t=0,i=n.filters.length;t<i;++t)OpenLayers.Format.WFST.v1.prototype.setFilterProperty.call(this,n.filters[t]);else n instanceof OpenLayers.Filter.Spatial&&!n.property&&(n.property=this.geometryName)},CLASS_NAME:"OpenLayers.Format.WFST.v1"}),OpenLayers.Geometry.Polygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LinearRing"],getArea:function(){var n=0;if(this.components&&0<this.components.length)for(var n=n+Math.abs(this.components[0].getArea()),t=1,i=this.components.length;t<i;t++)n-=Math.abs(this.components[t].getArea());return n},getGeodesicArea:function(n){var t=0;if(this.components&&0<this.components.length)for(var t=t+Math.abs(this.components[0].getGeodesicArea(n)),i=1,r=this.components.length;i<r;i++)t-=Math.abs(this.components[i].getGeodesicArea(n));return t},containsPoint:function(n){var r=this.components.length,t=!1,u,i;if(0<r&&(t=this.components[0].containsPoint(n),1!==t&&t&&1<r))for(i=1;i<r;++i)if(u=this.components[i].containsPoint(n)){t=1===u?1:!1;break}return t},intersects:function(n){var i=!1,t,r,u;if("OpenLayers.Geometry.Point"==n.CLASS_NAME)i=this.containsPoint(n);else if("OpenLayers.Geometry.LineString"==n.CLASS_NAME||"OpenLayers.Geometry.LinearRing"==n.CLASS_NAME){for(t=0,r=this.components.length;t<r&&!(i=n.intersects(this.components[t]));++t);if(!i)for(t=0,r=n.components.length;t<r&&!(i=this.containsPoint(n.components[t]));++t);}else for(t=0,r=n.components.length;t<r&&!(i=this.intersects(n.components[t]));++t);if(!i&&"OpenLayers.Geometry.Polygon"==n.CLASS_NAME)for(u=this.components[0],t=0,r=u.components.length;t<r&&!(i=n.containsPoint(u.components[t]));++t);return i},distanceTo:function(n,t){return t&&!1===t.edge&&this.intersects(n)?0:OpenLayers.Geometry.Collection.prototype.distanceTo.apply(this,[n,t])},CLASS_NAME:"OpenLayers.Geometry.Polygon"}),OpenLayers.Geometry.Polygon.createRegularPolygon=function(n,t,i,r){var o=Math.PI*(1/i-.5),u,e,f;for(r&&(o+=r/180*Math.PI),e=[],f=0;f<i;++f)u=o+2*f*Math.PI/i,r=n.x+t*Math.cos(u),u=n.y+t*Math.sin(u),e.push(new OpenLayers.Geometry.Point(r,u));return n=new OpenLayers.Geometry.LinearRing(e),new OpenLayers.Geometry.Polygon([n])},OpenLayers.Geometry.MultiPolygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Polygon"],CLASS_NAME:"OpenLayers.Geometry.MultiPolygon"}),OpenLayers.Format.GML=OpenLayers.Class(OpenLayers.Format.XML,{featureNS:"http://mapserver.gis.umn.edu/mapserver",featurePrefix:"feature",featureName:"featureMember",layerName:"features",geometryName:"geometry",collectionName:"FeatureCollection",gmlns:"http://www.opengis.net/gml",extractAttributes:!0,xy:!0,initialize:function(n){this.regExes={trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},OpenLayers.Format.XML.prototype.initialize.apply(this,[n])},read:function(n){var i,t,r;for("string"==typeof n&&(n=OpenLayers.Format.XML.prototype.read.apply(this,[n])),n=this.getElementsByTagNameNS(n.documentElement,this.gmlns,this.featureName),i=[],t=0;t<n.length;t++)r=this.parseFeature(n[t]),r&&i.push(r);return i},parseFeature:function(n){for(var r,f,e,o,u,s,t="MultiPolygon Polygon MultiLineString LineString MultiPoint Point Envelope".split(" "),i=0;i<t.length;++i)if(r=t[i],f=this.getElementsByTagNameNS(n,this.gmlns,r),0<f.length){if(e=this.parseGeometry[r.toLowerCase()])e=e.apply(this,[f[0]]),this.internalProjection&&this.externalProjection&&e.transform(this.externalProjection,this.internalProjection);else throw new TypeError("Unsupported geometry type: "+r);break}for(r=this.getElementsByTagNameNS(n,this.gmlns,"Box"),i=0;i<r.length;++i)t=r[i],f=this.parseGeometry.box.apply(this,[t]),t=t.parentNode,"boundedBy"===(t.localName||t.nodeName.split(":").pop())?o=f:e=f.toGeometry();for(this.extractAttributes&&(u=this.parseAttributes(n)),u=new OpenLayers.Feature.Vector(e,u),u.bounds=o,u.gml={featureType:n.firstChild.nodeName.split(":")[1],featureNS:n.firstChild.namespaceURI,featureNSPrefix:n.firstChild.prefix},n=n.firstChild;n&&(1!=n.nodeType||!(s=n.getAttribute("fid")||n.getAttribute("id")));)n=n.nextSibling;return u.fid=s,u},parseGeometry:{point:function(n){var i,t;return t=[],i=this.getElementsByTagNameNS(n,this.gmlns,"pos"),0<i.length&&(t=i[0].firstChild.nodeValue,t=t.replace(this.regExes.trimSpace,""),t=t.split(this.regExes.splitSpace)),0==t.length&&(i=this.getElementsByTagNameNS(n,this.gmlns,"coordinates"),0<i.length&&(t=i[0].firstChild.nodeValue,t=t.replace(this.regExes.removeSpace,""),t=t.split(","))),0==t.length&&(i=this.getElementsByTagNameNS(n,this.gmlns,"coord"),0<i.length&&(n=this.getElementsByTagNameNS(i[0],this.gmlns,"X"),i=this.getElementsByTagNameNS(i[0],this.gmlns,"Y"),0<n.length&&0<i.length&&(t=[n[0].firstChild.nodeValue,i[0].firstChild.nodeValue]))),2==t.length&&(t[2]=null),this.xy?new OpenLayers.Geometry.Point(t[0],t[1],t[2]):new OpenLayers.Geometry.Point(t[1],t[0],t[2])},multipoint:function(n){var i,r,t;if(n=this.getElementsByTagNameNS(n,this.gmlns,"Point"),i=[],0<n.length)for(t=0;t<n.length;++t)(r=this.parseGeometry.point.apply(this,[n[t]]))&&i.push(r);return new OpenLayers.Geometry.MultiPoint(i)},linestring:function(n,t){var r,i,u,f,e,o,s;if(i=[],u=[],r=this.getElementsByTagNameNS(n,this.gmlns,"posList"),0<r.length)for(i=this.getChildValue(r[0]),i=i.replace(this.regExes.trimSpace,""),i=i.split(this.regExes.splitSpace),f=parseInt(r[0].getAttribute("dimension")),r=0;r<i.length/f;++r)e=r*f,o=i[e],s=i[e+1],e=2==f?null:i[e+2],this.xy?u.push(new OpenLayers.Geometry.Point(o,s,e)):u.push(new OpenLayers.Geometry.Point(s,o,e));if(0==i.length&&(r=this.getElementsByTagNameNS(n,this.gmlns,"coordinates"),0<r.length))for(i=this.getChildValue(r[0]),i=i.replace(this.regExes.trimSpace,""),i=i.replace(this.regExes.trimComma,","),f=i.split(this.regExes.splitSpace),r=0;r<f.length;++r)i=f[r].split(","),2==i.length&&(i[2]=null),this.xy?u.push(new OpenLayers.Geometry.Point(i[0],i[1],i[2])):u.push(new OpenLayers.Geometry.Point(i[1],i[0],i[2]));return i=null,0!=u.length&&(i=t?new OpenLayers.Geometry.LinearRing(u):new OpenLayers.Geometry.LineString(u)),i},multilinestring:function(n){var i,r,t;if(n=this.getElementsByTagNameNS(n,this.gmlns,"LineString"),i=[],0<n.length)for(t=0;t<n.length;++t)(r=this.parseGeometry.linestring.apply(this,[n[t]]))&&i.push(r);return new OpenLayers.Geometry.MultiLineString(i)},polygon:function(n){var i,r,t;if(n=this.getElementsByTagNameNS(n,this.gmlns,"LinearRing"),i=[],0<n.length)for(t=0;t<n.length;++t)(r=this.parseGeometry.linestring.apply(this,[n[t],!0]))&&i.push(r);return new OpenLayers.Geometry.Polygon(i)},multipolygon:function(n){var i,r,t;if(n=this.getElementsByTagNameNS(n,this.gmlns,"Polygon"),i=[],0<n.length)for(t=0;t<n.length;++t)(r=this.parseGeometry.polygon.apply(this,[n[t]]))&&i.push(r);return new OpenLayers.Geometry.MultiPolygon(i)},envelope:function(n){var i=[],t,e,f=this.getElementsByTagNameNS(n,this.gmlns,"lowerCorner"),r,u;return 0<f.length&&(t=[],0<f.length&&(t=f[0].firstChild.nodeValue,t=t.replace(this.regExes.trimSpace,""),t=t.split(this.regExes.splitSpace)),2==t.length&&(t[2]=null),r=this.xy?new OpenLayers.Geometry.Point(t[0],t[1],t[2]):new OpenLayers.Geometry.Point(t[1],t[0],t[2])),n=this.getElementsByTagNameNS(n,this.gmlns,"upperCorner"),0<n.length&&(t=[],0<n.length&&(t=n[0].firstChild.nodeValue,t=t.replace(this.regExes.trimSpace,""),t=t.split(this.regExes.splitSpace)),2==t.length&&(t[2]=null),u=this.xy?new OpenLayers.Geometry.Point(t[0],t[1],t[2]):new OpenLayers.Geometry.Point(t[1],t[0],t[2])),r&&u&&(i.push(new OpenLayers.Geometry.Point(r.x,r.y)),i.push(new OpenLayers.Geometry.Point(u.x,r.y)),i.push(new OpenLayers.Geometry.Point(u.x,u.y)),i.push(new OpenLayers.Geometry.Point(r.x,u.y)),i.push(new OpenLayers.Geometry.Point(r.x,r.y)),i=new OpenLayers.Geometry.LinearRing(i),e=new OpenLayers.Geometry.Polygon([i])),e},box:function(n){var t=this.getElementsByTagNameNS(n,this.gmlns,"coordinates"),i=n=null;return 0<t.length&&(t=t[0].firstChild.nodeValue,t=t.split(" "),2==t.length&&(n=t[0].split(","),i=t[1].split(","))),null!==n&&null!==i?new OpenLayers.Bounds(parseFloat(n[0]),parseFloat(n[1]),parseFloat(i[0]),parseFloat(i[1])):void 0}},parseAttributes:function(n){var u={},r,t,i;for(n=n.firstChild;n;){if(1==n.nodeType){for(n=n.childNodes,r=0;r<n.length;++r)(t=n[r],1==t.nodeType)&&((i=t.childNodes,1==i.length)?(i=i[0],3==i.nodeType||4==i.nodeType)&&(t=t.prefix?t.nodeName.split(":")[1]:t.nodeName,i=i.nodeValue.replace(this.regExes.trimSpace,""),u[t]=i):u[t.nodeName.split(":").pop()]=null);break}n=n.nextSibling}return u},write:function(n){OpenLayers.Util.isArray(n)||(n=[n]);for(var i=this.createElementNS("http://www.opengis.net/wfs","wfs:"+this.collectionName),t=0;t<n.length;t++)i.appendChild(this.createFeatureXML(n[t]));return OpenLayers.Format.XML.prototype.write.apply(this,[i])},createFeatureXML:function(n){var t=this.buildGeometryNode(n.geometry),r=this.createElementNS(this.featureNS,this.featurePrefix+":"+this.geometryName),i,u;r.appendChild(t),t=this.createElementNS(this.gmlns,"gml:"+this.featureName),i=this.createElementNS(this.featureNS,this.featurePrefix+":"+this.layerName),i.setAttribute("fid",n.fid||n.id),i.appendChild(r);for(u in n.attributes){var r=this.createTextNode(n.attributes[u]),f=u.substring(u.lastIndexOf(":")+1),f=this.createElementNS(this.featureNS,this.featurePrefix+":"+f);f.appendChild(r),i.appendChild(f)}return t.appendChild(i),t},buildGeometryNode:function(n){this.externalProjection&&this.internalProjection&&(n=n.clone(),n.transform(this.internalProjection,this.externalProjection));var t=n.CLASS_NAME,t=t.substring(t.lastIndexOf(".")+1);return this.buildGeometry[t.toLowerCase()].apply(this,[n])},buildGeometry:{point:function(n){var t=this.createElementNS(this.gmlns,"gml:Point");return t.appendChild(this.buildCoordinatesNode(n)),t},multipoint:function(n){var r=this.createElementNS(this.gmlns,"gml:MultiPoint"),i,u,t;for(n=n.components,t=0;t<n.length;t++)i=this.createElementNS(this.gmlns,"gml:pointMember"),u=this.buildGeometry.point.apply(this,[n[t]]),i.appendChild(u),r.appendChild(i);return r},linestring:function(n){var t=this.createElementNS(this.gmlns,"gml:LineString");return t.appendChild(this.buildCoordinatesNode(n)),t},multilinestring:function(n){var r=this.createElementNS(this.gmlns,"gml:MultiLineString"),i,u,t;for(n=n.components,t=0;t<n.length;++t)i=this.createElementNS(this.gmlns,"gml:lineStringMember"),u=this.buildGeometry.linestring.apply(this,[n[t]]),i.appendChild(u),r.appendChild(i);return r},linearring:function(n){var t=this.createElementNS(this.gmlns,"gml:LinearRing");return t.appendChild(this.buildCoordinatesNode(n)),t},polygon:function(n){var r=this.createElementNS(this.gmlns,"gml:Polygon"),t,u,i;for(n=n.components,i=0;i<n.length;++i)t=0==i?"outerBoundaryIs":"innerBoundaryIs",t=this.createElementNS(this.gmlns,"gml:"+t),u=this.buildGeometry.linearring.apply(this,[n[i]]),t.appendChild(u),r.appendChild(t);return r},multipolygon:function(n){var r=this.createElementNS(this.gmlns,"gml:MultiPolygon"),i,u,t;for(n=n.components,t=0;t<n.length;++t)i=this.createElementNS(this.gmlns,"gml:polygonMember"),u=this.buildGeometry.polygon.apply(this,[n[t]]),i.appendChild(u),r.appendChild(i);return r},bounds:function(n){var t=this.createElementNS(this.gmlns,"gml:Box");return t.appendChild(this.buildCoordinatesNode(n)),t}},buildCoordinatesNode:function(n){var i=this.createElementNS(this.gmlns,"gml:coordinates"),t,r;if(i.setAttribute("decimal","."),i.setAttribute("cs",","),i.setAttribute("ts"," "),t=[],n instanceof OpenLayers.Bounds)t.push(n.left+","+n.bottom),t.push(n.right+","+n.top);else for(n=n.components?n.components:[n],r=0;r<n.length;r++)t.push(n[r].x+","+n[r].y);return t=this.createTextNode(t.join(" ")),i.appendChild(t),i},CLASS_NAME:"OpenLayers.Format.GML"}),OpenLayers.Format.GML||(OpenLayers.Format.GML={}),OpenLayers.Format.GML.Base=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",wfs:"http://www.opengis.net/wfs"},defaultPrefix:"gml",schemaLocation:null,featureType:null,featureNS:null,geometryName:"geometry",extractAttributes:!0,srsName:null,xy:!0,geometryTypes:null,singleFeatureType:null,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g,featureMember:/^(.*:)?featureMembers?$/},initialize:function(n){OpenLayers.Format.XML.prototype.initialize.apply(this,[n]),this.setGeometryTypes(),n&&n.featureNS&&this.setNamespace("feature",n.featureNS),this.singleFeatureType=!n||"string"==typeof n.featureType},read:function(n){var i,t,r;if("string"==typeof n&&(n=OpenLayers.Format.XML.prototype.read.apply(this,[n])),n&&9==n.nodeType&&(n=n.documentElement),i=[],this.readNode(n,{features:i},!0),0==i.length)if(t=this.getElementsByTagNameNS(n,this.namespaces.gml,"featureMember"),t.length)for(n=0,r=t.length;n<r;++n)this.readNode(t[n],{features:i},!0);else t=this.getElementsByTagNameNS(n,this.namespaces.gml,"featureMembers"),t.length&&this.readNode(t[0],{features:i},!0);return i},readNode:function(n,t,i){return!0===i&&!0===this.autoConfig&&(this.featureType=null,delete this.namespaceAlias[this.featureNS],delete this.namespaces.feature,this.featureNS=null),this.featureNS||n.prefix in this.namespaces||n.parentNode.namespaceURI!=this.namespaces.gml||!this.regExes.featureMember.test(n.parentNode.nodeName)||(this.featureType=n.nodeName.split(":").pop(),this.setNamespace("feature",n.namespaceURI),this.featureNS=n.namespaceURI,this.autoConfig=!0),OpenLayers.Format.XML.prototype.readNode.apply(this,[n,t])},readers:{gml:{_inherit:function(){},featureMember:function(n,t){this.readChildNodes(n,t)},featureMembers:function(n,t){this.readChildNodes(n,t)},name:function(n,t){t.name=this.getChildValue(n)},boundedBy:function(n,t){var i={};this.readChildNodes(n,i),i.components&&0<i.components.length&&(t.bounds=i.components[0])},Point:function(n,t){var i={points:[]};this.readChildNodes(n,i),t.components||(t.components=[]),t.components.push(i.points[0])},coordinates:function(n,t){for(var r=this.getChildValue(n).replace(this.regExes.trimSpace,""),r=r.replace(this.regExes.trimComma,","),r=r.split(this.regExes.splitSpace),i,f=r.length,e=Array(f),u=0;u<f;++u)i=r[u].split(","),e[u]=this.xy?new OpenLayers.Geometry.Point(i[0],i[1],i[2]):new OpenLayers.Geometry.Point(i[1],i[0],i[2]);t.points=e},coord:function(n,t){var i={};this.readChildNodes(n,i),t.points||(t.points=[]),t.points.push(new OpenLayers.Geometry.Point(i.x,i.y,i.z))},X:function(n,t){t.x=this.getChildValue(n)},Y:function(n,t){t.y=this.getChildValue(n)},Z:function(n,t){t.z=this.getChildValue(n)},MultiPoint:function(n,t){var i={components:[]};this.readers.gml._inherit.apply(this,[n,i,t]),this.readChildNodes(n,i),t.components=[new OpenLayers.Geometry.MultiPoint(i.components)]},pointMember:function(n,t){this.readChildNodes(n,t)},LineString:function(n,t){var i={};this.readers.gml._inherit.apply(this,[n,i,t]),this.readChildNodes(n,i),t.components||(t.components=[]),t.components.push(new OpenLayers.Geometry.LineString(i.points))},MultiLineString:function(n,t){var i={components:[]};this.readers.gml._inherit.apply(this,[n,i,t]),this.readChildNodes(n,i),t.components=[new OpenLayers.Geometry.MultiLineString(i.components)]},lineStringMember:function(n,t){this.readChildNodes(n,t)},Polygon:function(n,t){var i={outer:null,inner:[]};this.readers.gml._inherit.apply(this,[n,i,t]),this.readChildNodes(n,i),i.inner.unshift(i.outer),t.components||(t.components=[]),t.components.push(new OpenLayers.Geometry.Polygon(i.inner))},LinearRing:function(n,t){var i={};this.readers.gml._inherit.apply(this,[n,i]),this.readChildNodes(n,i),t.components=[new OpenLayers.Geometry.LinearRing(i.points)]},MultiPolygon:function(n,t){var i={components:[]};this.readers.gml._inherit.apply(this,[n,i,t]),this.readChildNodes(n,i),t.components=[new OpenLayers.Geometry.MultiPolygon(i.components)]},polygonMember:function(n,t){this.readChildNodes(n,t)},GeometryCollection:function(n,t){var i={components:[]};this.readers.gml._inherit.apply(this,[n,i,t]),this.readChildNodes(n,i),t.components=[new OpenLayers.Geometry.Collection(i.components)]},geometryMember:function(n,t){this.readChildNodes(n,t)}},feature:{"*":function(n,t){var i,r=n.localName||n.nodeName.split(":").pop();t.features?this.singleFeatureType||-1===OpenLayers.Util.indexOf(this.featureType,r)?r===this.featureType&&(i="_typeName"):i="_typeName":0==n.childNodes.length||1==n.childNodes.length&&3==n.firstChild.nodeType?this.extractAttributes&&(i="_attribute"):i="_geometry",i&&this.readers.feature[i].apply(this,[n,t])},_typeName:function(n,t){var i={components:[],attributes:{}},r,u;this.readChildNodes(n,i),i.name&&(i.attributes.name=i.name),r=new OpenLayers.Feature.Vector(i.components[0],i.attributes),this.singleFeatureType||(r.type=n.nodeName.split(":").pop(),r.namespace=n.namespaceURI),u=n.getAttribute("fid")||this.getAttributeNS(n,this.namespaces.gml,"id"),u&&(r.fid=u),this.internalProjection&&this.externalProjection&&r.geometry&&r.geometry.transform(this.externalProjection,this.internalProjection),i.bounds&&(r.bounds=i.bounds),t.features.push(r)},_geometry:function(n,t){this.geometryName||(this.geometryName=n.nodeName.split(":").pop()),this.readChildNodes(n,t)},_attribute:function(n,t){var i=n.localName||n.nodeName.split(":").pop(),r=this.getChildValue(n);t.attributes[i]=r}},wfs:{FeatureCollection:function(n,t){this.readChildNodes(n,t)}}},write:function(n){var t;return t=OpenLayers.Util.isArray(n)?"featureMembers":"featureMember",n=this.writeNode("gml:"+t,n),this.setAttributeNS(n,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[n])},writers:{gml:{featureMember:function(n){var t=this.createElementNSPlus("gml:featureMember");return this.writeNode("feature:_typeName",n,t),t},MultiPoint:function(n){var i=this.createElementNSPlus("gml:MultiPoint"),t,r;for(n=n.components||[n],t=0,r=n.length;t<r;++t)this.writeNode("pointMember",n[t],i);return i},pointMember:function(n){var t=this.createElementNSPlus("gml:pointMember");return this.writeNode("Point",n,t),t},MultiLineString:function(n){var i=this.createElementNSPlus("gml:MultiLineString"),t,r;for(n=n.components||[n],t=0,r=n.length;t<r;++t)this.writeNode("lineStringMember",n[t],i);return i},lineStringMember:function(n){var t=this.createElementNSPlus("gml:lineStringMember");return this.writeNode("LineString",n,t),t},MultiPolygon:function(n){var i=this.createElementNSPlus("gml:MultiPolygon"),t,r;for(n=n.components||[n],t=0,r=n.length;t<r;++t)this.writeNode("polygonMember",n[t],i);return i},polygonMember:function(n){var t=this.createElementNSPlus("gml:polygonMember");return this.writeNode("Polygon",n,t),t},GeometryCollection:function(n){for(var i=this.createElementNSPlus("gml:GeometryCollection"),t=0,r=n.components.length;t<r;++t)this.writeNode("geometryMember",n.components[t],i);return i},geometryMember:function(n){var t=this.createElementNSPlus("gml:geometryMember");return n=this.writeNode("feature:_geometry",n),t.appendChild(n.firstChild),t}},feature:{_typeName:function(n){var t=this.createElementNSPlus("feature:"+this.featureType,{attributes:{fid:n.fid}}),i,r;n.geometry&&this.writeNode("feature:_geometry",n.geometry,t);for(i in n.attributes)r=n.attributes[i],null!=r&&this.writeNode("feature:_attribute",{name:i,value:r},t);return t},_geometry:function(n){this.externalProjection&&this.internalProjection&&(n=n.clone().transform(this.internalProjection,this.externalProjection));var t=this.createElementNSPlus("feature:"+this.geometryName);return n=this.writeNode("gml:"+this.geometryTypes[n.CLASS_NAME],n,t),this.srsName&&n.setAttribute("srsName",this.srsName),t},_attribute:function(n){return this.createElementNSPlus("feature:"+n.name,{value:n.value})}},wfs:{FeatureCollection:function(n){for(var i=this.createElementNSPlus("wfs:FeatureCollection"),t=0,r=n.length;t<r;++t)this.writeNode("gml:featureMember",n[t],i);return i}}},setGeometryTypes:function(){this.geometryTypes={"OpenLayers.Geometry.Point":"Point","OpenLayers.Geometry.MultiPoint":"MultiPoint","OpenLayers.Geometry.LineString":"LineString","OpenLayers.Geometry.MultiLineString":"MultiLineString","OpenLayers.Geometry.Polygon":"Polygon","OpenLayers.Geometry.MultiPolygon":"MultiPolygon","OpenLayers.Geometry.Collection":"GeometryCollection"}},CLASS_NAME:"OpenLayers.Format.GML.Base"}),OpenLayers.Format.GML.v2=OpenLayers.Class(OpenLayers.Format.GML.Base,{schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",initialize:function(n){OpenLayers.Format.GML.Base.prototype.initialize.apply(this,[n])},readers:{gml:OpenLayers.Util.applyDefaults({outerBoundaryIs:function(n,t){var i={};this.readChildNodes(n,i),t.outer=i.components[0]},innerBoundaryIs:function(n,t){var i={};this.readChildNodes(n,i),t.inner.push(i.components[0])},Box:function(n,t){var i={},r;this.readChildNodes(n,i),t.components||(t.components=[]),r=i.points[0],i=i.points[1],t.components.push(new OpenLayers.Bounds(r.x,r.y,i.x,i.y))}},OpenLayers.Format.GML.Base.prototype.readers.gml),feature:OpenLayers.Format.GML.Base.prototype.readers.feature,wfs:OpenLayers.Format.GML.Base.prototype.readers.wfs},write:function(n){var t;return t=OpenLayers.Util.isArray(n)?"wfs:FeatureCollection":"gml:featureMember",n=this.writeNode(t,n),this.setAttributeNS(n,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[n])},writers:{gml:OpenLayers.Util.applyDefaults({Point:function(n){var t=this.createElementNSPlus("gml:Point");return this.writeNode("coordinates",[n],t),t},coordinates:function(n){for(var u=n.length,r=Array(u),t,i=0;i<u;++i)t=n[i],r[i]=this.xy?t.x+","+t.y:t.y+","+t.x,void 0!=t.z&&(r[i]+=","+t.z);return this.createElementNSPlus("gml:coordinates",{attributes:{decimal:".",cs:",",ts:" "},value:1==u?r[0]:r.join(" ")})},LineString:function(n){var t=this.createElementNSPlus("gml:LineString");return this.writeNode("coordinates",n.components,t),t},Polygon:function(n){var i=this.createElementNSPlus("gml:Polygon"),t;for(this.writeNode("outerBoundaryIs",n.components[0],i),t=1;t<n.components.length;++t)this.writeNode("innerBoundaryIs",n.components[t],i);return i},outerBoundaryIs:function(n){var t=this.createElementNSPlus("gml:outerBoundaryIs");return this.writeNode("LinearRing",n,t),t},innerBoundaryIs:function(n){var t=this.createElementNSPlus("gml:innerBoundaryIs");return this.writeNode("LinearRing",n,t),t},LinearRing:function(n){var t=this.createElementNSPlus("gml:LinearRing");return this.writeNode("coordinates",n.components,t),t},Box:function(n){var t=this.createElementNSPlus("gml:Box");return this.writeNode("coordinates",[{x:n.left,y:n.bottom},{x:n.right,y:n.top}],t),this.srsName&&t.setAttribute("srsName",this.srsName),t}},OpenLayers.Format.GML.Base.prototype.writers.gml),feature:OpenLayers.Format.GML.Base.prototype.writers.feature,wfs:OpenLayers.Format.GML.Base.prototype.writers.wfs},CLASS_NAME:"OpenLayers.Format.GML.v2"}),OpenLayers.Filter.Function=OpenLayers.Class(OpenLayers.Filter,{name:null,params:null,CLASS_NAME:"OpenLayers.Filter.Function"}),OpenLayers.Date={dateRegEx:/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/,toISOString:function(){return"toISOString"in Date.prototype?function(n){return n.toISOString()}:function(n){return isNaN(n.getTime())?"Invalid Date":n.getUTCFullYear()+"-"+OpenLayers.Number.zeroPad(n.getUTCMonth()+1,2)+"-"+OpenLayers.Number.zeroPad(n.getUTCDate(),2)+"T"+OpenLayers.Number.zeroPad(n.getUTCHours(),2)+":"+OpenLayers.Number.zeroPad(n.getUTCMinutes(),2)+":"+OpenLayers.Number.zeroPad(n.getUTCSeconds(),2)+"."+OpenLayers.Number.zeroPad(n.getUTCMilliseconds(),3)+"Z"}}(),parse:function(n){var t,i,r;if((n=n.match(this.dateRegEx))&&(n[1]||n[7])){if(t=parseInt(n[1],10)||0,i=parseInt(n[2],10)-1||0,r=parseInt(n[3],10)||1,t=new Date(Date.UTC(t,i,r)),i=n[7]){var r=parseInt(n[4],10),e=parseInt(n[5],10),u=parseFloat(n[6]),f=u|0,u=Math.round(1e3*(u-f));t.setUTCHours(r,e,f,u),"Z"!==i&&(i=parseInt(i,10),n=parseInt(n[8],10)||0,n=-1e3*(3600*i+60*n),t=new Date(t.getTime()+n))}}else t=new Date("invalid");return t}},OpenLayers.Format.Filter.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ogc:"http://www.opengis.net/ogc",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"ogc",schemaLocation:null,initialize:function(n){OpenLayers.Format.XML.prototype.initialize.apply(this,[n])},read:function(n){var t={};return this.readers.ogc.Filter.apply(this,[n,t]),t.filter},readers:{ogc:{_expression:function(n){for(var i="",t=n.firstChild;t;t=t.nextSibling)switch(t.nodeType){case 1:n=this.readNode(t),n.property?i+="${"+n.property+"}":void 0!==n.value&&(i+=n.value);break;case 3:case 4:i+=t.nodeValue}return i},Filter:function(n,t){var i={fids:[],filters:[]};this.readChildNodes(n,i),0<i.fids.length?t.filter=new OpenLayers.Filter.FeatureId({fids:i.fids}):0<i.filters.length&&(t.filter=i.filters[0])},FeatureId:function(n,t){var i=n.getAttribute("fid");i&&t.fids.push(i)},And:function(n,t){var i=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND});this.readChildNodes(n,i),t.filters.push(i)},Or:function(n,t){var i=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.OR});this.readChildNodes(n,i),t.filters.push(i)},Not:function(n,t){var i=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.NOT});this.readChildNodes(n,i),t.filters.push(i)},PropertyIsLessThan:function(n,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LESS_THAN});this.readChildNodes(n,i),t.filters.push(i)},PropertyIsGreaterThan:function(n,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.GREATER_THAN});this.readChildNodes(n,i),t.filters.push(i)},PropertyIsLessThanOrEqualTo:function(n,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO});this.readChildNodes(n,i),t.filters.push(i)},PropertyIsGreaterThanOrEqualTo:function(n,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO});this.readChildNodes(n,i),t.filters.push(i)},PropertyIsBetween:function(n,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN});this.readChildNodes(n,i),t.filters.push(i)},Literal:function(n,t){t.value=OpenLayers.String.numericIf(this.getChildValue(n),!0)},PropertyName:function(n,t){t.property=this.getChildValue(n)},LowerBoundary:function(n,t){t.lowerBoundary=OpenLayers.String.numericIf(this.readers.ogc._expression.call(this,n),!0)},UpperBoundary:function(n,t){t.upperBoundary=OpenLayers.String.numericIf(this.readers.ogc._expression.call(this,n),!0)},Intersects:function(n,t){this.readSpatial(n,t,OpenLayers.Filter.Spatial.INTERSECTS)},Within:function(n,t){this.readSpatial(n,t,OpenLayers.Filter.Spatial.WITHIN)},Contains:function(n,t){this.readSpatial(n,t,OpenLayers.Filter.Spatial.CONTAINS)},DWithin:function(n,t){this.readSpatial(n,t,OpenLayers.Filter.Spatial.DWITHIN)},Distance:function(n,t){t.distance=parseInt(this.getChildValue(n)),t.distanceUnits=n.getAttribute("units")},Function:function(){},PropertyIsNull:function(n,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.IS_NULL});this.readChildNodes(n,i),t.filters.push(i)}}},readSpatial:function(n,t,i){i=new OpenLayers.Filter.Spatial({type:i}),this.readChildNodes(n,i),i.value=i.components[0],delete i.components,t.filters.push(i)},encodeLiteral:function(n){return n instanceof Date&&(n=OpenLayers.Date.toISOString(n)),n},writeOgcExpression:function(n,t){return n instanceof OpenLayers.Filter.Function?this.writeNode("Function",n,t):this.writeNode("Literal",n,t),t},write:function(n){return this.writers.ogc.Filter.apply(this,[n])},writers:{ogc:{Filter:function(n){var t=this.createElementNSPlus("ogc:Filter");return this.writeNode(this.getFilterType(n),n,t),t},_featureIds:function(n){for(var i=this.createDocumentFragment(),t=0,r=n.fids.length;t<r;++t)this.writeNode("ogc:FeatureId",n.fids[t],i);return i},FeatureId:function(n){return this.createElementNSPlus("ogc:FeatureId",{attributes:{fid:n}})},And:function(n){for(var r=this.createElementNSPlus("ogc:And"),t,i=0,u=n.filters.length;i<u;++i)t=n.filters[i],this.writeNode(this.getFilterType(t),t,r);return r},Or:function(n){for(var r=this.createElementNSPlus("ogc:Or"),t,i=0,u=n.filters.length;i<u;++i)t=n.filters[i],this.writeNode(this.getFilterType(t),t,r);return r},Not:function(n){var t=this.createElementNSPlus("ogc:Not");return n=n.filters[0],this.writeNode(this.getFilterType(n),n,t),t},PropertyIsLessThan:function(n){var t=this.createElementNSPlus("ogc:PropertyIsLessThan");return this.writeNode("PropertyName",n,t),this.writeOgcExpression(n.value,t),t},PropertyIsGreaterThan:function(n){var t=this.createElementNSPlus("ogc:PropertyIsGreaterThan");return this.writeNode("PropertyName",n,t),this.writeOgcExpression(n.value,t),t},PropertyIsLessThanOrEqualTo:function(n){var t=this.createElementNSPlus("ogc:PropertyIsLessThanOrEqualTo");return this.writeNode("PropertyName",n,t),this.writeOgcExpression(n.value,t),t},PropertyIsGreaterThanOrEqualTo:function(n){var t=this.createElementNSPlus("ogc:PropertyIsGreaterThanOrEqualTo");return this.writeNode("PropertyName",n,t),this.writeOgcExpression(n.value,t),t},PropertyIsBetween:function(n){var t=this.createElementNSPlus("ogc:PropertyIsBetween");return this.writeNode("PropertyName",n,t),this.writeNode("LowerBoundary",n,t),this.writeNode("UpperBoundary",n,t),t},PropertyName:function(n){return this.createElementNSPlus("ogc:PropertyName",{value:n.property})},Literal:function(n){return this.createElementNSPlus("ogc:Literal",{value:(this.encodeLiteral||OpenLayers.Format.Filter.v1.prototype.encodeLiteral)(n)})},LowerBoundary:function(n){var t=this.createElementNSPlus("ogc:LowerBoundary");return this.writeOgcExpression(n.lowerBoundary,t),t},UpperBoundary:function(n){var t=this.createElementNSPlus("ogc:UpperBoundary");return this.writeNode("Literal",n.upperBoundary,t),t},INTERSECTS:function(n){return this.writeSpatial(n,"Intersects")},WITHIN:function(n){return this.writeSpatial(n,"Within")},CONTAINS:function(n){return this.writeSpatial(n,"Contains")},DWITHIN:function(n){var t=this.writeSpatial(n,"DWithin");return this.writeNode("Distance",n,t),t},Distance:function(n){return this.createElementNSPlus("ogc:Distance",{attributes:{units:n.distanceUnits},value:n.distance})},Function:function(n){var i=this.createElementNSPlus("ogc:Function",{attributes:{name:n.name}}),t,r;for(n=n.params,t=0,r=n.length;t<r;t++)this.writeOgcExpression(n[t],i);return i},PropertyIsNull:function(n){var t=this.createElementNSPlus("ogc:PropertyIsNull");return this.writeNode("PropertyName",n,t),t}}},getFilterType:function(n){var t=this.filterMap[n.type];if(!t)throw"Filter writing not supported for rule type: "+n.type;return t},filterMap:{"&&":"And","||":"Or","!":"Not","==":"PropertyIsEqualTo","!=":"PropertyIsNotEqualTo","<":"PropertyIsLessThan",">":"PropertyIsGreaterThan","<=":"PropertyIsLessThanOrEqualTo",">=":"PropertyIsGreaterThanOrEqualTo","..":"PropertyIsBetween","~":"PropertyIsLike",NULL:"PropertyIsNull",BBOX:"BBOX",DWITHIN:"DWITHIN",WITHIN:"WITHIN",CONTAINS:"CONTAINS",INTERSECTS:"INTERSECTS",FID:"_featureIds"},CLASS_NAME:"OpenLayers.Format.Filter.v1"}),OpenLayers.Format.Filter.v1_0_0=OpenLayers.Class(OpenLayers.Format.GML.v2,OpenLayers.Format.Filter.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/ogc/filter/1.0.0/filter.xsd",initialize:function(n){OpenLayers.Format.GML.v2.prototype.initialize.apply(this,[n])},readers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(n,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO});this.readChildNodes(n,i),t.filters.push(i)},PropertyIsNotEqualTo:function(n,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.NOT_EQUAL_TO});this.readChildNodes(n,i),t.filters.push(i)},PropertyIsLike:function(n,t){var i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LIKE});this.readChildNodes(n,i);var r=n.getAttribute("wildCard"),u=n.getAttribute("singleChar"),f=n.getAttribute("escape");i.value2regex(r,u,f),t.filters.push(i)}},OpenLayers.Format.Filter.v1.prototype.readers.ogc),gml:OpenLayers.Format.GML.v2.prototype.readers.gml,feature:OpenLayers.Format.GML.v2.prototype.readers.feature},writers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(n){var t=this.createElementNSPlus("ogc:PropertyIsEqualTo");return this.writeNode("PropertyName",n,t),this.writeOgcExpression(n.value,t),t},PropertyIsNotEqualTo:function(n){var t=this.createElementNSPlus("ogc:PropertyIsNotEqualTo");return this.writeNode("PropertyName",n,t),this.writeOgcExpression(n.value,t),t},PropertyIsLike:function(n){var t=this.createElementNSPlus("ogc:PropertyIsLike",{attributes:{wildCard:"*",singleChar:".",escape:"!"}});return this.writeNode("PropertyName",n,t),this.writeNode("Literal",n.regex2value(),t),t},BBOX:function(n){var t=this.createElementNSPlus("ogc:BBOX"),i;return n.property&&this.writeNode("PropertyName",n,t),i=this.writeNode("gml:Box",n.value,t),n.projection&&i.setAttribute("srsName",n.projection),t}},OpenLayers.Format.Filter.v1.prototype.writers.ogc),gml:OpenLayers.Format.GML.v2.prototype.writers.gml,feature:OpenLayers.Format.GML.v2.prototype.writers.feature},writeSpatial:function(n,t){var i=this.createElementNSPlus("ogc:"+t),r;return this.writeNode("PropertyName",n,i),n.value instanceof OpenLayers.Filter.Function?this.writeNode("Function",n.value,i):(r=n.value instanceof OpenLayers.Geometry?this.writeNode("feature:_geometry",n.value).firstChild:this.writeNode("gml:Box",n.value),n.projection&&r.setAttribute("srsName",n.projection),i.appendChild(r)),i},CLASS_NAME:"OpenLayers.Format.Filter.v1_0_0"}),OpenLayers.Format.WFST.v1_0_0=OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0,OpenLayers.Format.WFST.v1,{version:"1.0.0",srsNameInQuery:!1,schemaLocations:{wfs:"http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd"},initialize:function(n){OpenLayers.Format.Filter.v1_0_0.prototype.initialize.apply(this,[n]),OpenLayers.Format.WFST.v1.prototype.initialize.apply(this,[n])},readNode:function(){return OpenLayers.Format.GML.v2.prototype.readNode.apply(this,arguments)},readers:{wfs:OpenLayers.Util.applyDefaults({WFS_TransactionResponse:function(n,t){t.insertIds=[],t.success=!1,this.readChildNodes(n,t)},InsertResult:function(n,t){var i={fids:[]};this.readChildNodes(n,i),t.insertIds=t.insertIds.concat(i.fids)},TransactionResult:function(n,t){this.readChildNodes(n,t)},Status:function(n,t){this.readChildNodes(n,t)},SUCCESS:function(n,t){t.success=!0}},OpenLayers.Format.WFST.v1.prototype.readers.wfs),gml:OpenLayers.Format.GML.v2.prototype.readers.gml,feature:OpenLayers.Format.GML.v2.prototype.readers.feature,ogc:OpenLayers.Format.Filter.v1_0_0.prototype.readers.ogc},writers:{wfs:OpenLayers.Util.applyDefaults({Query:function(n){var i,t,r;if(n=OpenLayers.Util.extend({featureNS:this.featureNS,featurePrefix:this.featurePrefix,featureType:this.featureType,srsName:this.srsName,srsNameInQuery:this.srsNameInQuery},n),t=n.featurePrefix,i=this.createElementNSPlus("wfs:Query",{attributes:{typeName:(t?t+":":"")+n.featureType}}),n.srsNameInQuery&&n.srsName&&i.setAttribute("srsName",n.srsName),n.featureNS&&i.setAttribute("xmlns:"+t,n.featureNS),n.propertyNames)for(t=0,r=n.propertyNames.length;t<r;t++)this.writeNode("ogc:PropertyName",{property:n.propertyNames[t]},i);return n.filter&&(this.setFilterProperty(n.filter),this.writeNode("ogc:Filter",n.filter,i)),i}},OpenLayers.Format.WFST.v1.prototype.writers.wfs),gml:OpenLayers.Format.GML.v2.prototype.writers.gml,feature:OpenLayers.Format.GML.v2.prototype.writers.feature,ogc:OpenLayers.Format.Filter.v1_0_0.prototype.writers.ogc},CLASS_NAME:"OpenLayers.Format.WFST.v1_0_0"}),OpenLayers.ElementsIndexer=OpenLayers.Class({maxZIndex:null,order:null,indices:null,compare:null,initialize:function(n){this.compare=n?OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_Y_ORDER:OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_DRAWING_ORDER,this.clear()},insert:function(n){var u,i,t,r;for(this.exists(n)&&this.remove(n),u=n.id,this.determineZIndex(n),i=-1,t=this.order.length;1<t-i;)r=parseInt((i+t)/2),0<this.compare(this,n,OpenLayers.Util.getElement(this.order[r]))?i=r:t=r;return this.order.splice(t,0,u),this.indices[u]=this.getZIndex(n),this.getNextElement(t)},remove:function(n){n=n.id;var t=OpenLayers.Util.indexOf(this.order,n);0<=t&&(this.order.splice(t,1),delete this.indices[n],this.maxZIndex=0<this.order.length?this.indices[this.order[this.order.length-1]]:0)},clear:function(){this.order=[],this.indices={},this.maxZIndex=0},exists:function(n){return null!=this.indices[n.id]},getZIndex:function(n){return n._style.graphicZIndex},determineZIndex:function(n){var t=n._style.graphicZIndex;null==t?(t=this.maxZIndex,n._style.graphicZIndex=t):t>this.maxZIndex&&(this.maxZIndex=t)},getNextElement:function(n){if(n+=1,n<this.order.length){var t=OpenLayers.Util.getElement(this.order[n]);return void 0==t&&(t=this.getNextElement(n)),t}return null},CLASS_NAME:"OpenLayers.ElementsIndexer"}),OpenLayers.ElementsIndexer.IndexingMethods={Z_ORDER:function(n,t,i){t=n.getZIndex(t);var r=0;return i&&(n=n.getZIndex(i),r=t-n),r},Z_ORDER_DRAWING_ORDER:function(n,t,i){return n=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(n,t,i),i&&0==n&&(n=1),n},Z_ORDER_Y_ORDER:function(n,t,i){return n=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(n,t,i),i&&0===n&&(t=i._boundsBottom-t._boundsBottom,n=0===t?1:t),n}},OpenLayers.Renderer.Elements=OpenLayers.Class(OpenLayers.Renderer,{rendererRoot:null,root:null,vectorRoot:null,textRoot:null,xmlns:null,xOffset:0,indexer:null,BACKGROUND_ID_SUFFIX:"_background",LABEL_ID_SUFFIX:"_label",LABEL_OUTLINE_SUFFIX:"_outline",initialize:function(n,t){OpenLayers.Renderer.prototype.initialize.apply(this,arguments),this.rendererRoot=this.createRenderRoot(),this.root=this.createRoot("_root"),this.vectorRoot=this.createRoot("_vroot"),this.textRoot=this.createRoot("_troot"),this.root.appendChild(this.vectorRoot),this.root.appendChild(this.textRoot),this.rendererRoot.appendChild(this.root),this.container.appendChild(this.rendererRoot),t&&(t.zIndexing||t.yOrdering)&&(this.indexer=new OpenLayers.ElementsIndexer(t.yOrdering))},destroy:function(){this.clear(),this.xmlns=this.root=this.rendererRoot=null,OpenLayers.Renderer.prototype.destroy.apply(this,arguments)},clear:function(){var t,n=this.vectorRoot;if(n)for(;t=n.firstChild;)n.removeChild(t);if(n=this.textRoot)for(;t=n.firstChild;)n.removeChild(t);this.indexer&&this.indexer.clear()},setExtent:function(n,t){var u=OpenLayers.Renderer.prototype.setExtent.apply(this,arguments),f=this.getResolution(),r,i;return this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(i=n.getWidth()/this.map.getExtent().getWidth(),n=n.scale(1/i),i=this.map.getMaxExtent(),i.right>n.left&&i.right<n.right?r=!0:i.left>n.left&&i.left<n.right&&(r=!1),(r!==this.rightOfDateLine||t)&&(u=!1,this.xOffset=!0===r?i.getWidth()/f:0),this.rightOfDateLine=r),u},getNodeType:function(){},drawGeometry:function(n,t,i){var r=n.CLASS_NAME,u=!0,f;if("OpenLayers.Geometry.Collection"==r||"OpenLayers.Geometry.MultiPoint"==r||"OpenLayers.Geometry.MultiLineString"==r||"OpenLayers.Geometry.MultiPolygon"==r){for(r=0,f=n.components.length;r<f;r++)u=this.drawGeometry(n.components[r],t,i)&&u;return u}return r=u=!1,"none"!=t.display&&(t.backgroundGraphic?this.redrawBackgroundNode(n.id,n,t,i):r=!0,u=this.redrawNode(n.id,n,t,i)),!1==u&&(t=document.getElementById(n.id))&&(t._style.backgroundGraphic&&(r=!0),t.parentNode.removeChild(t)),r&&(t=document.getElementById(n.id+this.BACKGROUND_ID_SUFFIX))&&t.parentNode.removeChild(t),u},redrawNode:function(n,t,i,r){return(i=this.applyDefaultSymbolizer(i),n=this.nodeFactory(n,this.getNodeType(t,i)),n._featureId=r,n._boundsBottom=t.getBounds().bottom,n._geometryClass=t.CLASS_NAME,n._style=i,t=this.drawGeometryNode(n,t,i),!1===t)?!1:(n=t.node,this.indexer?(i=this.indexer.insert(n))?this.vectorRoot.insertBefore(n,i):this.vectorRoot.appendChild(n):n.parentNode!==this.vectorRoot&&this.vectorRoot.appendChild(n),this.postDraw(n),t.complete)},redrawBackgroundNode:function(n,t,i){return i=OpenLayers.Util.extend({},i),i.externalGraphic=i.backgroundGraphic,i.graphicXOffset=i.backgroundXOffset,i.graphicYOffset=i.backgroundYOffset,i.graphicZIndex=i.backgroundGraphicZIndex,i.graphicWidth=i.backgroundWidth||i.graphicWidth,i.graphicHeight=i.backgroundHeight||i.graphicHeight,i.backgroundGraphic=null,i.backgroundXOffset=null,i.backgroundYOffset=null,i.backgroundGraphicZIndex=null,this.redrawNode(n+this.BACKGROUND_ID_SUFFIX,t,i,null)},drawGeometryNode:function(n,t,i){i=i||n._style;var u={isFilled:void 0===i.fill?!0:i.fill,isStroked:void 0===i.stroke?!!i.strokeWidth:i.stroke},r;switch(t.CLASS_NAME){case"OpenLayers.Geometry.Point":!1===i.graphic&&(u.isFilled=!1,u.isStroked=!1),r=this.drawPoint(n,t);break;case"OpenLayers.Geometry.LineString":u.isFilled=!1,r=this.drawLineString(n,t);break;case"OpenLayers.Geometry.LinearRing":r=this.drawLinearRing(n,t);break;case"OpenLayers.Geometry.Polygon":r=this.drawPolygon(n,t);break;case"OpenLayers.Geometry.Rectangle":r=this.drawRectangle(n,t)}return n._options=u,!1!=r?{node:this.setStyle(n,i,u,t),complete:r}:!1},postDraw:function(){},drawPoint:function(){},drawLineString:function(){},drawLinearRing:function(){},drawPolygon:function(){},drawRectangle:function(){},drawCircle:function(){},removeText:function(n){var t=document.getElementById(n+this.LABEL_ID_SUFFIX);t&&this.textRoot.removeChild(t),(n=document.getElementById(n+this.LABEL_OUTLINE_SUFFIX))&&this.textRoot.removeChild(n)},getFeatureIdFromEvent:function(n){var t=n.target,i=t&&t.correspondingUseElement;return(i?i:t||n.srcElement)._featureId},eraseGeometry:function(n,t){if("OpenLayers.Geometry.MultiPoint"==n.CLASS_NAME||"OpenLayers.Geometry.MultiLineString"==n.CLASS_NAME||"OpenLayers.Geometry.MultiPolygon"==n.CLASS_NAME||"OpenLayers.Geometry.Collection"==n.CLASS_NAME)for(var i=0,r=n.components.length;i<r;i++)this.eraseGeometry(n.components[i],t);else(i=OpenLayers.Util.getElement(n.id))&&i.parentNode&&(i.geometry&&(i.geometry.destroy(),i.geometry=null),i.parentNode.removeChild(i),this.indexer&&this.indexer.remove(i),i._style.backgroundGraphic&&(i=OpenLayers.Util.getElement(n.id+this.BACKGROUND_ID_SUFFIX))&&i.parentNode&&i.parentNode.removeChild(i))},nodeFactory:function(n,t){var i=OpenLayers.Util.getElement(n);return i?this.nodeTypeCompare(i,t)||(i.parentNode.removeChild(i),i=this.nodeFactory(n,t)):i=this.createNode(t,n),i},nodeTypeCompare:function(){},createNode:function(){},moveRoot:function(n){var t=this.root;n.root.parentNode==this.rendererRoot&&(t=n.root),t.parentNode.removeChild(t),n.rendererRoot.appendChild(t)},getRenderLayerId:function(){return this.root.parentNode.parentNode.id},isComplexSymbol:function(n){return"circle"!=n&&!!n},CLASS_NAME:"OpenLayers.Renderer.Elements"}),OpenLayers.Control.Panel=OpenLayers.Class(OpenLayers.Control,{controls:null,autoActivate:!0,defaultControl:null,saveState:!1,allowDepress:!1,activeState:null,initialize:function(n){OpenLayers.Control.prototype.initialize.apply(this,[n]),this.controls=[],this.activeState={}},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onButtonClick),OpenLayers.Control.prototype.destroy.apply(this,arguments);for(var n,t=this.controls.length-1;0<=t;t--)n=this.controls[t],n.events&&n.events.un({activate:this.iconOn,deactivate:this.iconOff}),n.panel_div=null;this.activeState=null},activate:function(){if(OpenLayers.Control.prototype.activate.apply(this,arguments)){for(var n,t=0,i=this.controls.length;t<i;t++)n=this.controls[t],(n===this.defaultControl||this.saveState&&this.activeState[n.id])&&n.activate();return!0===this.saveState&&(this.defaultControl=null),this.redraw(),!0}return!1},deactivate:function(){if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)){for(var n,t=0,i=this.controls.length;t<i;t++)n=this.controls[t],this.activeState[n.id]=n.deactivate();return this.redraw(),!0}return!1},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.outsideViewport?(this.events.attachToElement(this.div),this.events.register("buttonclick",this,this.onButtonClick)):this.map.events.register("buttonclick",this,this.onButtonClick),this.addControlsToMap(this.controls),this.div},redraw:function(){for(var t,n=this.div.childNodes.length-1;0<=n;n--)this.div.removeChild(this.div.childNodes[n]);if(this.div.innerHTML="",this.active)for(n=0,t=this.controls.length;n<t;n++)this.div.appendChild(this.controls[n].panel_div)},activateControl:function(n){if(!this.active)return!1;if(n.type==OpenLayers.Control.TYPE_BUTTON)n.trigger();else if(n.type==OpenLayers.Control.TYPE_TOGGLE)n.active?n.deactivate():n.activate();else if(this.allowDepress&&n.active)n.deactivate();else{for(var t,i=0,r=this.controls.length;i<r;i++)t=this.controls[i],t==n||t.type!==OpenLayers.Control.TYPE_TOOL&&null!=t.type||t.deactivate();n.activate()}},addControls:function(n){var r,u,t,i;for(OpenLayers.Util.isArray(n)||(n=[n]),this.controls=this.controls.concat(n),r=0,u=n.length;r<u;r++)t=n[r],i=this.createControlMarkup(t),OpenLayers.Element.addClass(i,t.displayClass+"ItemInactive"),OpenLayers.Element.addClass(i,"olButton"),""==t.title||i.title||(i.title=t.title),t.panel_div=i;this.map&&(this.addControlsToMap(n),this.redraw())},createControlMarkup:function(){return document.createElement("div")},addControlsToMap:function(n){for(var t,i=0,r=n.length;i<r;i++)t=n[i],!0===t.autoActivate?(t.autoActivate=!1,this.map.addControl(t),t.autoActivate=!0):(this.map.addControl(t),t.deactivate()),t.events.on({activate:this.iconOn,deactivate:this.iconOff})},iconOn:function(){var n=this.panel_div;n.className=n.className.replace(RegExp("\\b("+this.displayClass+"Item)Inactive\\b"),"$1Active")},iconOff:function(){var n=this.panel_div;n.className=n.className.replace(RegExp("\\b("+this.displayClass+"Item)Active\\b"),"$1Inactive")},onButtonClick:function(n){var i=this.controls,t;for(n=n.buttonElement,t=i.length-1;0<=t;--t)if(i[t].panel_div===n){this.activateControl(i[t]);break}},getControlsBy:function(n,t){var i="function"==typeof t.test;return OpenLayers.Array.filter(this.controls,function(r){return r[n]==t||i&&t.test(r[n])})},getControlsByName:function(n){return this.getControlsBy("name",n)},getControlsByClass:function(n){return this.getControlsBy("CLASS_NAME",n)},CLASS_NAME:"OpenLayers.Control.Panel"}),OpenLayers.Strategy=OpenLayers.Class({layer:null,options:null,active:null,autoActivate:!0,autoDestroy:!0,initialize:function(n){OpenLayers.Util.extend(this,n),this.options=n,this.active=!1},destroy:function(){this.deactivate(),this.options=this.layer=null},setLayer:function(n){this.layer=n},activate:function(){return this.active?!1:this.active=!0},deactivate:function(){return this.active?(this.active=!1,!0):!1},CLASS_NAME:"OpenLayers.Strategy"}),OpenLayers.Strategy.Fixed=OpenLayers.Class(OpenLayers.Strategy,{preload:!1,activate:function(){var n=OpenLayers.Strategy.prototype.activate.apply(this,arguments);if(n)if(this.layer.events.on({refresh:this.load,scope:this}),!0==this.layer.visibility||this.preload)this.load();else this.layer.events.on({visibilitychanged:this.load,scope:this});return n},deactivate:function(){var n=OpenLayers.Strategy.prototype.deactivate.call(this);return n&&this.layer.events.un({refresh:this.load,visibilitychanged:this.load,scope:this}),n},load:function(n){var t=this.layer;t.events.triggerEvent("loadstart",{filter:t.filter}),t.protocol.read(OpenLayers.Util.applyDefaults({callback:this.merge,filter:t.filter,scope:this},n)),t.events.un({visibilitychanged:this.load,scope:this})},merge:function(n){var i=this.layer,t,u,f,e,r,o;if(i.destroyFeatures(),t=n.features,t&&0<t.length){if(u=i.projection,f=i.map.getProjectionObject(),!f.equals(u))for(r=0,o=t.length;r<o;++r)(e=t[r].geometry)&&e.transform(u,f);i.addFeatures(t)}i.events.triggerEvent("loadend",{response:n})},CLASS_NAME:"OpenLayers.Strategy.Fixed"}),OpenLayers.Control.Zoom=OpenLayers.Class(OpenLayers.Control,{zoomInText:"+",zoomInId:"olZoomInLink",zoomOutText:"−",zoomOutId:"olZoomOutLink",draw:function(){var t=OpenLayers.Control.prototype.draw.apply(this),n=this.getOrCreateLinks(t),r=n.zoomIn,n=n.zoomOut,i=this.map.events;return n.parentNode!==t&&(i=this.events,i.attachToElement(n.parentNode)),i.register("buttonclick",this,this.onZoomClick),this.zoomInLink=r,this.zoomOutLink=n,t},getOrCreateLinks:function(n){var t=document.getElementById(this.zoomInId),i=document.getElementById(this.zoomOutId);return t||(t=document.createElement("a"),t.href="#zoomIn",t.appendChild(document.createTextNode(this.zoomInText)),t.className="olControlZoomIn",n.appendChild(t)),OpenLayers.Element.addClass(t,"olButton"),i||(i=document.createElement("a"),i.href="#zoomOut",i.appendChild(document.createTextNode(this.zoomOutText)),i.className="olControlZoomOut",n.appendChild(i)),OpenLayers.Element.addClass(i,"olButton"),{zoomIn:t,zoomOut:i}},onZoomClick:function(n){n=n.buttonElement,n===this.zoomInLink?this.map.zoomIn():n===this.zoomOutLink&&this.map.zoomOut()},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onZoomClick),delete this.zoomInLink,delete this.zoomOutLink,OpenLayers.Control.prototype.destroy.apply(this)},CLASS_NAME:"OpenLayers.Control.Zoom"}),OpenLayers.Protocol=OpenLayers.Class({format:null,options:null,autoDestroy:!0,defaultFilter:null,initialize:function(n){n=n||{},OpenLayers.Util.extend(this,n),this.options=n},mergeWithDefaultFilter:function(n){return n&&this.defaultFilter?new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND,filters:[this.defaultFilter,n]}):n||this.defaultFilter||void 0},destroy:function(){this.format=this.options=null},read:function(n){n=n||{},n.filter=this.mergeWithDefaultFilter(n.filter)},create:function(){},update:function(){},"delete":function(){},commit:function(){},abort:function(){},createCallback:function(n,t,i){return OpenLayers.Function.bind(function(){n.apply(this,[t,i])},this)},CLASS_NAME:"OpenLayers.Protocol"}),OpenLayers.Protocol.Response=OpenLayers.Class({code:null,requestType:null,last:!0,features:null,data:null,reqFeatures:null,priv:null,error:null,initialize:function(n){OpenLayers.Util.extend(this,n)},success:function(){return 0<this.code},CLASS_NAME:"OpenLayers.Protocol.Response"}),OpenLayers.Protocol.Response.SUCCESS=1,OpenLayers.Protocol.Response.FAILURE=0,OpenLayers.Protocol.WFS=function(n){n=OpenLayers.Util.applyDefaults(n,OpenLayers.Protocol.WFS.DEFAULTS);var t=OpenLayers.Protocol.WFS["v"+n.version.replace(/\./g,"_")];if(!t)throw"Unsupported WFS version: "+n.version;return new t(n)},OpenLayers.Protocol.WFS.fromWMSLayer=function(n,t){var i,r;return i=n.params.LAYERS,i=(OpenLayers.Util.isArray(i)?i[0]:i).split(":"),1<i.length&&(r=i[0]),i=i.pop(),r={url:n.url,featureType:i,featurePrefix:r,srsName:n.projection&&n.projection.getCode()||n.map&&n.map.getProjectionObject().getCode(),version:"1.1.0"},new OpenLayers.Protocol.WFS(OpenLayers.Util.applyDefaults(t,r))},OpenLayers.Protocol.WFS.DEFAULTS={version:"1.0.0"},OpenLayers.ProxyHost="",OpenLayers.Request||(OpenLayers.Request={}),OpenLayers.Util.extend(OpenLayers.Request,{DEFAULT_CONFIG:{method:"GET",url:window.location.href,async:!0,user:void 0,password:void 0,params:null,proxy:OpenLayers.ProxyHost,headers:{},data:null,callback:function(){},success:null,failure:null,scope:null},URL_SPLIT_REGEX:/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/,events:new OpenLayers.Events(this),makeSameOrigin:function(n,t){var u=0!==n.indexOf("http"),i=!u&&n.match(this.URL_SPLIT_REGEX);if(i){var r=window.location,u=i[1]==r.protocol&&i[3]==r.hostname,i=i[4],r=r.port;(80!=i&&""!=i||"80"!=r&&""!=r)&&(u=u&&i==r)}return u||t&&(n="function"==typeof t?t(n):t+encodeURIComponent(n)),n},issue:function(n){var i=OpenLayers.Util.extend(this.DEFAULT_CONFIG,{proxy:OpenLayers.ProxyHost}),u,f,e,o;n=n||{},n.headers=n.headers||{},n=OpenLayers.Util.applyDefaults(n,i),n.headers=OpenLayers.Util.applyDefaults(n.headers,i.headers),i=!1;for(u in n.headers)n.headers.hasOwnProperty(u)&&"x-requested-with"===u.toLowerCase()&&(i=!0);!1===i&&(n.headers["X-Requested-With"]="XMLHttpRequest");var t=new OpenLayers.Request.XMLHttpRequest,r=OpenLayers.Util.urlAppend(n.url,OpenLayers.Util.getParameterString(n.params||{})),r=OpenLayers.Request.makeSameOrigin(r,n.proxy);t.open(n.method,r,n.async,n.user,n.password);for(f in n.headers)t.setRequestHeader(f,n.headers[f]);return e=this.events,o=this,t.onreadystatechange=function(){t.readyState==OpenLayers.Request.XMLHttpRequest.DONE&&!1!==e.triggerEvent("complete",{request:t,config:n,requestUrl:r})&&o.runCallbacks({request:t,config:n,requestUrl:r})},!1===n.async?t.send(n.data):window.setTimeout(function(){0!==t.readyState&&t.send(n.data)},0),t},runCallbacks:function(n){var i=n.request,t=n.config,f=t.scope?OpenLayers.Function.bind(t.callback,t.scope):t.callback,r,u;t.success&&(r=t.scope?OpenLayers.Function.bind(t.success,t.scope):t.success),t.failure&&(u=t.scope?OpenLayers.Function.bind(t.failure,t.scope):t.failure),"file:"==OpenLayers.Util.createUrlObject(t.url).protocol&&i.responseText&&(i.status=200),f(i),(!i.status||200<=i.status&&300>i.status)&&(this.events.triggerEvent("success",n),r&&r(i)),i.status&&(200>i.status||300<=i.status)&&(this.events.triggerEvent("failure",n),u&&u(i))},GET:function(n){return n=OpenLayers.Util.extend(n,{method:"GET"}),OpenLayers.Request.issue(n)},POST:function(n){return n=OpenLayers.Util.extend(n,{method:"POST"}),n.headers=n.headers?n.headers:{},"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(n.headers)||(n.headers["Content-Type"]="application/xml"),OpenLayers.Request.issue(n)},PUT:function(n){return n=OpenLayers.Util.extend(n,{method:"PUT"}),n.headers=n.headers?n.headers:{},"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(n.headers)||(n.headers["Content-Type"]="application/xml"),OpenLayers.Request.issue(n)},DELETE:function(n){return n=OpenLayers.Util.extend(n,{method:"DELETE"}),OpenLayers.Request.issue(n)},HEAD:function(n){return n=OpenLayers.Util.extend(n,{method:"HEAD"}),OpenLayers.Request.issue(n)},OPTIONS:function(n){return n=OpenLayers.Util.extend(n,{method:"OPTIONS"}),OpenLayers.Request.issue(n)}}),function(){function e(){this._object=i&&!s?new i:new window.ActiveXObject("Microsoft.XMLHTTP"),this._listeners=[]}function n(){return new e}function r(t){n.onreadystatechange&&n.onreadystatechange.apply(t),t.dispatchEvent({type:"readystatechange",bubbles:!1,cancelable:!1,timeStamp:new Date+0})}function o(n){try{n.responseText=n._object.responseText}catch(e){}try{var u,r=n._object,i=r.responseXML,f=r.responseText;t&&f&&i&&!i.documentElement&&r.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)&&(i=new window.ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.validateOnParse=!1,i.loadXML(f)),u=i&&(t&&0!=i.parseError||!i.documentElement||i.documentElement&&"parsererror"==i.documentElement.tagName)?null:i,n.responseXML=u}catch(o){}try{n.status=n._object.status}catch(s){}try{n.statusText=n._object.statusText}catch(h){}}function u(n){n._object.onreadystatechange=new window.Function}var i=window.XMLHttpRequest,f=!!window.controllers,t=window.document.all&&!window.opera,s=t&&window.navigator.userAgent.match(/MSIE 7.0/);n.prototype=e.prototype,f&&i.wrapped&&(n.wrapped=i.wrapped),n.UNSENT=0,n.OPENED=1,n.HEADERS_RECEIVED=2,n.LOADING=3,n.DONE=4,n.prototype.readyState=n.UNSENT,n.prototype.responseText="",n.prototype.responseXML=null,n.prototype.status=0,n.prototype.statusText="",n.prototype.priority="NORMAL",n.prototype.onreadystatechange=null,n.onreadystatechange=null,n.onopen=null,n.onsend=null,n.onabort=null,n.prototype.open=function(i,e,s,h,c){delete this._headers,3>arguments.length&&(s=!0),this._async=s;var l=this,a=this.readyState,v;t&&s&&(v=function(){a!=n.DONE&&(u(l),l.abort())},window.attachEvent("onunload",v)),n.onopen&&n.onopen.apply(this,arguments),4<arguments.length?this._object.open(i,e,s,h,c):3<arguments.length?this._object.open(i,e,s,h):this._object.open(i,e,s),this.readyState=n.OPENED,r(this),this._object.onreadystatechange=function(){(!f||s)&&(l.readyState=l._object.readyState,o(l),l._aborted?l.readyState=n.UNSENT:(l.readyState==n.DONE&&(delete l._data,u(l),t&&s&&window.detachEvent("onunload",v)),a!=l.readyState&&r(l),a=l.readyState))}},n.prototype.send=function(t){n.onsend&&n.onsend.apply(this,arguments),arguments.length||(t=null),t&&t.nodeType&&(t=window.XMLSerializer?(new window.XMLSerializer).serializeToString(t):t.xml,this._headers["Content-Type"]||this._object.setRequestHeader("Content-Type","application/xml")),this._data=t;n:if(this._object.send(this._data),f&&!this._async)for(this.readyState=n.OPENED,o(this);this.readyState<n.DONE;)if(this.readyState++,r(this),this._aborted)break n},n.prototype.abort=function(){n.onabort&&n.onabort.apply(this,arguments),this.readyState>n.UNSENT&&(this._aborted=!0),this._object.abort(),u(this),this.readyState=n.UNSENT,delete this._data},n.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()},n.prototype.getResponseHeader=function(n){return this._object.getResponseHeader(n)},n.prototype.setRequestHeader=function(n,t){return this._headers||(this._headers={}),this._headers[n]=t,this._object.setRequestHeader(n,t)},n.prototype.addEventListener=function(n,t,i){for(var u=0,r;r=this._listeners[u];u++)if(r[0]==n&&r[1]==t&&r[2]==i)return;this._listeners.push([n,t,i])},n.prototype.removeEventListener=function(n,t,i){for(var u=0,r;(r=this._listeners[u])&&(r[0]!=n||r[1]!=t||r[2]!=i);u++);r&&this._listeners.splice(u,1)},n.prototype.dispatchEvent=function(n){n={type:n.type,target:this,currentTarget:this,eventPhase:2,bubbles:n.bubbles,cancelable:n.cancelable,timeStamp:n.timeStamp,stopPropagation:function(){},preventDefault:function(){},initEvent:function(){}},"readystatechange"==n.type&&this.onreadystatechange&&(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[n]);for(var i=0,t;t=this._listeners[i];i++)t[0]!=n.type||t[2]||(t[1].handleEvent||t[1]).apply(this,[n])},n.prototype.toString=function(){return"[object XMLHttpRequest]"},n.toString=function(){return"[XMLHttpRequest]"},window.Function.prototype.apply||(window.Function.prototype.apply=function(n,t){t||(t=[]),n.__func=this,n.__func(t[0],t[1],t[2],t[3],t[4]),delete n.__func}),OpenLayers.Request||(OpenLayers.Request={}),OpenLayers.Request.XMLHttpRequest=n}(),OpenLayers.Format.KML=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{kml:"http://www.opengis.net/kml/2.2",gx:"http://www.google.com/kml/ext/2.2"},kmlns:"http://earth.google.com/kml/2.0",placemarksDesc:"No description available",foldersName:"OpenLayers export",foldersDesc:"Exported on "+new Date,extractAttributes:!0,kvpAttributes:!1,extractStyles:!1,extractTracks:!1,trackAttributes:null,internalns:null,features:null,styles:null,styleBaseUrl:"",fetched:null,maxDepth:0,initialize:function(n){this.regExes={trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g,kmlColor:/(\w{2})(\w{2})(\w{2})(\w{2})/,kmlIconPalette:/root:\/\/icons\/palette-(\d+)(\.\w+)/,straightBracket:/\$\[(.*?)\]/g},this.externalProjection=new OpenLayers.Projection("EPSG:4326"),OpenLayers.Format.XML.prototype.initialize.apply(this,[n])},read:function(n){return this.features=[],this.styles={},this.fetched={},this.parseData(n,{depth:0,styleBaseUrl:this.styleBaseUrl})},parseData:function(n,t){var u,i;"string"==typeof n&&(n=OpenLayers.Format.XML.prototype.read.apply(this,[n]));for(var f=["Link","NetworkLink","Style","StyleMap","Placemark"],r=0,e=f.length;r<e;++r)if(u=f[r],i=this.getElementsByTagNameNS(n,"*",u),0!=i.length)switch(u.toLowerCase()){case"link":case"networklink":this.parseLinks(i,t);break;case"style":this.extractStyles&&this.parseStyles(i,t);break;case"stylemap":this.extractStyles&&this.parseStyleMaps(i,t);break;case"placemark":this.parseFeatures(i,t)}return this.features},parseLinks:function(n,t){var u,r,f,i;if(t.depth>=this.maxDepth)return!1;for(u=OpenLayers.Util.extend({},t),u.depth++,r=0,f=n.length;r<f;r++)i=this.parseProperty(n[r],"*","href"),i&&!this.fetched[i]&&(this.fetched[i]=!0,(i=this.fetchLink(i))&&this.parseData(i,u))},fetchLink:function(n){if(n=OpenLayers.Request.GET({url:n,async:!1}))return n.responseText},parseStyles:function(n,t){for(var r,i=0,u=n.length;i<u;i++)r=this.parseStyle(n[i]),r&&(this.styles[(t.styleBaseUrl||"")+"#"+r.id]=r)},parseKmlColor:function(n){var t=null;return n&&(n=n.match(this.regExes.kmlColor))&&(t={color:"#"+n[4]+n[3]+n[2],opacity:parseInt(n[1],16)/255}),t},parseStyle:function(n){for(var s,h,u,e,f,o,t={},l=["LineStyle","PolyStyle","IconStyle","BalloonStyle","LabelStyle"],i,r,c=0,a=l.length;c<a;++c)if(i=l[c],r=this.getElementsByTagNameNS(n,"*",i)[0])switch(i.toLowerCase()){case"linestyle":i=this.parseProperty(r,"*","color"),(i=this.parseKmlColor(i))&&(t.strokeColor=i.color,t.strokeOpacity=i.opacity),(i=this.parseProperty(r,"*","width"))&&(t.strokeWidth=i);break;case"polystyle":i=this.parseProperty(r,"*","color"),(i=this.parseKmlColor(i))&&(t.fillOpacity=i.opacity,t.fillColor=i.color),"0"==this.parseProperty(r,"*","fill")&&(t.fillColor="none"),"0"==this.parseProperty(r,"*","outline")&&(t.strokeWidth="0");break;case"iconstyle":s=parseFloat(this.parseProperty(r,"*","scale")||1),i=32*s,h=32*s,u=this.getElementsByTagNameNS(r,"*","Icon")[0],u&&(e=this.parseProperty(u,"*","href"),e&&(f=this.parseProperty(u,"*","w"),o=this.parseProperty(u,"*","h"),!OpenLayers.String.startsWith(e,"http://maps.google.com/mapfiles/kml")||f||o||(o=f=64,s/=2),f=f||o,o=o||f,f&&(i=parseInt(f)*s),o&&(h=parseInt(o)*s),(o=e.match(this.regExes.kmlIconPalette))&&(f=o[1],o=o[2],e=this.parseProperty(u,"*","x"),u=this.parseProperty(u,"*","y"),e="http://maps.google.com/mapfiles/kml/pal"+f+"/icon"+(8*(u?7-u/32:7)+(e?e/32:0))+o),t.graphicOpacity=1,t.externalGraphic=e)),(r=this.getElementsByTagNameNS(r,"*","hotSpot")[0])&&(e=parseFloat(r.getAttribute("x")),u=parseFloat(r.getAttribute("y")),f=r.getAttribute("xunits"),"pixels"==f?t.graphicXOffset=-e*s:"insetPixels"==f?t.graphicXOffset=-i+e*s:"fraction"==f&&(t.graphicXOffset=-i*e),r=r.getAttribute("yunits"),"pixels"==r?t.graphicYOffset=-h+u*s+1:"insetPixels"==r?t.graphicYOffset=-(u*s)+1:"fraction"==r&&(t.graphicYOffset=-h*(1-u)+1)),t.graphicWidth=i,t.graphicHeight=h;break;case"balloonstyle":(r=OpenLayers.Util.getXmlNodeValue(r))&&(t.balloonStyle=r.replace(this.regExes.straightBracket,"${$1}"));break;case"labelstyle":(i=this.parseProperty(r,"*","color"),i=this.parseKmlColor(i))&&(t.fontColor=i.color,t.fontOpacity=i.opacity)}return!t.strokeColor&&t.fillColor&&(t.strokeColor=t.fillColor),(n=n.getAttribute("id"))&&t&&(t.id=n),t},parseStyleMaps:function(n,t){for(var i,s,r=0,e=n.length;r<e;r++)for(var u=n[r],o=this.getElementsByTagNameNS(u,"*","Pair"),u=u.getAttribute("id"),f=0,h=o.length;f<h;f++)i=o[f],s=this.parseProperty(i,"*","key"),(i=this.parseProperty(i,"*","styleUrl"))&&"normal"==s&&(this.styles[(t.styleBaseUrl||"")+"#"+u]=this.styles[(t.styleBaseUrl||"")+i])},parseFeatures:function(n,t){for(var r,i,u,f=[],e=0,o=n.length;e<o;e++)if(r=n[e],i=this.parseFeature.apply(this,[r]),i)this.extractStyles&&i.attributes&&i.attributes.styleUrl&&(i.style=this.getStyle(i.attributes.styleUrl,t)),this.extractStyles&&(u=this.getElementsByTagNameNS(r,"*","Style")[0],u&&(u=this.parseStyle(u))&&(i.style=OpenLayers.Util.extend(i.style,u))),this.extractTracks?(r=this.getElementsByTagNameNS(r,this.namespaces.gx,"Track"))&&0<r.length&&(i={features:[],feature:i},this.readNode(r[0],i),0<i.features.length&&f.push.apply(f,i.features)):f.push(i);else throw"Bad Placemark: "+e;this.features=this.features.concat(f)},readers:{kml:{when:function(n,t){t.whens.push(OpenLayers.Date.parse(this.getChildValue(n)))},_trackPointAttribute:function(n,t){var i=n.nodeName.split(":").pop();t.attributes[i].push(this.getChildValue(n))}},gx:{Track:function(n,t){var i={whens:[],points:[],angles:[]},r,s,f,u,e,o,h;if(this.trackAttributes)for(i.attributes={},u=0,e=this.trackAttributes.length;u<e;++u)r=this.trackAttributes[u],i.attributes[r]=[],r in this.readers.kml||(this.readers.kml[r]=this.readers.kml._trackPointAttribute);if(this.readChildNodes(n,i),i.whens.length!==i.points.length)throw Error("gx:Track with unequal number of when ("+i.whens.length+") and gx:coord ("+i.points.length+") elements.");if(s=0<i.angles.length,s&&i.whens.length!==i.angles.length)throw Error("gx:Track with unequal number of when ("+i.whens.length+") and gx:angles ("+i.angles.length+") elements.");for(u=0,e=i.whens.length;u<e;++u){if(f=t.feature.clone(),f.fid=t.feature.fid||t.feature.id,r=i.points[u],f.geometry=r,"z"in r&&(f.attributes.altitude=r.z),this.internalProjection&&this.externalProjection&&f.geometry.transform(this.externalProjection,this.internalProjection),this.trackAttributes)for(o=0,h=this.trackAttributes.length;o<h;++o)r=this.trackAttributes[o],f.attributes[r]=i.attributes[r][u];f.attributes.when=i.whens[u],f.attributes.trackId=t.feature.id,s&&(r=i.angles[u],f.attributes.heading=parseFloat(r[0]),f.attributes.tilt=parseFloat(r[1]),f.attributes.roll=parseFloat(r[2])),t.features.push(f)}},coord:function(n,t){var i=this.getChildValue(n).replace(this.regExes.trimSpace,"").split(/\s+/),r=new OpenLayers.Geometry.Point(i[0],i[1]);2<i.length&&(r.z=parseFloat(i[2])),t.points.push(r)},angles:function(n,t){var i=this.getChildValue(n).replace(this.regExes.trimSpace,"").split(/\s+/);t.angles.push(i)}}},parseFeature:function(n){for(var e,i=["MultiGeometry","Polygon","LineString","Point"],t,r,u,f=0,o=i.length;f<o;++f)if(t=i[f],this.internalns=n.namespaceURI?n.namespaceURI:this.kmlns,r=this.getElementsByTagNameNS(n,this.internalns,t),0<r.length){if(i=this.parseGeometry[t.toLowerCase()])u=i.apply(this,[r[0]]),this.internalProjection&&this.externalProjection&&u.transform(this.externalProjection,this.internalProjection);else throw new TypeError("Unsupported geometry type: "+t);break}return this.extractAttributes&&(e=this.parseAttributes(n)),t=new OpenLayers.Feature.Vector(u,e),n=n.getAttribute("id")||n.getAttribute("name"),null!=n&&(t.fid=n),t},getStyle:function(n,t){var i=OpenLayers.Util.removeTail(n),r=OpenLayers.Util.extend({},t);return r.depth++,r.styleBaseUrl=i,!this.styles[n]&&!OpenLayers.String.startsWith(n,"#")&&r.depth<=this.maxDepth&&!this.fetched[i]&&(i=this.fetchLink(i))&&this.parseData(i,r),OpenLayers.Util.extend({},this.styles[n])},parseGeometry:{point:function(n){var i=this.getElementsByTagNameNS(n,this.internalns,"coordinates"),t;if(n=[],0<i.length&&(t=i[0].firstChild.nodeValue,t=t.replace(this.regExes.removeSpace,""),n=t.split(",")),i=null,1<n.length)2==n.length&&(n[2]=null),i=new OpenLayers.Geometry.Point(n[0],n[1],n[2]);else throw"Bad coordinate string: "+t;return i},linestring:function(n,t){var i=this.getElementsByTagNameNS(n,this.internalns,"coordinates"),u=null;if(0<i.length){for(var i=this.getChildValue(i[0]),i=i.replace(this.regExes.trimSpace,""),i=i.replace(this.regExes.trimComma,","),u=i.split(this.regExes.splitSpace),e=u.length,o=Array(e),r,s,f=0;f<e;++f)if(r=u[f].split(","),s=r.length,1<s)2==r.length&&(r[2]=null),o[f]=new OpenLayers.Geometry.Point(r[0],r[1],r[2]);else throw"Bad LineString point coordinates: "+u[f];if(e)u=t?new OpenLayers.Geometry.LinearRing(o):new OpenLayers.Geometry.LineString(o);else throw"Bad LineString coordinates: "+i;}return u},polygon:function(n){var i,r,t,u;if(n=this.getElementsByTagNameNS(n,this.internalns,"LinearRing"),i=n.length,r=Array(i),0<i)for(t=0,u=n.length;t<u;++t)if(i=this.parseGeometry.linestring.apply(this,[n[t],!0]))r[t]=i;else throw"Bad LinearRing geometry: "+t;return new OpenLayers.Geometry.Polygon(r)},multigeometry:function(n){for(var t,r=[],u=n.childNodes,i=0,f=u.length;i<f;++i)n=u[i],1==n.nodeType&&(t=n.prefix?n.nodeName.split(":")[1]:n.nodeName,(t=this.parseGeometry[t.toLowerCase()])&&r.push(t.apply(this,[n])));return new OpenLayers.Geometry.Collection(r)}},parseAttributes:function(n){var f={},u=n.getElementsByTagName("ExtendedData"),r,i,t,e;for(u.length&&(f=this.parseExtendedData(u[0])),n=n.childNodes,u=0,e=n.length;u<e;++u)if(r=n[u],1==r.nodeType&&(i=r.childNodes,1<=i.length&&3>=i.length)){switch(i.length){case 1:t=i[0];break;case 2:t=i[0],i=i[1],t=3==t.nodeType||4==t.nodeType?t:i;break;default:t=i[1]}(3==t.nodeType||4==t.nodeType)&&(r=r.prefix?r.nodeName.split(":")[1]:r.nodeName,t=OpenLayers.Util.getXmlNodeValue(t))&&(t=t.replace(this.regExes.trimSpace,""),f[r]=t)}return f},parseExtendedData:function(n){for(var f={},t,u,s=n.getElementsByTagName("Data"),i,o,r=0,e=s.length;r<e;r++)t=s[r],u=t.getAttribute("name"),i={},o=t.getElementsByTagName("value"),o.length&&(i.value=this.getChildValue(o[0])),this.kvpAttributes?f[u]=i.value:(t=t.getElementsByTagName("displayName"),t.length&&(i.displayName=this.getChildValue(t[0])),f[u]=i);for(n=n.getElementsByTagName("SimpleData"),r=0,e=n.length;r<e;r++)i={},t=n[r],u=t.getAttribute("name"),i.value=this.getChildValue(t),this.kvpAttributes?f[u]=i.value:(i.displayName=u,f[u]=i);return f},parseProperty:function(n,t,i){var r;n=this.getElementsByTagNameNS(n,t,i);try{r=OpenLayers.Util.getXmlNodeValue(n[0])}catch(u){r=null}return r},write:function(n){OpenLayers.Util.isArray(n)||(n=[n]);for(var i=this.createElementNS(this.kmlns,"kml"),r=this.createFolderXML(),t=0,u=n.length;t<u;++t)r.appendChild(this.createPlacemarkXML(n[t]));return i.appendChild(r),OpenLayers.Format.XML.prototype.write.apply(this,[i])},createFolderXML:function(){var i=this.createElementNS(this.kmlns,"Folder"),n,t;return this.foldersName&&(n=this.createElementNS(this.kmlns,"name"),t=this.createTextNode(this.foldersName),n.appendChild(t),i.appendChild(n)),this.foldersDesc&&(n=this.createElementNS(this.kmlns,"description"),t=this.createTextNode(this.foldersDesc),n.appendChild(t),i.appendChild(n)),i},createPlacemarkXML:function(n){var i=this.createElementNS(this.kmlns,"name"),t=n.style&&n.style.label?n.style.label:n.id,r;return i.appendChild(this.createTextNode(n.attributes.name||t)),r=this.createElementNS(this.kmlns,"description"),r.appendChild(this.createTextNode(n.attributes.description||this.placemarksDesc)),t=this.createElementNS(this.kmlns,"Placemark"),null!=n.fid&&t.setAttribute("id",n.fid),t.appendChild(i),t.appendChild(r),i=this.buildGeometryNode(n.geometry),t.appendChild(i),n.attributes&&(n=this.buildExtendedData(n.attributes))&&t.appendChild(n),t},buildGeometryNode:function(n){var t=n.CLASS_NAME,t=t.substring(t.lastIndexOf(".")+1),t=this.buildGeometry[t.toLowerCase()],i=null;return t&&(i=t.apply(this,[n])),i},buildGeometry:{point:function(n){var t=this.createElementNS(this.kmlns,"Point");return t.appendChild(this.buildCoordinatesNode(n)),t},multipoint:function(n){return this.buildGeometry.collection.apply(this,[n])},linestring:function(n){var t=this.createElementNS(this.kmlns,"LineString");return t.appendChild(this.buildCoordinatesNode(n)),t},multilinestring:function(n){return this.buildGeometry.collection.apply(this,[n])},linearring:function(n){var t=this.createElementNS(this.kmlns,"LinearRing");return t.appendChild(this.buildCoordinatesNode(n)),t},polygon:function(n){var r=this.createElementNS(this.kmlns,"Polygon"),t,u,i,f;for(n=n.components,i=0,f=n.length;i<f;++i)t=0==i?"outerBoundaryIs":"innerBoundaryIs",t=this.createElementNS(this.kmlns,t),u=this.buildGeometry.linearring.apply(this,[n[i]]),t.appendChild(u),r.appendChild(t);return r},multipolygon:function(n){return this.buildGeometry.collection.apply(this,[n])},collection:function(n){for(var i=this.createElementNS(this.kmlns,"MultiGeometry"),r,t=0,u=n.components.length;t<u;++t)(r=this.buildGeometryNode.apply(this,[n.components[t]]))&&i.appendChild(r);return i}},buildCoordinatesNode:function(n){var r=this.createElementNS(this.kmlns,"coordinates"),t;if(t=n.components){for(var u=t.length,f=Array(u),i=0;i<u;++i)n=t[i],f[i]=this.buildCoordinates(n);t=f.join(" ")}else t=this.buildCoordinates(n);return t=this.createTextNode(t),r.appendChild(t),r},buildCoordinates:function(n){return this.internalProjection&&this.externalProjection&&(n=n.clone(),n.transform(this.internalProjection,this.externalProjection)),n.x+","+n.y},buildExtendedData:function(n){var u=this.createElementNS(this.kmlns,"ExtendedData"),t,i,r,f;for(t in n)n[t]&&"name"!=t&&"description"!=t&&"styleUrl"!=t&&(i=this.createElementNS(this.kmlns,"Data"),i.setAttribute("name",t),r=this.createElementNS(this.kmlns,"value"),"object"==typeof n[t]?(n[t].value&&r.appendChild(this.createTextNode(n[t].value)),n[t].displayName)&&(f=this.createElementNS(this.kmlns,"displayName"),f.appendChild(this.getXMLDoc().createCDATASection(n[t].displayName)),i.appendChild(f)):r.appendChild(this.createTextNode(n[t])),i.appendChild(r),u.appendChild(i));return this.isSimpleContent(u)?null:u},CLASS_NAME:"OpenLayers.Format.KML"}),OpenLayers.Protocol.WFS.v1=OpenLayers.Class(OpenLayers.Protocol,{version:null,srsName:"EPSG:4326",featureType:null,featureNS:null,geometryName:"the_geom",schema:null,featurePrefix:"feature",formatOptions:null,readFormat:null,readOptions:null,initialize:function(n){OpenLayers.Protocol.prototype.initialize.apply(this,[n]),n.format||(this.format=OpenLayers.Format.WFST(OpenLayers.Util.extend({version:this.version,featureType:this.featureType,featureNS:this.featureNS,featurePrefix:this.featurePrefix,geometryName:this.geometryName,srsName:this.srsName,schema:this.schema},this.formatOptions))),!n.geometryName&&1<parseFloat(this.format.version)&&this.setGeometryName(null)},destroy:function(){this.options&&!this.options.format&&this.format.destroy(),this.format=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(n){OpenLayers.Protocol.prototype.read.apply(this,arguments),n=OpenLayers.Util.extend({},n),OpenLayers.Util.applyDefaults(n,this.options||{});var t=new OpenLayers.Protocol.Response({requestType:"read"}),i=OpenLayers.Format.XML.prototype.write.apply(this.format,[this.format.writeNode("wfs:GetFeature",n)]);return t.priv=OpenLayers.Request.POST({url:n.url,callback:this.createCallback(this.handleRead,t,n),params:n.params,headers:n.headers,data:i}),t},setFeatureType:function(n){this.featureType=n,this.format.featureType=n},setGeometryName:function(n){this.geometryName=n,this.format.geometryName=n},handleRead:function(n,t){if(t=OpenLayers.Util.extend({},t),OpenLayers.Util.applyDefaults(t,this.options),t.callback){var i=n.priv;200<=i.status&&300>i.status?(i=this.parseResponse(i,t.readOptions))&&!1!==i.success?(t.readOptions&&"object"==t.readOptions.output?OpenLayers.Util.extend(n,i):n.features=i,n.code=OpenLayers.Protocol.Response.SUCCESS):(n.code=OpenLayers.Protocol.Response.FAILURE,n.error=i):n.code=OpenLayers.Protocol.Response.FAILURE,t.callback.call(t.scope,n)}},parseResponse:function(n,t){var i=n.responseXML,r;return(i&&i.documentElement||(i=n.responseText),!i||0>=i.length)?null:(i=null!==this.readFormat?this.readFormat.read(i):this.format.read(i,t),this.featureNS||(r=this.readFormat||this.format,this.featureNS=r.featureNS,r.autoConfig=!1,this.geometryName||this.setGeometryName(r.geometryName)),i)},commit:function(n,t){t=OpenLayers.Util.extend({},t),OpenLayers.Util.applyDefaults(t,this.options);var i=new OpenLayers.Protocol.Response({requestType:"commit",reqFeatures:n});return i.priv=OpenLayers.Request.POST({url:t.url,headers:t.headers,data:this.format.write(n,t),callback:this.createCallback(this.handleCommit,i,t)}),i},handleCommit:function(n,t){if(t.callback){var i=n.priv,r=i.responseXML;r&&r.documentElement||(r=i.responseText),i=this.format.read(r)||{},n.insertIds=i.insertIds||[],i.success?n.code=OpenLayers.Protocol.Response.SUCCESS:(n.code=OpenLayers.Protocol.Response.FAILURE,n.error=i),t.callback.call(t.scope,n)}},filterDelete:function(n,t){var i,r,u;return t=OpenLayers.Util.extend({},t),OpenLayers.Util.applyDefaults(t,this.options),new OpenLayers.Protocol.Response({requestType:"commit"}),i=this.format.createElementNSPlus("wfs:Transaction",{attributes:{service:"WFS",version:this.version}}),r=this.format.createElementNSPlus("wfs:Delete",{attributes:{typeName:(t.featureNS?this.featurePrefix+":":"")+t.featureType}}),t.featureNS&&r.setAttribute("xmlns:"+this.featurePrefix,t.featureNS),u=this.format.writeNode("ogc:Filter",n),r.appendChild(u),i.appendChild(r),i=OpenLayers.Format.XML.prototype.write.apply(this.format,[i]),OpenLayers.Request.POST({url:this.url,callback:t.callback||function(){},data:i})},abort:function(n){n&&n.priv.abort()},CLASS_NAME:"OpenLayers.Protocol.WFS.v1"}),OpenLayers.Handler.Feature=OpenLayers.Class(OpenLayers.Handler,{EVENTMAP:{click:{"in":"click",out:"clickout"},mousemove:{"in":"over",out:"out"},dblclick:{"in":"dblclick",out:null},mousedown:{"in":null,out:null},mouseup:{"in":null,out:null},touchstart:{"in":"click",out:"clickout"}},feature:null,lastFeature:null,down:null,up:null,clickTolerance:4,geometryTypes:null,stopClick:!0,stopDown:!0,stopUp:!1,initialize:function(n,t,i,r){OpenLayers.Handler.prototype.initialize.apply(this,[n,i,r]),this.layer=t},touchstart:function(n){return this.startTouch(),OpenLayers.Event.isMultiTouch(n)?!0:this.mousedown(n)},touchmove:function(n){OpenLayers.Event.preventDefault(n)},mousedown:function(n){return(OpenLayers.Event.isLeftClick(n)||OpenLayers.Event.isSingleTouch(n))&&(this.down=n.xy),this.handle(n)?!this.stopDown:!0},mouseup:function(n){return this.up=n.xy,this.handle(n)?!this.stopUp:!0},click:function(n){return this.handle(n)?!this.stopClick:!0},mousemove:function(n){return!this.callbacks.over&&!this.callbacks.out?!0:(this.handle(n),!0)},dblclick:function(n){return!this.handle(n)},geometryTypeMatches:function(n){return null==this.geometryTypes||-1<OpenLayers.Util.indexOf(this.geometryTypes,n.geometry.CLASS_NAME)},handle:function(n){this.feature&&!this.feature.layer&&(this.feature=null);var t=n.type,u=!1,i=!!this.feature,r="click"==t||"dblclick"==t||"touchstart"==t;return(this.feature=this.layer.getFeatureFromEvent(n))&&!this.feature.layer&&(this.feature=null),this.lastFeature&&!this.lastFeature.layer&&(this.lastFeature=null),this.feature?("touchstart"===t&&OpenLayers.Event.preventDefault(n),n=this.feature!=this.lastFeature,this.geometryTypeMatches(this.feature)?(i&&n?(this.lastFeature&&this.triggerCallback(t,"out",[this.lastFeature]),this.triggerCallback(t,"in",[this.feature])):i&&!r||this.triggerCallback(t,"in",[this.feature]),this.lastFeature=this.feature,u=!0):(this.lastFeature&&(i&&n||r)&&this.triggerCallback(t,"out",[this.lastFeature]),this.feature=null)):this.lastFeature&&(i||r)&&this.triggerCallback(t,"out",[this.lastFeature]),u},triggerCallback:function(n,t,i){(t=this.EVENTMAP[n][t])&&("click"==n&&this.up&&this.down?(Math.sqrt(Math.pow(this.up.x-this.down.x,2)+Math.pow(this.up.y-this.down.y,2))<=this.clickTolerance&&this.callback(t,i),this.up=this.down=null):this.callback(t,i))},activate:function(){var n=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.moveLayerToTop(),this.map.events.on({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),n=!0),n},deactivate:function(){var n=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.moveLayerBack(),this.up=this.down=this.lastFeature=this.feature=null,this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),n=!0),n},handleMapEvents:function(n){"removelayer"!=n.type&&"order"!=n.property||this.moveLayerToTop()},moveLayerToTop:function(){var n=Math.max(this.map.Z_INDEX_BASE.Feature-1,this.layer.getZIndex())+1;this.layer.setZIndex(n)},moveLayerBack:function(){var n=this.layer.getZIndex()-1;n>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(n):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Handler.Feature"}),OpenLayers.StyleMap=OpenLayers.Class({styles:null,extendDefault:!0,initialize:function(n,t){if(this.styles={"default":new OpenLayers.Style(OpenLayers.Feature.Vector.style["default"]),select:new OpenLayers.Style(OpenLayers.Feature.Vector.style.select),temporary:new OpenLayers.Style(OpenLayers.Feature.Vector.style.temporary),"delete":new OpenLayers.Style(OpenLayers.Feature.Vector.style["delete"])},n instanceof OpenLayers.Style)this.styles["default"]=n,this.styles.select=n,this.styles.temporary=n,this.styles["delete"]=n;else if("object"==typeof n)for(var i in n)if(n[i]instanceof OpenLayers.Style)this.styles[i]=n[i];else if("object"==typeof n[i])this.styles[i]=new OpenLayers.Style(n[i]);else{this.styles["default"]=new OpenLayers.Style(n),this.styles.select=new OpenLayers.Style(n),this.styles.temporary=new OpenLayers.Style(n),this.styles["delete"]=new OpenLayers.Style(n);break}OpenLayers.Util.extend(this,t)},destroy:function(){for(var n in this.styles)this.styles[n].destroy();this.styles=null},createSymbolizer:function(n,t){n||(n=new OpenLayers.Feature.Vector),this.styles[t]||(t="default"),n.renderIntent=t;var i={};return this.extendDefault&&"default"!=t&&(i=this.styles["default"].createSymbolizer(n)),OpenLayers.Util.extend(i,this.styles[t].createSymbolizer(n))},addUniqueValueRules:function(n,t,i,r){var f=[],u;for(u in i)f.push(new OpenLayers.Rule({symbolizer:i[u],context:r,filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,property:t,value:u})}));this.styles[n].addRules(f)},CLASS_NAME:"OpenLayers.StyleMap"}),OpenLayers.Layer.Vector=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,isFixed:!1,features:null,filter:null,selectedFeatures:null,unrenderedFeatures:null,reportError:!0,style:null,styleMap:null,strategies:null,protocol:null,renderers:["SVG","VML","Canvas"],renderer:null,rendererOptions:null,geometryType:null,drawn:!1,ratio:1,initialize:function(){if(OpenLayers.Layer.prototype.initialize.apply(this,arguments),this.renderer&&this.renderer.supported()||this.assignRenderer(),this.renderer&&this.renderer.supported()||(this.renderer=null,this.displayError()),this.styleMap||(this.styleMap=new OpenLayers.StyleMap),this.features=[],this.selectedFeatures=[],this.unrenderedFeatures={},this.strategies)for(var n=0,t=this.strategies.length;n<t;n++)this.strategies[n].setLayer(this)},destroy:function(){if(this.strategies){for(var t,n=0,i=this.strategies.length;n<i;n++)t=this.strategies[n],t.autoDestroy&&t.destroy();this.strategies=null}this.protocol&&(this.protocol.autoDestroy&&this.protocol.destroy(),this.protocol=null),this.destroyFeatures(),this.unrenderedFeatures=this.selectedFeatures=this.features=null,this.renderer&&this.renderer.destroy(),this.drawn=this.geometryType=this.renderer=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(n){null==n&&(n=new OpenLayers.Layer.Vector(this.name,this.getOptions())),n=OpenLayers.Layer.prototype.clone.apply(this,[n]);for(var i=this.features,r=i.length,u=Array(r),t=0;t<r;++t)u[t]=i[t].clone();return n.features=u,n},refresh:function(n){this.calculateInRange()&&this.visibility&&this.events.triggerEvent("refresh",n)},assignRenderer:function(){for(var n,t=0,i=this.renderers.length;t<i;t++)if(n=this.renderers[t],(n="function"==typeof n?n:OpenLayers.Renderer[n])&&n.prototype.supported()){this.renderer=new n(this.div,this.rendererOptions);break}},displayError:function(){this.reportError&&OpenLayers.Console.userError(OpenLayers.i18n("browserNotSupported",{renderers:this.renderers.join("\n")}))},setMap:function(){if(OpenLayers.Layer.prototype.setMap.apply(this,arguments),this.renderer){this.renderer.map=this.map;var n=this.map.getSize();n.w*=this.ratio,n.h*=this.ratio,this.renderer.setSize(n)}else this.map.removeLayer(this)},afterAdd:function(){if(this.strategies)for(var t,n=0,i=this.strategies.length;n<i;n++)t=this.strategies[n],t.autoActivate&&t.activate()},removeMap:function(n){if(this.drawn=!1,this.strategies)for(var t=0,i=this.strategies.length;t<i;t++)n=this.strategies[t],n.autoActivate&&n.deactivate()},onMapResize:function(){OpenLayers.Layer.prototype.onMapResize.apply(this,arguments);var n=this.map.getSize();n.w*=this.ratio,n.h*=this.ratio,this.renderer.setSize(n)},moveTo:function(n,t,i){var r,f;if(OpenLayers.Layer.prototype.moveTo.apply(this,arguments),r=!0,!i){this.renderer.root.style.visibility="hidden";var r=this.map.getSize(),u=r.w,r=r.h,u=u/2*this.ratio-u/2,r=r/2*this.ratio-r/2,u=u+this.map.layerContainerOriginPx.x,u=-Math.round(u),r=r+this.map.layerContainerOriginPx.y,r=-Math.round(r);if(this.div.style.left=u+"px",this.div.style.top=r+"px",u=this.map.getExtent().scale(this.ratio),r=this.renderer.setExtent(u,t),this.renderer.root.style.visibility="visible",!0===OpenLayers.IS_GECKO&&(this.div.scrollLeft=this.div.scrollLeft),!t&&r)for(f in this.unrenderedFeatures)u=this.unrenderedFeatures[f],this.drawFeature(u)}if(!this.drawn||t||!r)for(this.drawn=!0,f=0,r=this.features.length;f<r;f++)this.renderer.locked=f!==r-1,u=this.features[f],this.drawFeature(u)},display:function(){OpenLayers.Layer.prototype.display.apply(this,arguments);var n=this.div.style.display;n!=this.renderer.root.style.display&&(this.renderer.root.style.display=n)},addFeatures:function(n,t){var u,r,i;if(OpenLayers.Util.isArray(n)||(n=[n]),u=!t||!t.silent,u){if(r={features:n},!1===this.events.triggerEvent("beforefeaturesadded",r))return;n=r.features}for(var r=[],f=0,e=n.length;f<e;f++){if(this.renderer.locked=f!=n.length-1?!0:!1,i=n[f],this.geometryType&&!(i.geometry instanceof this.geometryType))throw new TypeError("addFeatures: component should be an "+this.geometryType.prototype.CLASS_NAME);if(i.layer=this,!i.style&&this.style&&(i.style=OpenLayers.Util.extend({},this.style)),u){if(!1===this.events.triggerEvent("beforefeatureadded",{feature:i}))continue;this.preFeatureInsert(i)}r.push(i),this.features.push(i),this.drawFeature(i),u&&(this.events.triggerEvent("featureadded",{feature:i}),this.onFeatureInsert(i))}u&&this.events.triggerEvent("featuresadded",{features:r})},removeFeatures:function(n,t){var u,r,i;if(n&&0!==n.length){if(n===this.features)return this.removeAllFeatures(t);for(OpenLayers.Util.isArray(n)||(n=[n]),n===this.selectedFeatures&&(n=n.slice()),u=!t||!t.silent,u&&this.events.triggerEvent("beforefeaturesremoved",{features:n}),r=n.length-1;0<=r;r--)this.renderer.locked=0!=r&&n[r-1].geometry?!0:!1,i=n[r],delete this.unrenderedFeatures[i.id],u&&this.events.triggerEvent("beforefeatureremoved",{feature:i}),this.features=OpenLayers.Util.removeItem(this.features,i),i.layer=null,i.geometry&&this.renderer.eraseFeatures(i),-1!=OpenLayers.Util.indexOf(this.selectedFeatures,i)&&OpenLayers.Util.removeItem(this.selectedFeatures,i),u&&this.events.triggerEvent("featureremoved",{feature:i});u&&this.events.triggerEvent("featuresremoved",{features:n})}},removeAllFeatures:function(n){var t,i,r;for(n=!n||!n.silent,t=this.features,n&&this.events.triggerEvent("beforefeaturesremoved",{features:t}),r=t.length-1;0<=r;r--)i=t[r],n&&this.events.triggerEvent("beforefeatureremoved",{feature:i}),i.layer=null,n&&this.events.triggerEvent("featureremoved",{feature:i});this.renderer.clear(),this.features=[],this.unrenderedFeatures={},this.selectedFeatures=[],n&&this.events.triggerEvent("featuresremoved",{features:t})},destroyFeatures:function(n,t){if(void 0==n&&(n=this.features),n){this.removeFeatures(n,t);for(var i=n.length-1;0<=i;i--)n[i].destroy()}},drawFeature:function(n,t){if(this.drawn){if("object"!=typeof t){t||n.state!==OpenLayers.State.DELETE||(t="delete");var i=t||n.renderIntent;(t=n.style||this.style)||(t=this.styleMap.createSymbolizer(n,i))}i=this.renderer.drawFeature(n,t),!1===i||null===i?this.unrenderedFeatures[n.id]=n:delete this.unrenderedFeatures[n.id]}},eraseFeatures:function(n){this.renderer.eraseFeatures(n)},getFeatureFromEvent:function(n){if(!this.renderer)throw Error("getFeatureFromEvent called on layer with no renderer. This usually means you destroyed a layer, but not some handler which is associated with it.");var t=null;return(n=this.renderer.getFeatureIdFromEvent(n))&&(t="string"==typeof n?this.getFeatureById(n):n),t},getFeatureBy:function(n,t){for(var r=null,i=0,u=this.features.length;i<u;++i)if(this.features[i][n]==t){r=this.features[i];break}return r},getFeatureById:function(n){return this.getFeatureBy("id",n)},getFeatureByFid:function(n){return this.getFeatureBy("fid",n)},getFeaturesByAttribute:function(n,t){for(var r,f=this.features.length,u=[],i=0;i<f;i++)(r=this.features[i])&&r.attributes&&r.attributes[n]===t&&u.push(r);return u},onFeatureInsert:function(){},preFeatureInsert:function(){},getDataExtent:function(){var n=null,t=this.features;if(t&&0<t.length)for(var r=null,i=0,u=t.length;i<u;i++)(r=t[i].geometry)&&(null===n&&(n=new OpenLayers.Bounds),n.extend(r.getBounds()));return n},CLASS_NAME:"OpenLayers.Layer.Vector"}),OpenLayers.Layer.Vector.RootContainer=OpenLayers.Class(OpenLayers.Layer.Vector,{displayInLayerSwitcher:!1,layers:null,display:function(){},getFeatureFromEvent:function(n){for(var i=this.layers,r,t=0;t<i.length;t++)if(r=i[t].getFeatureFromEvent(n))return r},setMap:function(n){OpenLayers.Layer.Vector.prototype.setMap.apply(this,arguments),this.collectRoots(),n.events.register("changelayer",this,this.handleChangeLayer)},removeMap:function(n){n.events.unregister("changelayer",this,this.handleChangeLayer),this.resetRoots(),OpenLayers.Layer.Vector.prototype.removeMap.apply(this,arguments)},collectRoots:function(){for(var n,t=0;t<this.map.layers.length;++t)n=this.map.layers[t],-1!=OpenLayers.Util.indexOf(this.layers,n)&&n.renderer.moveRoot(this.renderer)},resetRoots:function(){for(var n,t=0;t<this.layers.length;++t)n=this.layers[t],this.renderer&&n.renderer.getRenderLayerId()==this.id&&this.renderer.moveRoot(n.renderer)},handleChangeLayer:function(n){var t=n.layer;"order"==n.property&&-1!=OpenLayers.Util.indexOf(this.layers,t)&&(this.resetRoots(),this.collectRoots())},CLASS_NAME:"OpenLayers.Layer.Vector.RootContainer"}),OpenLayers.Control.SelectFeature=OpenLayers.Class(OpenLayers.Control,{multipleKey:null,toggleKey:null,multiple:!1,clickout:!0,toggle:!1,hover:!1,highlightOnly:!1,box:!1,onBeforeSelect:function(){},onSelect:function(){},onUnselect:function(){},scope:null,geometryTypes:null,layer:null,layers:null,callbacks:null,selectStyle:null,renderIntent:"select",handlers:null,initialize:function(n,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),null===this.scope&&(this.scope=this),this.initLayer(n);var i={click:this.clickFeature,clickout:this.clickoutFeature};this.hover&&(i.over=this.overFeature,i.out=this.outFeature),this.callbacks=OpenLayers.Util.extend(i,this.callbacks),this.handlers={feature:new OpenLayers.Handler.Feature(this,this.layer,this.callbacks,{geometryTypes:this.geometryTypes})},this.box&&(this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},{boxDivClassName:"olHandlerBoxSelectFeature"}))},initLayer:function(n){OpenLayers.Util.isArray(n)?(this.layers=n,this.layer=new OpenLayers.Layer.Vector.RootContainer(this.id+"_container",{layers:n})):this.layer=n},destroy:function(){this.active&&this.layers&&this.map.removeLayer(this.layer),OpenLayers.Control.prototype.destroy.apply(this,arguments),this.layers&&this.layer.destroy()},activate:function(){return this.active||(this.layers&&this.map.addLayer(this.layer),this.handlers.feature.activate(),this.box&&this.handlers.box&&this.handlers.box.activate()),OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.active&&(this.handlers.feature.deactivate(),this.handlers.box&&this.handlers.box.deactivate(),this.layers&&this.map.removeLayer(this.layer)),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},unselectAll:function(n){for(var f=this.layers||[this.layer],t,u,r,i=0;i<f.length;++i)if(t=f[i],r=0,null!=t.selectedFeatures)for(;t.selectedFeatures.length>r;)u=t.selectedFeatures[r],n&&n.except==u?++r:this.unselect(u)},clickFeature:function(n){this.hover||(-1<OpenLayers.Util.indexOf(n.layer.selectedFeatures,n)?this.toggleSelect()?this.unselect(n):this.multipleSelect()||this.unselectAll({except:n}):(this.multipleSelect()||this.unselectAll({except:n}),this.select(n)))},multipleSelect:function(){return this.multiple||this.handlers.feature.evt&&this.handlers.feature.evt[this.multipleKey]},toggleSelect:function(){return this.toggle||this.handlers.feature.evt&&this.handlers.feature.evt[this.toggleKey]},clickoutFeature:function(){!this.hover&&this.clickout&&this.unselectAll()},overFeature:function(n){var t=n.layer;this.hover&&(this.highlightOnly?this.highlight(n):-1==OpenLayers.Util.indexOf(t.selectedFeatures,n)&&this.select(n))},outFeature:function(n){if(this.hover)if(this.highlightOnly){if(n._lastHighlighter==this.id)if(n._prevHighlighter&&n._prevHighlighter!=this.id){delete n._lastHighlighter;var t=this.map.getControl(n._prevHighlighter);t&&t.highlight(n)}else this.unhighlight(n)}else this.unselect(n)},highlight:function(n){var t=n.layer;!1!==this.events.triggerEvent("beforefeaturehighlighted",{feature:n})&&(n._prevHighlighter=n._lastHighlighter,n._lastHighlighter=this.id,t.drawFeature(n,this.selectStyle||this.renderIntent),this.events.triggerEvent("featurehighlighted",{feature:n}))},unhighlight:function(n){var t=n.layer;void 0==n._prevHighlighter?delete n._lastHighlighter:(n._prevHighlighter!=this.id&&(n._lastHighlighter=n._prevHighlighter),delete n._prevHighlighter),t.drawFeature(n,n.style||n.layer.style||"default"),this.events.triggerEvent("featureunhighlighted",{feature:n})},select:function(n){var i=this.onBeforeSelect.call(this.scope,n),t=n.layer;!1!==i&&(i=t.events.triggerEvent("beforefeatureselected",{feature:n}),!1!==i&&(t.selectedFeatures.push(n),this.highlight(n),this.handlers.feature.lastFeature||(this.handlers.feature.lastFeature=t.selectedFeatures[0]),t.events.triggerEvent("featureselected",{feature:n}),this.onSelect.call(this.scope,n)))},unselect:function(n){var t=n.layer;this.unhighlight(n),OpenLayers.Util.removeItem(t.selectedFeatures,n),t.events.triggerEvent("featureunselected",{feature:n}),this.onUnselect.call(this.scope,n)},selectBox:function(n){var i,r,u,f,e,o,t;if(n instanceof OpenLayers.Bounds){for(i=this.map.getLonLatFromPixel({x:n.left,y:n.bottom}),n=this.map.getLonLatFromPixel({x:n.right,y:n.top}),i=new OpenLayers.Bounds(i.lon,i.lat,n.lon,n.lat),this.multipleSelect()||this.unselectAll(),n=this.multiple,this.multiple=!0,r=this.layers||[this.layer],this.events.triggerEvent("boxselectionstart",{layers:r}),f=0;f<r.length;++f)for(u=r[f],e=0,o=u.features.length;e<o;++e)t=u.features[e],t.getVisibility()&&(null==this.geometryTypes||-1<OpenLayers.Util.indexOf(this.geometryTypes,t.geometry.CLASS_NAME))&&i.toGeometry().intersects(t.geometry)&&-1==OpenLayers.Util.indexOf(u.selectedFeatures,t)&&this.select(t);this.multiple=n,this.events.triggerEvent("boxselectionend",{layers:r})}},setMap:function(n){this.handlers.feature.setMap(n),this.box&&this.handlers.box.setMap(n),OpenLayers.Control.prototype.setMap.apply(this,arguments)},setLayer:function(n){var t=this.active;this.unselectAll(),this.deactivate(),this.layers&&(this.layer.destroy(),this.layers=null),this.initLayer(n),this.handlers.feature.layer=this.layer,t&&this.activate()},CLASS_NAME:"OpenLayers.Control.SelectFeature"}),OpenLayers.Handler.Point=OpenLayers.Class(OpenLayers.Handler,{point:null,layer:null,multi:!1,citeCompliant:!1,mouseDown:!1,stoppedDown:null,lastDown:null,lastUp:null,persist:!1,stopDown:!1,stopUp:!1,layerOptions:null,pixelTolerance:5,lastTouchPx:null,initialize:function(n,t,i){i&&i.layerOptions&&i.layerOptions.styleMap||(this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style["default"],{})),OpenLayers.Handler.prototype.initialize.apply(this,arguments)},activate:function(){if(!OpenLayers.Handler.prototype.activate.apply(this,arguments))return!1;var n=OpenLayers.Util.extend({displayInLayerSwitcher:!1,calculateInRange:OpenLayers.Function.True,wrapDateLine:this.citeCompliant},this.layerOptions);return this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,n),this.map.addLayer(this.layer),!0},createFeature:function(n){n=this.layer.getLonLatFromViewPortPx(n),n=new OpenLayers.Geometry.Point(n.lon,n.lat),this.point=new OpenLayers.Feature.Vector(n),this.callback("create",[this.point.geometry,this.point]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.point],{silent:!0})},deactivate:function(){return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)?(this.cancel(),null!=this.layer.map&&(this.destroyFeature(!0),this.layer.destroy(!1)),this.layer=null,!0):!1},destroyFeature:function(n){this.layer&&(n||!this.persist)&&this.layer.destroyFeatures(),this.point=null},destroyPersistedFeature:function(){var n=this.layer;n&&1<n.features.length&&this.layer.features[0].destroy()},finalize:function(n){this.mouseDown=!1,this.lastTouchPx=this.lastUp=this.lastDown=null,this.callback(n?"cancel":"done",[this.geometryClone()]),this.destroyFeature(n)},cancel:function(){this.finalize(!0)},click:function(n){return OpenLayers.Event.stop(n),!1},dblclick:function(n){return OpenLayers.Event.stop(n),!1},modifyFeature:function(n){this.point||this.createFeature(n),n=this.layer.getLonLatFromViewPortPx(n),this.point.geometry.x=n.lon,this.point.geometry.y=n.lat,this.callback("modify",[this.point.geometry,this.point,!1]),this.point.geometry.clearBounds(),this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.point,this.style)},getGeometry:function(){var n=this.point&&this.point.geometry;return n&&this.multi&&(n=new OpenLayers.Geometry.MultiPoint([n])),n},geometryClone:function(){var n=this.getGeometry();return n&&n.clone()},mousedown:function(n){return this.down(n)},touchstart:function(n){return this.startTouch(),this.lastTouchPx=n.xy,this.down(n)},mousemove:function(n){return this.move(n)},touchmove:function(n){return this.lastTouchPx=n.xy,this.move(n)},mouseup:function(n){return this.up(n)},touchend:function(n){return n.xy=this.lastTouchPx,this.up(n)},down:function(n){return this.mouseDown=!0,this.lastDown=n.xy,this.touch||this.modifyFeature(n.xy),this.stoppedDown=this.stopDown,!this.stopDown},move:function(n){return this.touch||this.mouseDown&&!this.stoppedDown||this.modifyFeature(n.xy),!0},up:function(n){return(this.mouseDown=!1,this.stoppedDown=this.stopDown,!this.checkModifiers(n)||this.lastUp&&this.lastUp.equals(n.xy)||!this.lastDown||!this.passesTolerance(this.lastDown,n.xy,this.pixelTolerance))?!0:(this.touch&&this.modifyFeature(n.xy),this.persist&&this.destroyPersistedFeature(),this.lastUp=n.xy,this.finalize(),!this.stopUp)},mouseout:function(n){OpenLayers.Util.mouseLeft(n,this.map.viewPortDiv)&&(this.stoppedDown=this.stopDown,this.mouseDown=!1)},passesTolerance:function(n,t,i){var r=!0;return null!=i&&n&&t&&n.distanceTo(t)>i&&(r=!1),r},CLASS_NAME:"OpenLayers.Handler.Point"}),OpenLayers.Handler.Path=OpenLayers.Class(OpenLayers.Handler.Point,{line:null,maxVertices:null,doubleTouchTolerance:20,freehand:!1,freehandToggle:"shiftKey",timerId:null,redoStack:null,createFeature:function(n){n=this.layer.getLonLatFromViewPortPx(n),n=new OpenLayers.Geometry.Point(n.lon,n.lat),this.point=new OpenLayers.Feature.Vector(n),this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([this.point.geometry])),this.callback("create",[this.point.geometry,this.getSketch()]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.line,this.point],{silent:!0})},destroyFeature:function(n){OpenLayers.Handler.Point.prototype.destroyFeature.call(this,n),this.line=null},destroyPersistedFeature:function(){var n=this.layer;n&&2<n.features.length&&this.layer.features[0].destroy()},removePoint:function(){this.point&&this.layer.removeFeatures([this.point])},addPoint:function(n){this.layer.removeFeatures([this.point]),n=this.layer.getLonLatFromViewPortPx(n),this.point=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(n.lon,n.lat)),this.line.geometry.addComponent(this.point.geometry,this.line.geometry.components.length),this.layer.addFeatures([this.point]),this.callback("point",[this.point.geometry,this.getGeometry()]),this.callback("modify",[this.point.geometry,this.getSketch()]),this.drawFeature(),delete this.redoStack},insertXY:function(n,t){this.line.geometry.addComponent(new OpenLayers.Geometry.Point(n,t),this.getCurrentPointIndex()),this.drawFeature(),delete this.redoStack},insertDeltaXY:function(n,t){var i=this.getCurrentPointIndex()-1,i=this.line.geometry.components[i];!i||isNaN(i.x)||isNaN(i.y)||this.insertXY(i.x+n,i.y+t)},insertDirectionLength:function(n,t){n*=Math.PI/180;var i=t*Math.cos(n),r=t*Math.sin(n);this.insertDeltaXY(i,r)},insertDeflectionLength:function(n,t){var i=this.getCurrentPointIndex()-1;if(0<i){var r=this.line.geometry.components[i],i=this.line.geometry.components[i-1],r=Math.atan2(r.y-i.y,r.x-i.x);this.insertDirectionLength(180*r/Math.PI+n,t)}},getCurrentPointIndex:function(){return this.line.geometry.components.length-1},undo:function(){var t=this.line.geometry,n=t.components,i=this.getCurrentPointIndex()-1,r=n[i],u=t.removeComponent(r);return u&&(this.touch&&0<i&&(n=t.components,t=n[i-1],i=this.getCurrentPointIndex(),n=n[i],n.x=t.x,n.y=t.y),this.redoStack||(this.redoStack=[]),this.redoStack.push(r),this.drawFeature()),u},redo:function(){var n=this.redoStack&&this.redoStack.pop();return n&&(this.line.geometry.addComponent(n,this.getCurrentPointIndex()),this.drawFeature()),!!n},freehandMode:function(n){return this.freehandToggle&&n[this.freehandToggle]?!this.freehand:this.freehand},modifyFeature:function(n,t){this.line||this.createFeature(n);var i=this.layer.getLonLatFromViewPortPx(n);this.point.geometry.x=i.lon,this.point.geometry.y=i.lat,this.callback("modify",[this.point.geometry,this.getSketch(),t]),this.point.geometry.clearBounds(),this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.line,this.style),this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.line},getGeometry:function(){var n=this.line&&this.line.geometry;return n&&this.multi&&(n=new OpenLayers.Geometry.MultiLineString([n])),n},touchstart:function(n){return this.timerId&&this.passesTolerance(this.lastTouchPx,n.xy,this.doubleTouchTolerance)?(this.finishGeometry(),window.clearTimeout(this.timerId),this.timerId=null,!1):(this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),this.timerId=window.setTimeout(OpenLayers.Function.bind(function(){this.timerId=null},this),300),OpenLayers.Handler.Point.prototype.touchstart.call(this,n))},down:function(n){var t=this.stopDown;return this.freehandMode(n)&&(t=!0,this.touch&&(this.modifyFeature(n.xy,!!this.lastUp),OpenLayers.Event.stop(n))),this.touch||this.lastDown&&this.passesTolerance(this.lastDown,n.xy,this.pixelTolerance)||this.modifyFeature(n.xy,!!this.lastUp),this.mouseDown=!0,this.lastDown=n.xy,this.stoppedDown=t,!t},move:function(n){return this.stoppedDown&&this.freehandMode(n)?(this.persist&&this.destroyPersistedFeature(),this.maxVertices&&this.line&&this.line.geometry.components.length===this.maxVertices?(this.removePoint(),this.finalize()):this.addPoint(n.xy),!1):(this.touch||this.mouseDown&&!this.stoppedDown||this.modifyFeature(n.xy,!!this.lastUp),!0)},up:function(n){return!this.mouseDown||this.lastUp&&this.lastUp.equals(n.xy)||(this.stoppedDown&&this.freehandMode(n)?(this.persist&&this.destroyPersistedFeature(),this.removePoint(),this.finalize()):this.passesTolerance(this.lastDown,n.xy,this.pixelTolerance)&&(this.touch&&this.modifyFeature(n.xy),null==this.lastUp&&this.persist&&this.destroyPersistedFeature(),this.addPoint(n.xy),this.lastUp=n.xy,this.line.geometry.components.length===this.maxVertices+1&&this.finishGeometry())),this.stoppedDown=this.stopDown,this.mouseDown=!1,!this.stopUp},finishGeometry:function(){this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length-1]),this.removePoint(),this.finalize()},dblclick:function(n){return this.freehandMode(n)||this.finishGeometry(),!1},CLASS_NAME:"OpenLayers.Handler.Path"}),OpenLayers.Control.Attribution=OpenLayers.Class(OpenLayers.Control,{separator:", ",template:"${layers}",destroy:function(){this.map.events.un({removelayer:this.updateAttribution,addlayer:this.updateAttribution,changelayer:this.updateAttribution,changebaselayer:this.updateAttribution,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments)},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);this.map.events.on({changebaselayer:this.updateAttribution,changelayer:this.updateAttribution,addlayer:this.updateAttribution,removelayer:this.updateAttribution,scope:this});return this.updateAttribution(),this.div},updateAttribution:function(){var i=[],t,r,n;if(this.map&&this.map.layers){for(t=0,r=this.map.layers.length;t<r;t++)n=this.map.layers[t],n.attribution&&n.getVisibility()&&-1===OpenLayers.Util.indexOf(i,n.attribution)&&i.push(n.attribution);this.div.innerHTML=OpenLayers.String.format(this.template,{layers:i.join(this.separator)})}},CLASS_NAME:"OpenLayers.Control.Attribution"}),OpenLayers.Kinetic=OpenLayers.Class({threshold:0,deceleration:.0035,nbPoints:100,delay:200,points:void 0,timerId:void 0,initialize:function(n){OpenLayers.Util.extend(this,n)},begin:function(){OpenLayers.Animation.stop(this.timerId),this.timerId=void 0,this.points=[]},update:function(n){this.points.unshift({xy:n,tick:(new Date).getTime()}),this.points.length>this.nbPoints&&this.points.pop()},end:function(n){for(var r,i=(new Date).getTime(),t=0,f=this.points.length,u;t<f;t++){if(u=this.points[t],i-u.tick>this.delay)break;r=u}if(r&&(t=(new Date).getTime()-r.tick,i=Math.sqrt(Math.pow(n.x-r.xy.x,2)+Math.pow(n.y-r.xy.y,2)),t=i/t,!(0==t||t<this.threshold)))return i=Math.asin((n.y-r.xy.y)/i),r.xy.x<=n.x&&(i=Math.PI-i),{speed:t,theta:i}},move:function(n,t){var i=n.speed,f=Math.cos(n.theta),e=-Math.sin(n.theta),o=(new Date).getTime(),r=0,u=0;this.timerId=OpenLayers.Animation.start(OpenLayers.Function.bind(function(){if(null!=this.timerId){var n=(new Date).getTime()-o,s=-this.deceleration*Math.pow(n,2)/2+i*n,c=s*f,s=s*e,h,l;h=!1,0>=-this.deceleration*n+i&&(OpenLayers.Animation.stop(this.timerId),this.timerId=null,h=!0),n=c-r,l=s-u,r=c,u=s,t(n,l,h)}},this))},CLASS_NAME:"OpenLayers.Kinetic"}),OpenLayers.Handler.Box=OpenLayers.Class(OpenLayers.Handler,{dragHandler:null,boxDivClassName:"olHandlerBoxZoomBox",boxOffsets:null,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.dragHandler=new OpenLayers.Handler.Drag(this,{down:this.startBox,move:this.moveBox,out:this.removeBox,up:this.endBox},{keyMask:this.keyMask})},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments),this.dragHandler&&(this.dragHandler.destroy(),this.dragHandler=null)},setMap:function(n){OpenLayers.Handler.prototype.setMap.apply(this,arguments),this.dragHandler&&this.dragHandler.setMap(n)},startBox:function(){this.callback("start",[]),this.zoomBox=OpenLayers.Util.createDiv("zoomBox",{x:-9999,y:-9999}),this.zoomBox.className=this.boxDivClassName,this.zoomBox.style.zIndex=this.map.Z_INDEX_BASE.Popup-1,this.map.viewPortDiv.appendChild(this.zoomBox),OpenLayers.Element.addClass(this.map.viewPortDiv,"olDrawBox")},moveBox:function(n){var i=this.dragHandler.start.x,r=this.dragHandler.start.y,u=Math.abs(i-n.x),f=Math.abs(r-n.y),t=this.getBoxOffsets();this.zoomBox.style.width=u+t.width+1+"px",this.zoomBox.style.height=f+t.height+1+"px",this.zoomBox.style.left=(n.x<i?i-u-t.left:i-t.left)+"px",this.zoomBox.style.top=(n.y<r?r-f-t.top:r-t.top)+"px"},endBox:function(n){var t,i,r,u;5<Math.abs(this.dragHandler.start.x-n.x)||5<Math.abs(this.dragHandler.start.y-n.y)?(i=this.dragHandler.start,t=Math.min(i.y,n.y),r=Math.max(i.y,n.y),u=Math.min(i.x,n.x),n=Math.max(i.x,n.x),t=new OpenLayers.Bounds(u,r,n,t)):t=this.dragHandler.start.clone(),this.removeBox(),this.callback("done",[t])},removeBox:function(){this.map.viewPortDiv.removeChild(this.zoomBox),this.boxOffsets=this.zoomBox=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDrawBox")},activate:function(){return OpenLayers.Handler.prototype.activate.apply(this,arguments)?(this.dragHandler.activate(),!0):!1},deactivate:function(){return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)?(this.dragHandler.deactivate()&&this.zoomBox&&this.removeBox(),!0):!1},getBoxOffsets:function(){var n,t;if(!this.boxOffsets){n=document.createElement("div"),n.style.position="absolute",n.style.border="1px solid black",n.style.width="3px",document.body.appendChild(n),t=3==n.clientWidth,document.body.removeChild(n);var n=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-left-width")),i=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-right-width")),r=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-top-width")),u=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-bottom-width"));this.boxOffsets={left:n,right:i,top:r,bottom:u,width:!1===t?n+i:0,height:!1===t?r+u:0}}return this.boxOffsets},CLASS_NAME:"OpenLayers.Handler.Box"}),OpenLayers.Control.ZoomBox=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,out:!1,keyMask:null,alwaysZoom:!1,zoomOnClick:!0,draw:function(){this.handler=new OpenLayers.Handler.Box(this,{done:this.zoomBox},{keyMask:this.keyMask})},zoomBox:function(n){var t,e,f;if(n instanceof OpenLayers.Bounds){if(e=n.getCenterPixel(),this.out){t=Math.min(this.map.size.h/(n.bottom-n.top),this.map.size.w/(n.right-n.left));var i=this.map.getExtent(),r=this.map.getLonLatFromPixel(e),u=r.lon-i.getWidth()/2*t;n=r.lon+i.getWidth()/2*t,f=r.lat-i.getHeight()/2*t,t=r.lat+i.getHeight()/2*t,t=new OpenLayers.Bounds(u,f,n,t)}else u=this.map.getLonLatFromPixel({x:n.left,y:n.bottom}),n=this.map.getLonLatFromPixel({x:n.right,y:n.top}),t=new OpenLayers.Bounds(u.lon,u.lat,n.lon,n.lat);u=this.map.getZoom(),f=this.map.getSize(),n=f.w/2,f=f.h/2,t=this.map.getZoomForExtent(t),i=this.map.getResolution(),r=this.map.getResolutionForZoom(t),i==r?this.map.setCenter(this.map.getLonLatFromPixel(e)):this.map.zoomTo(t,{x:(i*e.x-r*n)/(i-r),y:(i*e.y-r*f)/(i-r)}),u==this.map.getZoom()&&!0==this.alwaysZoom&&this.map.zoomTo(u+(this.out?-1:1))}else this.zoomOnClick&&(this.out?this.map.zoomTo(this.map.getZoom()-1,n):this.map.zoomTo(this.map.getZoom()+1,n))},CLASS_NAME:"OpenLayers.Control.ZoomBox"}),OpenLayers.Control.DragPan=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,panned:!1,interval:0,documentDrag:!1,kinetic:null,enableKinetic:!0,kineticInterval:10,draw:function(){if(this.enableKinetic&&OpenLayers.Kinetic){var n={interval:this.kineticInterval};"object"==typeof this.enableKinetic&&(n=OpenLayers.Util.extend(n,this.enableKinetic)),this.kinetic=new OpenLayers.Kinetic(n)}this.handler=new OpenLayers.Handler.Drag(this,{move:this.panMap,done:this.panMapDone,down:this.panMapStart},{interval:this.interval,documentDrag:this.documentDrag})},panMapStart:function(){this.kinetic&&this.kinetic.begin()},panMap:function(n){this.kinetic&&this.kinetic.update(n),this.panned=!0,this.map.pan(this.handler.last.x-n.x,this.handler.last.y-n.y,{dragging:!0,animate:!1})},panMapDone:function(n){var t,i;this.panned&&(t=null,this.kinetic&&(t=this.kinetic.end(n)),this.map.pan(this.handler.last.x-n.x,this.handler.last.y-n.y,{dragging:!!t,animate:!1}),t&&(i=this,this.kinetic.move(t,function(n,t,r){i.map.pan(n,t,{dragging:!r,animate:!1})})),this.panned=!1)},CLASS_NAME:"OpenLayers.Control.DragPan"}),OpenLayers.Handler.Click=OpenLayers.Class(OpenLayers.Handler,{delay:300,single:!0,double:!1,pixelTolerance:0,dblclickTolerance:13,stopSingle:!1,stopDouble:!1,timerId:null,down:null,last:null,first:null,rightclickTimerId:null,touchstart:function(n){return this.startTouch(),this.down=this.getEventInfo(n),this.last=this.getEventInfo(n),!0},touchmove:function(n){return this.last=this.getEventInfo(n),!0},touchend:function(n){return this.down&&(n.xy=this.last.xy,n.lastTouches=this.last.touches,this.handleSingle(n),this.down=null),!0},mousedown:function(n){return this.down=this.getEventInfo(n),this.last=this.getEventInfo(n),!0},mouseup:function(n){var t=!0;return this.checkModifiers(n)&&this.control.handleRightClicks&&OpenLayers.Event.isRightClick(n)&&(t=this.rightclick(n)),t},rightclick:function(n){if(this.passesTolerance(n)){if(null!=this.rightclickTimerId)return this.clearTimer(),this.callback("dblrightclick",[n]),!this.stopDouble;n=this.double?OpenLayers.Util.extend({},n):this.callback("rightclick",[n]),n=OpenLayers.Function.bind(this.delayedRightCall,this,n),this.rightclickTimerId=window.setTimeout(n,this.delay)}return!this.stopSingle},delayedRightCall:function(n){this.rightclickTimerId=null,n&&this.callback("rightclick",[n])},click:function(n){return this.last||(this.last=this.getEventInfo(n)),this.handleSingle(n),!this.stopSingle},dblclick:function(n){return this.handleDouble(n),!this.stopDouble},handleDouble:function(n){this.passesDblclickTolerance(n)&&(this.double&&this.callback("dblclick",[n]),this.clearTimer())},handleSingle:function(n){this.passesTolerance(n)&&(null!=this.timerId?(this.last.touches&&1===this.last.touches.length&&(this.double&&OpenLayers.Event.preventDefault(n),this.handleDouble(n)),this.last.touches&&2===this.last.touches.length||this.clearTimer()):(this.first=this.getEventInfo(n),n=this.single?OpenLayers.Util.extend({},n):null,this.queuePotentialClick(n)))},queuePotentialClick:function(n){this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,n),this.delay)},passesTolerance:function(n){var t=!0,i;if(null!=this.pixelTolerance&&this.down&&this.down.xy&&(t=this.pixelTolerance>=this.down.xy.distanceTo(n.xy))&&this.touch&&this.down.touches.length===this.last.touches.length)for(n=0,i=this.down.touches.length;n<i;++n)if(this.getTouchDistance(this.down.touches[n],this.last.touches[n])>this.pixelTolerance){t=!1;break}return t},getTouchDistance:function(n,t){return Math.sqrt(Math.pow(n.clientX-t.clientX,2)+Math.pow(n.clientY-t.clientY,2))},passesDblclickTolerance:function(n){return n=!0,this.down&&this.first&&(n=this.down.xy.distanceTo(this.first.xy)<=this.dblclickTolerance),n},clearTimer:function(){null!=this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),null!=this.rightclickTimerId&&(window.clearTimeout(this.rightclickTimerId),this.rightclickTimerId=null)},delayedCall:function(n){this.timerId=null,n&&this.callback("click",[n])},getEventInfo:function(n){var i,r,u,t;if(n.touches)for(r=n.touches.length,i=Array(r),t=0;t<r;t++)u=n.touches[t],i[t]={clientX:u.olClientX,clientY:u.olClientY};return{xy:n.xy,touches:i}},deactivate:function(){var n=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.clearTimer(),this.last=this.first=this.down=null,n=!0),n},CLASS_NAME:"OpenLayers.Handler.Click"}),OpenLayers.Control.Navigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,documentDrag:!1,zoomBox:null,zoomBoxEnabled:!0,zoomWheelEnabled:!0,mouseWheelOptions:null,handleRightClicks:!1,zoomBoxKeyMask:OpenLayers.Handler.MOD_SHIFT,autoActivate:!0,initialize:function(){this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate(),this.dragPan&&this.dragPan.destroy(),this.dragPan=null,this.zoomBox&&this.zoomBox.destroy(),this.zoomBox=null,this.pinchZoom&&this.pinchZoom.destroy(),this.pinchZoom=null,OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return this.dragPan.activate(),this.zoomWheelEnabled&&this.handlers.wheel.activate(),this.handlers.click.activate(),this.zoomBoxEnabled&&this.zoomBox.activate(),this.pinchZoom&&this.pinchZoom.activate(),OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.pinchZoom&&this.pinchZoom.deactivate(),this.zoomBox.deactivate(),this.dragPan.deactivate(),this.handlers.click.deactivate(),this.handlers.wheel.deactivate(),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},draw:function(){this.handleRightClicks&&(this.map.viewPortDiv.oncontextmenu=OpenLayers.Function.False),this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.defaultClick,dblclick:this.defaultDblClick,dblrightclick:this.defaultDblRightClick},{double:!0,stopDouble:!0}),this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions)),this.zoomBox=new OpenLayers.Control.ZoomBox({map:this.map,keyMask:this.zoomBoxKeyMask}),this.dragPan.draw(),this.zoomBox.draw(),this.handlers.wheel=new OpenLayers.Handler.MouseWheel(this,{up:this.wheelUp,down:this.wheelDown},OpenLayers.Util.extend(this.map.fractionalZoom?{}:{cumulative:!1,interval:50,maxDelta:6},this.mouseWheelOptions)),OpenLayers.Control.PinchZoom&&(this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions)))},defaultClick:function(n){n.lastTouches&&2==n.lastTouches.length&&this.map.zoomOut()},defaultDblClick:function(n){this.map.zoomTo(this.map.zoom+1,n.xy)},defaultDblRightClick:function(n){this.map.zoomTo(this.map.zoom-1,n.xy)},wheelChange:function(n,t){this.map.fractionalZoom||(t=Math.round(t));var r=this.map.getZoom(),i;i=Math.max(r+t,0),i=Math.min(i,this.map.getNumZoomLevels()),i!==r&&this.map.zoomTo(i,n.xy)},wheelUp:function(n,t){this.wheelChange(n,t||1)},wheelDown:function(n,t){this.wheelChange(n,t||-1)},disableZoomBox:function(){this.zoomBoxEnabled=!1,this.zoomBox.deactivate()},enableZoomBox:function(){this.zoomBoxEnabled=!0,this.active&&this.zoomBox.activate()},disableZoomWheel:function(){this.zoomWheelEnabled=!1,this.handlers.wheel.deactivate()},enableZoomWheel:function(){this.zoomWheelEnabled=!0,this.active&&this.handlers.wheel.activate()},CLASS_NAME:"OpenLayers.Control.Navigation"}),OpenLayers.Layer.WMS=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{service:"WMS",version:"1.1.1",request:"GetMap",styles:"",format:"image/jpeg"},isBaseLayer:!0,encodeBBOX:!1,noMagic:!1,yx:{},initialize:function(n,t,i,r){var u=[];i=OpenLayers.Util.upperCaseObject(i),1.3<=parseFloat(i.VERSION)&&!i.EXCEPTIONS&&(i.EXCEPTIONS="INIMAGE"),u.push(n,t,i,r),OpenLayers.Layer.Grid.prototype.initialize.apply(this,u),OpenLayers.Util.applyDefaults(this.params,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)),!this.noMagic&&this.params.TRANSPARENT&&"true"==this.params.TRANSPARENT.toString().toLowerCase()&&(null!=r&&r.isBaseLayer||(this.isBaseLayer=!1),"image/jpeg"==this.params.FORMAT&&(this.params.FORMAT=OpenLayers.Util.alphaHack()?"image/gif":"image/png"))},clone:function(n){return null==n&&(n=new OpenLayers.Layer.WMS(this.name,this.url,this.params,this.getOptions())),OpenLayers.Layer.Grid.prototype.clone.apply(this,[n])},reverseAxisOrder:function(){var n=this.projection.getCode();return 1.3<=parseFloat(this.params.VERSION)&&!!(this.yx[n]||OpenLayers.Projection.defaults[n]&&OpenLayers.Projection.defaults[n].yx)},getURL:function(n){n=this.adjustBounds(n);var i=this.getImageSize(),t={},r=this.reverseAxisOrder();return t.BBOX=this.encodeBBOX?n.toBBOX(null,r):n.toArray(r),t.WIDTH=i.w,t.HEIGHT=i.h,this.getFullRequestString(t)},mergeNewParams:function(n){return n=[OpenLayers.Util.upperCaseObject(n)],OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,n)},getFullRequestString:function(n){var t=this.map.getProjectionObject(),t=this.projection&&this.projection.equals(t)?this.projection.getCode():t.getCode(),t="none"==t?null:t;return 1.3<=parseFloat(this.params.VERSION)?this.params.CRS=t:this.params.SRS=t,"boolean"==typeof this.params.TRANSPARENT&&(n.TRANSPARENT=this.params.TRANSPARENT?"TRUE":"FALSE"),OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,arguments)},CLASS_NAME:"OpenLayers.Layer.WMS"}),OpenLayers.Renderer.SVG=OpenLayers.Class(OpenLayers.Renderer.Elements,{xmlns:"http://www.w3.org/2000/svg",xlinkns:"http://www.w3.org/1999/xlink",MAX_PIXEL:15e3,translationParameters:null,symbolMetrics:null,initialize:function(){this.supported()&&(OpenLayers.Renderer.Elements.prototype.initialize.apply(this,arguments),this.translationParameters={x:0,y:0},this.symbolMetrics={})},supported:function(){return document.implementation&&(document.implementation.hasFeature("org.w3c.svg","1.0")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#SVG","1.1")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))},inValidRange:function(n,t,i){return n+=i?0:this.translationParameters.x,t+=i?0:this.translationParameters.y,n>=-this.MAX_PIXEL&&n<=this.MAX_PIXEL&&t>=-this.MAX_PIXEL&&t<=this.MAX_PIXEL},setExtent:function(n,t){var u=OpenLayers.Renderer.Elements.prototype.setExtent.apply(this,arguments),i=this.getResolution(),r=-n.left/i,i=n.top/i;return t?(this.left=r,this.top=i,this.rendererRoot.setAttributeNS(null,"viewBox","0 0 "+this.size.w+" "+this.size.h),this.translate(this.xOffset,0),!0):((r=this.translate(r-this.left+this.xOffset,i-this.top))||this.setExtent(n,!0),u&&r)},translate:function(n,t){if(this.inValidRange(n,t,!0)){var i="";return(n||t)&&(i="translate("+n+","+t+")"),this.root.setAttributeNS(null,"transform",i),this.translationParameters={x:n,y:t},!0}return!1},setSize:function(){OpenLayers.Renderer.prototype.setSize.apply(this,arguments),this.rendererRoot.setAttributeNS(null,"width",this.size.w),this.rendererRoot.setAttributeNS(null,"height",this.size.h)},getNodeType:function(n,t){var i=null;switch(n.CLASS_NAME){case"OpenLayers.Geometry.Point":i=t.externalGraphic?"image":this.isComplexSymbol(t.graphicName)?"svg":"circle";break;case"OpenLayers.Geometry.Rectangle":i="rect";break;case"OpenLayers.Geometry.LineString":i="polyline";break;case"OpenLayers.Geometry.LinearRing":i="polygon";break;case"OpenLayers.Geometry.Polygon":case"OpenLayers.Geometry.Curve":i="path"}return i},setStyle:function(n,t,i){var r,f,u;if(t=t||n._style,i=i||n._options,f=t.title||t.graphicTitle,f&&(n.setAttributeNS(null,"title",f),r=n.getElementsByTagName("title"),0<r.length?r[0].firstChild.textContent=f:(r=this.nodeFactory(null,"title"),r.textContent=f,n.appendChild(r))),r=parseFloat(n.getAttributeNS(null,"r")),f=1,"OpenLayers.Geometry.Point"==n._geometryClass&&r){if(n.style.visibility="",!1===t.graphic)n.style.visibility="hidden";else if(t.externalGraphic){u=this.getPosition(n),t.graphicWidth&&t.graphicHeight&&n.setAttributeNS(null,"preserveAspectRatio","none");var r=t.graphicWidth||t.graphicHeight,e=t.graphicHeight||t.graphicWidth,r=r?r:2*t.pointRadius,e=e?e:2*t.pointRadius,o=void 0!=t.graphicYOffset?t.graphicYOffset:-(.5*e),s=t.graphicOpacity||t.fillOpacity;n.setAttributeNS(null,"x",(u.x+(void 0!=t.graphicXOffset?t.graphicXOffset:-(.5*r))).toFixed()),n.setAttributeNS(null,"y",(u.y+o).toFixed()),n.setAttributeNS(null,"width",r),n.setAttributeNS(null,"height",e),n.setAttributeNS(this.xlinkns,"xlink:href",t.externalGraphic),n.setAttributeNS(null,"style","opacity: "+s),n.onclick=OpenLayers.Event.preventDefault}else if(this.isComplexSymbol(t.graphicName)){var r=3*t.pointRadius,e=2*r,h=this.importSymbol(t.graphicName);u=this.getPosition(n),f=3*this.symbolMetrics[h.id][0]/e,o=n.parentNode,s=n.nextSibling,o&&o.removeChild(n),n.firstChild&&n.removeChild(n.firstChild),n.appendChild(h.firstChild.cloneNode(!0)),n.setAttributeNS(null,"viewBox",h.getAttributeNS(null,"viewBox")),n.setAttributeNS(null,"width",e),n.setAttributeNS(null,"height",e),n.setAttributeNS(null,"x",u.x-r),n.setAttributeNS(null,"y",u.y-r),s?o.insertBefore(n,s):o&&o.appendChild(n)}else n.setAttributeNS(null,"r",t.pointRadius);r=t.rotation,(void 0!==r||void 0!==n._rotation)&&u&&(n._rotation=r,r|=0,"svg"!==n.nodeName?n.setAttributeNS(null,"transform","rotate("+r+" "+u.x+" "+u.y+")"):(u=this.symbolMetrics[h.id],n.firstChild.setAttributeNS(null,"transform","rotate("+r+" "+u[1]+" "+u[2]+")")))}return i.isFilled?(n.setAttributeNS(null,"fill",t.fillColor),n.setAttributeNS(null,"fill-opacity",t.fillOpacity)):n.setAttributeNS(null,"fill","none"),i.isStroked?(n.setAttributeNS(null,"stroke",t.strokeColor),n.setAttributeNS(null,"stroke-opacity",t.strokeOpacity),n.setAttributeNS(null,"stroke-width",t.strokeWidth*f),n.setAttributeNS(null,"stroke-linecap",t.strokeLinecap||"round"),n.setAttributeNS(null,"stroke-linejoin","round"),t.strokeDashstyle&&n.setAttributeNS(null,"stroke-dasharray",this.dashStyle(t,f))):n.setAttributeNS(null,"stroke","none"),t.pointerEvents&&n.setAttributeNS(null,"pointer-events",t.pointerEvents),null!=t.cursor&&n.setAttributeNS(null,"cursor",t.cursor),n},dashStyle:function(n,t){var i=n.strokeWidth*t,r=n.strokeDashstyle;switch(r){case"solid":return"none";case"dot":return[1,4*i].join();case"dash":return[4*i,4*i].join();case"dashdot":return[4*i,4*i,1,4*i].join();case"longdash":return[8*i,4*i].join();case"longdashdot":return[8*i,4*i,1,4*i].join();default:return OpenLayers.String.trim(r).replace(/\s+/g,",")}},createNode:function(n,t){var i=document.createElementNS(this.xmlns,n);return t&&i.setAttributeNS(null,"id",t),i},nodeTypeCompare:function(n,t){return t==n.nodeName},createRenderRoot:function(){var n=this.nodeFactory(this.container.id+"_svgRoot","svg");return n.style.display="block",n},createRoot:function(n){return this.nodeFactory(this.container.id+n,"g")},createDefs:function(){var n=this.nodeFactory(this.container.id+"_defs","defs");return this.rendererRoot.appendChild(n),n},drawPoint:function(n,t){return this.drawCircle(n,t,1)},drawCircle:function(n,t,i){var r=this.getResolution(),u=(t.x-this.featureDx)/r+this.left;return t=this.top-t.y/r,this.inValidRange(u,t)?(n.setAttributeNS(null,"cx",u),n.setAttributeNS(null,"cy",t),n.setAttributeNS(null,"r",i),n):!1},drawLineString:function(n,t){var i=this.getComponentsString(t.components);return i.path?(n.setAttributeNS(null,"points",i.path),i.complete?n:null):!1},drawLinearRing:function(n,t){var i=this.getComponentsString(t.components);return i.path?(n.setAttributeNS(null,"points",i.path),i.complete?n:null):!1},drawPolygon:function(n,t){for(var i="",e=!0,r=!0,u,o,f=0,s=t.components.length;f<s;f++)i+=" M",u=this.getComponentsString(t.components[f].components," "),(o=u.path)?(i+=" "+o,r=u.complete&&r):e=!1;return e?(n.setAttributeNS(null,"d",i+" z"),n.setAttributeNS(null,"fill-rule","evenodd"),r?n:null):!1},drawRectangle:function(n,t){var i=this.getResolution(),r=(t.x-this.featureDx)/i+this.left,u=this.top-t.y/i;return this.inValidRange(r,u)?(n.setAttributeNS(null,"x",r),n.setAttributeNS(null,"y",u),n.setAttributeNS(null,"width",t.width/i),n.setAttributeNS(null,"height",t.height/i),n):!1},drawText:function(n,t,i){var s=!!t.labelOutlineWidth,u,h,c,e,f,l;s&&(u=OpenLayers.Util.extend({},t),u.fontColor=u.labelOutlineColor,u.fontStrokeColor=u.labelOutlineColor,u.fontStrokeWidth=t.labelOutlineWidth,t.labelOutlineOpacity&&(u.fontOpacity=t.labelOutlineOpacity),delete u.labelOutlineWidth,this.drawText(n,u,i));var r=this.getResolution(),u=(i.x-this.featureDx)/r+this.left,o=i.y/r-this.top,s=s?this.LABEL_OUTLINE_SUFFIX:this.LABEL_ID_SUFFIX,r=this.nodeFactory(n+s,"text");for(r.setAttributeNS(null,"x",u),r.setAttributeNS(null,"y",-o),t.fontColor&&r.setAttributeNS(null,"fill",t.fontColor),t.fontStrokeColor&&r.setAttributeNS(null,"stroke",t.fontStrokeColor),t.fontStrokeWidth&&r.setAttributeNS(null,"stroke-width",t.fontStrokeWidth),t.fontOpacity&&r.setAttributeNS(null,"opacity",t.fontOpacity),t.fontFamily&&r.setAttributeNS(null,"font-family",t.fontFamily),t.fontSize&&r.setAttributeNS(null,"font-size",t.fontSize),t.fontWeight&&r.setAttributeNS(null,"font-weight",t.fontWeight),t.fontStyle&&r.setAttributeNS(null,"font-style",t.fontStyle),!0===t.labelSelect?(r.setAttributeNS(null,"pointer-events","visible"),r._featureId=n):r.setAttributeNS(null,"pointer-events","none"),o=t.labelAlign||OpenLayers.Renderer.defaultSymbolizer.labelAlign,r.setAttributeNS(null,"text-anchor",OpenLayers.Renderer.SVG.LABEL_ALIGN[o[0]]||"middle"),!0===OpenLayers.IS_GECKO&&r.setAttributeNS(null,"dominant-baseline",OpenLayers.Renderer.SVG.LABEL_ALIGN[o[1]]||"central"),h=t.label.split("\n"),c=h.length;r.childNodes.length>c;)r.removeChild(r.lastChild);for(e=0;e<c;e++)f=this.nodeFactory(n+s+"_tspan_"+e,"tspan"),!0===t.labelSelect&&(f._featureId=n,f._geometry=i,f._geometryClass=i.CLASS_NAME),!1===OpenLayers.IS_GECKO&&f.setAttributeNS(null,"baseline-shift",OpenLayers.Renderer.SVG.LABEL_VSHIFT[o[1]]||"-35%"),f.setAttribute("x",u),0==e?(l=OpenLayers.Renderer.SVG.LABEL_VFACTOR[o[1]],null==l&&(l=-.5),f.setAttribute("dy",l*(c-1)+"em")):f.setAttribute("dy","1em"),f.textContent=""===h[e]?" ":h[e],f.parentNode||r.appendChild(f);r.parentNode||this.textRoot.appendChild(r)},getComponentsString:function(n,t){for(var o=[],f=!0,e=n.length,u=[],r,i=0;i<e;i++)r=n[i],o.push(r),(r=this.getShortString(r))?u.push(r):(0<i&&this.getShortString(n[i-1])&&u.push(this.clipLine(n[i],n[i-1])),i<e-1&&this.getShortString(n[i+1])&&u.push(this.clipLine(n[i],n[i+1])),f=!1);return{path:u.join(t||","),complete:f}},clipLine:function(n,t){if(t.equals(n))return"";var i=this.getResolution(),u=this.MAX_PIXEL-this.translationParameters.x,f=this.MAX_PIXEL-this.translationParameters.y,e=(t.x-this.featureDx)/i+this.left,o=this.top-t.y/i,r=(n.x-this.featureDx)/i+this.left,i=this.top-n.y/i,s;return(r<-u||r>u)&&(s=(i-o)/(r-e),r=0>r?-u:u,i=o+(r-e)*s),(i<-f||i>f)&&(s=(r-e)/(i-o),i=0>i?-f:f,r=e+(i-o)*s),r+","+i},getShortString:function(n){var t=this.getResolution(),i=(n.x-this.featureDx)/t+this.left;return n=this.top-n.y/t,this.inValidRange(i,n)?i+","+n:!1},getPosition:function(n){return{x:parseFloat(n.getAttributeNS(null,"cx")),y:parseFloat(n.getAttributeNS(null,"cy"))}},importSymbol:function(n){var u,t,i,r;if(this.defs||(this.defs=this.createDefs()),u=this.container.id+"-"+n,t=document.getElementById(u),null!=t)return t;if(i=OpenLayers.Renderer.symbol[n],!i)throw Error(n+" is not a valid symbol name");n=this.nodeFactory(u,"symbol"),r=this.nodeFactory(null,"polygon"),n.appendChild(r);for(var t=new OpenLayers.Bounds(Number.MAX_VALUE,Number.MAX_VALUE,0,0),s=[],f,e,o=0;o<i.length;o+=2)f=i[o],e=i[o+1],t.left=Math.min(t.left,f),t.bottom=Math.min(t.bottom,e),t.right=Math.max(t.right,f),t.top=Math.max(t.top,e),s.push(f,",",e);return r.setAttributeNS(null,"points",s.join(" ")),i=t.getWidth(),r=t.getHeight(),n.setAttributeNS(null,"viewBox",[t.left-i,t.bottom-r,3*i,3*r].join(" ")),this.symbolMetrics[u]=[Math.max(i,r),t.getCenterLonLat().lon,t.getCenterLonLat().lat],this.defs.appendChild(n),n},getFeatureIdFromEvent:function(n){var t=OpenLayers.Renderer.Elements.prototype.getFeatureIdFromEvent.apply(this,arguments);return t||(t=n.target,t=t.parentNode&&t!=this.rendererRoot?t.parentNode._featureId:void 0),t},CLASS_NAME:"OpenLayers.Renderer.SVG"}),OpenLayers.Renderer.SVG.LABEL_ALIGN={l:"start",r:"end",b:"bottom",t:"hanging"},OpenLayers.Renderer.SVG.LABEL_VSHIFT={t:"-70%",b:"0"},OpenLayers.Renderer.SVG.LABEL_VFACTOR={t:0,b:-1},OpenLayers.Renderer.SVG.preventDefault=function(n){OpenLayers.Event.preventDefault(n)},OpenLayers.Control.ScaleLine=OpenLayers.Class(OpenLayers.Control,{maxWidth:100,topOutUnits:"km",topInUnits:"m",bottomOutUnits:"mi",bottomInUnits:"ft",eTop:null,eBottom:null,geodesic:!1,draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.eTop||(this.eTop=document.createElement("div"),this.eTop.className=this.displayClass+"Top",this.div.appendChild(this.eTop),this.eTop.style.visibility=""==this.topOutUnits||""==this.topInUnits?"hidden":"visible",this.eBottom=document.createElement("div"),this.eBottom.className=this.displayClass+"Bottom",this.div.appendChild(this.eBottom),this.eBottom.style.visibility=""==this.bottomOutUnits||""==this.bottomInUnits?"hidden":"visible"),this.map.events.register("moveend",this,this.update),this.update(),this.div},getBarLen:function(n){var t=parseInt(Math.log(n)/Math.log(10)),t=Math.pow(10,t);return n=parseInt(n/t),(5<n?5:2<n?2:1)*t},update:function(){var i=this.map.getResolution(),u,f;if(i){var r=this.map.getUnits(),n=OpenLayers.INCHES_PER_UNIT,t=this.maxWidth*i*n[r],e=1;!0===this.geodesic&&(e=(this.map.getGeodesicPixelSize().w||1e-6)*this.maxWidth/(t/n.km),t*=e),1e5<t?(u=this.topOutUnits,f=this.bottomOutUnits):(u=this.topInUnits,f=this.bottomInUnits);var o=t/n[u],s=t/n[f],t=this.getBarLen(o),h=this.getBarLen(s),o=t/n[r]*n[u],s=h/n[r]*n[f],r=o/i/e,i=s/i/e;"visible"==this.eBottom.style.visibility&&(this.eBottom.style.width=Math.round(i)+"px",this.eBottom.innerHTML=h+" "+f),"visible"==this.eTop.style.visibility&&(this.eTop.style.width=Math.round(r)+"px",this.eTop.innerHTML=t+" "+u)}},CLASS_NAME:"OpenLayers.Control.ScaleLine"}),OpenLayers.Format.GeoJSON=OpenLayers.Class(OpenLayers.Format.JSON,{ignoreExtraDims:!1,read:function(n,t,i){var f;t=t?t:"FeatureCollection";var r=null,u=null,u="string"==typeof n?OpenLayers.Format.JSON.prototype.read.apply(this,[n,i]):n;if(u){if("string"!=typeof u.type)OpenLayers.Console.error("Bad GeoJSON - no type: "+n);else if(this.isValidType(u,t))switch(t){case"Geometry":try{r=this.parseGeometry(u)}catch(e){OpenLayers.Console.error(e)}break;case"Feature":try{r=this.parseFeature(u),r.type="Feature"}catch(o){OpenLayers.Console.error(o)}break;case"FeatureCollection":switch(r=[],u.type){case"Feature":try{r.push(this.parseFeature(u))}catch(s){r=null,OpenLayers.Console.error(s)}break;case"FeatureCollection":for(n=0,t=u.features.length;n<t;++n)try{r.push(this.parseFeature(u.features[n]))}catch(h){r=null,OpenLayers.Console.error(h)}break;default:try{f=this.parseGeometry(u),r.push(new OpenLayers.Feature.Vector(f))}catch(c){r=null,OpenLayers.Console.error(c)}}}}else OpenLayers.Console.error("Bad JSON: "+n);return r},isValidType:function(n,t){var i=!1;switch(t){case"Geometry":-1==OpenLayers.Util.indexOf("Point MultiPoint LineString MultiLineString Polygon MultiPolygon Box GeometryCollection".split(" "),n.type)?OpenLayers.Console.error("Unsupported geometry type: "+n.type):i=!0;break;case"FeatureCollection":i=!0;break;default:n.type==t?i=!0:OpenLayers.Console.error("Cannot convert types from "+n.type+" to "+t)}return i},parseFeature:function(n){var t,r,i;r=n.properties?n.properties:{},i=n.geometry&&n.geometry.bbox||n.bbox;try{t=this.parseGeometry(n.geometry)}catch(u){throw u;}return t=new OpenLayers.Feature.Vector(t,r),i&&(t.bounds=OpenLayers.Bounds.fromArray(i)),n.id&&(t.fid=n.id),t},parseGeometry:function(n){var t,i,r;if(null==n)return null;if(i=!1,"GeometryCollection"==n.type){if(!OpenLayers.Util.isArray(n.geometries))throw"GeometryCollection must have geometries array: "+n;for(t=n.geometries.length,i=Array(t),r=0;r<t;++r)i[r]=this.parseGeometry.apply(this,[n.geometries[r]]);t=new OpenLayers.Geometry.Collection(i),i=!0}else{if(!OpenLayers.Util.isArray(n.coordinates))throw"Geometry must have coordinates array: "+n;if(!this.parseCoords[n.type.toLowerCase()])throw"Unsupported geometry type: "+n.type;try{t=this.parseCoords[n.type.toLowerCase()].apply(this,[n.coordinates])}catch(u){throw u;}}return this.internalProjection&&this.externalProjection&&!i&&t.transform(this.externalProjection,this.internalProjection),t},parseCoords:{point:function(n){if(!1==this.ignoreExtraDims&&2!=n.length)throw"Only 2D points are supported: "+n;return new OpenLayers.Geometry.Point(n[0],n[1])},multipoint:function(n){for(var i=[],r=null,t=0,u=n.length;t<u;++t){try{r=this.parseCoords.point.apply(this,[n[t]])}catch(f){throw f;}i.push(r)}return new OpenLayers.Geometry.MultiPoint(i)},linestring:function(n){for(var i=[],r=null,t=0,u=n.length;t<u;++t){try{r=this.parseCoords.point.apply(this,[n[t]])}catch(f){throw f;}i.push(r)}return new OpenLayers.Geometry.LineString(i)},multilinestring:function(n){for(var i=[],r=null,t=0,u=n.length;t<u;++t){try{r=this.parseCoords.linestring.apply(this,[n[t]])}catch(f){throw f;}i.push(r)}return new OpenLayers.Geometry.MultiLineString(i)},polygon:function(n){for(var i=[],r,u,t=0,f=n.length;t<f;++t){try{u=this.parseCoords.linestring.apply(this,[n[t]])}catch(e){throw e;}r=new OpenLayers.Geometry.LinearRing(u.components),i.push(r)}return new OpenLayers.Geometry.Polygon(i)},multipolygon:function(n){for(var i=[],r=null,t=0,u=n.length;t<u;++t){try{r=this.parseCoords.polygon.apply(this,[n[t]])}catch(f){throw f;}i.push(r)}return new OpenLayers.Geometry.MultiPolygon(i)},box:function(n){if(2!=n.length)throw"GeoJSON box coordinates must have 2 elements";return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(n[0][0],n[0][1]),new OpenLayers.Geometry.Point(n[1][0],n[0][1]),new OpenLayers.Geometry.Point(n[1][0],n[1][1]),new OpenLayers.Geometry.Point(n[0][0],n[1][1]),new OpenLayers.Geometry.Point(n[0][0],n[0][1])])])}},write:function(n,t){var i={type:null},f,r,u;if(OpenLayers.Util.isArray(n))for(i.type="FeatureCollection",f=n.length,i.features=Array(f),r=0;r<f;++r){if(u=n[r],!u instanceof OpenLayers.Feature.Vector)throw"FeatureCollection only supports collections of features: "+u;i.features[r]=this.extract.feature.apply(this,[u])}else 0==n.CLASS_NAME.indexOf("OpenLayers.Geometry")?i=this.extract.geometry.apply(this,[n]):n instanceof OpenLayers.Feature.Vector&&(i=this.extract.feature.apply(this,[n]),n.layer&&n.layer.projection&&(i.crs=this.createCRSObject(n)));return OpenLayers.Format.JSON.prototype.write.apply(this,[i,t])},createCRSObject:function(n){n=n.layer.projection.toString();var t={};return n.match(/epsg:/i)&&(n=parseInt(n.substring(n.indexOf(":")+1)),t=4326==n?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+n}}),t},extract:{feature:function(n){var t=this.extract.geometry.apply(this,[n.geometry]),t={type:"Feature",properties:n.attributes,geometry:t};return null!=n.fid&&(t.id=n.fid),t},geometry:function(n){if(null==n)return null;this.internalProjection&&this.externalProjection&&(n=n.clone(),n.transform(this.internalProjection,this.externalProjection));var t=n.CLASS_NAME.split(".")[2];return n=this.extract[t.toLowerCase()].apply(this,[n]),"Collection"==t?{type:"GeometryCollection",geometries:n}:{type:t,coordinates:n}},point:function(n){return[n.x,n.y]},multipoint:function(n){for(var i=[],t=0,r=n.components.length;t<r;++t)i.push(this.extract.point.apply(this,[n.components[t]]));return i},linestring:function(n){for(var i=[],t=0,r=n.components.length;t<r;++t)i.push(this.extract.point.apply(this,[n.components[t]]));return i},multilinestring:function(n){for(var i=[],t=0,r=n.components.length;t<r;++t)i.push(this.extract.linestring.apply(this,[n.components[t]]));return i},polygon:function(n){for(var i=[],t=0,r=n.components.length;t<r;++t)i.push(this.extract.linestring.apply(this,[n.components[t]]));return i},multipolygon:function(n){for(var i=[],t=0,r=n.components.length;t<r;++t)i.push(this.extract.polygon.apply(this,[n.components[t]]));return i},collection:function(n){for(var i=n.components.length,r=Array(i),t=0;t<i;++t)r[t]=this.extract.geometry.apply(this,[n.components[t]]);return r}},CLASS_NAME:"OpenLayers.Format.GeoJSON"}),OpenLayers.Layer.Google.v3={DEFAULTS:{sphericalMercator:!0,projection:"EPSG:900913"},animationEnabled:!0,loadMapObject:function(){this.type||(this.type=google.maps.MapTypeId.ROADMAP);var t,n=OpenLayers.Layer.Google.cache[this.map.id];n?(t=n.mapObject,++n.count):(t=this.map.getCenter(),n=document.createElement("div"),n.className="olForeignContainer",n.style.width="100%",n.style.height="100%",t=new google.maps.Map(n,{center:t?new google.maps.LatLng(t.lat,t.lon):new google.maps.LatLng(0,0),zoom:this.map.getZoom()||0,mapTypeId:this.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1}),n=document.createElement("div"),n.style.width="100%",n.style.height="100%",t.controls[google.maps.ControlPosition.TOP_LEFT].push(n),n={googleControl:n,mapObject:t,count:1},OpenLayers.Layer.Google.cache[this.map.id]=n),this.mapObject=t,this.setGMapVisibility(this.visibility)},onMapResize:function(){this.visibility&&google.maps.event.trigger(this.mapObject,"resize")},setGMapVisibility:function(n){var r=OpenLayers.Layer.Google.cache[this.map.id],t=this.map,f;if(r){for(var o=this.type,i=t.layers,u,e=i.length-1;0<=e;--e)if(u=i[e],u instanceof OpenLayers.Layer.Google&&!0===u.visibility&&!0===u.inRange){o=u.type,n=!0;break}i=this.mapObject.getDiv(),!0===n?(i.parentNode!==t.div&&(r.rendered?(t.div.appendChild(i),r.googleControl.appendChild(t.viewPortDiv),google.maps.event.trigger(this.mapObject,"resize")):(f=this,google.maps.event.addListenerOnce(this.mapObject,"tilesloaded",function(){r.rendered=!0,f.setGMapVisibility(f.getVisibility()),f.moveTo(f.map.getCenter())}))),this.mapObject.setMapTypeId(o)):r.googleControl.hasChildNodes()&&(t.div.appendChild(t.viewPortDiv),t.div.removeChild(i))}},getMapContainer:function(){return this.mapObject.getDiv()},getMapObjectBoundsFromOLBounds:function(n){var t=null;return null!=n&&(t=this.sphericalMercator?this.inverseMercator(n.bottom,n.left):new OpenLayers.LonLat(n.bottom,n.left),n=this.sphericalMercator?this.inverseMercator(n.top,n.right):new OpenLayers.LonLat(n.top,n.right),t=new google.maps.LatLngBounds(new google.maps.LatLng(t.lat,t.lon),new google.maps.LatLng(n.lat,n.lon))),t},getMapObjectLonLatFromMapObjectPixel:function(n){var t=this.map.getSize(),r=this.getLongitudeFromMapObjectLonLat(this.mapObject.center),u=this.getLatitudeFromMapObjectLonLat(this.mapObject.center),i=this.map.getResolution();return n=new OpenLayers.LonLat(r+(n.x-t.w/2)*i,u-(n.y-t.h/2)*i),this.wrapDateLine&&(n=n.wrapDateLine(this.maxExtent)),this.getMapObjectLonLatFromLonLat(n.lon,n.lat)},getMapObjectPixelFromMapObjectLonLat:function(n){var r=this.getLongitudeFromMapObjectLonLat(n),t,i;return n=this.getLatitudeFromMapObjectLonLat(n),t=this.map.getResolution(),i=this.map.getExtent(),this.getMapObjectPixelFromXY(1/t*(r-i.left),1/t*(i.top-n))},setMapObjectCenter:function(n,t){if(!1===this.animationEnabled&&t!=this.mapObject.zoom){var i=this.getMapContainer();google.maps.event.addListenerOnce(this.mapObject,"idle",function(){i.style.visibility=""}),i.style.visibility="hidden"}this.mapObject.setOptions({center:n,zoom:t})},getMapObjectZoomFromMapObjectBounds:function(n){return this.mapObject.getBoundsZoomLevel(n)},getMapObjectLonLatFromLonLat:function(n,t){var i;return this.sphericalMercator?(i=this.inverseMercator(n,t),i=new google.maps.LatLng(i.lat,i.lon)):i=new google.maps.LatLng(t,n),i},getMapObjectPixelFromXY:function(n,t){return new google.maps.Point(n,t)}},OpenLayers.Control.Scale=OpenLayers.Class(OpenLayers.Control,{element:null,geodesic:!1,initialize:function(n,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),this.element=OpenLayers.Util.getElement(n)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.element||(this.element=document.createElement("div"),this.div.appendChild(this.element)),this.map.events.register("moveend",this,this.updateScale),this.updateScale(),this.div},updateScale:function(){var n;if(!0===this.geodesic){if(!this.map.getUnits())return;n=OpenLayers.INCHES_PER_UNIT,n=(this.map.getGeodesicPixelSize().w||1e-6)*n.km*OpenLayers.DOTS_PER_INCH}else n=this.map.getScale();n&&(n=9500<=n&&95e4>=n?Math.round(n/1e3)+"K":95e4<=n?Math.round(n/1e6)+"M":Math.round(n),this.element.innerHTML=OpenLayers.i18n("Scale = 1 : ${scaleDenom}",{scaleDenom:n}))},CLASS_NAME:"OpenLayers.Control.Scale"}),OpenLayers.Control.DrawFeature=OpenLayers.Class(OpenLayers.Control,{layer:null,callbacks:null,multi:!1,featureAdded:function(){},initialize:function(n,t,i){OpenLayers.Control.prototype.initialize.apply(this,[i]),this.callbacks=OpenLayers.Util.extend({done:this.drawFeature,modify:function(n,t){this.layer.events.triggerEvent("sketchmodified",{vertex:n,feature:t})},create:function(n,t){this.layer.events.triggerEvent("sketchstarted",{vertex:n,feature:t})}},this.callbacks),this.layer=n,this.handlerOptions=this.handlerOptions||{},this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{renderers:n.renderers,rendererOptions:n.rendererOptions}),"multi"in this.handlerOptions||(this.handlerOptions.multi=this.multi),(n=this.layer.styleMap&&this.layer.styleMap.styles.temporary)&&(this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{styleMap:new OpenLayers.StyleMap({"default":n})})),this.handler=new t(this,this.callbacks,this.handlerOptions)},drawFeature:function(n){n=new OpenLayers.Feature.Vector(n),!1!==this.layer.events.triggerEvent("sketchcomplete",{feature:n})&&(n.state=OpenLayers.State.INSERT,this.layer.addFeatures([n]),this.featureAdded(n),this.events.triggerEvent("featureadded",{feature:n}))},insertXY:function(n,t){this.handler&&this.handler.line&&this.handler.insertXY(n,t)},insertDeltaXY:function(n,t){this.handler&&this.handler.line&&this.handler.insertDeltaXY(n,t)},insertDirectionLength:function(n,t){this.handler&&this.handler.line&&this.handler.insertDirectionLength(n,t)},insertDeflectionLength:function(n,t){this.handler&&this.handler.line&&this.handler.insertDeflectionLength(n,t)},undo:function(){return this.handler.undo&&this.handler.undo()},redo:function(){return this.handler.redo&&this.handler.redo()},finishSketch:function(){this.handler.finishGeometry()},cancel:function(){this.handler.cancel()},CLASS_NAME:"OpenLayers.Control.DrawFeature"}),OpenLayers.Rule=OpenLayers.Class({id:null,name:null,title:null,description:null,context:null,filter:null,elseFilter:!1,symbolizer:null,symbolizers:null,minScaleDenominator:null,maxScaleDenominator:null,initialize:function(n){this.symbolizer={},OpenLayers.Util.extend(this,n),this.symbolizers&&delete this.symbolizer,this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var n in this.symbolizer)this.symbolizer[n]=null;this.symbolizer=null,delete this.symbolizers},evaluate:function(n){var i=this.getContext(n),t=!0,r;return(this.minScaleDenominator||this.maxScaleDenominator)&&(r=n.layer.map.getScale()),this.minScaleDenominator&&(t=r>=OpenLayers.Style.createLiteral(this.minScaleDenominator,i)),t&&this.maxScaleDenominator&&(t=r<OpenLayers.Style.createLiteral(this.maxScaleDenominator,i)),t&&this.filter&&(t="OpenLayers.Filter.FeatureId"==this.filter.CLASS_NAME?this.filter.evaluate(n):this.filter.evaluate(i)),t},getContext:function(n){var t=this.context;return t||(t=n.attributes||n.data),"function"==typeof this.context&&(t=this.context(n)),t},clone:function(){var n=OpenLayers.Util.extend({},this),i,t,r;if(this.symbolizers)for(i=this.symbolizers.length,n.symbolizers=Array(i),t=0;t<i;++t)n.symbolizers[t]=this.symbolizers[t].clone();else{n.symbolizer={};for(r in this.symbolizer)i=this.symbolizer[r],t=typeof i,"object"===t?n.symbolizer[r]=OpenLayers.Util.extend({},i):"string"===t&&(n.symbolizer[r]=i)}return n.filter=this.filter&&this.filter.clone(),n.context=this.context&&OpenLayers.Util.extend({},this.context),new OpenLayers.Rule(n)},CLASS_NAME:"OpenLayers.Rule"}),OpenLayers.Handler.Pinch=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!1,pinching:!1,last:null,start:null,touchstart:function(n){var t=!0;if(this.pinching=!1,OpenLayers.Event.isMultiTouch(n))this.started=!0,this.last=this.start={distance:this.getDistance(n.touches),delta:0,scale:1},this.callback("start",[n,this.start]),t=!this.stopDown;else{if(this.started)return!1;this.started=!1,this.last=this.start=null}return OpenLayers.Event.preventDefault(n),t},touchmove:function(n){if(this.started&&OpenLayers.Event.isMultiTouch(n)){this.pinching=!0;var t=this.getPinchData(n);this.callback("move",[n,t]),this.last=t,OpenLayers.Event.stop(n)}else if(this.started)return!1;return!0},touchend:function(n){return this.started&&!OpenLayers.Event.isMultiTouch(n)?(this.pinching=this.started=!1,this.callback("done",[n,this.start,this.last]),this.last=this.start=null,!1):!0},activate:function(){var n=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.pinching=!1,n=!0),n},deactivate:function(){var n=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.pinching=this.started=!1,this.last=this.start=null,n=!0),n},getDistance:function(n){var t=n[0];return n=n[1],Math.sqrt(Math.pow(t.olClientX-n.olClientX,2)+Math.pow(t.olClientY-n.olClientY,2))},getPinchData:function(n){return n=this.getDistance(n.touches),{distance:n,delta:this.last.distance-n,scale:n/this.start.distance}},CLASS_NAME:"OpenLayers.Handler.Pinch"}),OpenLayers.Handler.Polygon=OpenLayers.Class(OpenLayers.Handler.Path,{holeModifier:null,drawingHole:!1,polygon:null,createFeature:function(n){n=this.layer.getLonLatFromViewPortPx(n),n=new OpenLayers.Geometry.Point(n.lon,n.lat),this.point=new OpenLayers.Feature.Vector(n),this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LinearRing([this.point.geometry])),this.polygon=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([this.line.geometry])),this.callback("create",[this.point.geometry,this.getSketch()]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.polygon,this.point],{silent:!0})},addPoint:function(){if(!this.drawingHole&&this.holeModifier&&this.evt&&this.evt[this.holeModifier])for(var n=this.point.geometry,r=this.control.layer.features,t,i=r.length-1;0<=i;--i)if(t=r[i].geometry,(t instanceof OpenLayers.Geometry.Polygon||t instanceof OpenLayers.Geometry.MultiPolygon)&&t.intersects(n)){n=r[i],this.control.layer.removeFeatures([n],{silent:!0}),this.control.layer.events.registerPriority("sketchcomplete",this,this.finalizeInteriorRing),this.control.layer.events.registerPriority("sketchmodified",this,this.enforceTopology),n.geometry.addComponent(this.line.geometry),this.polygon=n,this.drawingHole=!0;break}OpenLayers.Handler.Path.prototype.addPoint.apply(this,arguments)},getCurrentPointIndex:function(){return this.line.geometry.components.length-2},enforceTopology:function(n){n=n.vertex;var t=this.line.geometry.components;this.polygon.geometry.intersects(n)||(t=t[t.length-3],n.x=t.x,n.y=t.y)},finishGeometry:function(){this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length-2]),this.removePoint(),this.finalize()},finalizeInteriorRing:function(){var r=this.line.geometry,t=0!==r.getArea(),i,n;if(t){for(i=this.polygon.geometry.components,n=i.length-2;0<=n;--n)if(r.intersects(i[n])){t=!1;break}if(t)n:for(n=i.length-2;0<n;--n)for(var f=i[n].components,u=0,e=f.length;u<e;++u)if(r.containsPoint(f[u])){t=!1;break n}}return t?this.polygon.state!==OpenLayers.State.INSERT&&(this.polygon.state=OpenLayers.State.UPDATE):this.polygon.geometry.removeComponent(r),this.restoreFeature(),!1},cancel:function(){return this.drawingHole&&(this.polygon.geometry.removeComponent(this.line.geometry),this.restoreFeature(!0)),OpenLayers.Handler.Path.prototype.cancel.apply(this,arguments)},restoreFeature:function(n){this.control.layer.events.unregister("sketchcomplete",this,this.finalizeInteriorRing),this.control.layer.events.unregister("sketchmodified",this,this.enforceTopology),this.layer.removeFeatures([this.polygon],{silent:!0}),this.control.layer.addFeatures([this.polygon],{silent:!0}),this.drawingHole=!1,n||this.control.layer.events.triggerEvent("sketchcomplete",{feature:this.polygon})},destroyFeature:function(n){OpenLayers.Handler.Path.prototype.destroyFeature.call(this,n),this.polygon=null},drawFeature:function(){this.layer.drawFeature(this.polygon,this.style),this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.polygon},getGeometry:function(){var n=this.polygon&&this.polygon.geometry;return n&&this.multi&&(n=new OpenLayers.Geometry.MultiPolygon([n])),n},CLASS_NAME:"OpenLayers.Handler.Polygon"}),OpenLayers.Control.Geolocate=OpenLayers.Class(OpenLayers.Control,{geolocation:null,available:"geolocation"in navigator,bind:!0,watch:!1,geolocationOptions:null,destroy:function(){this.deactivate(),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return this.available&&!this.geolocation&&(this.geolocation=navigator.geolocation),this.geolocation?OpenLayers.Control.prototype.activate.apply(this,arguments)?(this.watch?this.watchId=this.geolocation.watchPosition(OpenLayers.Function.bind(this.geolocate,this),OpenLayers.Function.bind(this.failure,this),this.geolocationOptions):this.getCurrentLocation(),!0):!1:(this.events.triggerEvent("locationuncapable"),!1)},deactivate:function(){return this.active&&null!==this.watchId&&this.geolocation.clearWatch(this.watchId),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},geolocate:function(n){var t=new OpenLayers.LonLat(n.coords.longitude,n.coords.latitude).transform(new OpenLayers.Projection("EPSG:4326"),this.map.getProjectionObject());this.bind&&this.map.setCenter(t),this.events.triggerEvent("locationupdated",{position:n,point:new OpenLayers.Geometry.Point(t.lon,t.lat)})},getCurrentLocation:function(){return!this.active||this.watch?!1:(this.geolocation.getCurrentPosition(OpenLayers.Function.bind(this.geolocate,this),OpenLayers.Function.bind(this.failure,this),this.geolocationOptions),!0)},failure:function(n){this.events.triggerEvent("locationfailed",{error:n})},CLASS_NAME:"OpenLayers.Control.Geolocate"}),OpenLayers.Protocol.WFS.v1_0_0=OpenLayers.Class(OpenLayers.Protocol.WFS.v1,{version:"1.0.0",CLASS_NAME:"OpenLayers.Protocol.WFS.v1_0_0"}),OpenLayers.Control.PinchZoom=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,pinchOrigin:null,currentCenter:null,autoActivate:!0,preserveCenter:!1,initialize:function(){OpenLayers.Control.prototype.initialize.apply(this,arguments),this.handler=new OpenLayers.Handler.Pinch(this,{start:this.pinchStart,move:this.pinchMove,done:this.pinchDone},this.handlerOptions)},pinchStart:function(n){var t=this.preserveCenter?this.map.getPixelFromLonLat(this.map.getCenter()):n.xy;this.currentCenter=this.pinchOrigin=t},pinchMove:function(n,t){var u=t.scale,i=this.map.layerContainerOriginPx,r=this.pinchOrigin,f=this.preserveCenter?this.map.getPixelFromLonLat(this.map.getCenter()):n.xy,e=Math.round(i.x+f.x-r.x+(u-1)*(i.x-r.x)),i=Math.round(i.y+f.y-r.y+(u-1)*(i.y-r.y));this.map.applyTransform(e,i,u),this.currentCenter=f},pinchDone:function(n,t,i){if(this.map.applyTransform(),n=this.map.getZoomForResolution(this.map.getResolution()/i.scale,!0),n!==this.map.getZoom()||!this.currentCenter.equals(this.pinchOrigin)){t=this.map.getResolutionForZoom(n),i=this.map.getLonLatFromPixel(this.pinchOrigin);var r=this.currentCenter,u=this.map.getSize();i.lon+=t*(u.w/2-r.x),i.lat-=t*(u.h/2-r.y),this.map.div.clientWidth=this.map.div.clientWidth,this.map.setCenter(i,n)}},CLASS_NAME:"OpenLayers.Control.PinchZoom"}),OpenLayers.Control.TouchNavigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,clickHandlerOptions:null,documentDrag:!1,autoActivate:!0,initialize:function(){this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate(),this.dragPan&&this.dragPan.destroy(),this.dragPan=null,this.pinchZoom&&(this.pinchZoom.destroy(),delete this.pinchZoom),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return OpenLayers.Control.prototype.activate.apply(this,arguments)?(this.dragPan.activate(),this.handlers.click.activate(),this.pinchZoom.activate(),!0):!1},deactivate:function(){return OpenLayers.Control.prototype.deactivate.apply(this,arguments)?(this.dragPan.deactivate(),this.handlers.click.deactivate(),this.pinchZoom.deactivate(),!0):!1},draw:function(){var n={click:this.defaultClick,dblclick:this.defaultDblClick},t=OpenLayers.Util.extend({double:!0,stopDouble:!0,pixelTolerance:2},this.clickHandlerOptions);this.handlers.click=new OpenLayers.Handler.Click(this,n,t),this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions)),this.dragPan.draw(),this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions))},defaultClick:function(n){n.lastTouches&&2==n.lastTouches.length&&this.map.zoomOut()},defaultDblClick:function(n){this.map.zoomTo(this.map.zoom+1,n.xy)},CLASS_NAME:"OpenLayers.Control.TouchNavigation"}),OpenLayers.Protocol.HTTP=OpenLayers.Class(OpenLayers.Protocol,{url:null,headers:null,params:null,callback:null,scope:null,readWithPOST:!1,updateWithPOST:!1,deleteWithPOST:!1,wildcarded:!1,srsInBBOX:!1,initialize:function(n){if(n=n||{},this.params={},this.headers={},OpenLayers.Protocol.prototype.initialize.apply(this,arguments),!this.filterToParams&&OpenLayers.Format.QueryStringFilter){var t=new OpenLayers.Format.QueryStringFilter({wildcarded:this.wildcarded,srsInBBOX:this.srsInBBOX});this.filterToParams=function(n,i){return t.write(n,i)}}},destroy:function(){this.headers=this.params=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(n){OpenLayers.Protocol.prototype.read.apply(this,arguments),n=n||{},n.params=OpenLayers.Util.applyDefaults(n.params,this.options.params),n=OpenLayers.Util.applyDefaults(n,this.options),n.filter&&this.filterToParams&&(n.params=this.filterToParams(n.filter,n.params));var i=void 0!==n.readWithPOST?n.readWithPOST:this.readWithPOST,t=new OpenLayers.Protocol.Response({requestType:"read"});return i?(i=n.headers||{},i["Content-Type"]="application/x-www-form-urlencoded",t.priv=OpenLayers.Request.POST({url:n.url,callback:this.createCallback(this.handleRead,t,n),data:OpenLayers.Util.getParameterString(n.params),headers:i})):t.priv=OpenLayers.Request.GET({url:n.url,callback:this.createCallback(this.handleRead,t,n),params:n.params,headers:n.headers}),t},handleRead:function(n,t){this.handleResponse(n,t)},create:function(n,t){t=OpenLayers.Util.applyDefaults(t,this.options);var i=new OpenLayers.Protocol.Response({reqFeatures:n,requestType:"create"});return i.priv=OpenLayers.Request.POST({url:t.url,callback:this.createCallback(this.handleCreate,i,t),headers:t.headers,data:this.format.write(n)}),i},handleCreate:function(n,t){this.handleResponse(n,t)},update:function(n,t){var r,i;return t=t||{},r=t.url||n.url||this.options.url+"/"+n.fid,t=OpenLayers.Util.applyDefaults(t,this.options),i=new OpenLayers.Protocol.Response({reqFeatures:n,requestType:"update"}),i.priv=OpenLayers.Request[this.updateWithPOST?"POST":"PUT"]({url:r,callback:this.createCallback(this.handleUpdate,i,t),headers:t.headers,data:this.format.write(n)}),i},handleUpdate:function(n,t){this.handleResponse(n,t)},"delete":function(n,t){var i;t=t||{},i=t.url||n.url||this.options.url+"/"+n.fid,t=OpenLayers.Util.applyDefaults(t,this.options);var r=new OpenLayers.Protocol.Response({reqFeatures:n,requestType:"delete"}),u=this.deleteWithPOST?"POST":"DELETE",i={url:i,callback:this.createCallback(this.handleDelete,r,t),headers:t.headers};return this.deleteWithPOST&&(i.data=this.format.write(n)),r.priv=OpenLayers.Request[u](i),r},handleDelete:function(n,t){this.handleResponse(n,t)},handleResponse:function(n,t){var i=n.priv;t.callback&&(200<=i.status&&300>i.status?("delete"!=n.requestType&&(n.features=this.parseFeatures(i)),n.code=OpenLayers.Protocol.Response.SUCCESS):n.code=OpenLayers.Protocol.Response.FAILURE,t.callback.call(t.scope,n))},parseFeatures:function(n){var t=n.responseXML;return t&&t.documentElement||(t=n.responseText),!t||0>=t.length?null:this.format.read(t)},commit:function(n,t){function a(n){for(var i=n.features?n.features.length:0,r=Array(i),t=0;t<i;++t)r[t]=n.features[t].fid;s.insertIds=r,e.apply(this,[n])}function e(n){this.callUserCallback(n,t),o=o&&n.success(),h++,h>=y&&t.callback&&(s.code=o?OpenLayers.Protocol.Response.SUCCESS:OpenLayers.Protocol.Response.FAILURE,t.callback.apply(t.scope,[s]))}t=OpenLayers.Util.applyDefaults(t,this.options);var f=[],h=0,u={};u[OpenLayers.State.INSERT]=[],u[OpenLayers.State.UPDATE]=[],u[OpenLayers.State.DELETE]=[];for(var i,c,l=[],r=0,v=n.length;r<v;++r)(i=n[r],c=u[i.state])&&(c.push(i),l.push(i));var y=(0<u[OpenLayers.State.INSERT].length?1:0)+u[OpenLayers.State.UPDATE].length+u[OpenLayers.State.DELETE].length,o=!0,s=new OpenLayers.Protocol.Response({reqFeatures:l});for(i=u[OpenLayers.State.INSERT],0<i.length&&f.push(this.create(i,OpenLayers.Util.applyDefaults({callback:a,scope:this},t.create))),i=u[OpenLayers.State.UPDATE],r=i.length-1;0<=r;--r)f.push(this.update(i[r],OpenLayers.Util.applyDefaults({callback:e,scope:this},t.update)));for(i=u[OpenLayers.State.DELETE],r=i.length-1;0<=r;--r)f.push(this["delete"](i[r],OpenLayers.Util.applyDefaults({callback:e,scope:this},t["delete"])));return f},abort:function(n){n&&n.priv.abort()},callUserCallback:function(n,t){var i=t[n.requestType];i&&i.callback&&i.callback.call(i.scope,n)},CLASS_NAME:"OpenLayers.Protocol.HTTP"}),OpenLayers.TileManager=OpenLayers.Class({cacheSize:256,tilesPerFrame:2,frameDelay:16,moveDelay:100,zoomDelay:200,maps:null,tileQueueId:null,tileQueue:null,tileCache:null,tileCacheIndex:null,initialize:function(n){OpenLayers.Util.extend(this,n),this.maps=[],this.tileQueueId={},this.tileQueue={},this.tileCache={},this.tileCacheIndex=[]},addMap:function(n){if(!this._destroyed&&OpenLayers.Layer.Grid){this.maps.push(n),this.tileQueue[n.id]=[];for(var t=0,i=n.layers.length;t<i;++t)this.addLayer({layer:n.layers[t]});n.events.on({move:this.move,zoomend:this.zoomEnd,changelayer:this.changeLayer,addlayer:this.addLayer,preremovelayer:this.removeLayer,scope:this})}},removeMap:function(n){if(!this._destroyed&&OpenLayers.Layer.Grid){if(window.clearTimeout(this.tileQueueId[n.id]),n.layers)for(var t=0,i=n.layers.length;t<i;++t)this.removeLayer({layer:n.layers[t]});n.events&&n.events.un({move:this.move,zoomend:this.zoomEnd,changelayer:this.changeLayer,addlayer:this.addLayer,preremovelayer:this.removeLayer,scope:this}),delete this.tileQueue[n.id],delete this.tileQueueId[n.id],OpenLayers.Util.removeItem(this.maps,n)}},move:function(n){this.updateTimeout(n.object,this.moveDelay,!0)},zoomEnd:function(n){this.updateTimeout(n.object,this.zoomDelay)},changeLayer:function(n){"visibility"!==n.property&&"params"!==n.property||this.updateTimeout(n.object,0)},addLayer:function(n){if(n=n.layer,n instanceof OpenLayers.Layer.Grid){n.events.on({addtile:this.addTile,retile:this.clearTileQueue,scope:this});for(var r,i,t=n.grid.length-1;0<=t;--t)for(r=n.grid[t].length-1;0<=r;--r)i=n.grid[t][r],this.addTile({tile:i}),i.url&&!i.imgDiv&&this.manageTileCache({object:i})}},removeLayer:function(n){if(n=n.layer,n instanceof OpenLayers.Layer.Grid&&(this.clearTileQueue({object:n}),n.events&&n.events.un({addtile:this.addTile,retile:this.clearTileQueue,scope:this}),n.grid))for(var i,r,t=n.grid.length-1;0<=t;--t)for(i=n.grid[t].length-1;0<=i;--i)r=n.grid[t][i],this.unloadTile({object:r})},updateTimeout:function(n,t,i){window.clearTimeout(this.tileQueueId[n.id]);var r=this.tileQueue[n.id];(!i||r.length)&&(this.tileQueueId[n.id]=window.setTimeout(OpenLayers.Function.bind(function(){this.drawTilesFromQueue(n),r.length&&this.updateTimeout(n,this.frameDelay)},this),t))},addTile:function(n){if(n.tile instanceof OpenLayers.Tile.Image)n.tile.events.on({beforedraw:this.queueTileDraw,beforeload:this.manageTileCache,loadend:this.addToCache,unload:this.unloadTile,scope:this});else this.removeLayer({layer:n.tile.layer})},unloadTile:function(n){n=n.object,n.events.un({beforedraw:this.queueTileDraw,beforeload:this.manageTileCache,loadend:this.addToCache,unload:this.unloadTile,scope:this}),OpenLayers.Util.removeItem(this.tileQueue[n.layer.map.id],n)},queueTileDraw:function(n){n=n.object;var t=!1,i=n.layer,u=i.getURL(n.bounds),r=this.tileCache[u];return r&&"olTileImage"!==r.className&&(delete this.tileCache[u],OpenLayers.Util.removeItem(this.tileCacheIndex,u),r=null),i.url&&(i.async||!r)&&(t=this.tileQueue[i.map.id],~OpenLayers.Util.indexOf(t,n)||t.push(n),t=!0),!t},drawTilesFromQueue:function(n){var t=this.tileQueue[n.id],i=this.tilesPerFrame;for(n=n.zoomTween&&n.zoomTween.playing;!n&&t.length&&i;)t.shift().draw(!0),--i},manageTileCache:function(n){n=n.object;var t=this.tileCache[n.url];t&&(t.parentNode&&OpenLayers.Element.hasClass(t.parentNode,"olBackBuffer")&&(t.parentNode.removeChild(t),t.id=null),t.parentNode||(t.style.visibility="hidden",t.style.opacity=0,n.setImage(t),OpenLayers.Util.removeItem(this.tileCacheIndex,n.url),this.tileCacheIndex.push(n.url)))},addToCache:function(n){n=n.object,this.tileCache[n.url]||OpenLayers.Element.hasClass(n.imgDiv,"olImageLoadError")||(this.tileCacheIndex.length>=this.cacheSize&&(delete this.tileCache[this.tileCacheIndex[0]],this.tileCacheIndex.shift()),this.tileCache[n.url]=n.imgDiv,this.tileCacheIndex.push(n.url))},clearTileQueue:function(n){n=n.object;for(var i=this.tileQueue[n.map.id],t=i.length-1;0<=t;--t)i[t].layer===n&&i.splice(t,1)},destroy:function(){for(var n=this.maps.length-1;0<=n;--n)this.removeMap(this.maps[n]);this.tileCacheIndex=this.tileCache=this.tileQueueId=this.tileQueue=this.maps=null,this._destroyed=!0}}),function(){function u(n){throw n;}function s(n){return function(){return n}}function h(h){function gt(n,i,u,f,e){var o=[];return n=l.j(function(){var n=i(u,e)||[];0<o.length&&(l.a.Ya(k(o),n),f&&l.r.K(f,t,[u,n,e])),o.splice(0,o.length),l.a.P(o,n)},t,{W:n,Ka:function(){return 0==o.length||!l.a.X(o[0])}}),{M:o,j:n.pa()?n:r}}function k(n){for(;n.length&&!l.a.X(n[0]);)n.splice(0,1);if(1<n.length){for(var t=n[0],r=n[n.length-1],i=[t];t!==r;){if(t=t.nextSibling,!t)return;i.push(t)}Array.prototype.splice.apply(n,[0,n.length].concat(i))}return n}function ut(n,t,i,r,u){for(var o=Math.min,l=Math.max,s=[],a=n.length,f,h=t.length,c=h-a||1,w=a+h+1,v,p,b,y,e=0;e<=a;e++)for(p=v,s.push(v=[]),b=o(h,e+c),f=l(0,e-1);f<=b;f++)v[f]=f?e?n[e-1]===t[f-1]?p[f-1]:o(p[f]||w,v[f-1]||w)+1:f+1:e+1;for(o=[],l=[],c=[],e=a,f=h;e||f;)h=s[e][f]-1,f&&h===s[e][f-1]?l.push(o[o.length]={status:i,value:t[--f],index:f}):e&&h===s[e-1][f]?c.push(o[o.length]={status:r,value:n[--e],index:e}):(o.push({status:"retained",value:t[--f]}),--e);if(l.length&&c.length)for(n=10*a,t=i=0;(u||t<n)&&(y=l[i]);i++){for(r=0;s=c[r];r++)if(y.value===s.value){y.moved=s.index,s.moved=y.index,c.splice(r,1),t=r=0;break}t+=r}return o.reverse()}function ft(r,f,e,o,s){s=s||{};var h=r&&d(r),h=h&&h.ownerDocument,c=s.templateEngine||rt;l.za.vb(e,c,h),e=c.renderTemplate(e,o,s,h),("number"!=typeof e.length||0<e.length&&"number"!=typeof e[0].nodeType)&&u(Error("Template engine must return an array of DOM nodes")),h=i;switch(f){case"replaceChildren":l.e.N(r,e),h=n;break;case"replaceNode":l.a.Ya(r,e),h=n;break;case"ignoreTargetNode":break;default:u(Error("Unknown renderMode: "+f))}return h&&(et(e,o),s.afterRender&&l.r.K(s.afterRender,t,[e,o.$data])),e}function d(n){return n.nodeType?n:0<n.length?n[0]:t}function et(n,t){if(n.length){var i=n[0],r=n[n.length-1];ot(i,r,function(n){l.Da(t,n)}),ot(i,r,function(n){l.s.ib(n,[t])})}}function ot(n,t,i){var r;for(t=l.e.nextSibling(t);n&&(r=n)!==t;)n=l.e.nextSibling(r),(1===r.nodeType||8===r.nodeType)&&i(r)}function st(n,t,i){var o,f,r,e;for(n=l.g.aa(n),o=l.g.Q,f=0;f<n.length;f++)r=n[f].key,o.hasOwnProperty(r)&&(e=o[r],"function"==typeof e?(r=e(n[f].value))&&u(Error(r)):e||u(Error("This template engine does not support the '"+r+"' binding within its templates")));return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+l.g.ba(n)+" } })()})",i.createJavaScriptEvaluatorBlock(n)+t}function ht(n,i,f,e){function c(n){return function(){return o[n]}}function a(){return o}var s=0,o,h;return l.j(function(){var y=f&&f instanceof l.z?f:new l.z(l.a.d(f)),p=y.$data,t,v;if(e&&l.eb(n,y),o=("function"==typeof i?i(y,n):i)||l.J.instance.getBindings(n,y)){if(0===s){s=1;for(t in o)v=l.c[t],v&&8===n.nodeType&&!l.e.I[t]&&u(Error("The binding '"+t+"' cannot be used with virtual elements")),v&&"function"==typeof v.init&&(v=v.init(n,c(t),a,p,y))&&v.controlsDescendantBindings&&(h!==r&&u(Error("Multiple bindings ("+h+" and "+t+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.")),h=t);s=2}if(2===s)for(t in o)(v=l.c[t])&&"function"==typeof v.update&&v.update(n,c(t),a,p,y)}},t,{W:n}),{Nb:h===r}}function ct(i,r,u){var e=n,f=1===r.nodeType;f&&l.e.Ta(r),(f&&u||l.J.instance.nodeHasBindings(r))&&(e=ht(r,t,i,u).Nb),e&&lt(i,r,!f)}function lt(n,t,i){for(var r=l.e.firstChild(t);t=r;)r=l.e.nextSibling(t),ct(n,t,i)}function at(n,i){var r=vt(n,i);return r?0<r.length?r[r.length-1].nextSibling:n.nextSibling:t}function vt(n,i){for(var r=n,f=1,e=[];r=r.nextSibling;){if(p(r)&&(f--,0===f))return e;e.push(r),a(r)&&f++}return i||u(Error("Cannot find closing comment tag to match: "+n.nodeValue)),t}function p(n){return 8==n.nodeType&&(b?n.text:n.nodeValue).match(fi)}function a(n){return 8==n.nodeType&&(b?n.text:n.nodeValue).match(ui)}function g(n,i){for(var r=t;n!=r;)r=n,n=n.replace(ti,function(n,t){return i[t]});return n}function ni(){var n=[],t=[];this.save=function(i,r){var u=l.a.i(n,i);0<=u?t[u]=r:(n.push(i),t.push(r))},this.get=function(i){return i=l.a.i(n,i),0<=i?t[i]:r}}function yt(n,i,u){function s(t){var f=i(n[t]),o;switch(typeof f){case"boolean":case"number":case"string":case"function":e[t]=f;break;case"object":case"undefined":o=u.get(f),e[t]=o!==r?o:yt(f,i,u)}}var e,o,f;if(u=u||new ni,n=i(n),!("object"==typeof n&&n!==t&&n!==r&&!(n instanceof Date)))return n;if(e=n instanceof Array?[]:{},u.save(n,e),o=n,o instanceof Array){for(f=0;f<o.length;f++)s(f);"function"==typeof o.toJSON&&s("toJSON")}else for(f in o)s(f);return e}function pt(n,i){var r;if(n)if(8==n.nodeType)r=l.s.Ua(n.nodeValue),r!=t&&i.push({sb:n,Fb:r});else if(1==n.nodeType)for(var r=0,u=n.childNodes,f=u.length;r<f;r++)pt(u[r],i)}function nt(t,r,u,f){l.c[t]={init:function(t){return l.a.f.set(t,it,{}),{controlsDescendantBindings:n}},update:function(t,i,e,o,s){e=l.a.f.get(t,it),i=l.a.d(i()),o=!u!=!i;var h=!e.Za;(h||r||o!==e.qb)&&(h&&(e.Za=l.a.Ia(l.e.childNodes(t),n)),o?(h||l.e.N(t,l.a.Ia(e.Za)),l.Ea(f?f(s,i):s,t)):l.e.Y(t),e.qb=o)}},l.g.Q[t]=i,l.e.I[t]=n}function wt(n,i,r){r&&i!==l.k.q(n)&&l.k.T(n,i),i!==l.k.q(n)&&l.r.K(l.a.Ba,t,[n,"change"])}var l="undefined"!=typeof h?h:{},w,v,bt,y,tt,it,kt,dt,rt;l.b=function(n,t){for(var i=n.split("."),r=l,u=0;u<i.length-1;u++)r=r[i[u]];r[i[i.length-1]]=t},l.p=function(n,t,i){n[t]=i},l.version="2.2.1",l.b("version",l.version),l.a=new function(){function p(n,t){if("input"!==l.a.u(n)||!n.type||"click"!=t.toLowerCase())return i;var r=n.type;return"checkbox"==r||"radio"==r}var d=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,s={},w={},a,v,y,b,k,h;s[/Firefox\/2/i.test(c.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],s.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");for(a in s)if(v=s[a],v.length)for(y=0,b=v.length;y<b;y++)w[v[y]]=a;for(k={propertychange:n},s=3,a=e.createElement("div"),v=a.getElementsByTagName("i");a.innerHTML="<!--[if gt IE "+ ++s+"]><i><\/i><![endif]-->",v[0];);return h=4<s?s:r,{Na:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],o:function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i])},i:function(n,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(n,t);for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},lb:function(n,i,r){for(var u=0,f=n.length;u<f;u++)if(i.call(r,n[u]))return n[u];return t},ga:function(n,t){var i=l.a.i(n,t);0<=i&&n.splice(i,1)},Ga:function(n){n=n||[];for(var i=[],t=0,r=n.length;t<r;t++)0>l.a.i(i,n[t])&&i.push(n[t]);return i},V:function(n,t){n=n||[];for(var r=[],i=0,u=n.length;i<u;i++)r.push(t(n[i]));return r},fa:function(n,t){n=n||[];for(var r=[],i=0,u=n.length;i<u;i++)t(n[i])&&r.push(n[i]);return r},P:function(n,t){if(t instanceof Array)n.push.apply(n,t);else for(var i=0,r=t.length;i<r;i++)n.push(t[i]);return n},extend:function(n,t){if(t)for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},ka:function(n){for(;n.firstChild;)l.removeNode(n.firstChild)},Hb:function(n){n=l.a.L(n);for(var i=e.createElement("div"),t=0,r=n.length;t<r;t++)i.appendChild(l.A(n[t]));return i},Ia:function(t,i){for(var u,r=0,e=t.length,f=[];r<e;r++)u=t[r].cloneNode(n),f.push(i?l.A(u):u);return f},N:function(n,t){if(l.a.ka(n),t)for(var i=0,r=t.length;i<r;i++)n.appendChild(t[i])},Ya:function(n,t){var r=n.nodeType?[n]:n;if(0<r.length){for(var f=r[0],e=f.parentNode,i=0,u=t.length;i<u;i++)e.insertBefore(t[i],f);for(i=0,u=r.length;i<u;i++)l.removeNode(r[i])}},bb:function(n,t){7>h?n.setAttribute("selected",t):n.selected=t},D:function(n){return(n||"").replace(d,"")},Rb:function(n,t){for(var r,u=[],f=(n||"").split(t),i=0,e=f.length;i<e;i++)r=l.a.D(f[i]),""!==r&&u.push(r);return u},Ob:function(n,t){return n=n||"",t.length>n.length?i:n.substring(0,t.length)===t},tb:function(r,u){if(u.compareDocumentPosition)return 16==(u.compareDocumentPosition(r)&16);for(;r!=t;){if(r==u)return n;r=r.parentNode}return i},X:function(n){return l.a.tb(n,n.ownerDocument)},u:function(n){return n&&n.tagName&&n.tagName.toLowerCase()},n:function(t,r,e){var o=h&&k[r],s;o||"undefined"==typeof f?!o&&"function"==typeof t.addEventListener?t.addEventListener(r,e,i):"undefined"!=typeof t.attachEvent?t.attachEvent("on"+r,function(n){e.call(t,n)}):u(Error("Browser doesn't support addEventListener or attachEvent")):(p(t,r)&&(s=e,e=function(t,i){var r=this.checked;i&&(this.checked=i.nb!==n),s.call(this,t),this.checked=r}),f(t).bind(r,e))},Ba:function(t,r){if(t&&t.nodeType||u(Error("element must be a DOM node when calling triggerEvent")),"undefined"!=typeof f){var s=[];p(t,r)&&s.push({nb:t.checked}),f(t).trigger(r,s)}else"function"==typeof e.createEvent?"function"==typeof t.dispatchEvent?(s=e.createEvent(w[r]||"HTMLEvents"),s.initEvent(r,n,n,o,0,0,0,0,0,i,i,i,i,0,t),t.dispatchEvent(s)):u(Error("The supplied element doesn't support dispatchEvent")):"undefined"!=typeof t.fireEvent?(p(t,r)&&(t.checked=t.checked!==n),t.fireEvent("on"+r)):u(Error("Browser doesn't support triggering events"))},d:function(n){return l.$(n)?n():n},ua:function(n){return l.$(n)?n.t():n},da:function(n,t,i){if(t){var u=/[\w-]+/g,r=n.className.match(u)||[];l.a.o(t.match(u),function(n){var t=l.a.i(r,n);0<=t?i||r.splice(t,1):i&&r.push(n)}),n.className=r.join(" ")}},cb:function(n,i){var u=l.a.d(i),f;(u===t||u===r)&&(u=""),3===n.nodeType?n.data=u:(f=l.e.firstChild(n),!f||3!=f.nodeType||l.e.nextSibling(f)?l.e.N(n,[e.createTextNode(u)]):f.data=u,l.a.wb(n))},ab:function(n,t){if(n.name=t,7>=h)try{n.mergeAttributes(e.createElement("<input name='"+n.name+"'/>"),i)}catch(r){}},wb:function(n){9<=h&&(n=1==n.nodeType?n:n.parentNode,n.style&&(n.style.zoom=n.style.zoom))},ub:function(n){if(9<=h){var t=n.style.width;n.style.width=0,n.style.width=t}},Lb:function(n,t){n=l.a.d(n),t=l.a.d(t);for(var r=[],i=n;i<=t;i++)r.push(i);return r},L:function(n){for(var i=[],t=0,r=n.length;t<r;t++)i.push(n[t]);return i},Pb:6===h,Qb:7===h,Z:h,Oa:function(n,t){for(var r=l.a.L(n.getElementsByTagName("input")).concat(l.a.L(n.getElementsByTagName("textarea"))),f="string"==typeof t?function(n){return n.name===t}:function(n){return t.test(n.name)},u=[],i=r.length-1;0<=i;i--)f(r[i])&&u.push(r[i]);return u},Ib:function(n){return"string"==typeof n&&(n=l.a.D(n))?o.JSON&&o.JSON.parse?o.JSON.parse(n):new Function("return "+n)():t},xa:function(n,t,i){return("undefined"==typeof JSON||"undefined"==typeof JSON.stringify)&&u(Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js")),JSON.stringify(l.a.d(n),t,i)},Jb:function(n,t,i){var c,o,s,f,r,u;i=i||{};var h=i.params||{},a=i.includeFields||this.Na,c=n;if("object"==typeof n&&"form"===l.a.u(n))for(c=n.action,o=a.length-1;0<=o;o--)for(s=l.a.Oa(n,a[o]),f=s.length-1;0<=f;f--)h[s[f].name]=s[f].value;t=l.a.d(t),r=e.createElement("form"),r.style.display="none",r.action=c,r.method="post";for(u in t)n=e.createElement("input"),n.name=u,n.value=l.a.xa(l.a.d(t[u])),r.appendChild(n);for(u in h)n=e.createElement("input"),n.name=u,n.value=h[u],r.appendChild(n);e.body.appendChild(r),i.submitter?i.submitter(r):r.submit(),setTimeout(function(){r.parentNode.removeChild(r)},0)}}},l.b("utils",l.a),l.b("utils.arrayForEach",l.a.o),l.b("utils.arrayFirst",l.a.lb),l.b("utils.arrayFilter",l.a.fa),l.b("utils.arrayGetDistinctValues",l.a.Ga),l.b("utils.arrayIndexOf",l.a.i),l.b("utils.arrayMap",l.a.V),l.b("utils.arrayPushAll",l.a.P),l.b("utils.arrayRemoveItem",l.a.ga),l.b("utils.extend",l.a.extend),l.b("utils.fieldsIncludedWithJsonPost",l.a.Na),l.b("utils.getFormFields",l.a.Oa),l.b("utils.peekObservable",l.a.ua),l.b("utils.postJson",l.a.Jb),l.b("utils.parseJson",l.a.Ib),l.b("utils.registerEventHandler",l.a.n),l.b("utils.stringifyJson",l.a.xa),l.b("utils.range",l.a.Lb),l.b("utils.toggleDomNodeCssClass",l.a.da),l.b("utils.triggerEvent",l.a.Ba),l.b("utils.unwrapObservable",l.a.d),Function.prototype.bind||(Function.prototype.bind=function(n){var i=this,t=Array.prototype.slice.call(arguments);return n=t.shift(),function(){return i.apply(n,t.concat(Array.prototype.slice.call(arguments)))}}),l.a.f=new function(){var e=0,u="__ko__"+(new Date).getTime(),f={};return{get:function(n,t){var u=l.a.f.la(n,i);return u===r?r:u[t]},set:function(t,u,f){f===r&&l.a.f.la(t,i)===r||(l.a.f.la(t,n)[u]=f)},la:function(n,t){var i=n[u];if(!i||!("null"!==i&&f[i])){if(!t)return r;i=n[u]="ko"+e++,f[i]={}}return f[i]},clear:function(r){var e=r[u];return e?(delete f[e],r[u]=t,n):i}}},l.b("utils.domData",l.a.f),l.b("utils.domData.clear",l.a.f.clear),l.a.F=new function(){function t(n,t){var i=l.a.f.get(n,o);return i===r&&t&&(i=[],l.a.f.set(n,o,i)),i}function e(n){var r=t(n,i),u;if(r)for(r=r.slice(0),u=0;u<r.length;u++)r[u](n);if(l.a.f.clear(n),"function"==typeof f&&"function"==typeof f.cleanData&&f.cleanData([n]),s[n.nodeType])for(r=n.firstChild;n=r;)r=n.nextSibling,8===n.nodeType&&e(n)}var o="__ko_domNodeDisposal__"+(new Date).getTime(),h={1:n,8:n,9:n},s={1:n,9:n};return{Ca:function(i,r){"function"!=typeof r&&u(Error("Callback must be a function")),t(i,n).push(r)},Xa:function(n,u){var f=t(n,i);f&&(l.a.ga(f,u),0==f.length&&l.a.f.set(n,o,r))},A:function(n){var t,i,r;if(h[n.nodeType]&&(e(n),s[n.nodeType]))for(t=[],l.a.P(t,n.getElementsByTagName("*")),i=0,r=t.length;i<r;i++)e(t[i]);return n},removeNode:function(n){l.A(n),n.parentNode&&n.parentNode.removeChild(n)}}},l.A=l.a.F.A,l.removeNode=l.a.F.removeNode,l.b("cleanNode",l.A),l.b("removeNode",l.removeNode),l.b("utils.domNodeDisposal",l.a.F),l.b("utils.domNodeDisposal.addDisposeCallback",l.a.F.Ca),l.b("utils.domNodeDisposal.removeDisposeCallback",l.a.F.Xa),l.a.ta=function(n){var t,i;if("undefined"!=typeof f){if(f.parseHTML)t=f.parseHTML(n);else if((t=f.clean([n]))&&t[0]){for(n=t[0];n.parentNode&&11!==n.parentNode.nodeType;)n=n.parentNode;n.parentNode&&n.parentNode.removeChild(n)}}else{for(i=l.a.D(n).toLowerCase(),t=e.createElement("div"),i=i.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","<\/table>"]||!i.indexOf("<tr")&&[2,"<table><tbody>","<\/tbody><\/table>"]||(!i.indexOf("<td")||!i.indexOf("<th"))&&[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"]||[0,"",""],n="ignored<div>"+i[1]+n+i[2]+"<\/div>","function"==typeof o.innerShiv?t.appendChild(o.innerShiv(n)):t.innerHTML=n;i[0]--;)t=t.lastChild;t=l.a.L(t.lastChild.childNodes)}return t},l.a.ca=function(n,i){if(l.a.ka(n),i=l.a.d(i),i!==t&&i!==r)if("string"!=typeof i&&(i=i.toString()),"undefined"!=typeof f)f(n).html(i);else for(var e=l.a.ta(i),u=0;u<e.length;u++)n.appendChild(e[u])},l.b("utils.parseHtmlFragment",l.a.ta),l.b("utils.setHtml",l.a.ca),w={},l.s={ra:function(n){"function"!=typeof n&&u(Error("You can only pass a function to ko.memoization.memoize()"));var t=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return w[t]=n,"<!--[ko_memo:"+t+"]-->"},hb:function(i,f){var e=w[i];e===r&&u(Error("Couldn't find any memo with ID "+i+". Perhaps it's already been unmemoized."));try{return e.apply(t,f||[]),n}finally{delete w[i]}},ib:function(n,t){var u=[],r,e,i,f;for(pt(n,u),r=0,e=u.length;r<e;r++)i=u[r].sb,f=[i],t&&l.a.P(f,t),l.s.hb(u[r].Fb,f),i.nodeValue="",i.parentNode&&i.parentNode.removeChild(i)},Ua:function(n){return(n=n.match(/^\[ko_memo\:(.*?)\]$/))?n[1]:t}},l.b("memoization",l.s),l.b("memoization.memoize",l.s.ra),l.b("memoization.unmemoize",l.s.hb),l.b("memoization.parseMemoText",l.s.Ua),l.b("memoization.unmemoizeDomNodeAndDescendants",l.s.ib),l.Ma={throttle:function(n,i){n.throttleEvaluation=i;var r=t;return l.j({read:n,write:function(t){clearTimeout(r),r=setTimeout(function(){n(t)},i)}})},notify:function(n,t){return n.equalityComparer="always"==t?s(i):l.m.fn.equalityComparer,n}},l.b("extenders",l.Ma),l.fb=function(n,t,i){this.target=n,this.ha=t,this.rb=i,l.p(this,"dispose",this.B)},l.fb.prototype.B=function(){this.Cb=n,this.rb()},l.S=function(){this.w={},l.a.extend(this,l.S.fn),l.p(this,"subscribe",this.ya),l.p(this,"extend",this.extend),l.p(this,"getSubscriptionsCount",this.yb)},l.S.fn={ya:function(n,t,i){i=i||"change";var r=new l.fb(this,t?n.bind(t):n,function(){l.a.ga(this.w[i],r)}.bind(this));return this.w[i]||(this.w[i]=[]),this.w[i].push(r),r},notifySubscribers:function(t,i){i=i||"change",this.w[i]&&l.r.K(function(){l.a.o(this.w[i].slice(0),function(i){i&&i.Cb!==n&&i.ha(t)})},this)},yb:function(){var t=0,n;for(n in this.w)this.w.hasOwnProperty(n)&&(t+=this.w[n].length);return t},extend:function(n){var t=this,i,r;if(n)for(i in n)r=l.Ma[i],"function"==typeof r&&(t=r(t,n[i]));return t}},l.Qa=function(n){return"function"==typeof n.ya&&"function"==typeof n.notifySubscribers},l.b("subscribable",l.S),l.b("isSubscribable",l.Qa),v=[],l.r={mb:function(n){v.push({ha:n,La:[]})},end:function(){v.pop()},Wa:function(n){if(l.Qa(n)||u(Error("Only subscribable things can act as dependencies")),0<v.length){var t=v[v.length-1];!t||0<=l.a.i(t.La,n)||(t.La.push(n),t.ha(n))}},K:function(n,i,r){try{return v.push(t),n.apply(i,r||[])}finally{v.pop()}}},bt={undefined:n,boolean:n,number:n,string:n},l.m=function(n){function t(){return 0<arguments.length?(t.equalityComparer&&t.equalityComparer(i,arguments[0])||(t.H(),i=arguments[0],t.G()),this):(l.r.Wa(t),i)}var i=n;return l.S.call(t),t.t=function(){return i},t.G=function(){t.notifySubscribers(i)},t.H=function(){t.notifySubscribers(i,"beforeChange")},l.a.extend(t,l.m.fn),l.p(t,"peek",t.t),l.p(t,"valueHasMutated",t.G),l.p(t,"valueWillMutate",t.H),t},l.m.fn={equalityComparer:function(n,r){return n===t||typeof n in bt?n===r:i}},y=l.m.Kb="__ko_proto__",l.m.fn[y]=l.m,l.ma=function(u,f){return u===t||u===r||u[y]===r?i:u[y]===f?n:l.ma(u[y],f)},l.$=function(n){return l.ma(n,l.m)},l.Ra=function(t){return"function"==typeof t&&t[y]===l.m||"function"==typeof t&&t[y]===l.j&&t.zb?n:i},l.b("observable",l.m),l.b("isObservable",l.$),l.b("isWriteableObservable",l.Ra),l.R=function(n){0==arguments.length&&(n=[]),n===t||n===r||"length"in n||u(Error("The argument passed when initializing an observable array must be an array, or null, or undefined."));var i=l.m(n);return l.a.extend(i,l.R.fn),i},l.R.fn={remove:function(n){for(var u,r=this.t(),i=[],f="function"==typeof n?n:function(t){return t===n},t=0;t<r.length;t++)u=r[t],f(u)&&(0===i.length&&this.H(),i.push(u),r.splice(t,1),t--);return i.length&&this.G(),i},removeAll:function(n){if(n===r){var t=this.t(),i=t.slice(0);return this.H(),t.splice(0,t.length),this.G(),i}return n?this.remove(function(t){return 0<=l.a.i(n,t)}):[]},destroy:function(t){var r=this.t(),u="function"==typeof t?t:function(n){return n===t},i;for(this.H(),i=r.length-1;0<=i;i--)u(r[i])&&(r[i]._destroy=n);this.G()},destroyAll:function(t){return t===r?this.destroy(s(n)):t?this.destroy(function(n){return 0<=l.a.i(t,n)}):[]},indexOf:function(n){var t=this();return l.a.i(t,n)},replace:function(n,t){var i=this.indexOf(n);0<=i&&(this.H(),this.t()[i]=t,this.G())}},l.a.o("pop push reverse shift sort splice unshift".split(" "),function(n){l.R.fn[n]=function(){var t=this.t();return this.H(),t=t[n].apply(t,arguments),this.G(),t}}),l.a.o(["slice"],function(n){l.R.fn[n]=function(){var t=this();return t[n].apply(t,arguments)}}),l.b("observableArray",l.R),l.j=function(f,e,o){function g(){l.a.o(a,function(n){n.B()}),a=[]}function ut(){var n=h.throttleEvaluation;n&&0<=n?(clearTimeout(it),it=setTimeout(v,n)):v()}function v(){var t,f,u;if(!d)if(p&&k())w();else{d=n;try{for(t=l.a.V(a,function(n){return n.target}),l.r.mb(function(n){var i;0<=(i=l.a.i(t,n))?t[i]=r:a.push(n.ya(ut))}),f=c.call(e),u=t.length-1;0<=u;u--)t[u]&&a.splice(u,1)[0].B();p=n,h.notifySubscribers(y,"beforeChange"),y=f}finally{l.r.end()}h.notifySubscribers(y),d=i,a.length||w()}}function h(){return 0<arguments.length?("function"==typeof tt?tt.apply(e,arguments):u(Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.")),this):(p||v(),l.r.Wa(h),y)}function nt(){return!p||0<a.length}var y,p=i,d=i,c=f,rt,k;c&&"object"==typeof c?(o=c,c=o.read):(o=o||{},c||(c=o.read)),"function"!=typeof c&&u(Error("Pass a function that returns the value of the ko.computed"));var tt=o.write,b=o.disposeWhenNodeIsRemoved||o.W||t,k=o.disposeWhen||o.Ka||s(i),w=g,a=[],it=t;return e||(e=o.owner),h.t=function(){return p||v(),y},h.xb=function(){return a.length},h.zb="function"==typeof o.write,h.B=function(){w()},h.pa=nt,l.S.call(h),l.a.extend(h,l.j.fn),l.p(h,"peek",h.t),l.p(h,"dispose",h.B),l.p(h,"isActive",h.pa),l.p(h,"getDependenciesCount",h.xb),o.deferEvaluation!==n&&v(),b&&nt()&&(w=function(){l.a.F.Xa(b,arguments.callee),g()},l.a.F.Ca(b,w),rt=k,k=function(){return!l.a.X(b)||rt()}),h},l.Bb=function(n){return l.ma(n,l.j)},h=l.m.Kb,l.j[h]=l.m,l.j.fn={},l.j.fn[h]=l.j,l.b("dependentObservable",l.j),l.b("computed",l.j),l.b("isComputed",l.Bb),l.gb=function(n){return 0==arguments.length&&u(Error("When calling ko.toJS, pass the object you want to convert.")),yt(n,function(n){for(var t=0;l.$(n)&&10>t;t++)n=n();return n})},l.toJSON=function(n,t,i){return n=l.gb(n),l.a.xa(n,t,i)},l.b("toJS",l.gb),l.b("toJSON",l.toJSON),l.k={q:function(t){switch(l.a.u(t)){case"option":return t.__ko__hasDomDataOptionValue__===n?l.a.f.get(t,l.c.options.sa):7>=l.a.Z?t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?l.k.q(t.options[t.selectedIndex]):r;default:return t.value}},T:function(i,u){switch(l.a.u(i)){case"option":switch(typeof u){case"string":l.a.f.set(i,l.c.options.sa,r),"__ko__hasDomDataOptionValue__"in i&&delete i.__ko__hasDomDataOptionValue__,i.value=u;break;default:l.a.f.set(i,l.c.options.sa,u),i.__ko__hasDomDataOptionValue__=n,i.value="number"==typeof u?u:""}break;case"select":for(var f=i.options.length-1;0<=f;f--)if(l.k.q(i.options[f])==u){i.selectedIndex=f;break}break;default:(u===t||u===r)&&(u=""),i.value=u}}},l.b("selectExtensions",l.k),l.b("selectExtensions.readValue",l.k.q),l.b("selectExtensions.writeValue",l.k.T);var ti=/\@ko_token_(\d+)\@/g,ii=["true","false"],ri=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;l.g={Q:[],aa:function(n){var i=l.a.D(n),f,e,r,u;if(3>i.length)return[];for("{"===i.charAt(0)&&(i=i.substring(1,i.length-1)),n=[],f=t,r=0;r<i.length;r++)if(u=i.charAt(r),f===t)switch(u){case'"':case"'":case"/":f=r,e=u}else if(u==e&&"\\"!==i.charAt(r-1)){u=i.substring(f,r+1),n.push(u);var h="@ko_token_"+(n.length-1)+"@",i=i.substring(0,f)+h+i.substring(r+1),r=r-(u.length-h.length),f=t}e=f=t;for(var o=0,s=t,r=0;r<i.length;r++){if(u=i.charAt(r),f===t)switch(u){case"{":f=r,s=u,e="}";break;case"(":f=r,s=u,e=")";break;case"[":f=r,s=u,e="]"}u===s?o++:u===e&&(o--,0===o&&(u=i.substring(f,r+1),n.push(u),h="@ko_token_"+(n.length-1)+"@",i=i.substring(0,f)+h+i.substring(r+1),r-=u.length-h.length,f=t))}for(e=[],i=i.split(","),f=0,r=i.length;f<r;f++)o=i[f],s=o.indexOf(":"),0<s&&s<o.length-1?(u=o.substring(s+1),e.push({key:g(o.substring(0,s),n),value:g(u,n)})):e.push({unknown:g(o,n)});return e},ba:function(n){var e="string"==typeof n?l.g.aa(n):n,f=[],r,s,o,u;for(n=[],s=0;r=e[s];s++)if(0<f.length&&f.push(","),r.key){n:{o=r.key,u=l.a.D(o);switch(u.length&&u.charAt(0)){case"'":case'"':break n;default:o="'"+u+"'"}}r=r.value,f.push(o),f.push(":"),f.push(r),r=l.a.D(r),0<=l.a.i(ii,l.a.D(r).toLowerCase())?r=i:(u=r.match(ri),r=u===t?i:u[1]?"Object("+u[1]+")"+u[2]:r),r&&(0<n.length&&n.push(", "),n.push(o+" : function(__ko_value) { "+r+" = __ko_value; }"))}else r.unknown&&f.push(r.unknown);return e=f.join(""),0<n.length&&(e=e+", '_ko_property_writers' : { "+n.join("")+" } "),e},Eb:function(t,r){for(var u=0;u<t.length;u++)if(l.a.D(t[u].key)==r)return n;return i},ea:function(n,t,i,r,u){n&&l.Ra(n)?u&&n.t()===r||n(r):(n=t()._ko_property_writers)&&n[i]&&n[i](r)}},l.b("expressionRewriting",l.g),l.b("expressionRewriting.bindingRewriteValidators",l.g.Q),l.b("expressionRewriting.parseObjectLiteral",l.g.aa),l.b("expressionRewriting.preProcessBindings",l.g.ba),l.b("jsonExpressionRewriting",l.g),l.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",l.g.ba);var b="<!--test-->"===e.createComment("test").text,ui=b?/^\x3c!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*--\x3e$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,fi=b?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,ei={ul:n,ol:n};l.e={I:{},childNodes:function(n){return a(n)?vt(n):n.childNodes},Y:function(n){if(a(n)){n=l.e.childNodes(n);for(var t=0,i=n.length;t<i;t++)l.removeNode(n[t])}else l.a.ka(n)},N:function(n,t){if(a(n)){l.e.Y(n);for(var r=n.nextSibling,i=0,u=t.length;i<u;i++)r.parentNode.insertBefore(t[i],r)}else l.a.N(n,t)},Va:function(n,t){a(n)?n.parentNode.insertBefore(t,n.nextSibling):n.firstChild?n.insertBefore(t,n.firstChild):n.appendChild(t)},Pa:function(n,t,i){i?a(n)?n.parentNode.insertBefore(t,i.nextSibling):i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):l.e.Va(n,t)},firstChild:function(n){return a(n)?!n.nextSibling||p(n.nextSibling)?t:n.nextSibling:n.firstChild},nextSibling:function(n){return a(n)&&(n=at(n)),n.nextSibling&&p(n.nextSibling)?t:n.nextSibling},jb:function(n){return(n=a(n))?n[1]:t},Ta:function(i){var e,r,u,f;if(ei[l.a.u(i)]&&(e=i.firstChild,e))do if(1===e.nodeType){if(r=e.firstChild,u=t,r)do u?u.push(r):a(r)?(f=at(r,n),f?r=f:u=[r]):p(r)&&(u=[r]);while(r=r.nextSibling);if(r=u)for(u=e.nextSibling,f=0;f<r.length;f++)u?i.insertBefore(r[f],u):i.appendChild(r[f])}while(e=e.nextSibling)}},l.b("virtualElements",l.e),l.b("virtualElements.allowedBindings",l.e.I),l.b("virtualElements.emptyNode",l.e.Y),l.b("virtualElements.insertAfter",l.e.Pa),l.b("virtualElements.prepend",l.e.Va),l.b("virtualElements.setDomNodeChildren",l.e.N),l.J=function(){this.Ha={}},l.a.extend(l.J.prototype,{nodeHasBindings:function(n){switch(n.nodeType){case 1:return n.getAttribute("data-bind")!=t;case 8:return l.e.jb(n)!=t;default:return i}},getBindings:function(n,i){var r=this.getBindingsString(n,i);return r?this.parseBindingsString(r,i,n):t},getBindingsString:function(n){switch(n.nodeType){case 1:return n.getAttribute("data-bind");case 8:return l.e.jb(n);default:return t}},parseBindingsString:function(n,t,i){var r,f,e,o;try{return(r=this.Ha[n])||(f=this.Ha,o="with($context){with($data||{}){return{"+l.g.ba(n)+"}}}",e=new Function("$context","$element",o),r=f[n]=e),r(t,i)}catch(s){u(Error("Unable to parse bindings.\nMessage: "+s+";\nBindings value: "+n))}}}),l.J.instance=new l.J,l.b("bindingProvider",l.J),l.c={},l.z=function(n,t,i){t?(l.a.extend(this,t),this.$parentContext=t,this.$parent=t.$data,this.$parents=(t.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=n,this.ko=l),this.$data=n,i&&(this[i]=n)},l.z.prototype.createChildContext=function(n,t){return new l.z(n,this,t)},l.z.prototype.extend=function(n){var t=l.a.extend(new l.z,this);return l.a.extend(t,n)},l.eb=function(n,t){if(2==arguments.length)l.a.f.set(n,"__ko_bindingContext__",t);else return l.a.f.get(n,"__ko_bindingContext__")},l.Fa=function(t,i,r){return 1===t.nodeType&&l.e.Ta(t),ht(t,i,r,n)},l.Ea=function(t,i){(1===i.nodeType||8===i.nodeType)&&lt(t,i,n)},l.Da=function(t,i){i&&1!==i.nodeType&&8!==i.nodeType&&u(Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node")),i=i||o.document.body,ct(t,i,n)},l.ja=function(n){switch(n.nodeType){case 1:case 8:var t=l.eb(n);if(t)return t;if(n.parentNode)return l.ja(n.parentNode)}return r},l.pb=function(n){return(n=l.ja(n))?n.$data:r},l.b("bindingHandlers",l.c),l.b("applyBindings",l.Da),l.b("applyBindingsToDescendants",l.Ea),l.b("applyBindingsToNode",l.Fa),l.b("contextFor",l.ja),l.b("dataFor",l.pb),tt={"class":"className","for":"htmlFor"},l.c.attr={update:function(n,u){var s=l.a.d(u())||{},f,e,o;for(f in s)"string"==typeof f&&(e=l.a.d(s[f]),o=e===i||e===t||e===r,o&&n.removeAttribute(f),8>=l.a.Z&&f in tt?(f=tt[f],o?n.removeAttribute(f):n[f]=e):o||n.setAttribute(f,e.toString()),"name"===f&&l.a.ab(n,o?"":e.toString()))}},l.c.checked={init:function(t,i,r){l.a.n(t,"click",function(){var u,f,e;if("checkbox"==t.type)u=t.checked;else if("radio"==t.type&&t.checked)u=t.value;else return;f=i(),e=l.a.d(f),"checkbox"==t.type&&e instanceof Array?(u=l.a.i(e,t.value),t.checked&&0>u?f.push(t.value):!t.checked&&0<=u&&f.splice(u,1)):l.g.ea(f,r,"checked",u,n)}),"radio"!=t.type||t.name||l.c.uniqueName.init(t,s(n))},update:function(n,t){var i=l.a.d(t());"checkbox"==n.type?n.checked=i instanceof Array?0<=l.a.i(i,n.value):i:"radio"==n.type&&(n.checked=n.value==i)}},l.c.css={update:function(t,r){var u=l.a.d(r()),f,e;if("object"==typeof u)for(f in u)e=l.a.d(u[f]),l.a.da(t,f,e);else u=String(u||""),l.a.da(t,t.__ko__cssValue,i),t.__ko__cssValue=u,l.a.da(t,u,n)}},l.c.enable={update:function(t,i){var r=l.a.d(i());r&&t.disabled?t.removeAttribute("disabled"):!r&&!t.disabled&&(t.disabled=n)}},l.c.disable={update:function(n,t){l.c.enable.update(n,function(){return!l.a.d(t())})}},l.c.event={init:function(t,r,u,f){var o=r()||{},e;for(e in o)(function(){var o=e;"string"==typeof o&&l.a.n(t,o,function(t){var s,h=r()[o],c,e;if(h){c=u();try{e=l.a.L(arguments),e.unshift(f),s=h.apply(f,e)}finally{s!==n&&(t.preventDefault?t.preventDefault():t.returnValue=i)}c[o+"Bubble"]===i&&(t.cancelBubble=n,t.stopPropagation&&t.stopPropagation())}})})()}},l.c.foreach={Sa:function(n){return function(){var i=n(),t=l.a.ua(i);return!t||"number"==typeof t.length?{foreach:i,templateEngine:l.C.oa}:(l.a.d(i),{foreach:t.data,as:t.as,includeDestroyed:t.includeDestroyed,afterAdd:t.afterAdd,beforeRemove:t.beforeRemove,afterRender:t.afterRender,beforeMove:t.beforeMove,afterMove:t.afterMove,templateEngine:l.C.oa})}},init:function(n,t){return l.c.template.init(n,l.c.foreach.Sa(t))},update:function(n,t,i,r,u){return l.c.template.update(n,l.c.foreach.Sa(t),i,r,u)}},l.g.Q.foreach=i,l.e.I.foreach=n,l.c.hasfocus={init:function(r,u,f){function e(t){r.__ko_hasfocusUpdating=n;var e=r.ownerDocument;"activeElement"in e&&(t=e.activeElement===r),e=u(),l.g.ea(e,f,"hasfocus",t,n),r.__ko_hasfocusUpdating=i}var o=e.bind(t,n),s=e.bind(t,i);l.a.n(r,"focus",o),l.a.n(r,"focusin",o),l.a.n(r,"blur",s),l.a.n(r,"focusout",s)},update:function(n,i){var r=l.a.d(i());n.__ko_hasfocusUpdating||(r?n.focus():n.blur(),l.r.K(l.a.Ba,t,[n,r?"focusin":"focusout"]))}},l.c.html={init:function(){return{controlsDescendantBindings:n}},update:function(n,t){l.a.ca(n,t())}},it="__ko_withIfBindingData",nt("if"),nt("ifnot",i,n),nt("with",n,i,function(n,t){return n.createChildContext(t)}),l.c.options={update:function(t,i,f){var c,s,a,h;"select"!==l.a.u(t)&&u(Error("options binding applies only to SELECT elements"));for(var p=0==t.length,w=l.a.V(l.a.fa(t.childNodes,function(n){return n.tagName&&"option"===l.a.u(n)&&n.selected}),function(n){return l.k.q(n)||n.innerText||n.textContent}),b=t.scrollTop,o=l.a.d(i());0<t.length;)l.A(t.options[0]),t.remove(0);if(o){for(f=f(),c=f.optionsIncludeDestroyed,"number"!=typeof o.length&&(o=[o]),f.optionsCaption&&(s=e.createElement("option"),l.a.ca(s,f.optionsCaption),l.k.T(s,r),t.appendChild(s)),i=0,a=o.length;i<a;i++)if(h=o[i],!h||!h._destroy||c){var s=e.createElement("option"),v=function(n,t,i){var r=typeof t;return"function"==r?t(n):"string"==r?n[t]:i},y=v(h,f.optionsValue,h);l.k.T(s,l.a.d(y)),h=v(h,f.optionsText,y),l.a.cb(s,h),t.appendChild(s)}for(o=t.getElementsByTagName("option"),i=c=0,a=o.length;i<a;i++)0<=l.a.i(w,l.k.q(o[i]))&&(l.a.bb(o[i],n),c++);t.scrollTop=b,p&&"value"in f&&wt(t,l.a.ua(f.value),n),l.a.ub(t)}}},l.c.options.sa="__ko.optionValueDomData__",l.c.selectedOptions={init:function(n,t,i){l.a.n(n,"change",function(){var u=t(),r=[];l.a.o(n.getElementsByTagName("option"),function(n){n.selected&&r.push(l.k.q(n))}),l.g.ea(u,i,"value",r)})},update:function(n,t){"select"!=l.a.u(n)&&u(Error("values binding applies only to SELECT elements"));var i=l.a.d(t());i&&"number"==typeof i.length&&l.a.o(n.getElementsByTagName("option"),function(n){var t=0<=l.a.i(i,l.k.q(n));l.a.bb(n,t)})}},l.c.style={update:function(n,t){var r=l.a.d(t()||{}),i,u;for(i in r)"string"==typeof i&&(u=l.a.d(r[i]),n.style[i]=u||"")}},l.c.submit={init:function(t,r,f,e){"function"!=typeof r()&&u(Error("The value for a submit binding must be a function")),l.a.n(t,"submit",function(u){var f,o=r();try{f=o.call(e,t)}finally{f!==n&&(u.preventDefault?u.preventDefault():u.returnValue=i)}})}},l.c.text={update:function(n,t){l.a.cb(n,t())}},l.e.I.text=n,l.c.uniqueName={init:function(n,t){if(t()){var i="ko_unique_"+ ++l.c.uniqueName.ob;l.a.ab(n,i)}}},l.c.uniqueName.ob=0,l.c.value={init:function(t,r,u){function o(){s=i;var n=r(),f=l.k.q(t);l.g.ea(n,u,"value",f)}var f=["change"],e=u().valueUpdate,s=i;e&&("string"==typeof e&&(e=[e]),l.a.P(f,e),f=l.a.Ga(f)),l.a.Z&&"input"==t.tagName.toLowerCase()&&"text"==t.type&&"off"!=t.autocomplete&&(!t.form||"off"!=t.form.autocomplete)&&-1==l.a.i(f,"propertychange")&&(l.a.n(t,"propertychange",function(){s=n}),l.a.n(t,"blur",function(){s&&o()})),l.a.o(f,function(n){var i=o;l.a.Ob(n,"after")&&(i=function(){setTimeout(o,0)},n=n.substring(5)),l.a.n(t,n,i)})},update:function(t,r){var e="select"===l.a.u(t),f=l.a.d(r()),u=l.k.q(t),o=f!=u;0===f&&0!==u&&"0"!==u&&(o=n),o&&(u=function(){l.k.T(t,f)},u(),e&&setTimeout(u,0)),e&&0<t.length&&wt(t,f,i)}},l.c.visible={update:function(n,t){var i=l.a.d(t()),r="none"!=n.style.display;i&&!r?n.style.display="":!i&&r&&(n.style.display="none")}},l.c.click={init:function(n,t,i,r){return l.c.event.init.call(this,n,function(){var n={};return n.click=t(),n},i,r)}},l.v=function(){},l.v.prototype.renderTemplateSource=function(){u(Error("Override renderTemplateSource"))},l.v.prototype.createJavaScriptEvaluatorBlock=function(){u(Error("Override createJavaScriptEvaluatorBlock"))},l.v.prototype.makeTemplateSource=function(n,t){if("string"==typeof n){t=t||e;var i=t.getElementById(n);return i||u(Error("Cannot find template with ID "+n)),new l.l.h(i)}if(1==n.nodeType||8==n.nodeType)return new l.l.O(n);u(Error("Unknown template type: "+n))},l.v.prototype.renderTemplate=function(n,t,i,r){return n=this.makeTemplateSource(n,r),this.renderTemplateSource(n,t,i)},l.v.prototype.isTemplateRewritten=function(t,r){return this.allowTemplateRewriting===i?n:this.makeTemplateSource(t,r).data("isRewritten")},l.v.prototype.rewriteTemplate=function(t,i,r){t=this.makeTemplateSource(t,r),i=i(t.text()),t.text(i),t.data("isRewritten",n)},l.b("templateEngine",l.v),kt=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,dt=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g,l.za={vb:function(n,t,i){t.isTemplateRewritten(n,i)||t.rewriteTemplate(n,function(n){return l.za.Gb(n,t)},i)},Gb:function(n,t){return n.replace(kt,function(n,i,r,u,f,e,o){return st(o,i,t)}).replace(dt,function(n,i){return st(i,"<!-- ko -->",t)})},kb:function(n){return l.s.ra(function(t,i){t.nextSibling&&l.Fa(t.nextSibling,n,i)})}},l.b("__tr_ambtns",l.za.kb),l.l={},l.l.h=function(n){this.h=n},l.l.h.prototype.text=function(){var n=l.a.u(this.h),n="script"===n?"text":"textarea"===n?"value":"innerHTML",t;if(0==arguments.length)return this.h[n];t=arguments[0],"innerHTML"===n?l.a.ca(this.h,t):this.h[n]=t},l.l.h.prototype.data=function(n){if(1===arguments.length)return l.a.f.get(this.h,"templateSourceData_"+n);l.a.f.set(this.h,"templateSourceData_"+n,arguments[1])},l.l.O=function(n){this.h=n},l.l.O.prototype=new l.l.h,l.l.O.prototype.text=function(){if(0==arguments.length){var n=l.a.f.get(this.h,"__ko_anon_template__")||{};return n.Aa===r&&n.ia&&(n.Aa=n.ia.innerHTML),n.Aa}l.a.f.set(this.h,"__ko_anon_template__",{Aa:arguments[0]})},l.l.h.prototype.nodes=function(){if(0==arguments.length)return(l.a.f.get(this.h,"__ko_anon_template__")||{}).ia;l.a.f.set(this.h,"__ko_anon_template__",{ia:arguments[0]})},l.b("templateSources",l.l),l.b("templateSources.domElement",l.l.h),l.b("templateSources.anonymousTemplate",l.l.O),l.wa=function(n){n==r||n instanceof l.v||u(Error("templateEngine must inherit from ko.templateEngine")),rt=n},l.va=function(n,i,f,e,o){if(f=f||{},(f.templateEngine||rt)==r&&u(Error("Set a template engine before calling renderTemplate")),o=o||"replaceChildren",e){var s=d(e);return l.j(function(){var t=i&&i instanceof l.z?i:new l.z(l.a.d(i)),r="function"==typeof n?n(t.$data,t):n,t=ft(e,o,r,t,f);"replaceNode"==o&&(e=t,s=d(e))},t,{Ka:function(){return!s||!l.a.X(s)},W:s&&"replaceNode"==o?s.parentNode:s})}return l.s.ra(function(t){l.va(n,i,f,t,"replaceNode")})},l.Mb=function(n,i,u,f,e){function s(n,t){et(t,o),u.afterRender&&u.afterRender(t,n)}function h(i,r){o=e.createChildContext(l.a.d(i),u.as),o.$index=r;var f="function"==typeof n?n(i,o):n;return ft(t,"ignoreTargetNode",f,o,u)}var o;return l.j(function(){var n=l.a.d(i)||[];"undefined"==typeof n.length&&(n=[n]),n=l.a.fa(n,function(n){return u.includeDestroyed||n===r||n===t||!l.a.d(n._destroy)}),l.r.K(l.a.$a,t,[f,n,h,u,s])},t,{W:f})},l.c.template={init:function(t,i){var r=l.a.d(i());return"string"==typeof r||r.name||1!=t.nodeType&&8!=t.nodeType||(r=1==t.nodeType?t.childNodes:l.e.childNodes(t),r=l.a.Hb(r),new l.l.O(t).nodes(r)),{controlsDescendantBindings:n}},update:function(i,u,f,e,o){u=l.a.d(u()),f={},e=n;var s,h=t;"string"!=typeof u&&(f=u,u=f.name,"if"in f&&(e=l.a.d(f["if"])),e&&"ifnot"in f&&(e=!l.a.d(f.ifnot)),s=l.a.d(f.data)),"foreach"in f?h=l.Mb(u||i,e&&f.foreach||[],f,i,o):e?(o="data"in f?o.createChildContext(s,f.as):o,h=l.va(u||i,o,f,i)):l.e.Y(i),o=h,(s=l.a.f.get(i,"__ko__templateComputedDomDataKey__"))&&"function"==typeof s.B&&s.B(),l.a.f.set(i,"__ko__templateComputedDomDataKey__",o&&o.pa()?o:r)}},l.g.Q.template=function(n){return n=l.g.aa(n),1==n.length&&n[0].unknown||l.g.Eb(n,"name")?t:"This template engine does not support anonymous templates nested within its templates"},l.e.I.template=n,l.b("setTemplateEngine",l.wa),l.b("renderTemplate",l.va),l.a.Ja=function(n,t,i){return n=n||[],t=t||[],n.length<=t.length?ut(n,t,"added","deleted",i):ut(t,n,"deleted","added",i)},l.b("utils.compareArrays",l.a.Ja),l.a.$a=function(t,i,u,f,e){function rt(n,t){o=d[t],nt!==t&&(it[n]=o),o.na(nt++),k(o.M),g.push(o),p.push(o)}function v(n,t){if(n)for(var i=0,r=t.length;i<r;i++)t[i]&&l.a.o(t[i].M,function(r){n(r,i,t[i].U)})}var s,a,ut;i=i||[],f=f||{};var a=l.a.f.get(t,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===r,d=l.a.f.get(t,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],y=l.a.V(d,function(n){return n.U}),h=l.a.Ja(y,i),g=[],c=0,nt=0,tt=[],p=[];i=[];for(var it=[],y=[],o,s=0,w,b;w=h[s];s++)switch(b=w.moved,w.status){case"deleted":b===r&&(o=d[c],o.j&&o.j.B(),tt.push.apply(tt,k(o.M)),f.beforeRemove&&(i[s]=o,p.push(o))),c++;break;case"retained":rt(s,c++);break;case"added":b!==r?rt(s,b):(o={U:w.value,na:l.m(nt++)},g.push(o),p.push(o),a||(y[s]=o))}for(v(f.beforeMove,it),l.a.o(tt,f.beforeRemove?l.A:l.removeNode),s=0,a=l.e.firstChild(t);o=p[s];s++){for(o.M||l.a.extend(o,gt(t,u,o.U,e,o.na)),c=0;h=o.M[c];a=h.nextSibling,ut=h,c++)h!==a&&l.e.Pa(t,h,ut);!o.Ab&&e&&(e(o.U,o.M,o.na),o.Ab=n)}v(f.beforeRemove,i),v(f.afterMove,it),v(f.afterAdd,y),l.a.f.set(t,"setDomNodeChildrenFromArrayMapping_lastMappingResult",g)},l.b("utils.setDomNodeChildrenFromArrayMapping",l.a.$a),l.C=function(){this.allowTemplateRewriting=i},l.C.prototype=new l.v,l.C.prototype.renderTemplateSource=function(i){var r=!(9>l.a.Z)&&i.nodes?i.nodes():t;return r?l.a.L(r.cloneNode(n).childNodes):(i=i.text(),l.a.ta(i))},l.C.oa=new l.C,l.wa(l.C.oa),l.b("nativeTemplateEngine",l.C),l.qa=function(){var n=this.Db=function(){if("undefined"==typeof f||!f.tmpl)return 0;try{if(0<=f.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(n){}return 1}();this.renderTemplateSource=function(i,r,o){o=o||{},2>n&&u(Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later."));var s=i.data("precompiled");return s||(s=i.text()||"",s=f.template(t,"{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}"),i.data("precompiled",s)),i=[r.$data],r=f.extend({koBindingContext:r},o.templateOptions),r=f.tmpl(s,i,r),r.appendTo(e.createElement("div")),f.fragments={},r},this.createJavaScriptEvaluatorBlock=function(n){return"{{ko_code ((function() { return "+n+" })()) }}"},this.addTemplate=function(n,t){e.write("<script type='text/html' id='"+n+"'>"+t+"<\/script>")},0<n&&(f.tmpl.tag.ko_code={open:"__.push($1 || '');"},f.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},l.qa.prototype=new l.v,h=new l.qa,0<h.Db&&l.wa(h),l.b("jqueryTmplTemplateEngine",l.qa)}var n=!0,t=null,i=!1,o=window,e=document,c=navigator,f=window.jQuery,r=void 0;"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?h(module.exports||exports):"function"==typeof define&&define.amd?define(["exports"],h):h(o.ko={}),n}(),function(n,t){(function(i){typeof define=="function"&&define.amd?define(["jquery"],i):n.sammy=t.Sammy=i(n)})(function(n){var i,w="([^/]+)",h=/:([\w\d]+)/g,l=/\?([^#]*)?$/,u=function(n){return Array.prototype.slice.call(n)},r=function(n){return Object.prototype.toString.call(n)==="[object Function]"},f=function(n){return Object.prototype.toString.call(n)==="[object Array]"},a=function(n){return Object.prototype.toString.call(n)==="[object RegExp]"},o=function(n){return decodeURIComponent((n||"").replace(/\+/g," "))},v=encodeURIComponent,y=function(n){return String(n).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e=function(n){return function(){return this.route.apply(this,[n].concat(Array.prototype.slice.call(arguments)))}},c={},s=!!t.history&&!!history.pushState,p=[];return i=function(){var t=u(arguments),f,e;return(i.apps=i.apps||{},t.length===0||t[0]&&r(t[0]))?i.apply(i,["body"].concat(t)):typeof(e=t.shift())=="string"?(f=i.apps[e]||new i.Application,f.element_selector=e,t.length>0&&n.each(t,function(n,t){f.use(t)}),f.element_selector!=e&&delete i.apps[e],i.apps[f.element_selector]=f,f):void 0},i.VERSION="0.7.4",i.addLogger=function(n){p.push(n)},i.log=function(){var t=u(arguments);t.unshift("["+Date()+"]"),n.each(p,function(n,r){r.apply(i,t)})},typeof t.console!="undefined"?r(t.console.log.apply)?i.addLogger(function(){t.console.log.apply(t.console,arguments)}):i.addLogger(function(){t.console.log(arguments)}):typeof console!="undefined"&&i.addLogger(function(){console.log.apply(console,arguments)}),n.extend(i,{makeArray:u,isFunction:r,isArray:f}),i.Object=function(t){return n.extend(this,t||{})},n.extend(i.Object.prototype,{escapeHTML:y,h:y,toHash:function(){var t={};return n.each(this,function(n,i){r(i)||(t[n]=i)}),t},toHTML:function(){var t="";return n.each(this,function(n,i){r(i)||(t+="<strong>"+n+"<\/strong> "+i+"<br />")}),t},keys:function(n){var i=[],t;for(t in this)r(this[t])&&n||i.push(t);return i},has:function(t){return this[t]&&n.trim(this[t].toString())!==""},join:function(){var n=u(arguments),t=n.shift();return n.join(t)},log:function(){i.log.apply(i,arguments)},toString:function(t){var i=[];return n.each(this,function(n,u){(!r(u)||t)&&i.push('"'+n+'": '+u.toString())}),"Sammy.Object: {"+i.join(",")+"}"}}),i.targetIsThisWindow=function(i){var r=n(i.target).attr("target");return!r||r===t.name||r==="_self"?!0:r==="_blank"?!1:r==="top"&&t===t.top?!0:!1},i.DefaultLocationProxy=function(n,t){this.app=n,this.is_native=!1,this.has_history=s,this._startPolling(t)},i.DefaultLocationProxy.fullPath=function(n){var t=n.toString().match(/^[^#]*(#.+)$/),i=t?t[1]:"";return[n.pathname,n.search,i].join("")},n.extend(i.DefaultLocationProxy.prototype,{bind:function(){var f=this,u=this.app,r=i.DefaultLocationProxy;n(t).bind("hashchange."+this.app.eventNamespace(),function(n,i){f.is_native!==!1||i||(f.is_native=!0,t.clearInterval(r._interval),r._interval=null),u.trigger("location-changed")}),s&&!u.disable_push_state&&(n(t).bind("popstate."+this.app.eventNamespace(),function(){u.trigger("location-changed")}),n(document).delegate("a","click.history-"+this.app.eventNamespace(),function(n){if(!n.isDefaultPrevented()&&!n.metaKey&&!n.ctrlKey){var e=r.fullPath(this);if(this.hostname==t.location.hostname&&u.lookupRoute("get",e)&&i.targetIsThisWindow(n))return n.preventDefault(),f.setLocation(e),!1}})),r._bindings||(r._bindings=0),r._bindings++},unbind:function(){n(t).unbind("hashchange."+this.app.eventNamespace()),n(t).unbind("popstate."+this.app.eventNamespace()),n(document).undelegate("a","click.history-"+this.app.eventNamespace()),i.DefaultLocationProxy._bindings--,i.DefaultLocationProxy._bindings<=0&&(t.clearInterval(i.DefaultLocationProxy._interval),i.DefaultLocationProxy._interval=null)},getLocation:function(){return i.DefaultLocationProxy.fullPath(t.location)},setLocation:function(n){if(/^([^#\/]|$)/.test(n)&&(n=s&&!this.app.disable_push_state?"/"+n:"#!/"+n),n!=this.getLocation()){if(!(s&&!this.app.disable_push_state&&/^\//.test(n)))return t.location=n;history.pushState({path:n},t.title,n),this.app.trigger("location-changed")}},_startPolling:function(r){var f=this,u;i.DefaultLocationProxy._interval||(r||(r=10),u=function(){var r=f.getLocation();(typeof i.DefaultLocationProxy._last_location=="undefined"||r!=i.DefaultLocationProxy._last_location)&&t.setTimeout(function(){n(t).trigger("hashchange",[!0])},0),i.DefaultLocationProxy._last_location=r},u(),i.DefaultLocationProxy._interval=t.setInterval(u,r))}}),i.Application=function(n){var t=this;this.routes={},this.listeners=new i.Object({}),this.arounds=[],this.befores=[],this.namespace=(new Date).getTime()+"-"+parseInt(Math.random()*1e3,10),this.context_prototype=function(){i.EventContext.apply(this,arguments)},this.context_prototype.prototype=new i.EventContext,r(n)&&n.apply(this,[this]),this._location_proxy||this.setLocationProxy(new i.DefaultLocationProxy(this,this.run_interval_every)),this.debug&&this.bindToAllEvents(function(n,i){t.log(t.toString(),n.cleaned_type,i||{})})},i.Application.prototype=n.extend({},i.Object.prototype,{ROUTE_VERBS:["get","post","put","delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:!1,element_selector:"body",debug:!1,raise_errors:!1,run_interval_every:50,disable_push_state:!1,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(t){return t?n(this.element_selector).find(t):n(this.element_selector)},use:function(){var t=u(arguments),n=t.shift(),f=n||"";try{t.unshift(this),typeof n=="string"&&(f="Sammy."+n,n=i[n]),n.apply(this,t)}catch(e){typeof n=="undefined"?this.error("Plugin Error: called use() but plugin ("+f.toString()+") is not defined",e):r(n)?this.error("Plugin Error",e):this.error("Plugin Error: called use() but '"+f.toString()+"' is not a function",e)}return this},setLocationProxy:function(n){var t=this._location_proxy;this._location_proxy=n,this.isRunning()&&(t&&t.unbind(),this._location_proxy.bind())},log:function(){i.log.apply(i,Array.prototype.concat.apply([this.element_selector],arguments))},route:function(t,i){var f=this,o=[],e,s,u=Array.prototype.slice.call(arguments,2);if(u.length===0&&r(i)&&(i=t,u=[i],t="any"),t=t.toLowerCase(),i.constructor==String){for(h.lastIndex=0;(s=h.exec(i))!==null;)o.push(s[1]);i=new RegExp(i.replace(h,w)+"$")}return n.each(u,function(n,t){typeof t=="string"&&(u[n]=f[t])}),e=function(n){var t={verb:n,path:i,callback:u,param_names:o};f.routes[n]=f.routes[n]||[],f.routes[n].push(t)},t==="any"?n.each(this.ROUTE_VERBS,function(n,t){e(t)}):e(t),this},get:e("get"),post:e("post"),put:e("put"),del:e("delete"),any:e("any"),mapRoutes:function(t){var i=this;return n.each(t,function(n,t){i.route.apply(i,t)}),this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(n,t,i){var r=this,u;return typeof i=="undefined"&&(i=t),u=function(){var t,u,n;t=arguments[0],n=arguments[1],n&&n.context?(u=n.context,delete n.context):u=new r.context_prototype(r,"bind",t.type,n,t.target),t.cleaned_type=t.type.replace(r.eventNamespace(),""),i.apply(u,[t,n])},this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(u),this.isRunning()&&this._listen(n,u),this},trigger:function(n,t){return this.$element().trigger([n,this.eventNamespace()].join("."),[t]),this},refresh:function(){return this.last_location=null,this.trigger("location-changed"),this},before:function(n,t){return r(n)&&(t=n,n={}),this.befores.push([n,t]),this},after:function(n){return this.bind("event-context-after",n)},around:function(n){return this.arounds.push(n),this},onComplete:function(n){return this._onComplete=n,this},isRunning:function(){return this._running},helpers:function(t){return n.extend(this.context_prototype.prototype,t),this},helper:function(n,t){return this.context_prototype.prototype[n]=t,this},run:function(r){if(this.isRunning())return!1;var u=this;return n.each(this.listeners.toHash(),function(t,i){n.each(i,function(n,i){u._listen(t,i)})}),this.trigger("run",{start_url:r}),this._running=!0,this.last_location=null,!/\#(.+)/.test(this.getLocation())&&typeof r!="undefined"&&this.setLocation(r),this._checkLocation(),this._location_proxy.bind(),this.bind("location-changed",function(){u._checkLocation()}),this.bind("submit",function(t){if(!i.targetIsThisWindow(t))return!0;var r=u._checkFormSubmission(n(t.target).closest("form"));return r===!1?t.preventDefault():!1}),n(t).bind("unload",function(){u.unload()}),this.trigger("changed")},unload:function(){if(!this.isRunning())return!1;var t=this;return this.trigger("unload"),this._location_proxy.unbind(),this.$element().unbind("submit").removeClass(t.eventNamespace()),n.each(this.listeners.toHash(),function(i,r){n.each(r,function(n,r){t._unlisten(i,r)})}),this._running=!1,this},destroy:function(){return this.unload(),delete i.apps[this.element_selector],this},bindToAllEvents:function(t){var i=this;return n.each(this.APP_EVENTS,function(n,r){i.bind(r,t)}),n.each(this.listeners.keys(!0),function(r,u){n.inArray(u,i.APP_EVENTS)==-1&&i.bind(u,t)}),this},routablePath:function(n){return n.replace(l,"")},lookupRoute:function(n,t){var e=this,u=!1,i=0,f,r;if(typeof this.routes[n]!="undefined")for(f=this.routes[n].length;i<f;i++)if(r=this.routes[n][i],e.routablePath(t).match(r.path)){u=r;break}return u},runRoute:function(t,i,r,u){var s=this,f=this.lookupRoute(t,i),e,c,y,l,a,h,v,p;if(this.debug&&this.log("runRoute",[t,i].join(" ")),this.trigger("run-route",{verb:t,path:i,params:r}),typeof r=="undefined"&&(r={}),n.extend(r,this._parseQueryString(i)),f){this.trigger("route-found",{route:f}),(v=f.path.exec(this.routablePath(i)))!==null&&(v.shift(),n.each(v,function(n,t){f.param_names[n]?r[f.param_names[n]]=o(t):(r.splat||(r.splat=[]),r.splat.push(o(t)))})),e=new this.context_prototype(this,t,i,r,u),y=this.arounds.slice(0),l=this.befores.slice(0),h=[e],r.splat&&(h=h.concat(r.splat)),c=function(){for(var n,t,i;l.length>0;)if(a=l.shift(),s.contextMatchesOptions(e,a[0])&&(n=a[1].apply(e,[e]),n===!1))return!1;return s.last_route=f,e.trigger("event-context-before",{context:e}),typeof f.callback=="function"&&(f.callback=[f.callback]),f.callback&&f.callback.length&&(t=-1,i=function(){t++,f.callback[t]?n=f.callback[t].apply(e,h):s._onComplete&&typeof(s._onComplete==="function")&&s._onComplete(e)},h.push(i),i()),e.trigger("event-context-after",{context:e}),n},n.each(y.reverse(),function(n,t){var i=c;c=function(){return t.apply(e,[i])}});try{p=c()}catch(w){this.error(["500 Error",t,i].join(" "),w)}return p}return this.notFound(t,i)},contextMatchesOptions:function(t,i,r){var u=i,h,e,l,v,c,o,s;if((typeof u=="string"||a(u))&&(u={path:u}),typeof r=="undefined"&&(r=!0),n.isEmptyObject(u))return!0;if(f(u.path)){for(h=[],e=0,v=u.path.length;e<v;e+=1)l=n.extend({},u,{path:u.path[e]}),h.push(this.contextMatchesOptions(t,l));return c=n.inArray(!0,h)>-1?!0:!1,r?c:!c}return u.only?this.contextMatchesOptions(t,u.only,!0):u.except?this.contextMatchesOptions(t,u.except,!1):(o=!0,s=!0,u.path&&(a(u.path)||(u.path=new RegExp(u.path.toString()+"$")),o=u.path.test(t.path)),u.verb&&(s=typeof u.verb=="string"?u.verb===t.verb:u.verb.indexOf(t.verb)>-1),r?s&&o:!s||!o)},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(n){return this._location_proxy.setLocation(n)},swap:function(n,t){var i=this.$element().html(n);return r(t)&&t(n),i},templateCache:function(n,t){return typeof t!="undefined"?c[n]=t:c[n]},clearTemplateCache:function(){return c={}},notFound:function(n,t){var i=this.error(["404 Not Found",n,t].join(" "));return n==="get"?i:!0},error:function(n,t){if(t||(t=new Error),t.message=[n,t.message].join(" "),this.trigger("error",{message:t.message,error:t}),this.raise_errors)throw t;this.log(t.message,t)},_checkLocation:function(){var n,t;return n=this.getLocation(),this.last_location&&this.last_location[0]=="get"&&this.last_location[1]==n||(this.last_location=["get",n],t=this.runRoute("get",n)),t},_getFormVerb:function(t){var u=n(t),i,r;return r=u.find('input[name="_method"]'),r.length>0&&(i=r.val()),i||(i=u[0].getAttribute("method")),i&&i!==""||(i="get"),n.trim(i.toString().toLowerCase())},_checkFormSubmission:function(t){var i,r,f,u,e;return this.trigger("check-form-submission",{form:t}),i=n(t),r=i.attr("action")||"",f=this._getFormVerb(i),this.debug&&this.log("_checkFormSubmission",i,r,f),f==="get"?(u=this._serializeFormParams(i),u!==""&&(r+="?"+u),this.setLocation(r),e=!1):(u=n.extend({},this._parseFormParams(i)),e=this.runRoute(f,r,u,t.get(0))),typeof e=="undefined"?!1:e},_serializeFormParams:function(n){var r="",t=n.serializeArray(),i;if(t.length>0)for(r=this._encodeFormPair(t[0].name,t[0].value),i=1;i<t.length;i++)r=r+"&"+this._encodeFormPair(t[i].name,t[i].value);return r},_encodeFormPair:function(n,t){return v(n)+"="+v(t)},_parseFormParams:function(n){for(var i={},r=n.serializeArray(),t=0;t<r.length;t++)i=this._parseParamPair(i,r[t].name,r[t].value);return i},_parseQueryString:function(n){var r={},t,u,f,i;if(t=n.match(l),t&&t[1])for(u=t[1].split("&"),i=0;i<u.length;i++)f=u[i].split("="),r=this._parseParamPair(r,o(f[0]),o(f[1]||""));return r},_parseParamPair:function(n,t,i){return typeof n[t]!="undefined"?f(n[t])?n[t].push(i):n[t]=[n[t],i]:n[t]=i,n},_listen:function(n,t){return this.$element().bind([n,this.eventNamespace()].join("."),t)},_unlisten:function(n,t){return this.$element().unbind([n,this.eventNamespace()].join("."),t)}}),i.RenderContext=function(n){this.event_context=n,this.callbacks=[],this.previous_content=null,this.content=null,this.next_engine=!1,this.waiting=!1},i.RenderContext.prototype=n.extend({},i.Object.prototype,{then:function(n){var u,i;if(!r(n)){if(!(typeof n=="string"&&n in this.event_context))return this;u=this.event_context[n],n=function(n){return u.apply(this.event_context,[n])}}return i=this,this.waiting?this.callbacks.push(n):(this.wait(),t.setTimeout(function(){var t=n.apply(i,[i.content,i.previous_content]);t!==!1&&i.next(t)},0)),this},wait:function(){this.waiting=!0},next:function(n){this.waiting=!1,typeof n!="undefined"&&(this.previous_content=this.content,this.content=n),this.callbacks.length>0&&this.then(this.callbacks.shift())},load:function(t,i,u){var f=this;return this.then(function(){var e,s,o;return(r(i)?(u=i,i={}):i=n.extend({},i),u&&this.then(u),typeof t=="string")?(o=t.match(/\.json$/)||i.json,e=o?i.cache===!0:i.cache!==!1,f.next_engine=f.event_context.engineFor(t),delete i.cache,delete i.json,i.engine&&(f.next_engine=i.engine,delete i.engine),e&&(s=this.event_context.app.templateCache(t))?s:(this.wait(),n.ajax(n.extend({url:t,data:{},dataType:o?"json":"text",type:"get",success:function(n){e&&f.event_context.app.templateCache(t,n),f.next(n)}},i)),!1)):t.nodeType?t.innerHTML:t.selector?(f.next_engine=t.attr("data-engine"),i.clone===!1?t.remove()[0].innerHTML.toString():t[0].innerHTML.toString()):void 0})},loadPartials:function(n){var t;if(n){this.partials=this.partials||{};for(t in n)(function(t,i){t.load(n[i]).then(function(n){this.partials[i]=n})})(this,t)}return this},render:function(n,t,i,u){return r(n)&&!t?this.then(n):(r(t)?(u=i,i=t,t=null):i&&!r(i)&&(u=i,i=null),this.loadPartials(u).load(n).interpolate(t,n).then(i))},partial:function(n,t,i,u){return r(i)?this.render(n,t,u).swap(i):r(t)?this.render(n,{},i).swap(t):this.render(n,t,i).swap()},send:function(){var t=this,n=u(arguments),i=n.shift();return f(n[0])&&(n=n[0]),this.then(function(){return n.push(function(n){t.next(n)}),t.wait(),i.apply(i,n),!1})},collect:function(t,i,u){var e=this,f=function(){r(t)&&(i=t,t=this.content);var u=[],f=!1;return n.each(t,function(n,t){var r=i.apply(e,[n,t]);return r.jquery&&r.length==1&&(r=r[0],f=!0),u.push(r),r}),f?u:u.join("")};return u?f():this.then(f)},renderEach:function(t,i,r,u){return f(i)&&(u=r,r=i,i=null),this.load(t).then(function(e){var o=this;if(r||(r=f(this.previous_content)?this.previous_content:[]),!u)return this.collect(r,function(n,r){var u={},f=this.next_engine||t;return i?u[i]=r:u=r,this.event_context.interpolate(e,u,f)},!0);n.each(r,function(n,r){var f={},s=this.next_engine||t;i?f[i]=r:f=r,u(r,o.event_context.interpolate(e,f,s))})})},interpolate:function(n,t,i){var r=this;return this.then(function(u,f){!n&&f&&(n=f),this.next_engine&&(t=this.next_engine,this.next_engine=!1);var e=r.event_context.interpolate(u,n,t,this.partials);return i?f+e:e})},swap:function(n){return this.then(function(t){return this.event_context.swap(t,n),t}).trigger("changed",{})},appendTo:function(t){return this.then(function(i){n(t).append(i)}).trigger("changed",{})},prependTo:function(t){return this.then(function(i){n(t).prepend(i)}).trigger("changed",{})},replace:function(t){return this.then(function(i){n(t).html(i)}).trigger("changed",{})},trigger:function(n,t){return this.then(function(i){return typeof t=="undefined"&&(t={content:i}),this.event_context.trigger(n,t),i})}}),i.EventContext=function(n,t,r,u,f){this.app=n,this.verb=t,this.path=r,this.params=new i.Object(u),this.target=f},i.EventContext.prototype=n.extend({},i.Object.prototype,{$element:function(){return this.app.$element(u(arguments).shift())},engineFor:function(n){var t=this,i;return r(n)?n:(n=(n||t.app.template_engine).toString(),(i=n.match(/\.([^\.\?\#]+)$/))&&(n=i[1]),n&&r(t[n])?t[n]:t.app.template_engine?this.engineFor(t.app.template_engine):function(n){return n})},interpolate:function(n,t,i,r){return this.engineFor(i).apply(this,[n,t,r])},render:function(n,t,r,u){return new i.RenderContext(this).render(n,t,r,u)},renderEach:function(n,t,r,u){return new i.RenderContext(this).renderEach(n,t,r,u)},load:function(n,t,r){return new i.RenderContext(this).load(n,t,r)},loadPartials:function(n){return new i.RenderContext(this).loadPartials(n)},partial:function(n,t,r,u){return new i.RenderContext(this).partial(n,t,r,u)},send:function(){var n=new i.RenderContext(this);return n.send.apply(n,arguments)},redirect:function(){var t,i=u(arguments),l=this.app.getLocation(),o=i.length,e;if(o>1){for(var r=0,s=[],h=[],f={},c=!1;r<o;r++)typeof i[r]=="string"?s.push(i[r]):(n.extend(f,i[r]),c=!0);if(t=s.join("/"),c){for(e in f)h.push(this.app._encodeFormPair(e,f[e]));t+="?"+h.join("&")}}else t=i[0];this.trigger("redirect",{to:t}),this.app.last_location=[this.verb,this.path],this.app.setLocation(t),new RegExp(t).test(l)&&this.app.trigger("location-changed")},trigger:function(n,t){return typeof t=="undefined"&&(t={}),t.context||(t.context=this),this.app.trigger(n,t)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(n,t){return this.app.swap(n,t)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(t){return n.parseJSON(t)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}}),i})}(jQuery,window),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(n){"use strict";switch(n.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(n.disabled)return!0;break;case"input":if(this.deviceIsIOS&&n.type==="file"||n.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(n.className)},FastClick.prototype.needsFocus=function(n){"use strict";switch(n.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(n.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!n.disabled&&!n.readOnly;default:return/\bneedsfocus\b/.test(n.className)}},FastClick.prototype.sendClick=function(n,t){"use strict";var r,i;document.activeElement&&document.activeElement!==n&&document.activeElement.blur(),i=t.changedTouches[0],r=document.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),r.forwardedTouchEvent=!0,n.dispatchEvent(r)},FastClick.prototype.focus=function(n){"use strict";var t;this.deviceIsIOS&&n.setSelectionRange?(t=n.value.length,n.setSelectionRange(t,t)):n.focus()},FastClick.prototype.updateScrollParent=function(n){"use strict";var i,t;if(i=n.fastClickScrollParent,!i||!i.contains(n)){t=n;do{if(t.scrollHeight>t.offsetHeight){i=t,n.fastClickScrollParent=t;break}t=t.parentElement}while(t)}i&&(i.fastClickLastScrollTop=i.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(n){"use strict";return n.nodeType===Node.TEXT_NODE?n.parentNode:n},FastClick.prototype.onTouchStart=function(n){"use strict";var i,t,r;if(n.targetTouches.length>1)return!0;if(i=this.getTargetElementFromEventTarget(n.target),t=n.targetTouches[0],this.deviceIsIOS){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!this.deviceIsIOS4){if(t.identifier===this.lastTouchIdentifier)return n.preventDefault(),!1;this.lastTouchIdentifier=t.identifier,this.updateScrollParent(i)}}return this.trackingClick=!0,this.trackingClickStart=n.timeStamp,this.targetElement=i,this.touchStartX=t.pageX,this.touchStartY=t.pageY,n.timeStamp-this.lastClickTime<200&&n.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(n){"use strict";var t=n.changedTouches[0];return Math.abs(t.pageX-this.touchStartX)>10||Math.abs(t.pageY-this.touchStartY)>10?!0:!1},FastClick.prototype.findControl=function(n){"use strict";return n.control!==undefined?n.control:n.htmlFor?document.getElementById(n.htmlFor):n.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(n){"use strict";var u,e,i,r,f,t=this.targetElement;if(this.touchHasMoved(n)&&(this.trackingClick=!1,this.targetElement=null),!this.trackingClick)return!0;if(n.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.lastClickTime=n.timeStamp,e=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(f=n.changedTouches[0],t=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)),i=t.tagName.toLowerCase(),i==="label"){if(u=this.findControl(t),u){if(this.focus(t),this.deviceIsAndroid)return!1;t=u}}else if(this.needsFocus(t))return n.timeStamp-e>100||this.deviceIsIOS&&window.top!==window&&i==="input"?(this.targetElement=null,!1):(this.focus(t),this.deviceIsIOS4&&i==="select"||(this.targetElement=null,n.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(r=t.fastClickScrollParent,r&&r.fastClickLastScrollTop!==r.scrollTop)?!0:(this.needsClick(t)||(n.preventDefault(),this.sendClick(t,n)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(n){"use strict";return this.targetElement?n.forwardedTouchEvent?!0:n.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(n.stopImmediatePropagation?n.stopImmediatePropagation():n.propagationStopped=!0,n.stopPropagation(),n.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(n){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):n.target.type==="submit"&&n.detail===0?!0:(t=this.onMouse(n),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){"use strict";var n=this.layer;this.deviceIsAndroid&&(n.removeEventListener("mouseover",this.onMouse,!0),n.removeEventListener("mousedown",this.onMouse,!0),n.removeEventListener("mouseup",this.onMouse,!0)),n.removeEventListener("click",this.onClick,!0),n.removeEventListener("touchstart",this.onTouchStart,!1),n.removeEventListener("touchend",this.onTouchEnd,!1),n.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(n){"use strict";var t;if(typeof window.ontouchstart=="undefined")return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent))if(FastClick.prototype.deviceIsAndroid){if(t=document.querySelector("meta[name=viewport]"),t&&t.content.indexOf("user-scalable=no")!==-1)return!0}else return!0;return n.style.msTouchAction==="none"?!0:!1},FastClick.attach=function(n){"use strict";return new FastClick(n)},typeof define!="undefined"&&define.amd?define(function(){"use strict";return FastClick}):typeof module!="undefined"&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,function(n){function l(){try{return r in n&&n[r]}catch(t){return!1}}var t={},h=n.document,r="localStorage",u="__storejs__",i,f,e,c;if(t.disabled=!1,t.set=function(){},t.get=function(){},t.remove=function(){},t.clear=function(){},t.transact=function(n,i,r){var u=t.get(n);r==null&&(r=i,i=null),typeof u=="undefined"&&(u=i||{}),r(u),t.set(n,u)},t.getAll=function(){},t.serialize=function(n){return JSON.stringify(n)},t.deserialize=function(n){if(typeof n!="string")return undefined;try{return JSON.parse(n)}catch(t){return n||undefined}},l())i=n[r],t.set=function(n,r){return r===undefined?t.remove(n):(i.setItem(n,t.serialize(r)),r)},t.get=function(n){return t.deserialize(i.getItem(n))},t.remove=function(n){i.removeItem(n)},t.clear=function(){i.clear()},t.getAll=function(){for(var u={},r,n=0;n<i.length;++n)r=i.key(n),u[r]=t.get(r);return u};else if(h.documentElement.addBehavior){try{e=new ActiveXObject("htmlfile"),e.open(),e.write('<script>document.w=window<\/script><iframe src="/favicon.ico"><\/iframe>'),e.close(),f=e.w.frames[0].document,i=f.createElement("div")}catch(a){i=h.createElement("div"),f=h.body}function o(n){return function(){var u=Array.prototype.slice.call(arguments,0),e;return u.unshift(i),f.appendChild(i),i.addBehavior("#default#userData"),i.load(r),e=n.apply(t,u),f.removeChild(i),e}}c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function s(n){return n.replace(c,"___")}t.set=o(function(n,i,u){return(i=s(i),u===undefined)?t.remove(i):(n.setAttribute(i,t.serialize(u)),n.save(r),u)}),t.get=o(function(n,i){return i=s(i),t.deserialize(n.getAttribute(i))}),t.remove=o(function(n,t){t=s(t),n.removeAttribute(t),n.save(r)}),t.clear=o(function(n){var u=n.XMLDocument.documentElement.attributes,t,i;for(n.load(r),t=0;i=u[t];t++)n.removeAttribute(i.name);n.save(r)}),t.getAll=o(function(n){for(var e=n.XMLDocument.documentElement.attributes,u={},r,f,i=0;r=e[i];++i)f=s(r.name),u[r.name]=t.deserialize(n.getAttribute(f));return u})}try{t.set(u,u),t.get(u)!=u&&(t.disabled=!0),t.remove(u)}catch(a){t.disabled=!0}t.enabled=!t.disabled,typeof module!="undefined"&&module.exports?module.exports=t:typeof define=="function"&&define.amd?define(t):n.store=t}(this.window||global);
//@ sourceMappingURL=external.min.js.map