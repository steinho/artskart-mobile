function getNDTokenTimer(){window.clearTimeout(this.timeoutTokenID),this.timeoutTokenID=window.setTimeout(function(){getNDToken()},36e5)}function getNDToken(){var n,t=(new Date).getTime()-lastUpdatedNDToken;(t>36e5||isNaN(lastUpdatedNDToken))&&$.ajax({url:url+"GetNorgeDigitaltToken",timeout:1e4,dataType:"jsonp",contentType:"application/json; charset=utf-8"}).done(function(t){var r,i;n="http://gatekeeper1.geonorge.no/BaatGatekeeper/gk/gk.cache?gkt="+t.Token+"&",lastUpdatedNDToken=(new Date).getTime(),r=theMap.map.getLayersByName("StatKart Topografisk norgeskart")[0],r?r.setUrl(n):(i=new OpenLayers.Layer.WMS("StatKart Topografisk norgeskart",n,{layers:"topo2",format:"image/jpeg",projection:theMap.sm,srs:theMap.sm,numZoomLevels:20},{transitionEffect:"resize",isBaseLayer:!0}),theMap.map.addLayer(i),firstNdToken&&(i.isBaseLayer?theMap.map.setBaseLayer(i):i.setVisibility(!layer.getVisibility()),firstNdToken=!1)),getNDTokenTimer()}).fail(function(n,t){var i=theMap.map.getLayersByName("Topografisk norgeskart");i.length&&theMap.map.removeLayer(i),showError("Feil under henting av NorgeDigitaltToken: "+t)}),getNDTokenTimer()}function nullStillFilter(){$ddObsPrecision.prop("selectedIndex",2)}function loadFilterValues(){function n(n,t){function i(n){var t="";return t="<option value=' '>Velg en...<\/option>",$.each(n,function(i){t+='<option value="'+n[i].Key+'">'+n[i].Value+"<\/option>"}),t}t.empty().append(i(n))}function e(n,t){function i(n){var t="";return t="<option value=' '>Velg en...<\/option>",$.each(n,function(n,i){t+="<optgroup label= '"+i.Key+"'>",$.each(i.Value,function(n,i){t+='<option value="'+i.Key+'">'+i.Value+"<\/option>"}),t+="<\/optgroup>"}),t}t.empty().append(i(n))}var t,i,r,u,f;if(store.enabled)try{t=store.get("observationStatusValues"),t!==null&&t!="undefined"&&e(t,$ddStatus),i=store.get("taxongroupsValues"),i!==null&&i!="undefined"&&n(i,$ddTaxongroups),r=store.get("precisionValues"),r!==null&&r!="undefined"&&n(r,$ddObsPrecision),u=store.get("activityValues"),u!==null&&u!="undefined"&&n(u,$ddActivity),f=store.get("maxMarkersValue"),f!==null&&f!="undefined"&&$tbMaxMarkers.val(f)}catch(o){store.clear()}$.ajax({type:"GET",url:url+"GetObservationStatusValues/",dataType:"jsonp",timeout:2e4,contentType:"application/json; charset=utf-8",success:function(n){e(n,$ddStatus),store.enabled&&store.set("observationStatusValues",n)}}),$.ajax({type:"GET",url:url+"GetTaxongroupsValues/",dataType:"jsonp",timeout:2e4,contentType:"application/json; charset=utf-8",success:function(t){n(t,$ddTaxongroups),store.enabled&&store.set("taxongroupsValues",t)}}),$.ajax({type:"GET",url:url+"GetActivityTypeValues/",dataType:"jsonp",timeout:2e4,contentType:"application/json; charset=utf-8",success:function(t){n(t,$ddActivity),store.enabled&&store.set("activityValues",t)}}),$.ajax({type:"GET",url:url+"GetObservationPrecisionValues/",dataType:"jsonp",timeout:2e4,contentType:"application/json; charset=utf-8",success:function(t){n(t,$ddObsPrecision),store.enabled&&store.set("precisionValues",t)}})}function getLocationByTerm(){var n=url+"GetLocationByTerm?term=";n+=$query[0].value+"*",$search_resultsSted.empty(),locationJsonRequest!=null&&locationJsonRequest.abort(),locationJsonRequest=$.ajax({type:"GET",url:n,dataType:"jsonp",timeout:2e4,success:function(n){$.each(n,function(){var n=this,t="<b>"+n.MunicipalityName+"<\/b> ";n.CountyName&&(t+=", "+n.CountyName),t+=", "+n.Product,$('<li class="next">').hide().append($("<a />").append($("<b />",{text:n.Name})).append($("<p />",{html:t}))).appendTo($search_resultsSted).click(function(){var t=new OpenLayers.LonLat(n.Coordinate.Y,n.Coordinate.X);listenExtentChanged(!0),theMap.map.setCenter(t.transform(theMap.gg,theMap.sm),getZoomByType(n.ProductTypeLevel)),$modalBg.fadeOut(),$searchpage.hide()}).show()}),$.unblockUI()},error:function(n,t){t==="abort"||showError("Feil under søk: "+t)}})}function getTaxonByName(){var n=url+"GetTaxonNames?term=";n+=$tbTaxonName[0].value,$search_resultsTaxon.show(),locationJsonRequest!=null&&locationJsonRequest.abort(),locationJsonRequest=$.ajax({type:"GET",url:n,dataType:"jsonp",timeout:2e4,success:function(n){$search_resultsTaxon.empty(),$.each(n,function(){var n=this;$('<li class="next">').hide().append($("<a />").append($("<b />",{text:n.label}))).appendTo($search_resultsTaxon).click(function(){$tbTaxonNameVal.val(n.value),$tbTaxonName.val(n.label),$search_resultsTaxon.empty(),$search_resultsTaxon.hide()}).show()}),$.unblockUI()},error:function(n,t){t==="abort"||showError("Feil under søk: "+t)}})}function getZoomByType(n){switch(n){case 1:return 16;case 2:return 14;case 3:return 12;case 4:return 4;default:return 14}}function initLayerList(n){function i(n){var t=$('<li class="next'+(n.visibility?' checked">':'">')).append($("<b />").append($("<a />",{text:n.name}).click(function(){n.isBaseLayer?theMap.map.setBaseLayer(n):n.setVisibility(!n.getVisibility()),setBaseUrl(),$modalBg.fadeOut(),$layerspage.hide()})).append("<span />")).appendTo("#layerslist")}$layerslist.empty();var t=n.getLayersBy("isBaseLayer",!0);$.each(t,function(){i(this)})}function getObservationLocationsTimer(){mapJsonRequest!=null&&mapJsonRequest.abort(),$loading.hide(25),window.clearTimeout(getObservationLocationsTimerId),getObservationLocationsTimerId=window.setTimeout(function(){getObservationLocations()},700)}function getObservationLocations(){if(window.clearTimeout(getObservationLocationsTimerId),typeof theMap.map!="undefined"){mapJsonRequest!=null&&mapJsonRequest.abort(),$summary.empty(),$loading.show(15);var n=filter.getUrlParams(),t=$.param(n);mapJsonRequest=$.ajax({async:!0,global:!1,url:url+"GetObservationLocations?"+t,timeout:2e4,dataType:"jsonp",contentType:"application/json; charset=utf-8",success:function(data){var count,totalcount,json;$loading.hide(10),count=data.Count,totalcount=data.TotalCount,data.FeaturesIsAggregated?$summary.hide():$summary.html("<strong>"+count+" av "+totalcount+"<\/strong>").fadeIn(50),theMap.observationsLayer.destroyFeatures(),json=eval(data.Features),theMap.printMarkers(json)},fail:function(n,t){t==="abort"||(theMap.observationsLayer.destroyFeatures(),showError("Feil under henting av markører: "+t)),$loading.hide(50)}})}}function urlHandler(n,t,i,r){var f=sammy.context.params.centerPoint,e=sammy.context.params.zoom,u;return n||(n=sammy.context.params.idp1+"/"+sammy.context.params.idp2),u="#/map/"+f+"/"+e+"/",n&&(u+="Location/"+n+"/"),r?u+=r+"/":i?u+=i+"/":t&&(u+=t+"/"),u}function setBaseUrl(n){listenExtentChanged(!0);var t=theMap.map.getZoom(),i=parseFloat(theMap.map.center.lon).toFixed(0),r=parseFloat(theMap.map.center.lat).toFixed(0),u="#/map/"+i+","+r+"/"+t+"/";setHash(u,n)}function updateUrlFilter(){var n=filter.getActiveFilterValues();setBaseUrl(n)}function setHash(n,t,i){var r=getFilterHash(t);i||(n+=r),window.location.hash=n}function getFilterHash(n){var t="",i,u,r;return n?(t="filter/",i="",u=!0,$.each(n,function(n,t){u?(i+=t,u=!1):i+="&"+t}),t+=i+"/"):sammy.context&&sammy.context.params&&(r=sammy.context.params.filter,r&&r!="undefined"&&(t+="filter/"+r+"/")),t}function getObservationLocationData(n,t,i){vmModelTaxonGroups.clear(),vmModelTaxons.clear(),vmModelObservations.clear(),$btnBack.hide(),$btnBack.off("click"),$observationLocationList.hide(),$observationLocationTaxonGroups.hide(),$observationLocationTaxons.hide(),$observationDetails.hide(),$observationList.empty(),$observationListpage.is(":visible")||$observationListpage.show(),$modalBg.is(":visible")||$modalBg.show();var u=setTimeout(function(){$pagecontent.block({message:'Henter observasjoner... <br /><img style="height: 4px;width:288px;" src="img/loadingDots.gif" /> '})},800),r=filter.getUrlParams(),f={id:n,precision:r.precision,taxons:i||r.taxons,status:r.status,taxongroups:t||r.taxongroups,onlyImageObs:r.onlyImageObs,includeObsNoPrec:r.includeObsNoPrec,activityType:r.activityType,dateFrom:r.dateFrom,behaviors:r.behaviors},e=$.param(f);listJsonRequest!=null&&listJsonRequest.abort(),listJsonRequest=$.ajax({type:"GET",url:url+"GetGeoObservationList/?"+e,dataType:"jsonp",contentType:"application/json; charset=utf-8",timeout:2e4,success:function(r){r.MetaData?i?populateObservationList(r):t?populateTaxonList(r,t,!0):n&&populateTaxongroupList(r):(showWarning("Ingen observasjoner funnet."),setTimeout(hidePage,1500)),$pagecontent.unblock(),clearTimeout(u)},error:function(n,t){t==="abort"||($observationList.empty(),$.unblockUI(),clearTimeout(u),$pagecontent.unblock(),showError("Failed to load details: "+t),setTimeout(hidePage,1500))}})}function populateTaxongroupList(n){n.MetaData.TaxonGroups.length==1?populateTaxonList(n,n.MetaData.TaxonGroups[0].Id,!1):($listHeader.text("Artsgrupper"),$observationLocationTaxonGroups.show(),vmModelTaxonGroups.init(n.MetaData),$.each(n.MetaData.TaxonGroups,function(n,t){t.url=urlHandler("",t.Id),vmModelTaxonGroups.add(t)}))}function populateTaxonList(n,t,i){var r,u;$listHeader.text("Arter"),$observationLocationTaxons.show(),vmModelTaxons.clear(),$.each(n.MetaData.TaxonGroups,function(n,i){if(i.Id==t)return r=i,!1}),vmModelTaxons.init(n.MetaData),vmModelTaxons.taxonGroupName(r.Name),vmModelTaxons.taxonCount(n.MetaData.TaxonGroups.length),t?$.each(n.MetaData.Taxons,function(n,i){if(i.TaxonGroupId==t){var r=urlHandler("","",i.Id);i.url=r,vmModelTaxons.add(i)}}):$.each(n.MetaData.Taxons,function(n,t){vmModelTaxons.add(t)}),i&&n.MetaData.TaxonGroups.length>=1&&($btnBack.show(),u=urlHandler(),$btnBack.click(function(){setHash(u)}))}function populateObservationList(n){var t,i;$listHeader.text("Observasjoner"),$observationLocationList.show(),vmModelObservations.init(n.MetaData),$.each(n.ObservationList,function(n,t){var i=urlHandler("","","",t.Id.replace("observations","Observations"));t.url=i,vmModelObservations.add(t)}),$btnBack.show(),t="",n.MetaData.TaxonGroups.length>0&&(t=n.MetaData.TaxonGroups[0].Id),i=urlHandler("",t),$btnBack.click(function(){setHash(i)})}function getObservationDetail(n){var t=setTimeout(function(){$pagecontent.block({message:"Henter observasjon"})},500),i;$modalBg.show(),$observationListpage.show(),$observationLocationList.hide(),$observationLocationTaxonGroups.hide(),$observationLocationTaxons.hide(),$btnBack.off("click"),i=$.param({id:n}),detailsJsonRequest!=null&&detailsJsonRequest.abort(),detailsJsonRequest=$.ajax({type:"GET",url:url+"GetGeoObservationDetails/?"+i,dataType:"jsonp",contentType:"application/json; charset=utf-8",timeout:2e4,success:function(n){var i,r;vmlistDetailViewModel.init(n),$listHeader.text("Observasjon"),$observationDetails.show(),$detailImgContainer.empty(),$detailImgdialogContainer.empty(),vmModelObservations.hasData()?(i=vmModelObservations.taxonId(),$btnBack.click(function(){setHash(urlHandler("","",i))})):$btnBack.hide(),r=$detailImgContainer,n.ThumbImgUrls.length&&($.each(n.ThumbImgUrls,function(n,t){var i=t.Collector.split(",")[0];r.append('<a class="fancybox" title="© '+i+'" rel="group" href="'+t.ImageUrl+'"><img src="'+apiurl+"Image?id="+t.ThumbId+'" alt="" /><\/a>')}),$(".fancybox").fancybox({helpers:{title:{type:"over"}},padding:5,beforeShow:function(){$.fancybox.wrap.bind("contextmenu",function(){return!1})}})),$pagecontent.unblock(),$.unblockUI(),clearTimeout(t)},error:function(n,i){i==="abort"||($pagecontent.unblock(),$.unblockUI(),clearTimeout(t),showError("Failed to load details: "+i))}})}function filterModel(){function n(n,t,i,r,u,f,e,o){function s(n){return n==null||n==""?!1:!0}return s(n)||s(t)||s(i)||s(r)||s(e)||s(o)||u||!f?!0:!1}this.getActiveFilterValues=function(){var i=$.trim($ddObsPrecision.val()),r=$.trim($ddStatus.val()),u=$.trim($ddTaxongroups.val()),f=$.trim($ddActivity.val()),e=$.trim($tbTaxonNameVal.val()),o=$chkShowOnlyImageObs.is(":checked"),s=$rdoPresNotSet.is(":checked"),c=$tbMaxMarkers.val(),h=$tbdateFrom.datepicker({dateFormat:"dd-mm-yy"}).val().replace(/\//g,"."),l=n(i,r,u,e,o,s,f,h),t;return l?(t=[],e&&t.push("taxons[]="+/[^/]*$/.exec(e)[0]),u&&t.push("taxongroups[]="+/[^/]*$/.exec(u)[0]),r&&t.push("status[]="+/[^/]*$/.exec(r)[0]),i&&t.push("precision="+/[^/]*$/.exec(i)[0]),o&&t.push("onlyImageObs="+o),f&&t.push("behaviors[]="+/[^/]*$/.exec(f)[0]),s||t.push("includeObsNoPrec="+s),c!=150,h&&t.push("dateFrom="+h),t):""},this.getUrlParams=function(){function k(n){return n&&n.substr(-1)=="/"?n.substr(0,n.length-1):n}var o,s=[],h=[],c=[],w=[],l="",a=!0,v=!1,u="",y="",f,b,e,r,t,i;if(sammy.context.params&&(f=sammy.context.params.filter,f&&f!="undefined"))for(b=decodeURIComponent(f),e=b.split("&"),r=0;r<e.length;r++)e[r].length&&(o=e[r].split("="),t=k(o[0]),i=k(o[1]),t=="taxongroups[]"?$.each(i.split(","),function(n,t){t&&h.push("TaxonGroups/"+t)}):t=="taxons[]"?$.each(i.split(","),function(n,t){t&&c.push("Taxon/"+t)}):t=="status[]"?$.each(i.split(","),function(n,t){t&&s.push(t)}):t=="behaviors[]"?$.each(i.split(","),function(n,t){t&&w.push("behaviors/"+t)}):t=="includeObsNoPrec"?a=strToBool(i):t=="precision"?l=i:t=="onlyImageObs"?v=strToBool(i):t=="maxMarkers"?(p=i,$tbMaxMarkers.val(p)):t=="dateFrom"?(u=i,$tbdateFrom.val(u)):t=="activityType"&&(y=i));var d=theMap.map.getExtent(),g=theMap.map.getZoom(),p=$tbMaxMarkers.val(),nt={bounds:d.toBBOX(),maxMarkers:p,zoomLevel:g,taxons:c,behaviors:w,precision:l,includeObsNoPrec:a,status:s,taxongroups:h,onlyImageObs:v,activityType:y,dateFrom:u};return window.filterAktiv=n(l,s,h,c,v,a,y,u),window.filterAktiv?$btnImgFilter.attr("src","img/filterAktiv.png"):$btnImgFilter.attr("src","img/filter.png"),nt}}function strToBool(n){return n==null||n==""?!1:n=="true"||n=="True"?!0:!1}function showFilterPage(){$search_resultsTaxon.empty().hide(),$modalBg.show(),$filterpage.fadeIn()}function showLayersPage(){$modalBg.show(),$layerspage.fadeIn(),initLayerList(theMap.map)}function hidePage(){$page.is(":visible")&&$page.hide(),$fullPage.is(":visible")&&$fullPage.hide(),$pageSlideUp.is(":visible")&&$pageSlideUp.hide(),$splash.is(":visible")&&$splash.hide(),$splashImg.is(":visible")&&$splashImg.hide(),$modalBg.is(":visible")&&$modalBg.hide(),clearTimeout(unselectAllMarkers),setTimeout(unselectAllMarkers,500)}function unselectAllMarkers(){theMap.selectControl.unselectAll()}function showSplash(){hidePage(),$modalBg.show(),$splash.fadeIn()}function hideSplash(){$splash.hide(),$splashImg.hide(),$modalBg.hide()}function showPage(n){hidePage(),$modalBg.show(),$("#"+n).fadeIn()}function showSearchPage(){$modalBg.show(),$searchpage.fadeIn(),$locationClass.hide()}function showError(n){toastr.error(n,"Feil oppstod")}function showWarning(n){toastr.warning(n)}function zoomToExtent(n){listenExtentChanged(!1);var t=new OpenLayers.Bounds(n.split(","));theMap.map.zoomToExtent(t,!0),listenExtentChanged(!0)}function zoomToCurrent(n){listenExtentChanged(!1);var t=new OpenLayers.LonLat(n[0].replace(",","."),n[1].replace(",","."));theMap.map.setCenter(t.transform(theMap.gg,theMap.sm),14,!1,!1),listenExtentChanged(!0)}function zoomToCurrent(n,t){listenExtentChanged(!1);var i=t||14,r=new OpenLayers.LonLat(n.split(","));theMap.map.setCenter(r,i,!1,!1),listenExtentChanged(!0)}function listenExtentChanged(n){if($map.off("extentChanged"),$map.off("zoomEnd"),n){$map.on("extentChanged",function(){getObservationLocationsTimer(),setBaseUrl()});$map.on("zoomEnd",function(){getObservationLocations(),setBaseUrl()})}}function onResume(){resize(),getNDToken()}function setupImgHover(){$("#btnHvordanbrukeArtskart").hover(function(){$(this).attr("src","img/btnHvordanbrukeArtskart_over.png")},function(){$(this).attr("src","img/btnHvordanbrukeArtskart.png")}),$("#btnOmkildene").hover(function(){$(this).attr("src","img/btnOmkildene_over.png")},function(){$(this).attr("src","img/btnOmkildene.png")}),$("#btnOmArtsdatabanken").hover(function(){$(this).attr("src","img/btnOmArtsdatabanken_over.png")},function(){$(this).attr("src","img/btnOmArtsdatabanken.png")}),$(".btnX").hover(function(){$(this).attr("src","img/btnX_over.png")},function(){$(this).attr("src","img/btnX.png")}),$(".btnNullstil").hover(function(){$(this).attr("src","img/btnNullstil_over.png")},function(){$(this).attr("src","img/btnNullstil.png")}),$(".btnBack").hover(function(){$(this).attr("src","img/btnBack_over.png")},function(){$(this).attr("src","img/btnBack.png")}),$(".btnOk").hover(function(){$(this).attr("src","img/btnOK_over.png")},function(){$(this).attr("src","img/btnOK.png")}),$(".btnPil").hover(function(){$(this).attr("src","img/pil_over.png")},function(){$(this).attr("src","img/pil.png")}),$(".btnArk").hover(function(){$(this).attr("src","img/ark_over.png")},function(){$(this).attr("src","img/ark.png")}),$(".btnFilter").hover(function(){$(this).attr("src","img/filter_over.png")},function(){window.filterAktiv?$(this).attr("src","img/filterAktiv.png"):$(this).attr("src","img/filter.png")}),$(".btnPluss").hover(function(){$(this).attr("src","img/pluss_over.png")},function(){$(this).attr("src","img/pluss.png")}),$(".btnMinus").hover(function(){$(this).attr("src","img/minus_over.png")},function(){$(this).attr("src","img/minus.png")}),$(".btnLocate").hover(function(){$(this).attr("src","img/locate_over.png")},function(){$(this).attr("src","img/locate.png")}),$(".btnNorway").hover(function(){$(this).attr("src","img/norway_over.png")},function(){$(this).attr("src","img/norway.png")}),$(".btnSok").hover(function(){$(this).attr("src","img/sok_over.png")},function(){$(this).attr("src","img/sok.png")})}function resize(){theMap.fixContentHeight()}var listViewModel=function(){var n=this;this.list=ko.observableArray([]),this.listCount=ko.observable(0),this.totalCount=ko.observable(0),this.locality=ko.observable(""),this.taxonCount=ko.observable(0),this.taxonName=ko.observable(""),this.taxonId=ko.observable(""),this.taxonGroupCount=ko.observable(0),this.taxonGroupName=ko.observable(""),this.url=ko.observable(""),this.urlClick=function(){setHash(this.url)},this.init=function(t){n.clear(),n.listCount(t.ListCount),n.totalCount(t.TotalCount),n.locality(t.Locality),typeof t.Taxons!="undefined"&&n.taxonCount(t.Taxons.length),typeof t.TaxonGroups!="undefined"&&n.taxonGroupCount(t.TaxonGroups.length),n.taxonCount()==1&&(n.taxonName(t.Taxons[0].Name),n.taxonId(t.Taxons[0].Id)),n.taxonGroupCount()==1&&n.taxonGroupName(t.TaxonGroups[0].Name)},this.add=function(t){n.list.push(ko.observable(t))},this.hasData=function(){return n.list().length==0?!1:!0},this.clear=function(){n.list.removeAll(),n.listCount(0),n.totalCount(0),n.locality(""),n.taxonGroupCount(0),n.taxonGroupName(""),n.taxonCount(0),n.taxonName(""),n.taxonId("")}},detailViewModel=function(){var n=this;this.init=function(t){n.Id(t.Id),n.Institution(t.Institution),n.InstitutionUrl(t.InstitutionUrl),n.InstitutionLogoUrl(t.InstitutionLogoUrl),n.Collection(t.Collection),n.Sex(t.Sex),n.IdentifiedBy(t.IdentifiedBy),n.DatetimeIdentified(t.DatetimeIdentified),n.Habitat(t.Habitat),n.DatasetName(t.DatasetName),n.ObsUrl(t.ObsUrl),n.DetailUrl(t.DetailUrl),n.Name(t.Name),n.ScientificName(t.ScientificName),n.Author(t.Author),n.kingdom(t.kingdom),n.phylum(t.phylum),n.klass(t.klass),n.order(t.order),n.family(t.family),n.genus(t.genus),n.subgenus(t.subgenus),n.specificEpithet(t.specificEpithet),n.infraspecificEpithet(t.infraspecificEpithet),n.Status(t.Status),n.BasisOfRecord(t.BasisOfRecord),n.TypeObj(t.TypeObj),n.DeterminationDate(t.DeterminationDate),n.Collector(t.Collector),n.CollctedDate(t.CollctedDate),n.Count(t.Count),n.Notes(t.Notes),n.Country(t.Country),n.County(t.County),n.Municipality(t.Municipality),n.Locality(t.Locality),n.Longitude(t.Longitude),n.Latitude(t.Latitude),n.Precision(t.Precision),n.Info(t.Info),n.PropertyUrls.removeAll(),jQuery.each(t.PropertyUrls,function(t,i){n.PropertyUrls.push(new propertyUrl(i))})},this.Id=ko.observable(""),this.Institution=ko.observable(""),this.InstitutionUrl=ko.observable(""),this.InstitutionLogoUrl=ko.observable(""),this.Collection=ko.observable(""),this.Sex=ko.observable(""),this.IdentifiedBy=ko.observable(""),this.DatetimeIdentified=ko.observable(""),this.Habitat=ko.observable(""),this.DatasetName=ko.observable(""),this.ObsUrl=ko.observable(""),this.DetailUrl=ko.observable(""),this.Name=ko.observable(""),this.ScientificName=ko.observable(""),this.Author=ko.observable(""),this.kingdom=ko.observable(""),this.phylum=ko.observable(""),this.klass=ko.observable(""),this.order=ko.observable(""),this.family=ko.observable(""),this.genus=ko.observable(""),this.subgenus=ko.observable(""),this.specificEpithet=ko.observable(""),this.infraspecificEpithet=ko.observable(""),this.Status=ko.observable(""),this.BasisOfRecord=ko.observable(""),this.TypeObj=ko.observable(""),this.DeterminationDate=ko.observable(""),this.Collector=ko.observable(""),this.CollctedDate=ko.observable(""),this.Count=ko.observable(""),this.Notes=ko.observable(""),this.Country=ko.observable(""),this.County=ko.observable(""),this.Municipality=ko.observable(""),this.Locality=ko.observable(""),this.Longitude=ko.observable(""),this.Latitude=ko.observable(""),this.Precision=ko.observable(""),this.Info=ko.observable(""),this.PropertyUrls=ko.observableArray([])},propertyUrl=function(n){this.LinkTekst=ko.observable(n.LinkTekst),this.Url=ko.observable(n.Url)},mapJsonRequest,listJsonRequest,detailsJsonRequest,locationJsonRequest,lastUpdatedNDToken,theMap,vmModelTaxonGroups,vmModelTaxons,vmModelObservations,vmlistDetailViewModel,filter,$locationClass,$page,$fullPage,$pageSlideUp,$splash,$splashImg,$modalBg,$layerspage,$searchpage,$ddStatus,$ddTaxongroups,$ddObsPrecision,$ddActivity,$tbTaxonName,$tbdateFrom,$rdoPresNotSet,$tbTaxonNameVal,$tbMaxMarkers,$summary,$chkShowOnlyImageObs,$btnBack,$pagecontent,$observationList,$observationListpage,$observationLocationList,$observationLocationTaxonGroups,$observationLocationTaxons,$observationDetails,$detailImgContainer,$detailImgdialogContainer,$listHeader,$layerslist,$loading,$filterpage,$chkSplashNoShow,$search_resultsTaxon,$search_resultsSted,$btnImgFilter,$dialogLocation,$query,$filterTaxonGroup,$filterTaxon,$map,firstNdToken,getObservationLocationsTimerId,filterAktiv,sammy,ArtskartMap;$(document).ready(function(){function r(n){n==13&&(getTaxonByName(),event.preventDefault()),$tbTaxonName.val().length>1&&getTaxonByName()}var n,i,t;FastClick.attach(document.body),jQuery.ajaxSettings.traditional=!0,$.ajaxSetup({cache:!1}),$.support.cors=!0,$.blockUI.defaults.css={border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.5,color:"#fff"},$locationClass=$(".locationClass"),$page=$(".page"),$fullPage=$(".fullPage"),$pageSlideUp=$(".pageSlideUp"),$splash=$("#splash"),$splashImg=$("#splashImg"),$modalBg=$("#modalBg"),$layerspage=$("#layerspage"),$searchpage=$("#searchpage"),$ddStatus=$("#ddStatus"),$ddTaxongroups=$("#ddTaxongroups"),$ddObsPrecision=$("#ddObsPrecision"),$ddActivity=$("#ddActivity"),$tbTaxonName=$("#tbTaxonName"),$tbdateFrom=$("#tbdateFrom"),$rdoPresNotSet=$("#rdoPresNotSet"),$tbTaxonNameVal=$("#tbTaxonNameVal"),$tbMaxMarkers=$("#tbMaxMarkers"),$summary=$("#summary"),$chkShowOnlyImageObs=$("#chkShowOnlyImageObs"),$btnBack=$("#btnBack"),$pagecontent=$(".pagecontent"),$observationList=$("#observationList"),$observationListpage=$("#observationListpage"),$observationLocationList=$("#observationLocationList"),$observationLocationTaxonGroups=$("#observationLocationTaxonGroups"),$observationLocationTaxons=$("#observationLocationTaxons"),$observationDetails=$("#observationDetails"),$detailImgContainer=$("#detailImgContainer"),$detailImgdialogContainer=$("#detailImgdialogContainer"),$listHeader=$("#listHeader"),$layerslist=$("#layerslist"),$loading=$("#loading"),$filterpage=$("#filterpage"),$chkSplashNoShow=$("#chkSplashNoShow"),$search_resultsTaxon=$("#search_resultsTaxon"),$search_resultsSted=$("#search_resultsSted"),$btnImgFilter=$("#btnImgFilter"),$dialogLocation=$("#dialogLocation"),$query=$("#query"),$filterTaxonGroup=$("#filterTaxonGroup"),$filterTaxon=$("#filterTaxon"),theMap=new ArtskartMap("map"),$map=$("#map"),getNDToken(),document.addEventListener("resume",onResume,!1),document.body.style.overflow="hidden",hidePage(),store.enabled&&(n=store.get("hidesplash"),n!==null&&n!="undefined"&&(n&&setBaseUrl(),$chkSplashNoShow.prop("checked",n)),$chkSplashNoShow.change(function(){store.set("hidesplash",this.checked)})),$(window).bind("orientationchange resize ",function(){resize()}),setupImgHover(),listenExtentChanged(!1),resize(),getNDToken();$map.on("featureSelected",function(n,t){var r;if(t.attributes.IsAggregated){var u=theMap.map.getZoom()+3,i=t.geometry.getCentroid(),f=new OpenLayers.LonLat(i.x,i.y);theMap.map.setCenter(f,u)}else r=urlHandler(t.attributes.StringId),setHash(r)});$query.keyup(function(n){n.which==13&&(getLocationByTerm(),n.preventDefault()),$query.val().length>1&&getLocationByTerm()}),$tbTaxonName.keydown(function(n){clearTimeout(i);var t=n.which;i=setTimeout(r(t),300)}),t=!0,$("#btnMarkerStyle").bind("click",function(){t?(theMap.setMarkerStyle(),t=!1):(theMap.setImageStyle(),t=!0)}),$("#btnSplash").bind("click",function(){setHash("#/splash/")}),$(".btnBackToSplash").bind("click",function(){setHash("#/splash/")}),$("#btnOmArtsdatabanken").bind("click",function(){setHash("#/omartsdatabanken/")}),$("#btnOmkildene").bind("click",function(){setHash("#/omkildene/")}),$("#btnHvordanbrukeArtskart").bind("click",function(){setHash("#/hvordanbrukeartskart/")}),$("#plus").bind("click",function(){theMap.map.zoomIn()}),$("#minus").bind("click",function(){theMap.map.zoomOut()}),$("#btnLocation").bind("click",function(){var n=$("#btnLocation").offset();$dialogLocation.css({left:n.left,top:n.top-55}),$locationClass.show()}),$("#modalTransparentBg").bind("click",function(){$locationClass.hide()}),$("#btnLocate").bind("click",function(){theMap.geoLocate(),$locationClass.hide()}),$("#btnZoomNorway").bind("click",function(){var n=new OpenLayers.LonLat(1879518.6942113,10538745.275484);theMap.map.setCenter(n,3),$locationClass.hide()}),$("#btnSearch").bind("click",function(){setHash("#/searchpage/")}),$("#btnClearFilter").bind("click",function(){$ddStatus.prop("selectedIndex",0),$ddTaxongroups.prop("selectedIndex",0),$chkShowOnlyImageObs.prop("checked",!1),$tbTaxonName.val(""),$tbTaxonNameVal.val(""),$tbdateFrom.val(""),$ddActivity.prop("selectedIndex",0),$ddObsPrecision.prop("selectedIndex",2),$rdoPresNotSet.prop("checked",!0);setHash("#/filterpage/","",!0)}),$(".btnHideFilter").bind("click",function(){hidePage(),updateUrlFilter(),store.enabled&&store.set("maxMarkersValue",$tbMaxMarkers.val()),getObservationLocations()}),$(".skjul").bind("click",function(){hidePage(),setBaseUrl()}),$(".skjulSplash").bind("click",function(){n(),setBaseUrl(),getObservationLocations()}),$("#btnImgFilter").bind("click",function(){setHash("#/filterpage/")}),$("#btnLayerspage").bind("click",function(){setHash("#/layerspage/")}),$("#btnTaxonomy").bind("click",function(){var n=$("#divTaxonomy");n.is(":visible")?(n.hide(),$("#spanTaxonomy").html("<strong> + Taksonomi <\/strong>")):(n.show(),$("#spanTaxonomy").html("<strong> - Taksonomi <\/strong>"))}),loadFilterValues(),$tbdateFrom.datepicker({dateFormat:"dd-mm-yy"}),$("input[name=artFilter]").change(function(){$ddTaxongroups.prop("selectedIndex",0),$tbTaxonName.val(""),$tbTaxonNameVal.val("");var n=$("input[name=artFilter]:checked").val();n=="Taxon"?($filterTaxonGroup.hide(),$filterTaxon.show()):($filterTaxon.hide(),$filterTaxonGroup.show())}),vmModelTaxonGroups=new listViewModel,ko.applyBindings(vmModelTaxonGroups,document.getElementById("observationLocationTaxonGroups")),vmModelTaxons=new listViewModel,ko.applyBindings(vmModelTaxons,document.getElementById("observationLocationTaxons")),vmModelObservations=new listViewModel,ko.applyBindings(vmModelObservations,document.getElementById("observationLocationList")),vmlistDetailViewModel=new detailViewModel,ko.applyBindings(vmlistDetailViewModel,document.getElementById("observationDetails")),filter=new filterModel,$("a[target='_system']").click(function(n){n.preventDefault(),window.open($(this).attr("href"),"_system")})}),firstNdToken=!0,filterAktiv=!1,sammy=$.sammy("#debug",function(){function r(){listenExtentChanged(!1);var t="Observations/"+n.context.params.instCode+"/"+n.context.params.collCode+"/"+n.context.params.catNr;getObservationDetail(t)}function t(){var t,r,f;if(listenExtentChanged(!1),u){u=!1;return}t=n.context.params.idp1+"/"+n.context.params.idp2,i&&(i=!1,listenExtentChanged(!1),zoomToCurrent(t.split("/")),listenExtentChanged(!0)),r="",f="",n.context.params.taxongroup&&(r="TaxonGroups/"+n.context.params.taxongroup),n.context.params.taxon&&(f="Taxon/"+n.context.params.taxon),getObservationLocationData(t,r,f)}var i=!0,n=this,u=!1;return this.before(function(t){n.context=t}),this.before(/#\/map\/.*/,function(){if(i){i=!1;var n=this.params.centerPoint,t=this.params.zoom;zoomToCurrent(n,t),getObservationLocationsTimer()}listenExtentChanged(!0)}),this.get("#/map/:centerPoint/:zoom/",function(){hidePage()}),this.get("#/map/:centerPoint/:zoom/filter/:filter/",function(){hidePage()}),this.get("#/map/:centerPoint/:zoom/Location/:idp1/:idp2/",function(){t(this)}),this.get("#/map/:centerPoint/:zoom/Location/:idp1/:idp2/filter/:filter/",function(){t(this)}),this.get("#/map/:centerPoint/:zoom/Location/:idp1/:idp2/TaxonGroups/:taxongroup/",function(){t(this)}),this.get("#/map/:centerPoint/:zoom/Location/:idp1/:idp2/TaxonGroups/:taxongroup/filter/:filter/",function(){t(this)}),this.get("#/map/:centerPoint/:zoom/Location/:idp1/:idp2/TaxonGroups/:taxongroup/Taxon/:taxon/",function(){t(this)}),this.get("#/map/:centerPoint/:zoom/Location/:idp1/:idp2/TaxonGroups/:taxongroup/Taxon/:taxon/filter/:filter/",function(){t(this)}),this.get("#/map/:centerPoint/:zoom/Location/:idp1/:idp2/Taxon/:taxon/",function(){t(this)}),this.get("#/map/:centerPoint/:zoom/Location/:idp1/:idp2/Taxon/:taxon/filter/:filter/",function(){t(this)}),this.get("#/map/:centerPoint/:zoom/Location/:idp1/:idp2/Observations/:instCode/:collCode/:catNr/",function(){r()}),this.get("#/map/:centerPoint/:zoom/Location/:idp1/:idp2/Observations/:instCode/:collCode/:catNr/filter/:filter/",function(){r()}),this.get("#/map/:centerPoint/:zoom/Location/:idp1/:idp2/Taxon/:taxon/observations/:instCode/:collCode/:catNr/",function(){r()}),this.get("#/map/:centerPoint/:zoom/Location/:idp1/:idp2/Taxon/:taxon/observations/:instCode/:collCode/:catNr/filter/:filter/",function(){r()}),this.get("#/filterpage/",function(){listenExtentChanged(!1),showFilterPage()}),this.get("#/filterpage/filter/:filter/",function(){listenExtentChanged(!1),this.redirect("#/filterpage/")}),this.get("#/layerspage/",function(){listenExtentChanged(!1),showLayersPage()}),this.get("#/layerspage/filter/:filter/",function(){listenExtentChanged(!1),showLayersPage()}),this.get("#/searchpage/",function(){listenExtentChanged(!1),showSearchPage()}),this.get("#/searchpage/filter/:filter/",function(){listenExtentChanged(!1),showSearchPage()}),this.get("#/splash/",function(){listenExtentChanged(!1),showSplash()}),this.get("#/splash/filter/:filter/",function(){listenExtentChanged(!1),showSplash()}),this.get("#/hvordanbrukeartskart/",function(){listenExtentChanged(!1),showPage("divHvordanbrukeArtskart")}),this.get("#/hvordanbrukeartskart/filter/:filter/",function(){listenExtentChanged(!1),showPage("divHvordanbrukeArtskart")}),this.get("#/omkildene/",function(){listenExtentChanged(!1),showPage("divOmkildene")}),this.get("#/omkildene/filter/:filter/",function(){listenExtentChanged(!1),showPage("divOmkildene")}),this.get("#/omartsdatabanken/",function(){listenExtentChanged(!1),showPage("divOmArtsdatabanken")}),this.get("#/omartsdatabanken/filter/:filter/",function(){listenExtentChanged(!1),showPage("divOmArtsdatabanken")}),this.notFound=function(){console.log("route not found : "+this.last_location),setBaseUrl("")},this.redirectUrl=function(n){u=!0,sammy.trigger("redirect",{to:n}),sammy.last_location=["get",n],sammy.setLocation(n)},{context:n.context,app:n}}),$(function(){isFirst=!1,sammy.run("#/splash/")}),ArtskartMap=function(n){var t=this,i=n,u,f,r,e;this.fixContentHeight=function(){this.map.updateSize()},this.geoLocate=function(){this.geolocate.active?this.geolocate.getCurrentLocation():this.geolocate.activate()},this.printMarkers=function(n){if(n!=null){var t=new OpenLayers.Format.GeoJSON,i={type:"FeatureCollection",features:n},r=t.read(i);this.observationsLayer.addFeatures(r),$("#btnGetObs").attr("disabled",!1)}},this.apiKey="AqTGBsziZHIJYYxgivLBf0hVdrAk9mWO5cQcb8Yux8sW5M8c8opEC2lZqKR1ZZXf",this.extentChanged=function(){$("#"+i).trigger("extentChanged",i)},this.zoomEnd=function(){$("#"+i).trigger("zoomEnd",i)},this.featureSelected=function(n){$("#"+i).trigger("featureSelected",n)},this.sm=new OpenLayers.Projection("EPSG:900913"),this.gg=new OpenLayers.Projection("EPSG:4326"),u=function(){var n=new OpenLayers.Style({graphicWidth:23,graphicHeight:27,graphicYOffset:-24,labelOutlineColor:"white",labelOutlineWidth:1,fontSize:"10px",labelYOffset:5,labelXOffset:10,fontFamily:"Courier New, monospace",fontWeight:"bold"}),i=new OpenLayers.Rule({filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,property:"IsAggregated",value:!0}),symbolizer:{externalGraphic:"img/r_d_large_p.png",labelXOffset:12,labelYOffset:0,graphicWidth:25,graphicHeight:25,graphicYOffset:0}}),r=new OpenLayers.Rule({filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN,property:"LocationCount",lowerBoundary:0,upperBoundary:20}),symbolizer:{externalGraphic:"img/r_d_small.png"}}),u=new OpenLayers.Rule({filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN,property:"LocationCount",lowerBoundary:20,upperBoundary:100}),symbolizer:{externalGraphic:"img/r_d_medium.png"}}),f=new OpenLayers.Rule({filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN,property:"LocationCount",lowerBoundary:100,upperBoundary:9999}),symbolizer:{externalGraphic:"img/r_d_large.png"}});n.addRules([r,u,f,i]);var t=new OpenLayers.Style({graphicWidth:33,graphicHeight:38,graphicYOffset:-29,labelOutlineColor:"white",labelOutlineWidth:1,fontSize:"10px",labelYOffset:4,labelXOffset:10,fontFamily:"Courier New, monospace",fontWeight:"bold"}),e=new OpenLayers.Rule({filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN,property:"LocationCount",lowerBoundary:0,upperBoundary:20}),symbolizer:{externalGraphic:"img/r_d_small.png"}}),o=new OpenLayers.Rule({filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN,property:"LocationCount",lowerBoundary:20,upperBoundary:100}),symbolizer:{externalGraphic:"img/r_d_medium.png"}}),s=new OpenLayers.Rule({filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN,property:"LocationCount",lowerBoundary:100,upperBoundary:9999}),symbolizer:{externalGraphic:"img/r_d_large.png"}});return t.addRules([e,o,s]),new OpenLayers.StyleMap({"default":n,select:t})},f=function(){var n=new OpenLayers.Style({graphicWidth:23,graphicHeight:27}),i=new OpenLayers.Rule({filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,property:"IsAggregated",value:!0}),symbolizer:{strokeDashstyle:"dot",pointRadius:15,fillColor:"#83FF77",fillOpacity:.5,strokeColor:"black"}}),r=new OpenLayers.Rule({filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN,property:"LocationCount",lowerBoundary:0,upperBoundary:20}),symbolizer:{pointRadius:6,fillColor:"green",fillOpacity:.5,strokeColor:"black"}}),u=new OpenLayers.Rule({filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN,property:"LocationCount",lowerBoundary:20,upperBoundary:100}),symbolizer:{pointRadius:8,fillColor:"green",fillOpacity:.5,strokeColor:"black"}}),f=new OpenLayers.Rule({filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN,property:"LocationCount",lowerBoundary:100,upperBoundary:9999}),symbolizer:{pointRadius:10,fillColor:"green",fillOpacity:.5,strokeColor:"black"}});n.addRules([r,u,f,i]);var t=new OpenLayers.Style({graphicWidth:33,graphicHeight:38}),e=new OpenLayers.Rule({filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN,property:"LocationCount",lowerBoundary:0,upperBoundary:20}),symbolizer:{pointRadius:8,fillColor:"orange",fillOpacity:.5,strokeColor:"black"}}),o=new OpenLayers.Rule({filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN,property:"LocationCount",lowerBoundary:20,upperBoundary:100}),symbolizer:{pointRadius:10,fillColor:"orange",fillOpacity:.5,strokeColor:"black"}}),s=new OpenLayers.Rule({filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN,property:"LocationCount",lowerBoundary:100,upperBoundary:9999}),symbolizer:{pointRadius:12,fillColor:"orange",fillOpacity:.5,strokeColor:"black"}});return t.addRules([e,o,s]),new OpenLayers.StyleMap({"default":n,select:t})},this.setImageStyle=function(){t.observationsLayer.styleMap=u(),t.observationsLayer.redraw()},this.setMarkerStyle=function(){t.observationsLayer.styleMap=f(),t.observationsLayer.redraw()},this.observationsLayer=new OpenLayers.Layer.Vector("Sprinters",{styleMap:u()}),r=new OpenLayers.Layer.Vector("Vector Layer",{transitionEffect:"none"}),this.selectControl=new OpenLayers.Control.SelectFeature(this.observationsLayer,{autoActivate:!0,onSelect:function(n){t.featureSelected(n)}}),this.geolocate=new OpenLayers.Control.Geolocate({id:"locate-control",geolocationOptions:{enableHighAccuracy:!0,maximumAge:3e4,timeout:27e3}}),$("#"+i).html(""),this.map=new OpenLayers.Map({div:i,theme:null,zoomMethod:null,transitionEffect:null,projection:this.sm,maxExtent:new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.TouchNavigation({dragPanOptions:{enableKinetic:!0}}),this.geolocate,this.selectControl,new OpenLayers.Control.ScaleLine({geodesic:!0,bottomOutUnits:""})],layers:[new OpenLayers.Layer.OSM("OpenStreetMap",null,{transitionEffect:"resize",numZoomLevels:18,srs:"EPSG:900913",projection:this.sm},{transitionEffect:"resize",isBaseLayer:!0}),new OpenLayers.Layer.Google("Google Streets",{numZoomLevels:20,srs:"EPSG:900913",projection:this.sm},{transitionEffect:"resize",isBaseLayer:!0}),new OpenLayers.Layer.Google("Google Physical",{type:google.maps.MapTypeId.TERRAIN,srs:"EPSG:900913",projection:this.sm},{transitionEffect:"resize",isBaseLayer:!0}),new OpenLayers.Layer.Google("Google Hybrid",{type:google.maps.MapTypeId.HYBRID,numZoomLevels:20,srs:"EPSG:900913",projection:this.sm},{transitionEffect:"resize",isBaseLayer:!0}),new OpenLayers.Layer.Google("Google Satellite",{type:google.maps.MapTypeId.SATELLITE,numZoomLevels:22,srs:"EPSG:900913",projection:this.sm},{transitionEffect:"resize",isBaseLayer:!0}),new OpenLayers.Layer.Bing({key:this.apiKey,type:"Aerial",name:"Bing Aerial",transitionEffect:"resize",numZoomLevels:19,projection:this.sm}),new OpenLayers.Layer.Bing({key:this.apiKey,type:"AerialWithLabels",name:"Bing Aerial + Labels",transitionEffect:"resize",numZoomLevels:19,projection:this.sm}),r,this.observationsLayer],center:new OpenLayers.LonLat(18e5,97e5),zoom:4}),e={fillOpacity:0,fillColor:"#000",strokeColor:"#f00",strokeOpacity:.4},this.geolocate.events.register("locationupdated",this.map,function(n){r.removeAllFeatures(),r.addFeatures([new OpenLayers.Feature.Vector(n.point,{},{graphicName:"cross",strokeColor:"#f00",strokeWidth:2,fillOpacity:0,pointRadius:10}),new OpenLayers.Feature.Vector(OpenLayers.Geometry.Polygon.createRegularPolygon(new OpenLayers.Geometry.Point(n.point.x,n.point.y),n.position.coords.accuracy/2,50,0),{},e)]);var u=r.getDataExtent(),i=t.map.getZoomForExtent(u,!0);i>16&&(i=16),t.map.setCenter([n.point.x,n.point.y],i,!1,!1),t.extentChanged()});this.map.events.on({zoomend:t.zoomEnd,scope:this});this.map.events.on({moveend:t.extentChanged,updatesize:t.extentChanged,scope:this})};
//@ sourceMappingURL=artskart.min.js.map